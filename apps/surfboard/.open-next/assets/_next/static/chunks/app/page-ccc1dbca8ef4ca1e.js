(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1778:function(e,t,s){Promise.resolve().then(s.bind(s,7827)),Promise.resolve().then(s.bind(s,4677))},7827:function(e,t,s){"use strict";s.d(t,{PolyRobortoPanel:function(){return o}});var a=s(7437),n=s(2265);function o(){var e,t,s,o;let[i,l]=(0,n.useState)(null),[r,d]=(0,n.useState)(""),[c,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1);async function u(){try{let e=await fetch("/api/polyroborto/status");if(e.ok){let t=await e.json();l(t)}}catch(e){l({isRunning:!0,balance:1250,openPositions:3,todayPnL:45.2,weeklyPnL:180.5})}}async function m(){if(r.trim()){x(!0);try{await fetch("/api/polyroborto/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:r})}),d(""),p(!0),setTimeout(()=>p(!1),3e3)}catch(e){}x(!1)}}return(0,n.useEffect)(()=>{u();let e=setInterval(u,6e4);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-white",children:"PolyRoborto"}),(0,a.jsx)("a",{href:"http://localhost:3000",target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 rounded-lg bg-blue-500/20 text-blue-400 hover:bg-blue-500/30 transition-colors",children:"Open Dashboard"})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat((null==i?void 0:i.isRunning)?"bg-emerald-500/20 text-emerald-400":"bg-red-500/20 text-red-400"),children:(null==i?void 0:i.isRunning)?"Running":"Stopped"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-3",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-white",children:["$",(null==i?void 0:null===(e=i.balance)||void 0===e?void 0:e.toFixed(2))||"—"]}),(0,a.jsx)("div",{className:"text-xs text-white/40",children:"Balance"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-white",children:null!==(t=null==i?void 0:i.openPositions)&&void 0!==t?t:"—"}),(0,a.jsx)("div",{className:"text-xs text-white/40",children:"Positions"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold ".concat((null!==(s=null==i?void 0:i.todayPnL)&&void 0!==s?s:0)>=0?"text-emerald-400":"text-red-400"),children:(null==i?void 0:i.todayPnL)!==void 0?"".concat(i.todayPnL>=0?"+":"","$").concat(i.todayPnL.toFixed(2)):"—"}),(0,a.jsx)("div",{className:"text-xs text-white/40",children:"Today"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-lg font-semibold ".concat((null!==(o=null==i?void 0:i.weeklyPnL)&&void 0!==o?o:0)>=0?"text-emerald-400":"text-red-400"),children:(null==i?void 0:i.weeklyPnL)!==void 0?"".concat(i.weeklyPnL>=0?"+":"","$").concat(i.weeklyPnL.toFixed(2)):"—"}),(0,a.jsx)("div",{className:"text-xs text-white/40",children:"Week"})]})]}),(0,a.jsxs)("div",{className:"border-t border-white/10 pt-4",children:[(0,a.jsx)("div",{className:"text-sm text-white/60 mb-2",children:"Tech Support Feedback"}),(0,a.jsx)("textarea",{placeholder:"Send feedback to tech agent for optimization...",value:r,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm placeholder:text-white/30 focus:outline-none focus:border-amber-500/50 resize-none h-20"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("span",{className:"text-xs ".concat(h?"text-emerald-400":"text-transparent"),children:"Feedback sent to agent"}),(0,a.jsx)("button",{onClick:m,disabled:c||!r.trim(),className:"px-4 py-2 rounded-lg bg-amber-500/20 text-amber-400 text-sm hover:bg-amber-500/30 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Sending...":"Send"})]})]})]})}},4677:function(e,t,s){"use strict";s.d(t,{PostApproval:function(){return o}});var a=s(7437),n=s(2265);function o(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)({}),[i,l]=(0,n.useState)(!0);async function r(){try{let e=await fetch("http://localhost:3400/api/pending",{mode:"cors"});if(e.ok){let s=(await e.json()).map(e=>({id:e.id,account:e.account,content:e.text,scheduledFor:e.createdAt?new Date(e.createdAt).toLocaleString():void 0,status:e.status}));t(s),l(!1);return}}catch(e){}try{let e=await fetch("/api/posts/pending");if(e.ok){let s=await e.json();t(s.posts||[])}}catch(e){t([])}l(!1)}async function d(s){t(e.map(e=>e.id===s?{...e,status:"approved"}:e));try{await fetch("http://localhost:3400/approve/".concat(s),{method:"POST",mode:"cors"})}catch(e){await fetch("/api/posts/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s})}).catch(()=>{})}setTimeout(r,1e3)}async function c(s){t(e.map(e=>e.id===s?{...e,status:"rejected"}:e));try{await fetch("http://localhost:3400/reject/".concat(s),{method:"POST",mode:"cors"})}catch(e){await fetch("/api/posts/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s})}).catch(()=>{})}setTimeout(r,1e3)}async function x(e){let t=s[e];(null==t?void 0:t.trim())&&(await fetch("/api/posts/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,feedback:t})}).catch(()=>{}),o({...s,[e]:""}),r())}(0,n.useEffect)(()=>{r();let e=setInterval(r,3e4);return()=>clearInterval(e)},[]);let h={onde:"text-cyan-400",frh:"text-emerald-400",magmatic:"text-purple-400"},p={onde:"@Onde_FRH",frh:"@FreeRiverHouse",magmatic:"@magmatic__"};return(0,a.jsxs)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-white",children:"Post Approval"}),(0,a.jsx)("a",{href:"http://localhost:3400",target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 rounded-lg bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 transition-colors",children:"Full Dashboard"})]}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full bg-cyan-500/20 text-cyan-400",children:[e.filter(e=>"pending"===e.status).length," pending"]})]}),i?(0,a.jsx)("div",{className:"text-white/40 text-sm py-8 text-center",children:"Loading..."}):0===e.length?(0,a.jsx)("div",{className:"text-white/40 text-sm py-8 text-center",children:"No pending posts"}):(0,a.jsx)("div",{className:"space-y-4 max-h-[500px] overflow-y-auto",children:e.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl border ".concat("approved"===e.status?"bg-emerald-500/10 border-emerald-500/20":"rejected"===e.status?"bg-red-500/10 border-red-500/20":"bg-white/5 border-white/10"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium ".concat(h[e.account]),children:p[e.account]}),e.scheduledFor&&(0,a.jsx)("span",{className:"text-xs text-white/40",children:e.scheduledFor})]}),(0,a.jsx)("p",{className:"text-white/80 text-sm mb-3 whitespace-pre-wrap",children:e.content}),"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,a.jsx)("button",{onClick:()=>d(e.id),className:"flex-1 py-2 rounded-lg bg-emerald-500/20 text-emerald-400 text-sm hover:bg-emerald-500/30 transition-colors",children:"Approve"}),(0,a.jsx)("button",{onClick:()=>c(e.id),className:"flex-1 py-2 rounded-lg bg-red-500/20 text-red-400 text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Feedback for agent...",value:s[e.id]||"",onChange:t=>o({...s,[e.id]:t.target.value}),onKeyDown:t=>"Enter"===t.key&&x(e.id),className:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm placeholder:text-white/30 focus:outline-none focus:border-cyan-500/50"}),(0,a.jsx)("button",{onClick:()=>x(e.id),className:"px-4 py-2 rounded-lg bg-cyan-500/20 text-cyan-400 text-sm hover:bg-cyan-500/30 transition-colors",children:"Send"})]})]}),"pending"!==e.status&&(0,a.jsx)("div",{className:"text-xs ".concat("approved"===e.status?"text-emerald-400":"text-red-400"),children:"approved"===e.status?"✓ Approved":"✗ Rejected"})]},e.id))})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1778)}),_N_E=e.O()}]);