(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{841:function(e,t,s){Promise.resolve().then(s.bind(s,828))},257:function(e,t,s){"use strict";var r,n;e.exports=(null==(r=s.g.process)?void 0:r.env)&&"object"==typeof(null==(n=s.g.process)?void 0:n.env)?s.g.process:s(4227)},4227:function(e){!function(){var t={229:function(e){var t,s,r,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function l(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:l}catch(e){s=l}}();var o=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?o=r.concat(o):u=-1,o.length&&m())}function m(){if(!c){var e=i(d);c=!0;for(var t=o.length;t;){for(r=o,o=[];++u<t;)r&&r[u].run();u=-1,t=o.length}r=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function x(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];o.push(new f(e,t)),1!==o.length||c||i(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=x,n.addListener=x,n.once=x,n.off=x,n.removeListener=x,n.removeAllListeners=x,n.emit=x,n.prependListener=x,n.prependOnceListener=x,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}},l=!0;try{t[e](a,a.exports,r),l=!1}finally{l&&delete s[e]}return a.exports}r.ab="//";var n=r(229);e.exports=n}()},828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var r=s(7437),n=s(2265);let a=s(257).env.NEXT_PUBLIC_CORDE_API||"http://192.168.1.234:3700";function l(){let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)("checking"),[i,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat(a,"/api/health"),{signal:AbortSignal.timeout(5e3)});if(e.ok){let t=await e.json();o(t),l("online")}else l("offline")}catch(e){l("offline")}};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[]);let[c,u]=(0,n.useState)(""),[d,m]=(0,n.useState)("pina-pennello"),[f,x]=(0,n.useState)(1024),[h,p]=(0,n.useState)(1024),[b,g]=(0,n.useState)(30),[v,j]=(0,n.useState)(7.5),[N,w]=(0,n.useState)(!1),[y,k]=(0,n.useState)(null),[T,C]=(0,n.useState)(""),[S,E]=(0,n.useState)(""),O=async()=>{if(!e.trim()){C("Inserisci un prompt");return}w(!0),C(""),k(null),E("");try{let t=await fetch("".concat(a,"/api/generate/image"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,negative_prompt:c,author:d,width:f,height:h,steps:b,guidance:v})});if(!t.ok)throw Error("Failed to start generation");let s=(await t.json()).job_id,r={id:s,status:"pending",progress:0};for(k(r);"completed"!==r.status&&"failed"!==r.status;){await new Promise(e=>setTimeout(e,2e3));let e=await fetch("".concat(a,"/api/jobs/").concat(s));r=await e.json(),k(r)}if("completed"===r.status&&r.output){let e=r.output.split("/").pop();E("".concat(a,"/api/output/").concat(e))}else"failed"===r.status&&C(r.error||"Generation failed")}catch(e){C(e instanceof Error?e.message:"Connection error")}finally{w(!1)}};return(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-12",children:[(0,r.jsxs)("div",{className:"mb-12 text-center",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-surf-gold/10 border border-surf-gold/20 mb-6",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFA8"}),(0,r.jsx)("span",{className:"text-sm text-surf-gold font-medium",children:"CORDE Engine"})]}),(0,r.jsxs)("h1",{className:"text-4xl font-bold mb-4",children:[(0,r.jsx)("span",{className:"glow-text text-surf-aqua",children:"Image"})," ",(0,r.jsx)("span",{className:"text-surf-foam",children:"Generation"})]}),(0,r.jsx)("p",{className:"text-surf-foam/60 max-w-2xl mx-auto mb-4",children:"Genera illustrazioni con SDXL sul server locale."}),(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full ".concat("online"===s?"bg-green-500/10 border border-green-500/30":"offline"===s?"bg-red-500/10 border border-red-500/30":"bg-surf-foam/10 border border-surf-foam/20"),children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("online"===s?"bg-green-400":"offline"===s?"bg-red-400":"bg-surf-foam/40 animate-pulse")}),(0,r.jsx)("span",{className:"text-sm ".concat("online"===s?"text-green-400":"offline"===s?"text-red-400":"text-surf-foam/60"),children:"online"===s?"Online: ".concat((null==i?void 0:i.hostname)||a):"offline"===s?"Backend Offline":"Checking..."})]})]}),"offline"===s&&(0,r.jsxs)("div",{className:"mb-8 p-6 rounded-2xl bg-red-500/10 border border-red-500/20 text-center",children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:"⚠️"}),(0,r.jsx)("h3",{className:"text-lg font-bold text-red-400 mb-2",children:"Backend Non Raggiungibile"}),(0,r.jsxs)("p",{className:"text-surf-foam/60 text-sm",children:["Il server CORDE non risponde all'indirizzo ",a,".",(0,r.jsx)("br",{}),"Verifica che il servizio sia attivo sulla rete locale."]})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"surf-card",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-surf-foam mb-6",children:"Parametri"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:"Prompt"}),(0,r.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Descrivi l'immagine che vuoi generare...",className:"w-full h-32 px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-surf-foam placeholder-surf-foam/30 focus:border-surf-cyan/50 focus:outline-none resize-none"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:"Negative Prompt"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Cosa evitare...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-surf-foam placeholder-surf-foam/30 focus:border-surf-cyan/50 focus:outline-none"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:"Stile"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{id:"pina-pennello",name:"Pina Pennello",style:"Onde watercolor style"},{id:"magmatic",name:"Magmatic",style:"Bold artistic style"},{id:"onde-futures",name:"Onde Futures",style:"Tech/futuristic"},{id:"luzzati",name:"Luzzati",style:"Italian folk art"}].map(e=>(0,r.jsxs)("button",{onClick:()=>m(e.id),className:"px-4 py-3 rounded-xl text-left transition-all ".concat(d===e.id?"bg-surf-teal/20 border-surf-teal/50 border":"bg-white/5 border border-white/10 hover:bg-white/10"),children:[(0,r.jsx)("div",{className:"text-surf-foam text-sm font-medium",children:e.name}),(0,r.jsx)("div",{className:"text-surf-foam/40 text-xs",children:e.style})]},e.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:"Width"}),(0,r.jsxs)("select",{value:f,onChange:e=>x(Number(e.target.value)),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-surf-foam focus:border-surf-cyan/50 focus:outline-none",children:[(0,r.jsx)("option",{value:512,children:"512"}),(0,r.jsx)("option",{value:768,children:"768"}),(0,r.jsx)("option",{value:1024,children:"1024"}),(0,r.jsx)("option",{value:1280,children:"1280"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:"Height"}),(0,r.jsxs)("select",{value:h,onChange:e=>p(Number(e.target.value)),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-surf-foam focus:border-surf-cyan/50 focus:outline-none",children:[(0,r.jsx)("option",{value:512,children:"512"}),(0,r.jsx)("option",{value:768,children:"768"}),(0,r.jsx)("option",{value:1024,children:"1024"}),(0,r.jsx)("option",{value:1280,children:"1280"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:["Steps: ",b]}),(0,r.jsx)("input",{type:"range",min:"10",max:"50",value:b,onChange:e=>g(Number(e.target.value)),className:"w-full"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-surf-foam/70 mb-2",children:["Guidance: ",v]}),(0,r.jsx)("input",{type:"range",min:"1",max:"20",step:"0.5",value:v,onChange:e=>j(Number(e.target.value)),className:"w-full"})]})]}),(0,r.jsx)("button",{onClick:O,disabled:N||"online"!==s,className:"w-full py-4 rounded-2xl font-medium transition-all ".concat(N||"online"!==s?"bg-surf-foam/20 text-surf-foam/40 cursor-not-allowed":"bg-gradient-to-r from-surf-teal to-surf-cyan text-white hover:opacity-90 hover:scale-[1.02] active:scale-[0.98]"),children:N?"Generando...":"online"!==s?"Backend Offline":"\uD83C\uDFA8 Genera Immagine"}),T&&(0,r.jsx)("div",{className:"mt-4 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm",children:T})]}),(0,r.jsxs)("div",{className:"surf-card-gold",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-surf-foam mb-6",children:"Output"}),y&&(0,r.jsxs)("div",{className:"mb-6 p-4 rounded-xl bg-white/5",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,r.jsxs)("span",{className:"text-surf-foam/60",children:["Job: ",y.id.slice(0,8),"..."]}),(0,r.jsx)("span",{className:"badge ".concat("completed"===y.status?"badge-live":"failed"===y.status?"bg-red-500/20 text-red-400":"badge-gold"),children:y.status})]}),"running"===y.status&&(0,r.jsx)("div",{className:"progress-bar",children:(0,r.jsx)("div",{className:"progress-fill",style:{width:"".concat(y.progress,"%")}})})]}),(0,r.jsx)("div",{className:"aspect-square rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center overflow-hidden",children:S?(0,r.jsx)("img",{src:S,alt:"Generated",className:"w-full h-full object-contain"}):(0,r.jsxs)("div",{className:"text-surf-foam/30 text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDDBC️"}),(0,r.jsx)("p",{className:"text-sm",children:"L'immagine apparir\xe0 qui"})]})}),S&&(0,r.jsx)("a",{href:S,download:!0,className:"mt-4 w-full py-3 rounded-xl bg-white/10 text-surf-foam text-center block hover:bg-white/20 transition-all",children:"⬇️ Scarica Immagine"})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=841)}),_N_E=e.O()}]);