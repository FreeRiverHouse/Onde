"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{873:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});var r=n(7437),o=n(2265),a=n(3828),i=n(1247);function c(e){let{skinCanvas:t}=e,n=(0,o.useRef)(null),c=(0,o.useRef)(null),l=(0,o.useRef)(null),s=(0,o.useRef)(null),u=(0,o.useRef)(null),d=(0,o.useRef)(null),m=(0,o.useRef)(!1),h=(0,o.useRef)({x:0,y:0}),w=(0,o.useRef)({x:.1,y:.3}),v=(0,o.useRef)(!0);return(0,o.useEffect)(()=>{if(!n.current)return;let e=new a.xsS,t=document.createElement("canvas");t.width=2,t.height=256;let r=t.getContext("2d"),o=r.createLinearGradient(0,0,0,256);o.addColorStop(0,"#1a1a3e"),o.addColorStop(.5,"#2a2a4e"),o.addColorStop(1,"#0a0a1e"),r.fillStyle=o,r.fillRect(0,0,2,256);let d=new a.ROQ(t);e.background=d,l.current=e;let x=new a.cPb(45,1,.1,1e3);x.position.set(0,1.2,3.5),x.lookAt(0,.9,0),s.current=x;let E=new i.CP7({antialias:!0,alpha:!0});E.setSize(200,280),E.setPixelRatio(window.devicePixelRatio),E.shadowMap.enabled=!0,E.shadowMap.type=a.ntZ,E.toneMapping=a.LY2,E.toneMappingExposure=1.2,n.current.appendChild(E.domElement),c.current=E;let p=new a.Mig(4210784,.4);e.add(p);let f=new a.Ox3(16777215,1);f.position.set(5,10,7),f.castShadow=!0,f.shadow.mapSize.width=512,f.shadow.mapSize.height=512,f.shadow.camera.near=.5,f.shadow.camera.far=50,e.add(f);let y=new a.Ox3(6724095,.6);y.position.set(-5,5,-5),e.add(y);let g=new a.cek(16750950,.3,10);g.position.set(-3,2,3),e.add(g);let L=new a._12(10,10),S=new a.Tn7({opacity:.3}),j=new a.Kj0(L,S);j.rotation.x=-Math.PI/2,j.position.y=0,j.receiveShadow=!0,e.add(j);let M=new a.ZAu;u.current=M,new a.YBo({color:12887419});let R=new a.Wid({color:12887419,roughness:.8,metalness:.1}),b=new a.DvJ(.5,.5,.5),D=new a.Kj0(b,R.clone());D.position.y=1.75,D.name="head",D.castShadow=!0,D.receiveShadow=!0,M.add(D);let C=new a.DvJ(.5,.75,.25),N=new a.Kj0(C,R.clone());N.position.y=1.125,N.name="body",N.castShadow=!0,N.receiveShadow=!0,M.add(N);let P=new a.DvJ(.25,.75,.25),K=new a.Kj0(P,R.clone());K.position.set(-.375,1.125,0),K.name="rightArm",K.castShadow=!0,M.add(K);let O=new a.Kj0(P,R.clone());O.position.set(.375,1.125,0),O.name="leftArm",O.castShadow=!0,M.add(O);let Y=new a.DvJ(.25,.75,.25),k=new a.Kj0(Y,R.clone());k.position.set(-.125,.375,0),k.name="rightLeg",k.castShadow=!0,M.add(k);let A=new a.Kj0(Y,R.clone());A.position.set(.125,.375,0),A.name="leftLeg",A.castShadow=!0,M.add(A),e.add(M);let B=e=>{m.current=!0,v.current=!1,h.current={x:e.clientX,y:e.clientY}},X=e=>{if(!m.current)return;let t=e.clientX-h.current.x,n=e.clientY-h.current.y;w.current.y+=.01*t,w.current.x+=.01*n,w.current.x=Math.max(-Math.PI/4,Math.min(Math.PI/4,w.current.x)),h.current={x:e.clientX,y:e.clientY}},I=()=>{m.current=!1,setTimeout(()=>{v.current=!0},3e3)},T=e=>{m.current=!0,v.current=!1,h.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},_=e=>{if(!m.current)return;let t=e.touches[0].clientX-h.current.x,n=e.touches[0].clientY-h.current.y;w.current.y+=.01*t,w.current.x+=.01*n,w.current.x=Math.max(-Math.PI/4,Math.min(Math.PI/4,w.current.x)),h.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},J=()=>{m.current=!1,setTimeout(()=>{v.current=!0},3e3)};E.domElement.addEventListener("mousedown",B),E.domElement.addEventListener("mousemove",X),E.domElement.addEventListener("mouseup",I),E.domElement.addEventListener("mouseleave",I),E.domElement.addEventListener("touchstart",T),E.domElement.addEventListener("touchmove",_),E.domElement.addEventListener("touchend",J);let z=0,F=()=>{requestAnimationFrame(F),z+=.05,v.current&&(w.current.y+=.01),M.rotation.y=w.current.y,M.rotation.x=w.current.x;let t=.3*Math.sin(z),n=M.getObjectByName("rightArm"),r=M.getObjectByName("leftArm"),o=M.getObjectByName("rightLeg"),a=M.getObjectByName("leftLeg");n&&(n.rotation.x=t),r&&(r.rotation.x=-t),o&&(o.rotation.x=-t),a&&(a.rotation.x=t),E.render(e,x)};return F(),()=>{E.domElement.removeEventListener("mousedown",B),E.domElement.removeEventListener("mousemove",X),E.domElement.removeEventListener("mouseup",I),E.domElement.removeEventListener("mouseleave",I),E.domElement.removeEventListener("touchstart",T),E.domElement.removeEventListener("touchmove",_),E.domElement.removeEventListener("touchend",J),E.dispose(),n.current&&n.current.removeChild(E.domElement)}},[]),(0,o.useEffect)(()=>{if(!t||!u.current)return;let e=new a.ROQ(t);e.magFilter=a.TyD,e.minFilter=a.TyD,d.current=e,u.current.traverse(e=>{e instanceof a.Kj0&&e.material})},[t]),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{ref:n,className:"rounded-xl overflow-hidden mx-auto cursor-grab active:cursor-grabbing",style:{width:200,height:280}}),(0,r.jsx)("p",{className:"text-xs text-gray-400 text-center mt-1",children:"\uD83D\uDDB1Ô∏è Drag to rotate"})]})}}}]);