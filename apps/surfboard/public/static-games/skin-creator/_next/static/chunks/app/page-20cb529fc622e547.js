(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5053:function(e,t,a){Promise.resolve().then(a.bind(a,9349))},9349:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return N}});var s=a(7437),l=a(8819),r=a.n(l),n=a(2265),i=a(166),d=a(257);function o(){return!!d.env.NEXT_PUBLIC_OPENAI_API_KEY}async function c(e){let t=d.env.NEXT_PUBLIC_OPENAI_API_KEY;if(!t)return{success:!1,error:"OpenAI API key not configured. Set NEXT_PUBLIC_OPENAI_API_KEY environment variable."};let a=function(e){switch(e){case"cartoon":return"cartoon style, vibrant colors, bold outlines, playful";case"realistic":return"semi-realistic, detailed textures, natural shading";case"pixel-art":return"pixel art style, 8-bit, retro gaming aesthetic";case"anime":return"anime style, cel-shaded, Japanese animation aesthetic";case"blocky":return"Minecraft blocky style, voxel-like, cubic proportions";default:return"Minecraft style, blocky, pixel-art"}}(e.style||"blocky"),s="Create a Minecraft character skin texture sheet. The character is: ".concat(e.prompt,". \nStyle: ").concat(a,". \nImportant: Generate a flat texture layout showing front view of head, body, arms, and legs suitable for a Minecraft skin.\nThe image should be clean, simple, with clear distinct regions for each body part.\nNo background, just the character texture on a transparent or white background.");try{var l,r,n;let a=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"dall-e-3",prompt:s,n:1,size:"1024x1024",quality:e.quality||"standard",response_format:"url"})});if(!a.ok){let e=await a.json().catch(()=>({error:{message:"Unknown error"}}));return{success:!1,error:(null===(n=e.error)||void 0===n?void 0:n.message)||"API error: ".concat(a.status)}}let i=await a.json(),d=null===(r=i.data)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:l.url;if(!d)return{success:!1,error:"No image URL in response"};return{success:!0,imageUrl:d}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}async function u(e){return new Promise((t,a)=>{let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{let e=document.createElement("canvas");e.width=64,e.height=64;let l=e.getContext("2d");if(!l){a(Error("Could not create canvas context"));return}l.clearRect(0,0,64,64);let r=s.width;l.drawImage(s,.375*r,.05*r,.25*r,.25*r,8,8,8,8),l.drawImage(s,.375*r,.05*r,.25*r,.25*r,24,8,8,8),l.drawImage(s,.375*r,.02*r,.25*r,.15*r,8,0,8,8),l.drawImage(s,.375*r,.28*r,.25*r,.15*r,16,0,8,8),l.drawImage(s,.3*r,.05*r,.15*r,.25*r,0,8,8,8),l.drawImage(s,.55*r,.05*r,.15*r,.25*r,16,8,8,8),l.drawImage(s,.4*r,.32*r,.2*r,.35*r,20,20,8,12),l.drawImage(s,.4*r,.32*r,.2*r,.35*r,32,20,8,12),l.drawImage(s,.25*r,.32*r,.1*r,.35*r,44,20,4,12),l.drawImage(s,.65*r,.32*r,.1*r,.35*r,36,52,4,12),l.drawImage(s,.35*r,.68*r,.1*r,.3*r,4,20,4,12),l.drawImage(s,.55*r,.68*r,.1*r,.3*r,20,52,4,12),t(e.toDataURL("image/png"))},s.onerror=()=>{a(Error("Failed to load AI-generated image"))},s.src=e})}async function x(e){let t=await c(e);if(!t.success||!t.imageUrl)return{success:!1,error:t.error||"Failed to generate image"};try{let e=await u(t.imageUrl);return{success:!0,skinDataUrl:e,originalImageUrl:t.imageUrl}}catch(e){return{success:!1,originalImageUrl:t.imageUrl,error:e instanceof Error?e.message:"Failed to convert to skin format"}}}let m=a(257).env.NEXT_PUBLIC_LOCAL_LLM_URL||"http://192.168.1.111:8080";async function b(){try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),a=await fetch("".concat(m,"/health"),{signal:e.signal});if(clearTimeout(t),a.ok){let e=await a.json();return"ok"===e.status}return!1}catch(e){return!1}}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxTokens:a=256,temperature:s=.7,systemPrompt:l,timeoutMs:r=6e4}=t;try{var n,i,d;if(!await b())return{success:!1,error:"Local LLM not available"};let t=[];l&&t.push({role:"system",content:l}),t.push({role:"user",content:e});let o=new AbortController,c=setTimeout(()=>o.abort(),r),u=await fetch("".concat(m,"/v1/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-8b-instruct",messages:t,max_tokens:a,temperature:s}),signal:o.signal});if(clearTimeout(c),!u.ok)return{success:!1,error:"HTTP ".concat(u.status)};let x=await u.json(),h=null===(d=x.choices)||void 0===d?void 0:null===(i=d[0])||void 0===i?void 0:null===(n=i.message)||void 0===n?void 0:n.content;if(h)return{success:!0,content:h};return{success:!1,error:"No content in response"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function g(e){let t=await h(e,{maxTokens:100,temperature:.8,systemPrompt:"You are a Minecraft skin design assistant. \nGiven a user's description, enhance it into a detailed prompt for generating a Minecraft character skin.\nKeep it concise (1-2 sentences) but add specific details about colors, style, and features.\nOutput ONLY the enhanced prompt, nothing else."});return t.success&&t.content?t.content.trim():e}let p=(0,i.default)(()=>Promise.all([a.e(124),a.e(500),a.e(873)]).then(a.bind(a,873)),{loadableGenerated:{webpack:()=>[873]},ssr:!1}),f=(0,i.default)(()=>a.e(285).then(a.bind(a,9285)),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),j=[{id:"base",name:"Base (Skin)",emoji:"\uD83D\uDC64",visible:!0,opacity:100,tint:null,tintIntensity:50,glow:!1},{id:"clothing",name:"Clothing",emoji:"\uD83D\uDC55",visible:!0,opacity:100,tint:null,tintIntensity:50,glow:!1},{id:"accessories",name:"Accessories",emoji:"\uD83C\uDFA9",visible:!0,opacity:100,tint:null,tintIntensity:50,glow:!1}],y=[{color:null,name:"None",emoji:"⭕"},{color:"#FF6B6B",name:"Red",emoji:"\uD83D\uDD34"},{color:"#FFD93D",name:"Gold",emoji:"\uD83D\uDFE1"},{color:"#4D96FF",name:"Blue",emoji:"\uD83D\uDD35"},{color:"#6BCB77",name:"Green",emoji:"\uD83D\uDFE2"},{color:"#9B59B6",name:"Purple",emoji:"\uD83D\uDFE3"},{color:"#FF8E53",name:"Orange",emoji:"\uD83D\uDFE0"},{color:"#00BCD4",name:"Cyan",emoji:"\uD83E\uDE75"},{color:"#E91E63",name:"Pink",emoji:"\uD83D\uDC97"}],D={minecraft:{name:"Minecraft",emoji:"⛏️",width:64,height:64,exportFormat:"PNG 64x64"},roblox:{name:"Roblox",emoji:"\uD83C\uDFAE",width:128,height:128,exportFormat:"PNG 128x128"}},w={head:{x:0,y:0,w:32,h:16,label:"\uD83D\uDDE3️ Head"},body:{x:16,y:16,w:24,h:16,label:"\uD83D\uDC55 Body"},rightArm:{x:40,y:16,w:16,h:16,label:"\uD83D\uDCAA Right Arm"},leftArm:{x:32,y:48,w:16,h:16,label:"\uD83E\uDD1B Left Arm"},rightLeg:{x:0,y:16,w:16,h:16,label:"\uD83E\uDDB5 Right Leg"},leftLeg:{x:16,y:48,w:16,h:16,label:"\uD83E\uDDBF Left Leg"}},k={steve:{name:"\uD83D\uDC66 Steve",skin:"#c4a57b",hair:"#442920",shirt:"#00a8a8",pants:"#3c2a5e",shoes:"#444444",eyes:"#ffffff",pupils:"#5a3825"},robot:{name:"\uD83E\uDD16 Robot",skin:"#8a8a8a",hair:"#444444",shirt:"#3498db",pants:"#2c3e50",shoes:"#1a1a1a",eyes:"#00ff00",pupils:"#00aa00"},ninja:{name:"\uD83E\uDD77 Ninja",skin:"#c4a57b",hair:"#1a1a1a",shirt:"#1a1a1a",pants:"#1a1a1a",shoes:"#2c2c2c",eyes:"#ffffff",pupils:"#000000"},alien:{name:"\uD83D\uDC7D Alien",skin:"#7dcea0",hair:"#27ae60",shirt:"#9b59b6",pants:"#8e44ad",shoes:"#6c3483",eyes:"#000000",pupils:"#1a1a1a"},princess:{name:"\uD83D\uDC78 Princess",skin:"#ffdfc4",hair:"#f1c40f",shirt:"#e91e63",pants:"#9c27b0",shoes:"#ff69b4",eyes:"#87ceeb",pupils:"#4169e1"},zombie:{name:"\uD83E\uDDDF Zombie",skin:"#5a8f5a",hair:"#2d4a2d",shirt:"#00a8a8",pants:"#3c2a5e",shoes:"#444444",eyes:"#1a1a1a",pupils:"#000000"},creeper:{name:"\uD83D\uDC9A Creeper",skin:"#5ba555",hair:"#3d7a3d",shirt:"#4a934a",pants:"#3d7a3d",shoes:"#2d5a2d",eyes:"#000000",pupils:"#000000"}};k.steve;let v=["#FF0000","#FF8800","#FFFF00","#00FF00","#00FFFF","#0088FF","#0000FF","#8800FF","#FF00FF","#FF69B4","#FFFFFF","#000000","#ffdfc4","#f0c8a8","#d4a76a","#c4a57b","#8d6e4c","#5c4033","#FF6B6B","#FF8E53","#FFD93D","#6BCB77","#4D96FF","#9B59B6","#E91E63","#00BCD4","#8BC34A","#FF5722","#795548","#607D8B","#CCCCCC","#888888","#444444","#222222"];function N(){var e,t,a;let l=(0,n.useRef)(null),i=(0,n.useRef)(null),[d,c]=(0,n.useState)("minecraft"),[u,m]=(0,n.useState)("#FF0000"),[h,N]=(0,n.useState)(!1),[C,R]=(0,n.useState)("brush"),[S,E]=(0,n.useState)("star"),[F,T]=(0,n.useState)(null),[A,I]=(0,n.useState)(!1),[B,M]=(0,n.useState)(!1),[L,P]=(0,n.useState)(!1),U=(0,n.useRef)(null),[O,G]=(0,n.useState)(window.innerWidth<768?4:6),[z,_]=(0,n.useState)({x:0,y:0}),V=(0,n.useRef)({isGesture:!1,initialDistance:0,initialZoom:6,initialPan:{x:0,y:0},lastCenter:{x:0,y:0}}),K=(0,n.useRef)(null),[q,Y]=(0,n.useState)("#4D96FF"),[J,X]=(0,n.useState)(1),[W,H]=(0,n.useState)("my-skin"),[Z,$]=(0,n.useState)([]),[Q,ee]=(0,n.useState)([]),[et,ea]=(0,n.useState)(!1),[es,el]=(0,n.useState)(!1),[er,en]=(0,n.useState)(""),[ei,ed]=(0,n.useState)(!1),[eo,ec]=(0,n.useState)(!1),[eu,ex]=(0,n.useState)(!1),[em,eb]=(0,n.useState)("blocky"),[eh,eg]=(0,n.useState)(null),[ep,ef]=(0,n.useState)(!1),[ej,ey]=(0,n.useState)([]),[eD,ew]=(0,n.useState)(!1),[ek,ev]=(0,n.useState)(!1),eN=(0,n.useCallback)(e=>{R(e),window.innerWidth<768&&ev(!1)},[]);(0,n.useEffect)(()=>{try{let e=localStorage.getItem("minecraft-skin-ai-history");if(e){let t=JSON.parse(e);Array.isArray(t)&&ey(t)}}catch(e){}b().then(ex)},[]),(0,n.useEffect)(()=>{try{localStorage.setItem("minecraft-skin-ai-history",JSON.stringify(ej))}catch(e){}},[ej]);let eC=(0,n.useCallback)((e,t,a)=>{let s={id:"ai-".concat(Date.now()),prompt:e,style:t,skinDataUrl:a,timestamp:Date.now(),isFavorite:!1};ey(e=>{let t=e.filter(e=>e.isFavorite);return[...[s,...e.filter(e=>!e.isFavorite)].slice(0,10),...t].sort((e,t)=>t.timestamp-e.timestamp)})},[]),eR=(0,n.useCallback)(e=>{ey(t=>t.map(t=>t.id===e?{...t,isFavorite:!t.isFavorite}:t))},[]),eS=(0,n.useCallback)(e=>{let t=l.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let s=new Image;s.onload=()=>{a.clearRect(0,0,64,64),a.drawImage(s,0,0),tN(),tf(),el(!1),tD("click")},s.src=e.skinDataUrl},[]),eE=(0,n.useCallback)(e=>{en(e.prompt),eb(e.style),ew(!1)},[]),eF=(0,n.useCallback)(e=>{ey(t=>t.filter(t=>t.id!==e))},[]),[eT,eA]=(0,n.useState)(j),[eI,eB]=(0,n.useState)("base"),[eM,eL]=(0,n.useState)(!0),eP=(0,n.useRef)({}),[eU,eO]=(0,n.useState)([]),[eG,ez]=(0,n.useState)(!1);(0,n.useEffect)(()=>{try{let e=localStorage.getItem("minecraft-my-skins");e&&eO(JSON.parse(e))}catch(e){}},[]),(0,n.useEffect)(()=>{try{localStorage.setItem("minecraft-my-skins",JSON.stringify(eU))}catch(e){}},[eU]);let e_=(0,n.useCallback)(e=>{if(!eP.current[e]){let t=document.createElement("canvas");t.width=64,t.height=64,eP.current[e]=t}return eP.current[e]},[]),eV=(0,n.useCallback)(e=>{eA(t=>t.map(t=>t.id===e?{...t,visible:!t.visible}:t))},[]),eK=(0,n.useCallback)((e,t)=>{eA(a=>a.map(a=>a.id===e?{...a,opacity:t}:a))},[]),eq=(0,n.useCallback)((e,t)=>{eA(a=>a.map(a=>a.id===e?{...a,tint:t}:a))},[]),eY=(0,n.useCallback)((e,t)=>{eA(a=>a.map(a=>a.id===e?{...a,tintIntensity:t}:a))},[]),eJ=(0,n.useCallback)((e,t,a)=>{let s=document.createElement("canvas");s.width=e.width,s.height=e.height;let l=s.getContext("2d");return l?(l.drawImage(e,0,0),l.globalCompositeOperation="multiply",l.globalAlpha=a/100,l.fillStyle=t,l.fillRect(0,0,s.width,s.height),l.globalCompositeOperation="destination-in",l.globalAlpha=1,l.drawImage(e,0,0),s):e},[]),eX=(0,n.useCallback)((e,t)=>{eA(a=>{let s=a.findIndex(t=>t.id===e);if(-1===s)return a;let l="up"===t?s+1:s-1;if(l<0||l>=a.length)return a;let r=[...a];return[r[s],r[l]]=[r[l],r[s]],r})},[]),eW=(0,n.useCallback)(()=>{let e=l.current;if(!e)return;let t=e.getContext("2d");t&&(t.clearRect(0,0,64,64),eT.forEach(e=>{if(!e.visible)return;let a=eP.current[e.id];if(!a)return;let s=a;e.tint&&e.tintIntensity>0&&(s=eJ(a,e.tint,e.tintIntensity)),t.globalAlpha=e.opacity/100,t.drawImage(s,0,0)}),t.globalAlpha=1)},[eT,eJ]),eH=(0,n.useCallback)(e=>{let t=e_(e).getContext("2d");t&&t.clearRect(0,0,64,64),eW(),tN()},[e_,eW]),eZ=(0,n.useCallback)((e,t)=>{let a=e_(e),s=e_(t).getContext("2d");s&&(s.clearRect(0,0,64,64),s.drawImage(a,0,0)),eW(),tN(),tf(),tD("click")},[e_,eW]),[e$,eQ]=(0,n.useState)(!1),e0=(0,n.useCallback)(()=>{if(!confirm("Merge all visible layers into base? This cannot be undone."))return;let e=l.current;if(!e)return;let t=e_("base").getContext("2d");t&&(t.clearRect(0,0,64,64),t.drawImage(e,0,0)),eH("clothing"),eH("accessories"),eW(),tN(),tD("click")},[e_,eH,eW]),e1=async()=>{if(er.trim()&&eu){ec(!0);try{let e=await g(er);e&&e!==er&&en(e)}catch(e){console.error("Enhance failed:",e)}finally{ec(!1)}}},e5=async()=>{if(!er.trim())return;ed(!0),eg(null);let e=l.current;if(!e){ed(!1);return}let t=e.getContext("2d");if(!t){ed(!1);return}if(ep&&o())try{let e=await x({prompt:er,style:em});if(e.success&&e.skinDataUrl){let a=new Image;a.onload=()=>{t.clearRect(0,0,64,64),t.drawImage(a,0,0),tN(),tf(),eC(er,em,e.skinDataUrl),ed(!1),el(!1),tD("download")},a.onerror=()=>{eg("Failed to load generated skin"),ed(!1)},a.src=e.skinDataUrl;return}eg(e.error||"AI generation failed")}catch(e){eg(e instanceof Error?e.message:"AI generation failed")}await new Promise(e=>setTimeout(e,800));let a=er.toLowerCase(),s={skin:"#c4a57b",hair:"#442920",shirt:"#00a8a8",pants:"#3c2a5e",shoes:"#444444"},r="anime"===em?1.2:"cartoon"===em?1.1:1;if(a.includes("zombie")||a.includes("undead"))s={skin:"#5a8f5a",hair:"#2d4a2d",shirt:"#3d5a3d",pants:"#2d4a2d",shoes:"#1a3a1a"};else if(a.includes("robot")||a.includes("mech")||a.includes("android"))s={skin:"#8a8a8a",hair:"#444444",shirt:"#3498db",pants:"#2c3e50",shoes:"#1a1a1a"};else if(a.includes("ninja")||a.includes("assassin")||a.includes("stealth"))s={skin:"#c4a57b",hair:"#1a1a1a",shirt:"#1a1a1a",pants:"#1a1a1a",shoes:"#2c2c2c"};else if(a.includes("princess")||a.includes("queen")||a.includes("royalty"))s={skin:"#ffdfc4",hair:"#f1c40f",shirt:"#e91e63",pants:"#9c27b0",shoes:"#ff69b4"};else if(a.includes("pirate")||a.includes("captain")||a.includes("sailor"))s={skin:"#d4a76a",hair:"#2c1810",shirt:"#8B0000",pants:"#1a1a1a",shoes:"#3d2314"};else if(a.includes("wizard")||a.includes("mage")||a.includes("sorcerer"))s={skin:"#e8d5c4",hair:"#c0c0c0",shirt:"#4B0082",pants:"#2E0854",shoes:"#1a1a2e"};else if(a.includes("alien")||a.includes("space")||a.includes("extraterrestrial"))s={skin:"#7dcea0",hair:"#27ae60",shirt:"#9b59b6",pants:"#8e44ad",shoes:"#6c3483"};else if(a.includes("knight")||a.includes("armor")||a.includes("warrior"))s={skin:"#d4a76a",hair:"#4a3728",shirt:"#7f8c8d",pants:"#5d6d7e",shoes:"#2c3e50"};else if(a.includes("elf")||a.includes("fairy")||a.includes("nature"))s={skin:"#f5deb3",hair:"#228b22",shirt:"#006400",pants:"#556b2f",shoes:"#8b4513"};else if(a.includes("vampire")||a.includes("dark")||a.includes("gothic"))s={skin:"#e8e8e8",hair:"#1a1a1a",shirt:"#8b0000",pants:"#1a1a1a",shoes:"#2c2c2c"};else if(a.includes("superhero")||a.includes("hero"))s={skin:"#d4a76a",hair:"#2c1810",shirt:"#dc143c",pants:"#00008b",shoes:"#ffd700"};else if(a.includes("chef")||a.includes("cook"))s={skin:"#d4a76a",hair:"#3d2314",shirt:"#ffffff",pants:"#1a1a1a",shoes:"#2c2c2c"};else if(a.includes("doctor")||a.includes("nurse")||a.includes("medical"))s={skin:"#d4a76a",hair:"#3d2314",shirt:"#87ceeb",pants:"#87ceeb",shoes:"#ffffff"};else{let e=er.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%360;s.shirt="hsl(".concat(e,", 70%, ").concat(50*r,"%)"),s.pants="hsl(".concat((e+180)%360,", 60%, ").concat(40*r,"%)"),s.hair="hsl(".concat((e+90)%360,", 40%, 25%)")}t.clearRect(0,0,64,64),t.fillStyle=s.skin,t.fillRect(8,8,8,8),t.fillRect(24,8,8,8),t.fillRect(0,8,8,8),t.fillRect(16,8,8,8),t.fillRect(8,0,8,8),t.fillRect(16,0,8,8),t.fillStyle=s.hair,t.fillRect(8,0,8,8),t.fillRect(8,8,8,2),t.fillRect(0,8,8,3),t.fillRect(16,8,8,3),t.fillRect(24,8,8,3),t.fillStyle="#ffffff",t.fillRect(10,12,2,2),t.fillRect(14,12,2,2),t.fillStyle="#000000",t.fillRect(11,13,1,1),t.fillRect(15,13,1,1),t.fillStyle="#d4a76a",t.fillRect(12,14,2,1),t.fillStyle="#b35a5a",t.fillRect(11,15,4,1),t.fillStyle=s.shirt,t.fillRect(20,20,8,12),t.fillRect(32,20,8,12),t.fillRect(16,20,4,12),t.fillRect(28,20,4,12),t.fillRect(20,16,8,4),t.fillStyle=s.skin,t.fillRect(44,20,4,12),t.fillRect(48,20,4,12),t.fillRect(40,20,4,12),t.fillRect(52,20,4,12),t.fillStyle=s.shirt,t.fillRect(44,20,4,8),t.fillRect(40,20,4,8),t.fillStyle=s.skin,t.fillRect(36,52,4,12),t.fillRect(44,52,4,12),t.fillRect(32,52,4,12),t.fillRect(48,52,4,12),t.fillStyle=s.shirt,t.fillRect(36,52,4,8),t.fillRect(32,52,4,8),t.fillStyle=s.pants,t.fillRect(4,20,4,12),t.fillRect(8,20,4,12),t.fillRect(0,20,4,12),t.fillRect(12,20,4,12),t.fillStyle=s.shoes,t.fillRect(4,28,4,4),t.fillRect(0,28,4,4),t.fillStyle=s.pants,t.fillRect(20,52,4,12),t.fillRect(24,52,4,12),t.fillRect(16,52,4,12),t.fillRect(28,52,4,12),t.fillStyle=s.shoes,t.fillRect(20,60,4,4),t.fillRect(16,60,4,4),tN(),tf(),eC(er,em,e.toDataURL("image/png")),ed(!1),el(!1),tD("download")},e2=(0,n.useCallback)(e=>{$(t=>{let a=t.filter(t=>t!==e);return[e,...a].slice(0,8)})},[]),[e9,e4]=(0,n.useState)(!1),[e8,e3]=(0,n.useState)(!1),[e6,e7]=(0,n.useState)(!1);(0,n.useEffect)(()=>{localStorage.getItem("skin-creator-t1000-seen")||setTimeout(()=>{e3(!0),e4(!0),localStorage.setItem("skin-creator-t1000-seen","true"),setTimeout(()=>{e4(!1),e3(!1)},5e3)},1e3)},[]);let[te,tt]=(0,n.useState)({width:0,height:0}),[ta,ts]=(0,n.useState)([]),tl=(0,n.useRef)(0),tr=(0,n.useRef)(null),[tn,ti]=(0,n.useState)([]),[td,to]=(0,n.useState)(-1),[tc,tu]=(0,n.useState)({}),[tx,tm]=(0,n.useState)(null),tb={firstDraw:{name:"First Stroke!",emoji:"\uD83C\uDFA8"},colorMaster:{name:"Color Master",emoji:"\uD83C\uDF08"},saved:{name:"Saved!",emoji:"\uD83D\uDCBE"},shared:{name:"Shared!",emoji:"\uD83D\uDD17"},downloaded:{name:"Downloaded!",emoji:"\uD83D\uDCE5"},undoKing:{name:"Undo King",emoji:"↩️"},layerPro:{name:"Layer Pro",emoji:"\uD83D\uDCDA"},patternUser:{name:"Pattern User",emoji:"\uD83C\uDFAD"}},th=(0,n.useCallback)(e=>{if(tc[e])return;let t=tb[e];if(!t)return;tu(t=>({...t,[e]:!0})),tm({id:e,...t}),setTimeout(()=>tm(null),3e3);let a=JSON.parse(localStorage.getItem("skin-creator-achievements")||"{}");a[e]=!0,localStorage.setItem("skin-creator-achievements",JSON.stringify(a))},[tc]);(0,n.useEffect)(()=>{let e=localStorage.getItem("skin-creator-achievements");e&&tu(JSON.parse(e))},[]);let[tg,tp]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=e=>{"?"===e.key||"/"===e.key&&e.shiftKey?tp(e=>!e):"Escape"===e.key&&tp(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let tf=(0,n.useCallback)(()=>{let e=l.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let a=t.getImageData(0,0,64,64);ti(e=>{let t=e.slice(0,td+1);return t.push(a),t.length>50&&t.shift(),t}),to(e=>Math.min(e+1,49));try{localStorage.setItem("minecraft-skin-autosave",e.toDataURL("image/png"))}catch(e){}},[td]),tj=(0,n.useCallback)(()=>{if(td<=0)return;let e=l.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let a=td-1;t.putImageData(tn[a],0,0),to(a)},[tn,td]),ty=(0,n.useCallback)(()=>{if(td>=tn.length-1)return;let e=l.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let a=td+1;t.putImageData(tn[a],0,0),to(a)},[tn,td]),tD=(0,n.useCallback)(e=>{tr.current||(tr.current=new(window.AudioContext||window.webkitAudioContext));let t=tr.current,a=t.createOscillator(),s=t.createGain();a.connect(s),s.connect(t.destination),"draw"===e?(a.frequency.setValueAtTime(800+400*Math.random(),t.currentTime),a.frequency.exponentialRampToValueAtTime(400,t.currentTime+.1),s.gain.setValueAtTime(.1,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),a.start(t.currentTime),a.stop(t.currentTime+.1)):"click"===e?(a.frequency.setValueAtTime(600,t.currentTime),a.frequency.exponentialRampToValueAtTime(200,t.currentTime+.15),s.gain.setValueAtTime(.2,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),a.start(t.currentTime),a.stop(t.currentTime+.15)):"download"===e?[523,659,784,1047].forEach((e,a)=>{let s=t.createOscillator(),l=t.createGain();s.connect(l),l.connect(t.destination),s.frequency.value=e,l.gain.setValueAtTime(.15,t.currentTime+.1*a),l.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1*a+.2),s.start(t.currentTime+.1*a),s.stop(t.currentTime+.1*a+.2)}):"undo"===e?(a.frequency.setValueAtTime(300,t.currentTime),a.frequency.exponentialRampToValueAtTime(600,t.currentTime+.12),s.gain.setValueAtTime(.12,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.12),a.start(t.currentTime),a.stop(t.currentTime+.12)):"redo"===e?(a.frequency.setValueAtTime(600,t.currentTime),a.frequency.exponentialRampToValueAtTime(300,t.currentTime+.12),s.gain.setValueAtTime(.12,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.12),a.start(t.currentTime),a.stop(t.currentTime+.12)):"error"===e?(a.type="sawtooth",a.frequency.setValueAtTime(150,t.currentTime),s.gain.setValueAtTime(.15,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.2),a.start(t.currentTime),a.stop(t.currentTime+.2)):"success"===e?(a.frequency.setValueAtTime(880,t.currentTime),a.frequency.exponentialRampToValueAtTime(1200,t.currentTime+.1),s.gain.setValueAtTime(.15,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),a.start(t.currentTime),a.stop(t.currentTime+.15)):"save"===e&&[784,988].forEach((e,a)=>{let s=t.createOscillator(),l=t.createGain();s.connect(l),l.connect(t.destination),s.frequency.value=e,l.gain.setValueAtTime(.12,t.currentTime+.08*a),l.gain.exponentialRampToValueAtTime(.01,t.currentTime+.08*a+.1),s.start(t.currentTime+.08*a),s.stop(t.currentTime+.08*a+.1)})},[]);(0,n.useEffect)(()=>{tt({width:window.innerWidth,height:window.innerHeight});let e=()=>tt({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let e=localStorage.getItem("minecraft-skin-autosave");if(e&&l.current){let t=l.current.getContext("2d");if(t){let a=new Image;a.onload=()=>{t.clearRect(0,0,64,64),t.drawImage(a,0,0),tN()},a.src=e}}},[]),(0,n.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement))switch(e.key.toLowerCase()){case"b":R("brush");break;case"e":R("eraser");break;case"f":R("fill");break;case"g":R("gradient");break;case"s":R("stamp");break;case"i":R("eyedropper");break;case"?":ea(e=>!e);break;case"z":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),tj());break;case"y":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),ty());break;case"m":I(e=>!e);break;case"d":M(e=>!e);break;case"1":X(1);break;case"2":X(2);break;case"3":X(3);break;case"l":eL(e=>!e);break;case"[":eB(e=>["base","clothing","accessories"][(["base","clothing","accessories"].indexOf(e)+2)%3]);break;case"]":eB(e=>["base","clothing","accessories"][(["base","clothing","accessories"].indexOf(e)+1)%3]);break;case"c":e.metaKey||e.ctrlKey||eQ(e=>!e)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[tj,ty]),(0,n.useCallback)(()=>{if(l.current){let e=l.current.toDataURL("image/png");localStorage.setItem("minecraft-skin-autosave",e)}},[]);let tw=(0,n.useCallback)(()=>{let e=l.current;if(!e)return;let t=e.getContext("2d");if(!t)return;let a=[{skin:"#ffdfc4",hair:"#4a3728",shirt:"#e74c3c",pants:"#2c3e50",shoes:"#1a1a1a"},{skin:"#c4a57b",hair:"#1a1a1a",shirt:"#3498db",pants:"#9b59b6",shoes:"#2c2c2c"},{skin:"#8d6e4c",hair:"#2c1810",shirt:"#27ae60",pants:"#f39c12",shoes:"#34495e"},{skin:"#7dcea0",hair:"#27ae60",shirt:"#e91e63",pants:"#673ab7",shoes:"#4a148c"},{skin:"#ff6b6b",hair:"#c0392b",shirt:"#f1c40f",pants:"#1abc9c",shoes:"#16a085"},{skin:"#a29bfe",hair:"#6c5ce7",shirt:"#fd79a8",pants:"#00cec9",shoes:"#0984e3"},{skin:"#ffeaa7",hair:"#fdcb6e",shirt:"#e17055",pants:"#74b9ff",shoes:"#0984e3"}],s=a[Math.floor(Math.random()*a.length)];t.clearRect(0,0,64,64),t.fillStyle=s.skin,t.fillRect(8,8,8,8),t.fillRect(0,8,8,8),t.fillRect(16,8,8,8),t.fillRect(24,8,8,8),t.fillRect(8,0,8,8),t.fillStyle=s.hair,t.fillRect(8,8,8,Math.random()>.5?2:1),t.fillStyle="#ffffff",t.fillRect(9,11,2,1),t.fillRect(13,11,2,1),t.fillStyle="#000000",t.fillRect(10,11,1,1),t.fillRect(13,11,1,1),t.fillStyle=s.shirt,t.fillRect(20,20,8,12),t.fillRect(16,20,4,12),t.fillRect(28,20,4,12),t.fillRect(20,16,8,4),t.fillStyle=s.skin,t.fillRect(44,20,4,4),t.fillRect(36,52,4,4),t.fillStyle=s.shirt,t.fillRect(44,24,4,8),t.fillRect(36,56,4,8),t.fillStyle=s.pants,t.fillRect(4,20,4,12),t.fillRect(20,52,4,12),t.fillStyle=s.shoes,t.fillRect(4,28,4,4),t.fillRect(20,60,4,4),tN(),tf(),tD("download")},[]),tk=(0,n.useCallback)((e,t)=>{if("eraser"===C)return;let a=tl.current++,s={id:a,x:e,y:t,color:u};ts(e=>[...e.slice(-20),s]),setTimeout(()=>{ts(e=>e.filter(e=>e.id!==a))},600)},[u,C]),tv=(0,n.useCallback)(e=>{let t=e_("base"),a=e_("clothing"),s=e_("accessories"),l=t.getContext("2d"),r=a.getContext("2d"),n=s.getContext("2d");if(!l||!r||!n)return;if(l.clearRect(0,0,64,64),r.clearRect(0,0,64,64),n.clearRect(0,0,64,64),"blank"===e){eW(),tN();return}let i=k[e]||k.steve;l.fillStyle=i.skin,l.fillRect(8,8,8,8),l.fillStyle=i.eyes,l.fillRect(9,11,2,1),l.fillRect(13,11,2,1),l.fillStyle=i.pupils,l.fillRect(10,11,1,1),l.fillRect(13,11,1,1),l.fillStyle=i.hair,l.fillRect(8,8,8,1),l.fillRect(8,8,1,2),l.fillRect(15,8,1,2),l.fillStyle="#a87d5a",l.fillRect(11,14,2,1),l.fillStyle=i.skin,l.fillRect(0,8,8,8),l.fillRect(16,8,8,8),l.fillRect(24,8,8,8),l.fillStyle=i.hair,l.fillRect(24,8,8,1),l.fillStyle=i.hair,l.fillRect(8,0,8,8),l.fillStyle=i.skin,l.fillRect(16,0,8,8),l.fillStyle=i.skin,l.fillRect(44,20,4,12),l.fillRect(40,20,4,12),l.fillRect(48,20,4,12),l.fillRect(52,20,4,12),l.fillRect(36,52,4,12),l.fillRect(32,52,4,12),l.fillRect(40,52,4,12),l.fillRect(44,52,4,12),r.fillStyle=i.shirt,r.fillRect(20,20,8,12),r.fillRect(16,20,4,12),r.fillRect(28,20,4,12),r.fillRect(32,20,8,12),r.fillStyle=i.pants,r.fillRect(4,20,4,12),r.fillRect(0,20,4,12),r.fillRect(8,20,4,12),r.fillRect(12,20,4,12),r.fillRect(20,52,4,12),r.fillRect(16,52,4,12),r.fillRect(24,52,4,12),r.fillRect(28,52,4,12),r.fillStyle=i.shoes,r.fillRect(4,31,4,1),r.fillRect(20,63,4,1),eW(),tN()},[e_,eW]),tN=(0,n.useCallback)(()=>{let e=l.current,t=i.current;if(!e||!t)return;let a=t.getContext("2d");a&&(a.fillStyle="#1a1a2e",a.fillRect(0,0,t.width,t.height),a.imageSmoothingEnabled=!1,a.drawImage(e,8,8,8,8,60,20,64,64),a.drawImage(e,20,20,8,12,60,84,64,96),a.drawImage(e,44,20,4,12,28,84,32,96),a.drawImage(e,36,52,4,12,124,84,32,96),a.drawImage(e,4,20,4,12,60,180,32,96),a.drawImage(e,20,52,4,12,92,180,32,96))},[]),tC=(0,n.useCallback)(()=>{let e=l.current;if(!e)return;let t=prompt("\uD83D\uDCBE Name your skin:","Skin ".concat(eU.length+1));if(!t)return;let a={id:"skin-".concat(Date.now()),name:t,dataUrl:e.toDataURL("image/png"),timestamp:Date.now()};eO(e=>[a,...e].slice(0,20))},[eU.length]),tR=(0,n.useCallback)(e=>{let t=new Image;t.onload=()=>{let e=l.current;if(!e)return;let a=e.getContext("2d");a&&(a.clearRect(0,0,64,64),a.drawImage(t,0,0),ez(!1),tN())},t.src=e.dataUrl},[tN]),tS=(0,n.useCallback)(e=>{eO(t=>t.filter(t=>t.id!==e))},[]),[tE,tF]=(0,n.useState)(null),tT=(0,n.useCallback)(()=>{let e=l.current;if(!e)return;let t=e.toDataURL("image/png").split(",")[1].replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),a="".concat(window.location.origin).concat(window.location.pathname,"?skin=").concat(t.slice(0,2e3));tF(a),navigator.clipboard.writeText(a).then(()=>{tD("download"),th("shared")}).catch(()=>{})},[]);(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("skin");if(e)try{let t=e.replace(/-/g,"+").replace(/_/g,"/"),a=t+"==".slice(0,(4-t.length%4)%4),s=new Image;s.onload=()=>{let e=l.current;if(!e)return;let t=e.getContext("2d");t&&(t.clearRect(0,0,64,64),t.drawImage(s,0,0),tN())},s.src="data:image/png;base64,".concat(a)}catch(e){}},[tN]),(0,n.useEffect)(()=>{tv("steve")},[tv]),(0,n.useEffect)(()=>{eW(),tN()},[eT,eW]);let tA=e=>{if(!h&&"mousemove"===e.type)return;let t=l.current;if(!t)return;let a=t.getContext("2d");if(!a)return;let s=e_(eI).getContext("2d");if(!s)return;h&&Math.random()>.7&&(tk(e.clientX,e.clientY),tD("draw"),th("firstDraw"));let r=t.getBoundingClientRect(),n=64/r.width,i=64/r.height,d=Math.floor((e.clientX-r.left)*n),o=Math.floor((e.clientY-r.top)*i);if(!(d<0)&&!(d>=64)&&!(o<0)&&!(o>=64)){if("eyedropper"===C){let e=a.getImageData(d,o,1,1).data;e[3]>0&&(m(("#"+[e[0],e[1],e[2]].map(e=>e.toString(16).padStart(2,"0")).join("")).toUpperCase()),tD("click"));return}if(F){let e=w[F];if(d<e.x||d>=e.x+e.w||o<e.y||o>=e.y+e.h)return}for(let e=0;e<J;e++)for(let t=0;t<J;t++){let a=d+e,l=o+t;if(!(a>=64)&&!(l>=64)){if("eraser"===C)s.clearRect(a,l,1,1);else if("fill"===C){if(F){let e=w[F];s.fillStyle=u,s.fillRect(e.x,e.y,e.w,e.h)}}else if("gradient"===C){if(F){let e=w[F],t=s.createLinearGradient(e.x,e.y,e.x+e.w,e.y+e.h);t.addColorStop(0,u),t.addColorStop(1,q),s.fillStyle=t,s.fillRect(e.x,e.y,e.w,e.h)}}else if("glow"===C){s.shadowColor=u,s.shadowBlur=2,s.fillStyle=u;for(let e=0;e<J;e++)for(let t=0;t<J;t++)s.fillRect(d+e,o+t,1,1);s.shadowBlur=0}else if("stamp"===C){s.fillStyle=u;let e={star:[[1,0],[0,1],[1,1],[2,1],[1,2]],heart:[[0,1],[2,1],[0,0],[1,1],[2,0]],diamond:[[1,0],[0,1],[2,1],[1,2]],smiley:[[0,0],[2,0],[0,2],[1,2],[2,2],[1,1]],fire:[[1,0],[0,1],[1,1],[2,1],[0,2],[1,2],[2,2]],lightning:[[1,0],[0,1],[1,1],[1,2],[2,2]]};(e[S]||e.star).forEach(e=>{let[t,a]=e;s.fillRect(d+t,o+a,1,1)})}else if(s.fillStyle=u,s.fillRect(a,l,1,1),A){let e=63-a;s.fillRect(e,l,1,1)}}}eW(),tN()}},tI=e=>{let t=e.touches[0];if(!t)return;let a=l.current;if(!a)return;let s=e_(eI).getContext("2d");if(!s)return;let r=a.getBoundingClientRect(),n=64/r.width,i=64/r.height,d=Math.floor((t.clientX-r.left)*n),o=Math.floor((t.clientY-r.top)*i);if(!(d<0)&&!(d>=64)&&!(o<0)&&!(o>=64)){if(F){let e=w[F];if(d<e.x||d>=e.x+e.w||o<e.y||o>=e.y+e.h)return}for(let e=0;e<J;e++)for(let t=0;t<J;t++){let a=d+e,l=o+t;if(!(a>=64)&&!(l>=64)){if("eraser"===C)s.clearRect(a,l,1,1);else if(s.fillStyle=u,s.fillRect(a,l,1,1),A){let e=63-a;s.fillRect(e,l,1,1)}}}eW(),tN()}},tB=(0,n.useCallback)((e,t)=>{let a=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(a*a+s*s)},[]),tM=(0,n.useCallback)((e,t)=>({x:(e.clientX+t.clientX)/2,y:(e.clientY+t.clientY)/2}),[]),tL=(0,n.useCallback)(e=>{if(e.touches.length>=2){e.preventDefault();let t=e.touches[0],a=e.touches[1],s=tB(t,a),l=tM(t,a);V.current={isGesture:!0,initialDistance:s,initialZoom:O,initialPan:{...z},lastCenter:l},N(!1)}else V.current.isGesture=!1,N(!0),tI(e)},[tB,tM,O,z,tI]),tP=(0,n.useCallback)(e=>{if(e.touches.length>=2&&V.current.isGesture){e.preventDefault();let t=e.touches[0],a=e.touches[1],s=tB(t,a),l=tM(t,a),r=s/V.current.initialDistance;G(Math.max(2,Math.min(12,Math.round(V.current.initialZoom*r))));let n=l.x-V.current.lastCenter.x,i=l.y-V.current.lastCenter.y;_(e=>({x:Math.max(-200,Math.min(200,e.x+n)),y:Math.max(-200,Math.min(200,e.y+i))})),V.current.lastCenter=l}else 1!==e.touches.length||V.current.isGesture||(e.preventDefault(),tI(e))},[tB,tM,tI]),tU=(0,n.useCallback)(e=>{e.touches.length<2&&(V.current.isGesture?V.current.isGesture=!1:(N(!1),tf(),e2(u)))},[tf,e2,u]),tO=(0,n.useCallback)(()=>{_({x:0,y:0}),tD("click")},[tD]),[tG,tz]=(0,n.useState)(!1),[t_,tV]=(0,n.useState)({base:!0,clothing:!0,accessories:!0}),tK=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){let e=document.createElement("canvas");e.width=64,e.height=64;let t=e.getContext("2d");if(!t)return;eT.forEach(e=>{if(!t_[e.id])return;let a=eP.current[e.id];a&&(t.globalAlpha=e.opacity/100,t.drawImage(a,0,0))}),t.globalAlpha=1;let a=document.createElement("a");a.download="".concat(W||"my-skin",".png"),a.href=e.toDataURL("image/png"),a.click()}else{let e=l.current;if(!e)return;let t=document.createElement("a");t.download="".concat(W||"my-skin",".png"),t.href=e.toDataURL("image/png"),t.click()}e4(!0),tD("download"),setTimeout(()=>e4(!1),3e3),tz(!1),th("downloaded")},tq=async()=>{let e=l.current;if(e)try{let t=await new Promise(t=>e.toBlob(e=>t(e),"image/png"));await navigator.clipboard.write([new ClipboardItem({"image/png":t})]),tD("click"),alert("✅ Skin copied to clipboard!")}catch(a){let t=e.toDataURL("image/png");await navigator.clipboard.writeText(t),alert("\uD83D\uDCCB Skin URL copied!")}};return(0,s.jsxs)("div",{style:{backgroundSize:"400% 400%",animation:"gradient 15s ease infinite"},className:"jsx-d254eb5d291d5199 "+"min-h-screen p-6 flex flex-col items-center transition-all duration-700 ".concat(B?"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900":"bg-gradient-to-br from-violet-500 via-fuchsia-500 to-cyan-500"),children:[(0,s.jsx)(r(),{id:"d254eb5d291d5199",children:"@-webkit-keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@-moz-keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@-o-keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}"}),e9&&(0,s.jsx)(f,{width:te.width,height:te.height,recycle:!1,numberOfPieces:500,gravity:.3}),tg&&(0,s.jsx)("div",{onClick:()=>tp(!1),className:"jsx-d254eb5d291d5199 fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-d254eb5d291d5199 bg-gray-900 text-white p-6 rounded-2xl shadow-2xl max-w-md",children:[(0,s.jsx)("h2",{className:"jsx-d254eb5d291d5199 text-2xl font-bold mb-4 flex items-center gap-2",children:"⌨️ Keyboard Shortcuts"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"B"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Brush tool"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"E"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Eraser"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"F"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Fill bucket"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"I"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Eyedropper"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"1-5"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Brush size"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"⌘/Ctrl + Z"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Undo"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"⌘/Ctrl + Y"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Redo"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"⌘/Ctrl + S"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Save"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"?"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"This help"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gray-800 px-3 py-2 rounded",children:"Esc"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 py-2",children:"Close panels"})]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-gray-400 text-xs mt-4 text-center",children:"Press ? or Esc to close"})]})}),tx&&(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 fixed top-20 right-4 z-50 animate-bounce",children:(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-4xl",children:tx.emoji}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs opacity-75",children:"Achievement Unlocked!"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 font-bold text-lg",children:tx.name})]})]})}),e8&&(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 bg-gradient-to-r from-yellow-400 via-pink-500 to-purple-500 text-white px-8 py-6 rounded-3xl shadow-2xl animate-bounce",children:(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 text-center",children:[(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 text-6xl mb-2",children:"\uD83C\uDF89"}),(0,s.jsx)("h2",{className:"jsx-d254eb5d291d5199 text-3xl font-black mb-2",children:"TASK 1000!"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-lg opacity-90",children:"Milestone Reached!"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm opacity-75 mt-2",children:"22+ features added today"})]})})}),ta.map(e=>(0,s.jsx)("div",{style:{left:e.x-8,top:e.y-8,width:16,height:16,backgroundColor:e.color,borderRadius:"50%",boxShadow:"0 0 10px ".concat(e.color,", 0 0 20px ").concat(e.color),zIndex:9999},className:"jsx-d254eb5d291d5199 fixed pointer-events-none animate-ping"},e.id)),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 text-center mb-6",children:[(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-center gap-2 mb-1",children:(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-sm font-semibold text-white/80 bg-white/20 px-2 py-0.5 rounded-full",children:"\uD83C\uDF19 Moonlight"})}),(0,s.jsx)("h1",{className:"jsx-d254eb5d291d5199 text-4xl md:text-6xl font-black text-white drop-shadow-2xl animate-float",children:"\uD83C\uDFA8 Skin Studio"}),(0,s.jsxs)("p",{className:"jsx-d254eb5d291d5199 text-lg text-white/90 mt-1",children:["AI Skin Creator for Minecraft & Roblox ✨",(0,s.jsx)("button",{onClick:()=>tp(!0),title:"Keyboard shortcuts (?)",className:"jsx-d254eb5d291d5199 ml-3 px-2 py-1 text-sm bg-white/20 hover:bg-white/30 rounded-full transition-all",children:"⌨️ Help"})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex gap-2 mt-3",children:Object.entries(D).map(e=>{let[t,a]=e;return(0,s.jsxs)("button",{onClick:()=>c(t),className:"jsx-d254eb5d291d5199 "+"px-4 py-2 rounded-full font-bold transition-all ".concat(d===t?"bg-white text-purple-600 scale-105 shadow-lg":"bg-white/20 text-white hover:bg-white/30"),children:[a.emoji," ",a.name]},t)})})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-col lg:flex-row gap-4 w-full max-w-6xl px-2",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 glass-card rounded-3xl p-6 shadow-2xl hover:shadow-3xl transition-shadow duration-300",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-center gap-2 mb-4",children:[(0,s.jsxs)("h2",{className:"jsx-d254eb5d291d5199 text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 animate-bounce-soft",children:"\uD83D\uDC40"})," Preview"]}),(0,s.jsx)("button",{onClick:()=>P(!L),title:"Toggle 3D view - drag to rotate!",className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded-lg text-xs font-bold transition-all ".concat(L?"bg-purple-500 text-white":"bg-gray-200 hover:bg-gray-300"),children:L?"\uD83C\uDFAE 3D":"\uD83D\uDCD0 2D"})]}),L?(0,s.jsx)("div",{style:{width:200,height:280},className:"jsx-d254eb5d291d5199 rounded-xl mx-auto overflow-hidden",children:(0,s.jsx)(p,{skinCanvas:l.current})}):(0,s.jsx)("canvas",{ref:i,width:200,height:280,style:{imageRendering:"pixelated"},className:"jsx-d254eb5d291d5199 rounded-xl mx-auto"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm font-semibold text-gray-700 mb-2",children:"Start from:"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 justify-center",children:[Object.entries(k).map(e=>{let[t,a]=e;return(0,s.jsx)("button",{onClick:()=>{if(tv(t),"creeper"===t){e4(!0),tD("download");let e=document.querySelector(".glass-card");e&&(e.classList.add("animate-wiggle"),setTimeout(()=>e.classList.remove("animate-wiggle"),500)),setTimeout(()=>e4(!1),2e3)}},className:"jsx-d254eb5d291d5199 "+"px-2 py-1 text-white rounded-lg text-xs font-bold hover:scale-105 transition-all ".concat("creeper"===t?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"),children:a.name},t)}),(0,s.jsx)("button",{onClick:()=>tv("blank"),className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gray-500 text-white rounded-lg text-xs font-bold hover:bg-gray-600",children:"⬜ Blank"}),(0,s.jsx)("button",{onClick:()=>{e7(!0),tw(),setTimeout(()=>e7(!1),500)},className:"jsx-d254eb5d291d5199 "+"px-2 py-1 bg-gradient-to-r from-pink-500 to-yellow-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform ".concat(e6?"animate-wiggle":"animate-pulse"),children:"\uD83C\uDFB2 Random!"}),(0,s.jsx)("button",{onClick:()=>{let e=eP.current[eI];if(!e)return;let t=e.getContext("2d");if(t){for(let e=0;e<64;e++)for(let a=0;a<64;a++)t.fillStyle="rgb(".concat(Math.floor(256*Math.random()),", ").concat(Math.floor(256*Math.random()),", ").concat(Math.floor(256*Math.random()),")"),t.fillRect(e,a,1,1);eW(),tN(),e4(!0),tD("download"),setTimeout(()=>e4(!1),2e3)}},title:"\uD83C\uDF81 Mystery surprise skin!",className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform",children:"\uD83C\uDF81 Mystery!"}),(0,s.jsx)("button",{onClick:()=>{let e=["#FF6B6B","#4D96FF","#6BCB77","#FFD93D","#9B59B6","#FF8E53","#00BCD4","#E91E63"],t=()=>e[Math.floor(Math.random()*e.length)];eA(e=>e.map(e=>"clothing"===e.id||"accessories"===e.id?{...e,tint:t(),tintIntensity:70}:e)),tD("download")},title:"\uD83C\uDFAD Randomize outfit colors!",className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gradient-to-r from-orange-500 to-pink-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform",children:"\uD83C\uDFAD Outfit!"}),(0,s.jsx)("button",{onClick:()=>{let e=[{name:"Cyberpunk",base:"#0ff",accent:"#f0f",dark:"#0a0a2e"},{name:"Forest",base:"#228B22",accent:"#8B4513",dark:"#1a3a1a"},{name:"Ice",base:"#87CEEB",accent:"#E0FFFF",dark:"#1a2a3a"},{name:"Fire",base:"#FF4500",accent:"#FFD700",dark:"#2a1a0a"},{name:"Void",base:"#4B0082",accent:"#8B008B",dark:"#0a0a1a"},{name:"Ocean",base:"#006994",accent:"#40E0D0",dark:"#0a1a2a"},{name:"Golden",base:"#FFD700",accent:"#DAA520",dark:"#2a2a1a"},{name:"Neon",base:"#39FF14",accent:"#FF1493",dark:"#0a0a0a"}],t=e[Math.floor(Math.random()*e.length)];eA(e=>e.map(e=>"clothing"===e.id?{...e,tint:t.base,tintIntensity:60}:"accessories"===e.id?{...e,tint:t.accent,tintIntensity:70}:e)),tD("success")},title:"✨ AI-inspired color palette",className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform animate-pulse",children:"✨ AI Colors"}),(0,s.jsx)("button",{onClick:()=>{tC(),tD("save")},title:"\uD83D\uDCBE Save current skin",className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform",children:"\uD83D\uDCBE Save"}),(0,s.jsxs)("button",{onClick:()=>ez(!eG),title:"\uD83D\uDCC2 My saved skins",className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded-lg text-xs font-bold hover:scale-105 transition-transform ".concat(eG?"bg-blue-500 text-white":"bg-gradient-to-r from-blue-400 to-indigo-500 text-white"),children:["\uD83D\uDCC2 My Skins (",eU.length,")"]}),(0,s.jsx)("button",{onClick:tT,title:"\uD83D\uDD17 Share skin via link",className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform",children:"\uD83D\uDD17 Share"})]}),tE&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-2 p-2 bg-green-100 rounded-lg text-xs",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-between",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-green-800 font-bold",children:"✅ Link copied!"}),(0,s.jsx)("button",{onClick:()=>tF(null),className:"jsx-d254eb5d291d5199 text-green-600 hover:text-green-800",children:"✕"})]}),(0,s.jsx)("input",{type:"text",value:tE,readOnly:!0,onClick:e=>e.target.select(),className:"jsx-d254eb5d291d5199 w-full mt-1 p-1 text-xs bg-white rounded border truncate"})]}),eG&&eU.length>0&&(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 mt-2 p-2 bg-white/90 rounded-lg max-h-32 overflow-y-auto",children:(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-5 gap-1",children:eU.map(e=>(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 relative group",children:[(0,s.jsx)("img",{src:e.dataUrl,alt:e.name,style:{imageRendering:"pixelated"},onClick:()=>tR(e),title:"".concat(e.name," - Click to load"),className:"jsx-d254eb5d291d5199 w-10 h-10 rounded cursor-pointer hover:scale-110 transition-transform border-2 border-transparent hover:border-blue-500"}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),tS(e.id)},title:"Delete",className:"jsx-d254eb5d291d5199 absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},e.id))})}),eG&&0===eU.length&&(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 mt-2 p-2 bg-white/90 rounded-lg text-center text-xs text-gray-500",children:"No saved skins yet! Click \uD83D\uDCBE Save to save your creation."})]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex-1 glass-card rounded-2xl md:rounded-3xl p-3 md:p-6 shadow-2xl",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 md:hidden flex justify-between items-center mb-3",children:[(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 text-sm font-bold text-gray-700",children:["\uD83D\uDEE0️ ",C.charAt(0).toUpperCase()+C.slice(1)]}),(0,s.jsx)("button",{onClick:()=>ev(!ek),"aria-label":"Toggle tools menu",className:"jsx-d254eb5d291d5199 "+"p-2 rounded-xl transition-all ".concat(ek?"bg-purple-500 text-white shadow-lg":"bg-white/80 text-gray-700 hover:bg-white"),children:ek?(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-d254eb5d291d5199 w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12",className:"jsx-d254eb5d291d5199"})}):(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-d254eb5d291d5199 w-6 h-6",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16",className:"jsx-d254eb5d291d5199"})})})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 "+"".concat(ek?"block":"hidden"," md:block transition-all duration-300 ease-in-out"),children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 md:gap-2 mb-3 md:mb-4 justify-center",children:[(0,s.jsx)("button",{onClick:()=>eN("brush"),title:"\uD83D\uDD8C️ Draw! Click and drag to color",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("brush"===C?"bg-blue-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83D\uDD8C️"}),(0,s.jsx)("button",{onClick:()=>eN("eraser"),title:"\uD83E\uDDFD Erase! Remove colors",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("eraser"===C?"bg-pink-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83E\uDDFD"}),(0,s.jsx)("button",{onClick:()=>eN("fill"),title:"\uD83E\uDEA3 Fill! Color a whole area",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("fill"===C?"bg-yellow-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83E\uDEA3"}),(0,s.jsx)("button",{onClick:()=>eN("gradient"),title:"\uD83C\uDF08 Rainbow! Blend two colors",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("gradient"===C?"bg-gradient-to-r from-pink-500 to-blue-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83C\uDF08"}),(0,s.jsx)("button",{onClick:()=>eN("glow"),title:"✨ Glow! Make it sparkle",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("glow"===C?"bg-purple-600 text-white scale-105 shadow-lg shadow-purple-500/50":"bg-white/80 hover:bg-white"),children:"✨"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 relative group",children:[(0,s.jsxs)("button",{onClick:()=>eN("stamp"),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat("stamp"===C?"bg-pink-500 text-white scale-105":"bg-gray-200 hover:bg-gray-300"),children:["star"===S?"⭐":"heart"===S?"❤️":"diamond"===S?"\uD83D\uDC8E":"smiley"===S?"\uD83D\uDE0A":"fire"===S?"\uD83D\uDD25":"⚡"," Stamp"]}),"stamp"===C&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 absolute top-full left-0 mt-1 flex gap-1 bg-white rounded-lg p-1 shadow-lg z-10",children:[(0,s.jsx)("button",{onClick:()=>E("star"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("star"===S?"bg-pink-200":""),children:"⭐"}),(0,s.jsx)("button",{onClick:()=>E("heart"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("heart"===S?"bg-pink-200":""),children:"❤️"}),(0,s.jsx)("button",{onClick:()=>E("diamond"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("diamond"===S?"bg-pink-200":""),children:"\uD83D\uDC8E"}),(0,s.jsx)("button",{onClick:()=>E("smiley"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("smiley"===S?"bg-pink-200":""),children:"\uD83D\uDE0A"}),(0,s.jsx)("button",{onClick:()=>E("fire"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("fire"===S?"bg-pink-200":""),children:"\uD83D\uDD25"}),(0,s.jsx)("button",{onClick:()=>E("lightning"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("lightning"===S?"bg-pink-200":""),children:"⚡"})]})]}),(0,s.jsx)("button",{onClick:()=>eN("eyedropper"),title:"\uD83C\uDFAF Pick a color from your drawing!",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("eyedropper"===C?"bg-amber-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83C\uDFAF"}),(0,s.jsxs)("button",{onClick:()=>{tj(),tD("undo")},disabled:td<=0,title:"Undo (".concat(td," steps available)"),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all relative ".concat(td<=0?"bg-gray-300 text-gray-500":"bg-orange-500 text-white hover:bg-orange-600"),children:["↩️ Undo",td>0&&(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:td})]}),(0,s.jsxs)("button",{onClick:()=>{ty(),tD("redo")},disabled:td>=tn.length-1,title:"Redo (".concat(tn.length-1-td," steps available)"),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all relative ".concat(td>=tn.length-1?"bg-gray-300 text-gray-500":"bg-orange-500 text-white hover:bg-orange-600"),children:["↪️ Redo",td<tn.length-1&&(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 absolute -top-1 -right-1 bg-blue-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold",children:tn.length-1-td})]}),(0,s.jsx)("button",{onClick:()=>I(!A),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat(A?"bg-purple-500 text-white scale-105":"bg-gray-200 hover:bg-gray-300"),children:"\uD83E\uDE9E Mirror"}),(0,s.jsx)("button",{onClick:()=>M(!B),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat(B?"bg-yellow-400 text-gray-900":"bg-gray-700 text-white"),children:B?"☀️ Light":"\uD83C\uDF19 Dark"}),(0,s.jsx)("button",{onClick:()=>{var e;return null===(e=U.current)||void 0===e?void 0:e.click()},className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-indigo-500 text-white hover:bg-indigo-600",children:"\uD83D\uDCE5 Import"}),(0,s.jsx)("input",{ref:U,type:"file",accept:"image/png",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;let s=l.current;if(!s)return;let r=s.getContext("2d");if(!r)return;let n=new Image;n.onload=()=>{r.clearRect(0,0,64,64),r.drawImage(n,0,0,64,64),tN(),tf(),tD("click")},n.src=URL.createObjectURL(a),e.target.value=""},className:"jsx-d254eb5d291d5199 hidden"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1",children:[(0,s.jsx)("input",{type:"text",value:W,onChange:e=>H(e.target.value),placeholder:"skin-name",className:"jsx-d254eb5d291d5199 w-24 px-2 py-1 text-sm rounded-lg border-2 border-gray-300 focus:border-green-500 outline-none"}),(0,s.jsx)("button",{onClick:()=>tK(!1),title:"\uD83D\uDCBE Save your skin!",className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-green-500 text-white hover:bg-green-600 animate-pulse",children:"\uD83D\uDCBE"}),(0,s.jsx)("button",{onClick:()=>tz(!0),title:"Export options (choose layers)",className:"jsx-d254eb5d291d5199 px-2 py-2 rounded-full font-bold bg-green-600 text-white hover:bg-green-700",children:"\uD83D\uDCE4"})]}),(0,s.jsx)("button",{onClick:tq,title:"Copy to clipboard",className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-violet-500 text-white hover:bg-violet-600",children:"\uD83D\uDCCB Copy"}),(0,s.jsx)("button",{onClick:()=>{if(!confirm("Clear the entire canvas?"))return;let e=l.current;if(!e)return;let t=e.getContext("2d");t&&(t.clearRect(0,0,64,64),tN(),tf(),tD("click"))},title:"\uD83D\uDDD1️ Start over!",className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-red-500 text-white hover:bg-red-600",children:"\uD83D\uDDD1️ Clear"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1 ml-2",children:[(0,s.jsx)("button",{onClick:()=>G(Math.max(2,O-1)),title:"Zoom out (min 2x)",className:"jsx-d254eb5d291d5199 w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 font-bold",children:"-"}),(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 text-sm font-bold w-8 text-center",children:[O,"x"]}),(0,s.jsx)("button",{onClick:()=>G(Math.min(12,O+1)),title:"Zoom in (max 12x)",className:"jsx-d254eb5d291d5199 w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 font-bold",children:"+"}),(0!==z.x||0!==z.y)&&(0,s.jsx)("button",{onClick:tO,title:"Reset pan position",className:"jsx-d254eb5d291d5199 w-8 h-8 rounded-full bg-blue-500 text-white hover:bg-blue-600 font-bold ml-1",children:"↺"})]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-sm font-semibold",children:"Brush:"}),[1,2,3].map(e=>(0,s.jsx)("button",{onClick:()=>X(e),className:"jsx-d254eb5d291d5199 "+"w-8 h-8 rounded-full font-bold ".concat(J===e?"bg-blue-500 text-white":"bg-gray-200"),children:e},e))]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 mb-3 justify-center",children:[(0,s.jsx)("button",{onClick:()=>T(null),className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded text-sm font-bold ".concat(F?"bg-gray-200":"bg-purple-500 text-white"),children:"\uD83C\uDFAF All"}),Object.entries(w).map(e=>{let[t,a]=e;return(0,s.jsx)("button",{onClick:()=>T(t),className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded text-sm font-bold ".concat(F===t?"bg-purple-500 text-white":"bg-gray-200"),children:a.label},t)})]})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex justify-center overflow-hidden",children:(0,s.jsxs)("div",{ref:K,style:{backgroundImage:"repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%)",backgroundSize:"12px 12px",transform:"translate(".concat(z.x,"px, ").concat(z.y,"px)"),transition:(null===(e=V.current)||void 0===e?void 0:e.isGesture)?"none":"transform 0.15s ease-out"},className:"jsx-d254eb5d291d5199 relative rounded-xl p-1 touch-none",children:[(0,s.jsx)("canvas",{ref:l,width:64,height:64,style:{width:64*O,height:64*O,imageRendering:"pixelated",transition:(null===(t=V.current)||void 0===t?void 0:t.isGesture)?"none":"width 0.15s ease-out, height 0.15s ease-out"},onMouseDown:e=>{N(!0),tA(e)},onMouseUp:()=>{N(!1),tf(),e2(u)},onMouseLeave:()=>{N(!1)},onMouseMove:tA,onTouchStart:tL,onTouchEnd:tU,onTouchMove:tP,className:"jsx-d254eb5d291d5199 cursor-crosshair touch-none"}),(0!==z.x||0!==z.y)&&(0,s.jsx)("button",{onClick:tO,title:"Reset pan position",className:"jsx-d254eb5d291d5199 absolute -top-2 -right-2 w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold shadow-lg hover:bg-blue-600 transition-all z-10",children:"↺"})]})}),(0,s.jsxs)("p",{className:"jsx-d254eb5d291d5199 text-center mt-2 text-gray-500 text-sm",children:["\uD83C\uDFA8 Draw here! See your character on the left! ✨",(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 block text-xs mt-1 md:hidden text-gray-400",children:"\uD83D\uDCF1 Pinch to zoom • Two fingers to pan"})]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 glass-card rounded-3xl p-6 shadow-2xl",children:[(0,s.jsx)("h2",{className:"jsx-d254eb5d291d5199 text-2xl font-bold text-gray-800 mb-4 text-center",children:"\uD83C\uDFA8 Colors"}),Z.length>0&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mb-3",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 mb-1",children:"Recent:"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex gap-1 flex-wrap",children:Z.map((e,t)=>(0,s.jsx)("button",{onClick:()=>m(e),style:{backgroundColor:e},className:"jsx-d254eb5d291d5199 w-6 h-6 rounded shadow-sm hover:scale-110 transition-transform"},"".concat(e,"-").concat(t)))})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-4 gap-2 max-w-[200px]",children:v.map(e=>(0,s.jsx)("button",{onClick:()=>m(e),style:{backgroundColor:e},className:"jsx-d254eb5d291d5199 "+"w-10 h-10 rounded-lg shadow transition-transform hover:scale-110 ".concat(u===e?"ring-4 ring-blue-400 scale-110":"")},e))}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4 text-center",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm font-semibold text-gray-700",children:"Selected:"}),(0,s.jsx)("div",{style:{backgroundColor:u},className:"jsx-d254eb5d291d5199 w-16 h-16 mx-auto mt-2 rounded-xl shadow-lg border-4 border-white"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-1 items-center",children:[(0,s.jsx)("input",{type:"color",value:u,onChange:e=>m(e.target.value),className:"jsx-d254eb5d291d5199 w-10 h-10 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>{let t=e.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(t)&&m(t)},maxLength:7,className:"jsx-d254eb5d291d5199 flex-1 px-2 py-1 text-xs font-mono rounded border border-gray-300 uppercase"})]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 text-center mt-1",children:"\uD83C\uDFAF Your color!"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-2",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-1 items-center",children:[(0,s.jsx)("input",{type:"color",value:q,onChange:e=>Y(e.target.value),className:"jsx-d254eb5d291d5199 w-8 h-8 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:q,onChange:e=>{let t=e.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(t)&&Y(t)},maxLength:7,className:"jsx-d254eb5d291d5199 flex-1 px-2 py-1 text-xs font-mono rounded border border-gray-300 uppercase"})]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 text-center mt-1",children:"\uD83C\uDF08 Mix color!"})]})]})]}),et&&(0,s.jsx)("div",{onClick:()=>ea(!1),className:"jsx-d254eb5d291d5199 fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-d254eb5d291d5199 bg-white rounded-2xl p-6 max-w-md m-4 shadow-2xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"jsx-d254eb5d291d5199 text-xl font-bold mb-4",children:"⌨️ Keyboard Shortcuts"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"B"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Brush"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"E"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Eraser"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"F"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Fill"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"G"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Gradient"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"W"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Glow"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"S"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Stamp"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"I"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Eyedropper"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"M"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Mirror"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"D"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Dark mode"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"1-3"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Brush size"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"⌘Z"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Undo"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"⌘Y"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Redo"})]}),(0,s.jsx)("h4",{className:"jsx-d254eb5d291d5199 text-lg font-bold mt-4 mb-2",children:"\uD83C\uDFA8 Layer Shortcuts"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"L"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Toggle layer panel"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"["}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Previous layer"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"]"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Next layer"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"C"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Duplicate layer"})]}),(0,s.jsx)("button",{onClick:()=>ea(!1),className:"jsx-d254eb5d291d5199 mt-4 w-full py-2 bg-blue-500 text-white rounded-lg font-bold",children:"Got it! \uD83D\uDC4D"})]})}),eM&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 fixed left-4 top-1/2 -translate-y-1/2 bg-white/95 backdrop-blur rounded-2xl p-4 shadow-2xl z-40 w-64",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex justify-between items-center mb-3",children:[(0,s.jsx)("h3",{className:"jsx-d254eb5d291d5199 text-lg font-bold",children:"\uD83C\uDFA8 Layers"}),(0,s.jsx)("button",{onClick:()=>eL(!1),className:"jsx-d254eb5d291d5199 text-gray-400 hover:text-gray-600 text-xl",children:"\xd7"})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 space-y-2 mb-3",children:eT.slice().reverse().map((e,t)=>(0,s.jsxs)("div",{onClick:()=>eB(e.id),className:"jsx-d254eb5d291d5199 "+"p-2 rounded-lg border-2 transition-all cursor-pointer ".concat(eI===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),eV(e.id)},title:e.visible?"Hide layer":"Show layer",className:"jsx-d254eb5d291d5199 "+"text-lg ".concat(e.visible?"":"opacity-30"),children:e.visible?"\uD83D\uDC41️":"\uD83D\uDEAB"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-lg",children:e.emoji}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-sm font-medium",children:e.name})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),eX(e.id,"up"),tD("click")},disabled:0===t,title:"Move layer up",className:"jsx-d254eb5d291d5199 text-sm px-2 py-1 di