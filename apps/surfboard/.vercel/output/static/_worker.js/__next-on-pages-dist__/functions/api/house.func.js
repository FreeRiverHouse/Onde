var q=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var J=Object.getOwnPropertyNames;var Q=Object.prototype.hasOwnProperty;var V=(u,p)=>()=>(u&&(p=u(u=0)),p);var K=(u,p,j,d)=>{if(p&&typeof p=="object"||typeof p=="function")for(let l of J(p))!Q.call(u,l)&&l!==j&&q(u,l,{get:()=>p[l],enumerable:!(d=z(p,l))||d.enumerable});return u},B=(u,p,j)=>(K(u,p,"default"),j&&K(j,p,"default"));var Z=u=>K(q({},"__esModule",{value:!0}),u);var M={};import*as ht from"async_hooks";var X=V(()=>{B(M,ht)});import{__getNamedExports as ee}from"../../../__next-on-pages-dist__/webpack/562f1929e61c51936b027740cd20d5f9.js";import{__getNamedExports as te}from"../../../__next-on-pages-dist__/webpack/d6830180ae0f03b84fd7a5e7248c5aa2.js";import{__getNamedExports as ne}from"../../../__next-on-pages-dist__/webpack/d2550da8fc2781985fea0b1c0d3097c7.js";import{__getNamedExports as _e}from"../../../__next-on-pages-dist__/webpack/030bd997c35875172fa1ffa5b8a901e4.js";import{__getNamedExports as oe}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var k=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/house"),G=ee(k,k,k),se=G.__chunk_5822,ae=G.__chunk_7185,A=te(k,k,k),re=A.__chunk_6195,ce=A.__chunk_2067,ue=A.__chunk_5558,ie=A.__chunk_5303,pe=A.__chunk_5228,he=A.__chunk_1959,E=ne(k,k,k),ke=E.__chunk_1730,ge=E.__chunk_3818,de=E.__chunk_7037,le=E.__chunk_1863,fe=E.__chunk_932,xe=E.__chunk_581,me=E.__chunk_2561,Ee=E.__chunk_2988,be=E.__chunk_2039,ye=E.__chunk_5028,Ne=E.__chunk_9548,ve=E.__chunk_6914,Re=E.__chunk_7960,we=E.__chunk_5996,Oe=E.__chunk_4337,s=_e(k,k,k),Pe=s.__chunk_5405,Se=s.__chunk_7322,Te=s.__chunk_5276,Ce=s.__chunk_5577,Ae=s.__chunk_3039,je=s.__chunk_9573,Ie=s.__chunk_7701,$e=s.__chunk_662,Fe=s.__chunk_4101,Me=s.__chunk_6776,De=s.__chunk_8042,Le=s.__chunk_3665,Ue=s.__chunk_7444,He=s.__chunk_4591,Ke=s.__chunk_6991,Be=s.__chunk_8816,We=s.__chunk_6631,qe=s.__chunk_4828,Xe=s.__chunk_828,Ge=s.__chunk_5927,Ye=s.__chunk_6202,ze=s.__chunk_6947,Je=s.__chunk_4363,Qe=s.__chunk_8264,Ve=s.__chunk_1583,Ze=s.__chunk_9985,et=s.__chunk_4155,tt=s.__chunk_7908,nt=s.__chunk_8949,_t=s.__chunk_796,ot=s.__chunk_1651,st=s.__chunk_5105,at=s.__chunk_9642,rt=s.__chunk_8819,ct=s.__chunk_676,Y=oe(k,k,k),ut=Y.__NEXT_FONT_MANIFEST,it=Y.__REACT_LOADABLE_MANIFEST,xt=((u,p,j)=>(p._ENTRIES={},u.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/fd9d1056-dcba7f094ce3d609.js","static/chunks/30-b50f13889648ea77.js","static/chunks/main-app-17503da640fcbefb.js"],pages:{"/_app":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-dc5c0cdb2c2c0bdb.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-dc5c0cdb2c2c0bdb.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},u.__BUILD_MANIFEST.lowPriorityFiles=["/static/FQBh2Ar4Fsg4ZG1NC9Wb7/_buildManifest.js",,"/static/FQBh2Ar4Fsg4ZG1NC9Wb7/_ssgManifest.js"],u.__REACT_LOADABLE_MANIFEST=it,u.__NEXT_FONT_MANIFEST=ut,u.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var d={},l={};function _(t){var r=l[t];if(r!==void 0)return r.exports;var i=l[t]={exports:{}},f=!0;try{d[t](i,i.exports,_),f=!1}finally{f&&delete l[t]}return i.exports}_.m=d,_.amdO={},(()=>{var t=[];_.O=(r,i,f,x)=>{if(i){x=x||0;for(var h=t.length;h>0&&t[h-1][2]>x;h--)t[h]=t[h-1];t[h]=[i,f,x];return}for(var m=1/0,h=0;h<t.length;h++){for(var[i,f,x]=t[h],N=!0,b=0;b<i.length;b++)m>=x&&Object.keys(_.O).every(I=>_.O[I](i[b]))?i.splice(b--,1):(N=!1,x<m&&(m=x));if(N){t.splice(h--,1);var v=f();v!==void 0&&(r=v)}}return r}})(),_.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return _.d(r,{a:r}),r},_.d=(t,r)=>{for(var i in r)_.o(r,i)&&!_.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},_.e=()=>Promise.resolve(),_.g=function(){if(typeof p=="object")return p;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),_.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),_.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};_.O.j=f=>t[f]===0;var r=(f,x)=>{var h,m,[N,b,v]=x,R=0;if(N.some(S=>t[S]!==0)){for(h in b)_.o(b,h)&&(_.m[h]=b[h]);if(v)var P=v(_)}for(f&&f(x);R<N.length;R++)m=N[R],_.o(t,m)&&t[m]&&t[m][0](),t[m]=0;return _.O(P)},i=u.webpackChunk_N_E=u.webpackChunk_N_E||[];i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i))})()})(),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[241],{676:ct,8819:rt,9642:at,5105:st,1651:ot,796:_t,8949:nt,7908:tt,4155:et,9985:Ze,1583:Ve,8264:Qe,4363:Je,6947:ze,6202:Ye,5927:Ge,828:Xe,4828:qe,6631:We,8816:Be,6991:Ke,4591:He,7444:Ue,3665:Le,8042:De,6776:Me,4101:Fe,662:$e,7701:Ie,9573:je,3039:Ae,5577:Ce,1959:he,5276:Te,5228:pe,5303:ie,7322:Se,5558:ue,5405:Pe}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[805],{4337:Oe,5996:we,7960:Re,6914:ve,9548:Ne,5028:ye,2039:be,2988:Ee,2561:me,581:xe,932:fe,1863:le,7037:de,3818:ge,1730:ke}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[273],{2067:ce,6195:re,295:(d,l,_)=>{"use strict";_.r(l),_.d(l,{ComponentMod:()=>U,default:()=>H});var t={};_.r(t),_.d(t,{GET:()=>v,runtime:()=>b});var r={};_.r(r),_.d(r,{originalPathname:()=>I,patchFetch:()=>L,requestAsyncStorage:()=>P,routeModule:()=>R,serverHooks:()=>D,staticGenerationAsyncStorage:()=>S});var i=_(932),f=_(2561),x=_(4828),h=_(6631),m=_(9985),N=_(5822);let b="edge";async function v(){try{let{env:$}=(0,N.getRequestContext)(),y=$.DB;if(!y)return m.xk.json({error:"Database not available"},{status:500});let F=await y.prepare("SELECT * FROM agents ORDER BY name").all(),e=await y.prepare(`
      SELECT
        status,
        COUNT(*) as count
      FROM agent_tasks
      GROUP BY status
    `).all(),a=await y.prepare(`
      SELECT * FROM agent_tasks
      WHERE status IN ('pending', 'claimed', 'in_progress')
      ORDER BY
        CASE priority
          WHEN 'urgent' THEN 1
          WHEN 'high' THEN 2
          WHEN 'normal' THEN 3
          WHEN 'low' THEN 4
        END,
        created_at DESC
      LIMIT 20
    `).all(),o=await y.prepare("SELECT * FROM books ORDER BY created_at DESC").all(),n={agents:F.results?.length||0,tasks:{pending:0,in_progress:0,done:0,total:0},books:{planning:0,writing:0,illustrating:0,reviewing:0,published:0}};for(let c of e.results||[])c.status==="pending"||c.status==="claimed"?n.tasks.pending+=c.count:c.status==="in_progress"?n.tasks.in_progress+=c.count:c.status==="done"&&(n.tasks.done+=c.count),n.tasks.total+=c.count;for(let c of o.results||[]){let g=c.status;n.books[g]!==void 0&&n.books[g]++}return m.xk.json({success:!0,agents:F.results||[],tasks:a.results||[],books:o.results||[],stats:n,timestamp:new Date().toISOString()})}catch($){return console.error("House API error:",$),m.xk.json({error:"Failed to fetch house data"},{status:500})}}let R=new f.AppRouteRouteModule({definition:{kind:x.x.APP_ROUTE,page:"/api/house/route",pathname:"/api/house",filename:"route",bundlePath:"app/api/house/route"},resolvedPagePath:"/Users/mattiapetrucciani/CascadeProjects/Onde/apps/surfboard/src/app/api/house/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:P,staticGenerationAsyncStorage:S,serverHooks:D}=R,I="/api/house/route";function L(){return(0,h.XH)({serverHooks:D,staticGenerationAsyncStorage:S})}let U=r,H=i.a.wrap(R)},7185:ae,5822:se},d=>{var l=t=>d(d.s=t);d.O(0,[241,805],()=>l(295));var _=d.O();(p._ENTRIES=typeof p._ENTRIES>"u"?{}:p._ENTRIES)["middleware_app/api/house/route"]=_}]),function(){let d={exports:{},loaded:!1};return function(_,t){"use strict";var r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,h=(e,a)=>{for(var o in a)r(e,o,{get:a[o],enumerable:!0})},m=(e,a,o,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let c of f(a))!x.call(e,c)&&c!==o&&r(e,c,{get:()=>a[c],enumerable:!(n=i(a,c))||n.enumerable});return e},N=e=>m(r({},"__esModule",{value:!0}),e),b={};h(b,{default:()=>$}),_.exports=N(b);var v=(X(),Z(M)),R="@next/request-context",P=Symbol.for(R),S=Symbol.for("internal.storage");function D(){let e=p;if(!e[P]){let a=new v.AsyncLocalStorage,o={get:()=>a.getStore(),[S]:a};e[P]=o}return e[P]}var I=D();function L(e,a){return I[S].run(e,a)}function U(e){let a={};return e&&e.forEach((o,n)=>{a[n]=o,n.toLowerCase()==="set-cookie"&&(a[n]=H(o))}),a}function H(e){let a=[],o=0,n,c,g,T,C;function w(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}function O(){return c=e.charAt(o),c!=="="&&c!==";"&&c!==","}for(;o<e.length;){for(n=o,C=!1;w();)if(c=e.charAt(o),c===","){for(g=o,o+=1,w(),T=o;o<e.length&&O();)o+=1;o<e.length&&e.charAt(o)==="="?(C=!0,o=T,a.push(e.substring(n,g)),n=o):o=g+1}else o+=1;(!C||o>=e.length)&&a.push(e.substring(n,e.length))}return a}function $(e){let a=e.staticRoutes.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page})),o=e.dynamicRoutes?.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page}))||[];return async function(n,c){let g=new URL(n.url).pathname,T={};if(e.nextConfig?.basePath&&g.startsWith(e.nextConfig.basePath)&&(g=g.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let w of e.nextConfig.i18n.locales){let O=new RegExp(`^/${w}($|/)`,"i");if(g.match(O)){g=g.replace(O,"/")||"/";break}}for(let w of a)if(w.regexp.exec(g)){T.name=w.page;break}if(!T.name){let w=F(g);for(let O of o||[]){if(w&&!F(O.page))continue;let W=O.regexp.exec(g);if(W){T={name:O.page,params:W.groups};break}}}let C=await L({waitUntil:c.waitUntil},()=>p._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:n.url,method:n.method,headers:U(n.headers),ip:y(n.headers,"x-real-ip"),geo:{city:y(n.headers,"x-vercel-ip-city",!0),country:y(n.headers,"x-vercel-ip-country",!0),latitude:y(n.headers,"x-vercel-ip-latitude"),longitude:y(n.headers,"x-vercel-ip-longitude"),region:y(n.headers,"x-vercel-ip-country-region",!0)},nextConfig:e.nextConfig,page:T,body:n.body}}));return C.waitUntil&&c.waitUntil(C.waitUntil),C.response}}function y(e,a,o=!1){let n=e.get(a)||void 0;return o&&n?decodeURIComponent(n):n}function F(e){return e==="/api"||e.startsWith("/api/")}}(d,d.exports),d.exports}.call({}).default({name:"app/api/house/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/coming-soon",regex:"^/coming\\-soon(?:/)?$",routeKeys:{},namedRegex:"^/coming\\-soon(?:/)?$"},{page:"/corde",regex:"^/corde(?:/)?$",routeKeys:{},namedRegex:"^/corde(?:/)?$"},{page:"/frh",regex:"^/frh(?:/)?$",routeKeys:{},namedRegex:"^/frh(?:/)?$"},{page:"/house",regex:"^/house(?:/)?$",routeKeys:{},namedRegex:"^/house(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/pr",regex:"^/pr(?:/)?$",routeKeys:{},namedRegex:"^/pr(?:/)?$"},{page:"/social",regex:"^/social(?:/)?$",routeKeys:{},namedRegex:"^/social(?:/)?$"}],dynamicRoutes:[{page:"/api/agent-tasks/[id]",regex:"^/api/agent\\-tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/agent\\-tasks/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/pr/posts/[id]/approve",regex:"^/api/pr/posts/([^/]+?)/approve(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/pr/posts/(?<nxtPid>[^/]+?)/approve(?:/)?$"},{page:"/api/pr/posts/[id]/feedback",regex:"^/api/pr/posts/([^/]+?)/feedback(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/pr/posts/(?<nxtPid>[^/]+?)/feedback(?:/)?$"}],nextConfig:{basePath:""}})))(k,k,k);export{xt as default};
