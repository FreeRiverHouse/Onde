var W=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var ee=(c,h)=>()=>(c&&(h=c(c=0)),h);var B=(c,h,F,f)=>{if(h&&typeof h=="object"||typeof h=="function")for(let l of V(h))!Z.call(c,l)&&l!==F&&W(c,l,{get:()=>h[l],enumerable:!(f=Q(h,l))||f.enumerable});return c},X=(c,h,F)=>(B(c,h,"default"),F&&B(F,h,"default"));var te=c=>B(W({},"__esModule",{value:!0}),c);var C={};import*as lt from"async_hooks";var J=ee(()=>{X(C,lt)});import{__getNamedExports as ne}from"../../../__next-on-pages-dist__/webpack/562f1929e61c51936b027740cd20d5f9.js";import{__getNamedExports as _e}from"../../../__next-on-pages-dist__/webpack/3326.js";import{__getNamedExports as re}from"../../../__next-on-pages-dist__/webpack/d6830180ae0f03b84fd7a5e7248c5aa2.js";import{__getNamedExports as ae}from"../../../__next-on-pages-dist__/webpack/d2550da8fc2781985fea0b1c0d3097c7.js";import{__getNamedExports as se}from"../../../__next-on-pages-dist__/webpack/030bd997c35875172fa1ffa5b8a901e4.js";import{__getNamedExports as oe}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var d=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/agent-tasks"),Y=ne(d,d,d),ce=Y.__chunk_5822,ue=Y.__chunk_7185,ie=_e(d,d,d),pe=ie.__chunk_3326,I=re(d,d,d),he=I.__chunk_6195,de=I.__chunk_2067,ke=I.__chunk_5558,ge=I.__chunk_5303,fe=I.__chunk_5228,le=I.__chunk_1959,b=ae(d,d,d),xe=b.__chunk_1730,me=b.__chunk_3818,ye=b.__chunk_7037,be=b.__chunk_1863,Ee=b.__chunk_932,ve=b.__chunk_581,Ne=b.__chunk_2561,we=b.__chunk_2988,Pe=b.__chunk_2039,je=b.__chunk_5028,Re=b.__chunk_9548,Oe=b.__chunk_6914,Ae=b.__chunk_7960,Se=b.__chunk_5996,$e=b.__chunk_4337,a=se(d,d,d),Te=a.__chunk_5405,Ie=a.__chunk_7322,Fe=a.__chunk_5276,Ce=a.__chunk_5577,Me=a.__chunk_3039,Ue=a.__chunk_9573,De=a.__chunk_7701,Le=a.__chunk_662,Ke=a.__chunk_4101,qe=a.__chunk_6776,Be=a.__chunk_8042,Xe=a.__chunk_3665,Ge=a.__chunk_7444,He=a.__chunk_4591,We=a.__chunk_6991,Je=a.__chunk_8816,Ye=a.__chunk_6631,ze=a.__chunk_4828,Qe=a.__chunk_828,Ve=a.__chunk_5927,Ze=a.__chunk_6202,et=a.__chunk_6947,tt=a.__chunk_4363,nt=a.__chunk_8264,_t=a.__chunk_1583,rt=a.__chunk_9985,at=a.__chunk_4155,st=a.__chunk_7908,ot=a.__chunk_8949,ct=a.__chunk_796,ut=a.__chunk_1651,it=a.__chunk_5105,pt=a.__chunk_9642,ht=a.__chunk_8819,dt=a.__chunk_676,z=oe(d,d,d),kt=z.__NEXT_FONT_MANIFEST,gt=z.__REACT_LOADABLE_MANIFEST,Nt=((c,h,F)=>(h._ENTRIES={},c.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/fd9d1056-dcba7f094ce3d609.js","static/chunks/30-b50f13889648ea77.js","static/chunks/main-app-17503da640fcbefb.js"],pages:{"/_app":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-dc5c0cdb2c2c0bdb.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-dc5c0cdb2c2c0bdb.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},c.__BUILD_MANIFEST.lowPriorityFiles=["/static/FQBh2Ar4Fsg4ZG1NC9Wb7/_buildManifest.js",,"/static/FQBh2Ar4Fsg4ZG1NC9Wb7/_ssgManifest.js"],c.__REACT_LOADABLE_MANIFEST=gt,c.__NEXT_FONT_MANIFEST=kt,c.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var f={},l={};function r(_){var o=l[_];if(o!==void 0)return o.exports;var u=l[_]={exports:{}},x=!0;try{f[_](u,u.exports,r),x=!1}finally{x&&delete l[_]}return u.exports}r.m=f,r.amdO={},(()=>{var _=[];r.O=(o,u,x,m)=>{if(u){m=m||0;for(var k=_.length;k>0&&_[k-1][2]>m;k--)_[k]=_[k-1];_[k]=[u,x,m];return}for(var i=1/0,k=0;k<_.length;k++){for(var[u,x,m]=_[k],v=!0,p=0;p<u.length;p++)i>=m&&Object.keys(r.O).every($=>r.O[$](u[p]))?u.splice(p--,1):(v=!1,m<i&&(i=m));if(v){_.splice(k--,1);var w=x();w!==void 0&&(o=w)}}return o}})(),r.n=_=>{var o=_&&_.__esModule?()=>_.default:()=>_;return r.d(o,{a:o}),o},r.d=(_,o)=>{for(var u in o)r.o(o,u)&&!r.o(_,u)&&Object.defineProperty(_,u,{enumerable:!0,get:o[u]})},r.e=()=>Promise.resolve(),r.g=function(){if(typeof h=="object")return h;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(_,o)=>Object.prototype.hasOwnProperty.call(_,o),r.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},(()=>{var _={993:0};r.O.j=x=>_[x]===0;var o=(x,m)=>{var k,i,[v,p,w]=m,A=0;if(v.some(R=>_[R]!==0)){for(k in p)r.o(p,k)&&(r.m[k]=p[k]);if(w)var S=w(r)}for(x&&x(m);A<v.length;A++)i=v[A],r.o(_,i)&&_[i]&&_[i][0](),_[i]=0;return r.O(S)},u=c.webpackChunk_N_E=c.webpackChunk_N_E||[];u.forEach(o.bind(null,0)),u.push=o.bind(null,u.push.bind(u))})()})(),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[241],{676:dt,8819:ht,9642:pt,5105:it,1651:ut,796:ct,8949:ot,7908:st,4155:at,9985:rt,1583:_t,8264:nt,4363:tt,6947:et,6202:Ze,5927:Ve,828:Qe,4828:ze,6631:Ye,8816:Je,6991:We,4591:He,7444:Ge,3665:Xe,8042:Be,6776:qe,4101:Ke,662:Le,7701:De,9573:Ue,3039:Me,5577:Ce,1959:le,5276:Fe,5228:fe,5303:ge,7322:Ie,5558:ke,5405:Te}]),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[805],{4337:$e,5996:Se,7960:Ae,6914:Oe,9548:Re,5028:je,2039:Pe,2988:we,2561:Ne,581:ve,932:Ee,1863:be,7037:ye,3818:me,1730:xe}]),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[768],{2067:de,6195:he,6790:(f,l,r)=>{"use strict";r.r(l),r.d(l,{ComponentMod:()=>q,default:()=>O});var _={};r.r(_),r.d(_,{GET:()=>A,POST:()=>S,runtime:()=>w});var o={};r.r(o),r.d(o,{originalPathname:()=>L,patchFetch:()=>K,requestAsyncStorage:()=>D,routeModule:()=>R,serverHooks:()=>M,staticGenerationAsyncStorage:()=>$});var u=r(932),x=r(2561),m=r(4828),k=r(6631),i=r(9985),v=r(5822),p=r(3326);let w="edge";async function A(T){try{let t,{env:s}=(0,v.getRequestContext)(),e=s.DB;if(!e)return i.xk.json({error:"Database not available"},{status:500});let n=new URL(T.url),g=n.searchParams.get("status"),y=n.searchParams.get("assigned_to"),P=n.searchParams.get("type"),j=n.searchParams.get("priority"),E=n.searchParams.get("limit"),N=n.searchParams.get("stats")==="true";g&&(t=g.includes(",")?g.split(","):g);let U={status:t,assigned_to:y||void 0,type:P||void 0,priority:j||void 0,limit:E?parseInt(E,10):void 0},G=await(0,p.xT)(e,U),H={success:!0,tasks:G,count:G.length};return N&&(H.stats=await(0,p.Pw)(e)),i.xk.json(H)}catch(t){return console.error("Agent tasks GET error:",t),i.xk.json({error:"Failed to fetch tasks"},{status:500})}}async function S(T){try{let{env:t}=(0,v.getRequestContext)(),s=t.DB;if(!s)return i.xk.json({error:"Database not available"},{status:500});let e=await T.json();if(!e.type||!e.description)return i.xk.json({error:"Missing required fields: type and description are required"},{status:400});if(!p.FF.includes(e.type))return i.xk.json({error:`Invalid type. Must be one of: ${p.FF.join(", ")}`},{status:400});if(e.target_type&&!p._R.includes(e.target_type))return i.xk.json({error:`Invalid target_type. Must be one of: ${p._R.join(", ")}`},{status:400});if(e.priority&&!p.YA.includes(e.priority))return i.xk.json({error:`Invalid priority. Must be one of: ${p.YA.join(", ")}`},{status:400});if(e.source_dashboard&&!p.w7.includes(e.source_dashboard))return i.xk.json({error:`Invalid source_dashboard. Must be one of: ${p.w7.join(", ")}`},{status:400});let n=await(0,p.n5)(s,{type:e.type,description:e.description,target_id:e.target_id,target_type:e.target_type,payload:e.payload?JSON.stringify(e.payload):void 0,priority:e.priority||"normal",assigned_to:e.assigned_to,source_agent:e.source_agent,source_dashboard:e.source_dashboard,due_at:e.due_at,metadata:e.metadata?JSON.stringify(e.metadata):void 0,created_by:e.created_by||"dashboard"});return n?i.xk.json({success:!0,task:n}):i.xk.json({error:"Failed to create task"},{status:500})}catch(t){return console.error("Agent tasks POST error:",t),i.xk.json({error:"Failed to create task"},{status:500})}}let R=new x.AppRouteRouteModule({definition:{kind:m.x.APP_ROUTE,page:"/api/agent-tasks/route",pathname:"/api/agent-tasks",filename:"route",bundlePath:"app/api/agent-tasks/route"},resolvedPagePath:"/Users/mattiapetrucciani/CascadeProjects/Onde/apps/surfboard/src/app/api/agent-tasks/route.ts",nextConfigOutput:"",userland:_}),{requestAsyncStorage:D,staticGenerationAsyncStorage:$,serverHooks:M}=R,L="/api/agent-tasks/route";function K(){return(0,k.XH)({serverHooks:M,staticGenerationAsyncStorage:$})}let q=o,O=u.a.wrap(R)},7185:ue,3326:pe,5822:ce},f=>{var l=_=>f(f.s=_);f.O(0,[241,805],()=>l(6790));var r=f.O();(h._ENTRIES=typeof h._ENTRIES>"u"?{}:h._ENTRIES)["middleware_app/api/agent-tasks/route"]=r}]),function(){let f={exports:{},loaded:!1};return function(r,_){"use strict";var o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,k=(t,s)=>{for(var e in s)o(t,e,{get:s[e],enumerable:!0})},i=(t,s,e,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let g of x(s))!m.call(t,g)&&g!==e&&o(t,g,{get:()=>s[g],enumerable:!(n=u(s,g))||n.enumerable});return t},v=t=>i(o({},"__esModule",{value:!0}),t),p={};k(p,{default:()=>q}),r.exports=v(p);var w=(J(),te(C)),A="@next/request-context",S=Symbol.for(A),R=Symbol.for("internal.storage");function D(){let t=h;if(!t[S]){let s=new w.AsyncLocalStorage,e={get:()=>s.getStore(),[R]:s};t[S]=e}return t[S]}var $=D();function M(t,s){return $[R].run(t,s)}function L(t){let s={};return t&&t.forEach((e,n)=>{s[n]=e,n.toLowerCase()==="set-cookie"&&(s[n]=K(e))}),s}function K(t){let s=[],e=0,n,g,y,P,j;function E(){for(;e<t.length&&/\s/.test(t.charAt(e));)e+=1;return e<t.length}function N(){return g=t.charAt(e),g!=="="&&g!==";"&&g!==","}for(;e<t.length;){for(n=e,j=!1;E();)if(g=t.charAt(e),g===","){for(y=e,e+=1,E(),P=e;e<t.length&&N();)e+=1;e<t.length&&t.charAt(e)==="="?(j=!0,e=P,s.push(t.substring(n,y)),n=e):e=y+1}else e+=1;(!j||e>=t.length)&&s.push(t.substring(n,t.length))}return s}function q(t){let s=t.staticRoutes.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page})),e=t.dynamicRoutes?.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page}))||[];return async function(n,g){let y=new URL(n.url).pathname,P={};if(t.nextConfig?.basePath&&y.startsWith(t.nextConfig.basePath)&&(y=y.replace(t.nextConfig.basePath,"")||"/"),t.nextConfig?.i18n)for(let E of t.nextConfig.i18n.locales){let N=new RegExp(`^/${E}($|/)`,"i");if(y.match(N)){y=y.replace(N,"/")||"/";break}}for(let E of s)if(E.regexp.exec(y)){P.name=E.page;break}if(!P.name){let E=T(y);for(let N of e||[]){if(E&&!T(N.page))continue;let U=N.regexp.exec(y);if(U){P={name:N.page,params:U.groups};break}}}let j=await M({waitUntil:g.waitUntil},()=>h._ENTRIES[`middleware_${t.name}`].default.call({},{request:{url:n.url,method:n.method,headers:L(n.headers),ip:O(n.headers,"x-real-ip"),geo:{city:O(n.headers,"x-vercel-ip-city",!0),country:O(n.headers,"x-vercel-ip-country",!0),latitude:O(n.headers,"x-vercel-ip-latitude"),longitude:O(n.headers,"x-vercel-ip-longitude"),region:O(n.headers,"x-vercel-ip-country-region",!0)},nextConfig:t.nextConfig,page:P,body:n.body}}));return j.waitUntil&&g.waitUntil(j.waitUntil),j.response}}function O(t,s,e=!1){let n=t.get(s)||void 0;return e&&n?decodeURIComponent(n):n}function T(t){return t==="/api"||t.startsWith("/api/")}}(f,f.exports),f.exports}.call({}).default({name:"app/api/agent-tasks/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/coming-soon",regex:"^/coming\\-soon(?:/)?$",routeKeys:{},namedRegex:"^/coming\\-soon(?:/)?$"},{page:"/corde",regex:"^/corde(?:/)?$",routeKeys:{},namedRegex:"^/corde(?:/)?$"},{page:"/frh",regex:"^/frh(?:/)?$",routeKeys:{},namedRegex:"^/frh(?:/)?$"},{page:"/house",regex:"^/house(?:/)?$",routeKeys:{},namedRegex:"^/house(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/pr",regex:"^/pr(?:/)?$",routeKeys:{},namedRegex:"^/pr(?:/)?$"},{page:"/social",regex:"^/social(?:/)?$",routeKeys:{},namedRegex:"^/social(?:/)?$"}],dynamicRoutes:[{page:"/api/agent-tasks/[id]",regex:"^/api/agent\\-tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/agent\\-tasks/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/pr/posts/[id]/approve",regex:"^/api/pr/posts/([^/]+?)/approve(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/pr/posts/(?<nxtPid>[^/]+?)/approve(?:/)?$"},{page:"/api/pr/posts/[id]/feedback",regex:"^/api/pr/posts/([^/]+?)/feedback(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/pr/posts/(?<nxtPid>[^/]+?)/feedback(?:/)?$"}],nextConfig:{basePath:""}})))(d,d,d);export{Nt as default};
