var W=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var ee=(c,p)=>()=>(c&&(p=c(c=0)),p);var K=(c,p,C,f)=>{if(p&&typeof p=="object"||typeof p=="function")for(let l of V(p))!Z.call(c,l)&&l!==C&&W(c,l,{get:()=>p[l],enumerable:!(f=Q(p,l))||f.enumerable});return c},X=(c,p,C)=>(K(c,p,"default"),C&&K(C,p,"default"));var te=c=>K(W({},"__esModule",{value:!0}),c);var $={};import*as lt from"async_hooks";var J=ee(()=>{X($,lt)});import{__getNamedExports as ne}from"../../../__next-on-pages-dist__/webpack/562f1929e61c51936b027740cd20d5f9.js";import{__getNamedExports as _e}from"../../../__next-on-pages-dist__/webpack/3326.js";import{__getNamedExports as re}from"../../../__next-on-pages-dist__/webpack/d6830180ae0f03b84fd7a5e7248c5aa2.js";import{__getNamedExports as ae}from"../../../__next-on-pages-dist__/webpack/d2550da8fc2781985fea0b1c0d3097c7.js";import{__getNamedExports as se}from"../../../__next-on-pages-dist__/webpack/030bd997c35875172fa1ffa5b8a901e4.js";import{__getNamedExports as oe}from"../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var k=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/agent-tasks"),Y=ne(k,k,k),ce=Y.__chunk_5822,ue=Y.__chunk_7185,ie=_e(k,k,k),he=ie.__chunk_3326,F=re(k,k,k),pe=F.__chunk_6195,ke=F.__chunk_2067,de=F.__chunk_5558,ge=F.__chunk_5303,fe=F.__chunk_5228,le=F.__chunk_1959,b=ae(k,k,k),xe=b.__chunk_1730,me=b.__chunk_3818,ye=b.__chunk_7037,be=b.__chunk_1863,Ee=b.__chunk_932,ve=b.__chunk_581,Ne=b.__chunk_2561,we=b.__chunk_2988,je=b.__chunk_2039,Oe=b.__chunk_5028,Pe=b.__chunk_9548,Re=b.__chunk_6914,Ae=b.__chunk_7960,Se=b.__chunk_5996,Te=b.__chunk_4337,a=se(k,k,k),Ie=a.__chunk_5405,Fe=a.__chunk_7322,Ce=a.__chunk_5276,$e=a.__chunk_5577,Me=a.__chunk_3039,Ue=a.__chunk_9573,De=a.__chunk_7701,Le=a.__chunk_662,qe=a.__chunk_4101,Be=a.__chunk_6776,Ke=a.__chunk_8042,Xe=a.__chunk_3665,Ge=a.__chunk_7444,He=a.__chunk_4591,We=a.__chunk_6991,Je=a.__chunk_8816,Ye=a.__chunk_6631,ze=a.__chunk_4828,Qe=a.__chunk_828,Ve=a.__chunk_5927,Ze=a.__chunk_6202,et=a.__chunk_6947,tt=a.__chunk_4363,nt=a.__chunk_8264,_t=a.__chunk_1583,rt=a.__chunk_9985,at=a.__chunk_4155,st=a.__chunk_7908,ot=a.__chunk_8949,ct=a.__chunk_796,ut=a.__chunk_1651,it=a.__chunk_5105,ht=a.__chunk_9642,pt=a.__chunk_8819,kt=a.__chunk_676,z=oe(k,k,k),dt=z.__NEXT_FONT_MANIFEST,gt=z.__REACT_LOADABLE_MANIFEST,Nt=((c,p,C)=>(p._ENTRIES={},c.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/fd9d1056-dcba7f094ce3d609.js","static/chunks/30-b50f13889648ea77.js","static/chunks/main-app-17503da640fcbefb.js"],pages:{"/_app":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-cd26d40301e263df.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-cd26d40301e263df.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},c.__BUILD_MANIFEST.lowPriorityFiles=["/static/YcCdT5nboS_5lNSC1gVhr/_buildManifest.js",,"/static/YcCdT5nboS_5lNSC1gVhr/_ssgManifest.js"],c.__REACT_LOADABLE_MANIFEST=gt,c.__NEXT_FONT_MANIFEST=dt,c.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var f={},l={};function r(_){var o=l[_];if(o!==void 0)return o.exports;var u=l[_]={exports:{}},x=!0;try{f[_](u,u.exports,r),x=!1}finally{x&&delete l[_]}return u.exports}r.m=f,r.amdO={},(()=>{var _=[];r.O=(o,u,x,m)=>{if(u){m=m||0;for(var d=_.length;d>0&&_[d-1][2]>m;d--)_[d]=_[d-1];_[d]=[u,x,m];return}for(var i=1/0,d=0;d<_.length;d++){for(var[u,x,m]=_[d],v=!0,h=0;h<u.length;h++)i>=m&&Object.keys(r.O).every(T=>r.O[T](u[h]))?u.splice(h--,1):(v=!1,m<i&&(i=m));if(v){_.splice(d--,1);var w=x();w!==void 0&&(o=w)}}return o}})(),r.n=_=>{var o=_&&_.__esModule?()=>_.default:()=>_;return r.d(o,{a:o}),o},r.d=(_,o)=>{for(var u in o)r.o(o,u)&&!r.o(_,u)&&Object.defineProperty(_,u,{enumerable:!0,get:o[u]})},r.e=()=>Promise.resolve(),r.g=function(){if(typeof p=="object")return p;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),r.o=(_,o)=>Object.prototype.hasOwnProperty.call(_,o),r.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},(()=>{var _={993:0};r.O.j=x=>_[x]===0;var o=(x,m)=>{var d,i,[v,h,w]=m,A=0;if(v.some(P=>_[P]!==0)){for(d in h)r.o(h,d)&&(r.m[d]=h[d]);if(w)var S=w(r)}for(x&&x(m);A<v.length;A++)i=v[A],r.o(_,i)&&_[i]&&_[i][0](),_[i]=0;return r.O(S)},u=c.webpackChunk_N_E=c.webpackChunk_N_E||[];u.forEach(o.bind(null,0)),u.push=o.bind(null,u.push.bind(u))})()})(),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[241],{676:kt,8819:pt,9642:ht,5105:it,1651:ut,796:ct,8949:ot,7908:st,4155:at,9985:rt,1583:_t,8264:nt,4363:tt,6947:et,6202:Ze,5927:Ve,828:Qe,4828:ze,6631:Ye,8816:Je,6991:We,4591:He,7444:Ge,3665:Xe,8042:Ke,6776:Be,4101:qe,662:Le,7701:De,9573:Ue,3039:Me,5577:$e,1959:le,5276:Ce,5228:fe,5303:ge,7322:Fe,5558:de,5405:Ie}]),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[805],{4337:Te,5996:Se,7960:Ae,6914:Re,9548:Pe,5028:Oe,2039:je,2988:we,2561:Ne,581:ve,932:Ee,1863:be,7037:ye,3818:me,1730:xe}]),(c.webpackChunk_N_E=c.webpackChunk_N_E||[]).push([[768],{2067:ke,6195:pe,6790:(f,l,r)=>{"use strict";r.r(l),r.d(l,{ComponentMod:()=>B,default:()=>R});var _={};r.r(_),r.d(_,{GET:()=>A,POST:()=>S,runtime:()=>w});var o={};r.r(o),r.d(o,{originalPathname:()=>L,patchFetch:()=>q,requestAsyncStorage:()=>D,routeModule:()=>P,serverHooks:()=>M,staticGenerationAsyncStorage:()=>T});var u=r(932),x=r(2561),m=r(4828),d=r(6631),i=r(9985),v=r(5822),h=r(3326);let w="edge";async function A(I){try{let t,{env:s}=(0,v.getRequestContext)(),e=s.DB;if(!e)return i.xk.json({error:"Database not available"},{status:500});let n=new URL(I.url),g=n.searchParams.get("status"),y=n.searchParams.get("assigned_to"),j=n.searchParams.get("type"),O=n.searchParams.get("priority"),E=n.searchParams.get("limit"),N=n.searchParams.get("stats")==="true";g&&(t=g.includes(",")?g.split(","):g);let U={status:t,assigned_to:y||void 0,type:j||void 0,priority:O||void 0,limit:E?parseInt(E,10):void 0},G=await(0,h.xT)(e,U),H={success:!0,tasks:G,count:G.length};return N&&(H.stats=await(0,h.Pw)(e)),i.xk.json(H)}catch(t){return console.error("Agent tasks GET error:",t),i.xk.json({error:"Failed to fetch tasks"},{status:500})}}async function S(I){try{let{env:t}=(0,v.getRequestContext)(),s=t.DB;if(!s)return i.xk.json({error:"Database not available"},{status:500});let e=await I.json();if(!e.type||!e.description)return i.xk.json({error:"Missing required fields: type and description are required"},{status:400});if(!h.FF.includes(e.type))return i.xk.json({error:`Invalid type. Must be one of: ${h.FF.join(", ")}`},{status:400});if(e.target_type&&!h._R.includes(e.target_type))return i.xk.json({error:`Invalid target_type. Must be one of: ${h._R.join(", ")}`},{status:400});if(e.priority&&!h.YA.includes(e.priority))return i.xk.json({error:`Invalid priority. Must be one of: ${h.YA.join(", ")}`},{status:400});if(e.source_dashboard&&!h.w7.includes(e.source_dashboard))return i.xk.json({error:`Invalid source_dashboard. Must be one of: ${h.w7.join(", ")}`},{status:400});let n=await(0,h.n5)(s,{type:e.type,description:e.description,target_id:e.target_id,target_type:e.target_type,payload:e.payload?JSON.stringify(e.payload):void 0,priority:e.priority||"normal",assigned_to:e.assigned_to,source_agent:e.source_agent,source_dashboard:e.source_dashboard,due_at:e.due_at,metadata:e.metadata?JSON.stringify(e.metadata):void 0,created_by:e.created_by||"dashboard"});return n?i.xk.json({success:!0,task:n}):i.xk.json({error:"Failed to create task"},{status:500})}catch(t){return console.error("Agent tasks POST error:",t),i.xk.json({error:"Failed to create task"},{status:500})}}let P=new x.AppRouteRouteModule({definition:{kind:m.x.APP_ROUTE,page:"/api/agent-tasks/route",pathname:"/api/agent-tasks",filename:"route",bundlePath:"app/api/agent-tasks/route"},resolvedPagePath:"/Users/mattiapetrucciani/CascadeProjects/Onde/apps/surfboard/src/app/api/agent-tasks/route.ts",nextConfigOutput:"",userland:_}),{requestAsyncStorage:D,staticGenerationAsyncStorage:T,serverHooks:M}=P,L="/api/agent-tasks/route";function q(){return(0,d.XH)({serverHooks:M,staticGenerationAsyncStorage:T})}let B=o,R=u.a.wrap(P)},7185:ue,3326:he,5822:ce},f=>{var l=_=>f(f.s=_);f.O(0,[241,805],()=>l(6790));var r=f.O();(p._ENTRIES=typeof p._ENTRIES>"u"?{}:p._ENTRIES)["middleware_app/api/agent-tasks/route"]=r}]),function(){let f={exports:{},loaded:!1};return function(r,_){"use strict";var o=Object.defineProperty,u=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,m=Object.prototype.hasOwnProperty,d=(t,s)=>{for(var e in s)o(t,e,{get:s[e],enumerable:!0})},i=(t,s,e,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let g of x(s))!m.call(t,g)&&g!==e&&o(t,g,{get:()=>s[g],enumerable:!(n=u(s,g))||n.enumerable});return t},v=t=>i(o({},"__esModule",{value:!0}),t),h={};d(h,{default:()=>B}),r.exports=v(h);var w=(J(),te($)),A="@next/request-context",S=Symbol.for(A),P=Symbol.for("internal.storage");function D(){let t=p;if(!t[S]){let s=new w.AsyncLocalStorage,e={get:()=>s.getStore(),[P]:s};t[S]=e}return t[S]}var T=D();function M(t,s){return T[P].run(t,s)}function L(t){let s={};return t&&t.forEach((e,n)=>{s[n]=e,n.toLowerCase()==="set-cookie"&&(s[n]=q(e))}),s}function q(t){let s=[],e=0,n,g,y,j,O;function E(){for(;e<t.length&&/\s/.test(t.charAt(e));)e+=1;return e<t.length}function N(){return g=t.charAt(e),g!=="="&&g!==";"&&g!==","}for(;e<t.length;){for(n=e,O=!1;E();)if(g=t.charAt(e),g===","){for(y=e,e+=1,E(),j=e;e<t.length&&N();)e+=1;e<t.length&&t.charAt(e)==="="?(O=!0,e=j,s.push(t.substring(n,y)),n=e):e=y+1}else e+=1;(!O||e>=t.length)&&s.push(t.substring(n,t.length))}return s}function B(t){let s=t.staticRoutes.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page})),e=t.dynamicRoutes?.map(n=>({regexp:new RegExp(n.namedRegex),page:n.page}))||[];return async function(n,g){let y=new URL(n.url).pathname,j={};if(t.nextConfig?.basePath&&y.startsWith(t.nextConfig.basePath)&&(y=y.replace(t.nextConfig.basePath,"")||"/"),t.nextConfig?.i18n)for(let E of t.nextConfig.i18n.locales){let N=new RegExp(`^/${E}($|/)`,"i");if(y.match(N)){y=y.replace(N,"/")||"/";break}}for(let E of s)if(E.regexp.exec(y)){j.name=E.page;break}if(!j.name){let E=I(y);for(let N of e||[]){if(E&&!I(N.page))continue;let U=N.regexp.exec(y);if(U){j={name:N.page,params:U.groups};break}}}let O=await M({waitUntil:g.waitUntil},()=>p._ENTRIES[`middleware_${t.name}`].default.call({},{request:{url:n.url,method:n.method,headers:L(n.headers),ip:R(n.headers,"x-real-ip"),geo:{city:R(n.headers,"x-vercel-ip-city",!0),country:R(n.headers,"x-vercel-ip-country",!0),latitude:R(n.headers,"x-vercel-ip-latitude"),longitude:R(n.headers,"x-vercel-ip-longitude"),region:R(n.headers,"x-vercel-ip-country-region",!0)},nextConfig:t.nextConfig,page:j,body:n.body}}));return O.waitUntil&&g.waitUntil(O.waitUntil),O.response}}function R(t,s,e=!1){let n=t.get(s)||void 0;return e&&n?decodeURIComponent(n):n}function I(t){return t==="/api"||t.startsWith("/api/")}}(f,f.exports),f.exports}.call({}).default({name:"app/api/agent-tasks/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/coming-soon",regex:"^/coming\\-soon(?:/)?$",routeKeys:{},namedRegex:"^/coming\\-soon(?:/)?$"},{page:"/corde",regex:"^/corde(?:/)?$",routeKeys:{},namedRegex:"^/corde(?:/)?$"},{page:"/frh",regex:"^/frh(?:/)?$",routeKeys:{},namedRegex:"^/frh(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/social",regex:"^/social(?:/)?$",routeKeys:{},namedRegex:"^/social(?:/)?$"}],dynamicRoutes:[{page:"/api/agent-tasks/[id]",regex:"^/api/agent\\-tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/agent\\-tasks/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"}],nextConfig:{basePath:""}})))(k,k,k);export{Nt as default};
