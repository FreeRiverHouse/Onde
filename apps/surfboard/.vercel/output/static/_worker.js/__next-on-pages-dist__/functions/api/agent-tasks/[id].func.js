var H=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var Y=(u,h)=>()=>(u&&(h=u(u=0)),h);var B=(u,h,F,g)=>{if(h&&typeof h=="object"||typeof h=="function")for(let m of Q(h))!V.call(u,m)&&m!==F&&H(u,m,{get:()=>h[m],enumerable:!(g=J(h,m))||g.enumerable});return u},K=(u,h,F)=>(B(u,h,"default"),F&&B(F,h,"default"));var Z=u=>B(H({},"__esModule",{value:!0}),u);var $={};import*as ft from"async_hooks";var G=Y(()=>{K($,ft)});import{__getNamedExports as ee}from"../../../../__next-on-pages-dist__/webpack/562f1929e61c51936b027740cd20d5f9.js";import{__getNamedExports as te}from"../../../../__next-on-pages-dist__/webpack/3326.js";import{__getNamedExports as ne}from"../../../../__next-on-pages-dist__/webpack/d6830180ae0f03b84fd7a5e7248c5aa2.js";import{__getNamedExports as _e}from"../../../../__next-on-pages-dist__/webpack/d2550da8fc2781985fea0b1c0d3097c7.js";import{__getNamedExports as ae}from"../../../../__next-on-pages-dist__/webpack/030bd997c35875172fa1ffa5b8a901e4.js";import{__getNamedExports as re}from"../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var p=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/agent-tasks/[id]"),W=ee(p,p,p),oe=W.__chunk_5822,se=W.__chunk_7185,ce=te(p,p,p),ue=ce.__chunk_3326,S=ne(p,p,p),ie=S.__chunk_6195,ke=S.__chunk_2067,he=S.__chunk_5558,pe=S.__chunk_5303,de=S.__chunk_5228,fe=S.__chunk_1959,E=_e(p,p,p),le=E.__chunk_1730,ge=E.__chunk_3818,me=E.__chunk_7037,xe=E.__chunk_1863,be=E.__chunk_932,Ee=E.__chunk_581,ye=E.__chunk_2561,ve=E.__chunk_2988,Ne=E.__chunk_2039,we=E.__chunk_5028,je=E.__chunk_9548,Re=E.__chunk_6914,Oe=E.__chunk_7960,Te=E.__chunk_5996,Ae=E.__chunk_4337,r=ae(p,p,p),Pe=r.__chunk_5405,Ce=r.__chunk_7322,Se=r.__chunk_5276,Fe=r.__chunk_5577,Ie=r.__chunk_3039,$e=r.__chunk_9573,Me=r.__chunk_7701,De=r.__chunk_662,Ue=r.__chunk_4101,Le=r.__chunk_6776,qe=r.__chunk_8042,Be=r.__chunk_3665,Ke=r.__chunk_7444,Xe=r.__chunk_4591,He=r.__chunk_6991,Ge=r.__chunk_8816,We=r.__chunk_6631,ze=r.__chunk_4828,Je=r.__chunk_828,Qe=r.__chunk_5927,Ve=r.__chunk_6202,Ye=r.__chunk_6947,Ze=r.__chunk_4363,et=r.__chunk_8264,tt=r.__chunk_1583,nt=r.__chunk_9985,_t=r.__chunk_4155,at=r.__chunk_7908,rt=r.__chunk_8949,ot=r.__chunk_796,st=r.__chunk_1651,ct=r.__chunk_5105,ut=r.__chunk_9642,it=r.__chunk_8819,kt=r.__chunk_676,z=re(p,p,p),ht=z.__NEXT_FONT_MANIFEST,pt=z.__REACT_LOADABLE_MANIFEST,yt=((u,h,F)=>(h._ENTRIES={},u.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/fd9d1056-dcba7f094ce3d609.js","static/chunks/30-b50f13889648ea77.js","static/chunks/main-app-17503da640fcbefb.js"],pages:{"/_app":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-cd26d40301e263df.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-cd26d40301e263df.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},u.__BUILD_MANIFEST.lowPriorityFiles=["/static/YcCdT5nboS_5lNSC1gVhr/_buildManifest.js",,"/static/YcCdT5nboS_5lNSC1gVhr/_ssgManifest.js"],u.__REACT_LOADABLE_MANIFEST=pt,u.__NEXT_FONT_MANIFEST=ht,u.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var g={},m={};function a(n){var c=m[n];if(c!==void 0)return c.exports;var k=m[n]={exports:{}},x=!0;try{g[n](k,k.exports,a),x=!1}finally{x&&delete m[n]}return k.exports}a.m=g,a.amdO={},(()=>{var n=[];a.O=(c,k,x,b)=>{if(k){b=b||0;for(var d=n.length;d>0&&n[d-1][2]>b;d--)n[d]=n[d-1];n[d]=[k,x,b];return}for(var i=1/0,d=0;d<n.length;d++){for(var[k,x,b]=n[d],v=!0,l=0;l<k.length;l++)i>=b&&Object.keys(a.O).every(C=>a.O[C](k[l]))?k.splice(l--,1):(v=!1,b<i&&(i=b));if(v){n.splice(d--,1);var N=x();N!==void 0&&(c=N)}}return c}})(),a.n=n=>{var c=n&&n.__esModule?()=>n.default:()=>n;return a.d(c,{a:c}),c},a.d=(n,c)=>{for(var k in c)a.o(c,k)&&!a.o(n,k)&&Object.defineProperty(n,k,{enumerable:!0,get:c[k]})},a.e=()=>Promise.resolve(),a.g=function(){if(typeof h=="object")return h;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(n,c)=>Object.prototype.hasOwnProperty.call(n,c),a.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n={993:0};a.O.j=x=>n[x]===0;var c=(x,b)=>{var d,i,[v,l,N]=b,A=0;if(v.some(R=>n[R]!==0)){for(d in l)a.o(l,d)&&(a.m[d]=l[d]);if(N)var P=N(a)}for(x&&x(b);A<v.length;A++)i=v[A],a.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return a.O(P)},k=u.webpackChunk_N_E=u.webpackChunk_N_E||[];k.forEach(c.bind(null,0)),k.push=c.bind(null,k.push.bind(k))})()})(),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[241],{676:kt,8819:it,9642:ut,5105:ct,1651:st,796:ot,8949:rt,7908:at,4155:_t,9985:nt,1583:tt,8264:et,4363:Ze,6947:Ye,6202:Ve,5927:Qe,828:Je,4828:ze,6631:We,8816:Ge,6991:He,4591:Xe,7444:Ke,3665:Be,8042:qe,6776:Le,4101:Ue,662:De,7701:Me,9573:$e,3039:Ie,5577:Fe,1959:fe,5276:Se,5228:de,5303:pe,7322:Ce,5558:he,5405:Pe}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[805],{4337:Ae,5996:Te,7960:Oe,6914:Re,9548:je,5028:we,2039:Ne,2988:ve,2561:ye,581:Ee,932:be,1863:xe,7037:me,3818:ge,1730:le}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[122],{2067:ke,6195:ie,2615:(g,m,a)=>{"use strict";a.r(m),a.d(m,{ComponentMod:()=>q,default:()=>O});var n={};a.r(n),a.d(n,{GET:()=>A,PATCH:()=>P,runtime:()=>N});var c={};a.r(c),a.d(c,{originalPathname:()=>U,patchFetch:()=>L,requestAsyncStorage:()=>D,routeModule:()=>R,serverHooks:()=>M,staticGenerationAsyncStorage:()=>C});var k=a(932),x=a(2561),b=a(4828),d=a(6631),i=a(9985),v=a(5822),l=a(3326);let N="edge";async function A(I,e){try{let{env:o}=(0,v.getRequestContext)(),t=o.DB,{id:_}=await e.params;if(!t)return i.xk.json({error:"Database not available"},{status:500});let s=await(0,l.d_)(t,_);return s?i.xk.json({success:!0,task:s}):i.xk.json({error:"Task not found"},{status:404})}catch(o){return console.error("Agent task GET error:",o),i.xk.json({error:"Failed to fetch task"},{status:500})}}async function P(I,e){try{let{env:o}=(0,v.getRequestContext)(),t=o.DB,{id:_}=await e.params;if(!t)return i.xk.json({error:"Database not available"},{status:500});let s=await I.json();if(!s.action)return i.xk.json({error:"Missing required field: action"},{status:400});let f=!1,y="";switch(s.action){case"claim":if(!s.agent_name)return i.xk.json({error:"agent_name is required for claim action"},{status:400});y=(f=await(0,l.$)(t,_,s.agent_name))?`Task claimed by ${s.agent_name}`:"Failed to claim task (may already be claimed or not exist)";break;case"start":y=(f=await(0,l.Rr)(t,_))?"Task started":"Failed to start task (must be claimed first)";break;case"complete":if(!s.result)return i.xk.json({error:"result is required for complete action"},{status:400});y=(f=await(0,l.Xw)(t,_,s.result))?"Task completed":"Failed to complete task";break;case"fail":if(!s.error)return i.xk.json({error:"error is required for fail action"},{status:400});y=(f=await(0,l.zf)(t,_,s.error))?"Task marked as failed":"Failed to update task";break;default:return i.xk.json({error:"Invalid action. Must be one of: claim, start, complete, fail"},{status:400})}if(!f)return i.xk.json({error:y},{status:400});let w=await(0,l.d_)(t,_);return i.xk.json({success:!0,message:y,task:w})}catch(o){return console.error("Agent task PATCH error:",o),i.xk.json({error:"Failed to update task"},{status:500})}}let R=new x.AppRouteRouteModule({definition:{kind:b.x.APP_ROUTE,page:"/api/agent-tasks/[id]/route",pathname:"/api/agent-tasks/[id]",filename:"route",bundlePath:"app/api/agent-tasks/[id]/route"},resolvedPagePath:"/Users/mattiapetrucciani/CascadeProjects/Onde/apps/surfboard/src/app/api/agent-tasks/[id]/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:D,staticGenerationAsyncStorage:C,serverHooks:M}=R,U="/api/agent-tasks/[id]/route";function L(){return(0,d.XH)({serverHooks:M,staticGenerationAsyncStorage:C})}let q=c,O=k.a.wrap(R)},7185:se,3326:ue,5822:oe},g=>{var m=n=>g(g.s=n);g.O(0,[241,805],()=>m(2615));var a=g.O();(h._ENTRIES=typeof h._ENTRIES>"u"?{}:h._ENTRIES)["middleware_app/api/agent-tasks/[id]/route"]=a}]),function(){let g={exports:{},loaded:!1};return function(a,n){"use strict";var c=Object.defineProperty,k=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,b=Object.prototype.hasOwnProperty,d=(e,o)=>{for(var t in o)c(e,t,{get:o[t],enumerable:!0})},i=(e,o,t,_)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of x(o))!b.call(e,s)&&s!==t&&c(e,s,{get:()=>o[s],enumerable:!(_=k(o,s))||_.enumerable});return e},v=e=>i(c({},"__esModule",{value:!0}),e),l={};d(l,{default:()=>q}),a.exports=v(l);var N=(G(),Z($)),A="@next/request-context",P=Symbol.for(A),R=Symbol.for("internal.storage");function D(){let e=h;if(!e[P]){let o=new N.AsyncLocalStorage,t={get:()=>o.getStore(),[R]:o};e[P]=t}return e[P]}var C=D();function M(e,o){return C[R].run(e,o)}function U(e){let o={};return e&&e.forEach((t,_)=>{o[_]=t,_.toLowerCase()==="set-cookie"&&(o[_]=L(t))}),o}function L(e){let o=[],t=0,_,s,f,y,w;function j(){for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length}function T(){return s=e.charAt(t),s!=="="&&s!==";"&&s!==","}for(;t<e.length;){for(_=t,w=!1;j();)if(s=e.charAt(t),s===","){for(f=t,t+=1,j(),y=t;t<e.length&&T();)t+=1;t<e.length&&e.charAt(t)==="="?(w=!0,t=y,o.push(e.substring(_,f)),_=t):t=f+1}else t+=1;(!w||t>=e.length)&&o.push(e.substring(_,e.length))}return o}function q(e){let o=e.staticRoutes.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page})),t=e.dynamicRoutes?.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page}))||[];return async function(_,s){let f=new URL(_.url).pathname,y={};if(e.nextConfig?.basePath&&f.startsWith(e.nextConfig.basePath)&&(f=f.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let j of e.nextConfig.i18n.locales){let T=new RegExp(`^/${j}($|/)`,"i");if(f.match(T)){f=f.replace(T,"/")||"/";break}}for(let j of o)if(j.regexp.exec(f)){y.name=j.page;break}if(!y.name){let j=I(f);for(let T of t||[]){if(j&&!I(T.page))continue;let X=T.regexp.exec(f);if(X){y={name:T.page,params:X.groups};break}}}let w=await M({waitUntil:s.waitUntil},()=>h._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:_.url,method:_.method,headers:U(_.headers),ip:O(_.headers,"x-real-ip"),geo:{city:O(_.headers,"x-vercel-ip-city",!0),country:O(_.headers,"x-vercel-ip-country",!0),latitude:O(_.headers,"x-vercel-ip-latitude"),longitude:O(_.headers,"x-vercel-ip-longitude"),region:O(_.headers,"x-vercel-ip-country-region",!0)},nextConfig:e.nextConfig,page:y,body:_.body}}));return w.waitUntil&&s.waitUntil(w.waitUntil),w.response}}function O(e,o,t=!1){let _=e.get(o)||void 0;return t&&_?decodeURIComponent(_):_}function I(e){return e==="/api"||e.startsWith("/api/")}}(g,g.exports),g.exports}.call({}).default({name:"app/api/agent-tasks/[id]/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/coming-soon",regex:"^/coming\\-soon(?:/)?$",routeKeys:{},namedRegex:"^/coming\\-soon(?:/)?$"},{page:"/corde",regex:"^/corde(?:/)?$",routeKeys:{},namedRegex:"^/corde(?:/)?$"},{page:"/frh",regex:"^/frh(?:/)?$",routeKeys:{},namedRegex:"^/frh(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/social",regex:"^/social(?:/)?$",routeKeys:{},namedRegex:"^/social(?:/)?$"}],dynamicRoutes:[{page:"/api/agent-tasks/[id]",regex:"^/api/agent\\-tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/agent\\-tasks/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"}],nextConfig:{basePath:""}})))(p,p,p);export{yt as default};
