var H=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var Y=(u,k)=>()=>(u&&(k=u(u=0)),k);var q=(u,k,S,l)=>{if(k&&typeof k=="object"||typeof k=="function")for(let x of Q(k))!V.call(u,x)&&x!==S&&H(u,x,{get:()=>k[x],enumerable:!(l=J(k,x))||l.enumerable});return u},B=(u,k,S)=>(q(u,k,"default"),S&&q(S,k,"default"));var Z=u=>q(H({},"__esModule",{value:!0}),u);var I={};import*as gt from"async_hooks";var G=Y(()=>{B(I,gt)});import{__getNamedExports as ee}from"../../../../__next-on-pages-dist__/webpack/562f1929e61c51936b027740cd20d5f9.js";import{__getNamedExports as te}from"../../../../__next-on-pages-dist__/webpack/3326.js";import{__getNamedExports as ne}from"../../../../__next-on-pages-dist__/webpack/d6830180ae0f03b84fd7a5e7248c5aa2.js";import{__getNamedExports as _e}from"../../../../__next-on-pages-dist__/webpack/d2550da8fc2781985fea0b1c0d3097c7.js";import{__getNamedExports as ae}from"../../../../__next-on-pages-dist__/webpack/030bd997c35875172fa1ffa5b8a901e4.js";import{__getNamedExports as re}from"../../../../__next-on-pages-dist__/manifest/537259e2ed205f5a7994cb4f05664668.js";var h=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/agent-tasks/[id]"),W=ee(h,h,h),oe=W.__chunk_5822,se=W.__chunk_7185,ce=te(h,h,h),ue=ce.__chunk_3326,C=ne(h,h,h),ie=C.__chunk_6195,pe=C.__chunk_2067,ke=C.__chunk_5558,he=C.__chunk_5303,de=C.__chunk_5228,ge=C.__chunk_1959,E=_e(h,h,h),fe=E.__chunk_1730,le=E.__chunk_3818,xe=E.__chunk_7037,me=E.__chunk_1863,be=E.__chunk_932,Ee=E.__chunk_581,ye=E.__chunk_2561,ve=E.__chunk_2988,Ne=E.__chunk_2039,we=E.__chunk_5028,Re=E.__chunk_9548,je=E.__chunk_6914,Pe=E.__chunk_7960,Oe=E.__chunk_5996,Te=E.__chunk_4337,r=ae(h,h,h),Ae=r.__chunk_5405,$e=r.__chunk_7322,Ce=r.__chunk_5276,Se=r.__chunk_5577,Fe=r.__chunk_3039,Ie=r.__chunk_9573,Me=r.__chunk_7701,De=r.__chunk_662,Ue=r.__chunk_4101,Le=r.__chunk_6776,Ke=r.__chunk_8042,qe=r.__chunk_3665,Be=r.__chunk_7444,Xe=r.__chunk_4591,He=r.__chunk_6991,Ge=r.__chunk_8816,We=r.__chunk_6631,ze=r.__chunk_4828,Je=r.__chunk_828,Qe=r.__chunk_5927,Ve=r.__chunk_6202,Ye=r.__chunk_6947,Ze=r.__chunk_4363,et=r.__chunk_8264,tt=r.__chunk_1583,nt=r.__chunk_9985,_t=r.__chunk_4155,at=r.__chunk_7908,rt=r.__chunk_8949,ot=r.__chunk_796,st=r.__chunk_1651,ct=r.__chunk_5105,ut=r.__chunk_9642,it=r.__chunk_8819,pt=r.__chunk_676,z=re(h,h,h),kt=z.__NEXT_FONT_MANIFEST,ht=z.__REACT_LOADABLE_MANIFEST,yt=((u,k,S)=>(k._ENTRIES={},u.__BUILD_MANIFEST={polyfillFiles:["static/chunks/polyfills-42372ed130431b0a.js"],devFiles:[],ampDevFiles:[],lowPriorityFiles:[],rootMainFiles:["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/fd9d1056-dcba7f094ce3d609.js","static/chunks/30-b50f13889648ea77.js","static/chunks/main-app-17503da640fcbefb.js"],pages:{"/_app":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-dc5c0cdb2c2c0bdb.js","static/chunks/pages/_app-72b849fbd24ac258.js"],"/_error":["static/chunks/webpack-a3c37fcbf859f6f9.js","static/chunks/framework-3664cab31236a9fa.js","static/chunks/main-dc5c0cdb2c2c0bdb.js","static/chunks/pages/_error-7ba65e1336b92748.js"]},ampFirstPages:[]},u.__BUILD_MANIFEST.lowPriorityFiles=["/static/FQBh2Ar4Fsg4ZG1NC9Wb7/_buildManifest.js",,"/static/FQBh2Ar4Fsg4ZG1NC9Wb7/_ssgManifest.js"],u.__REACT_LOADABLE_MANIFEST=ht,u.__NEXT_FONT_MANIFEST=kt,u.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",(()=>{"use strict";var l={},x={};function a(n){var c=x[n];if(c!==void 0)return c.exports;var p=x[n]={exports:{}},m=!0;try{l[n](p,p.exports,a),m=!1}finally{m&&delete x[n]}return p.exports}a.m=l,a.amdO={},(()=>{var n=[];a.O=(c,p,m,b)=>{if(p){b=b||0;for(var d=n.length;d>0&&n[d-1][2]>b;d--)n[d]=n[d-1];n[d]=[p,m,b];return}for(var i=1/0,d=0;d<n.length;d++){for(var[p,m,b]=n[d],v=!0,f=0;f<p.length;f++)i>=b&&Object.keys(a.O).every($=>a.O[$](p[f]))?p.splice(f--,1):(v=!1,b<i&&(i=b));if(v){n.splice(d--,1);var N=m();N!==void 0&&(c=N)}}return c}})(),a.n=n=>{var c=n&&n.__esModule?()=>n.default:()=>n;return a.d(c,{a:c}),c},a.d=(n,c)=>{for(var p in c)a.o(c,p)&&!a.o(n,p)&&Object.defineProperty(n,p,{enumerable:!0,get:c[p]})},a.e=()=>Promise.resolve(),a.g=function(){if(typeof k=="object")return k;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(n,c)=>Object.prototype.hasOwnProperty.call(n,c),a.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n={993:0};a.O.j=m=>n[m]===0;var c=(m,b)=>{var d,i,[v,f,N]=b,T=0;if(v.some(j=>n[j]!==0)){for(d in f)a.o(f,d)&&(a.m[d]=f[d]);if(N)var A=N(a)}for(m&&m(b);T<v.length;T++)i=v[T],a.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return a.O(A)},p=u.webpackChunk_N_E=u.webpackChunk_N_E||[];p.forEach(c.bind(null,0)),p.push=c.bind(null,p.push.bind(p))})()})(),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[241],{676:pt,8819:it,9642:ut,5105:ct,1651:st,796:ot,8949:rt,7908:at,4155:_t,9985:nt,1583:tt,8264:et,4363:Ze,6947:Ye,6202:Ve,5927:Qe,828:Je,4828:ze,6631:We,8816:Ge,6991:He,4591:Xe,7444:Be,3665:qe,8042:Ke,6776:Le,4101:Ue,662:De,7701:Me,9573:Ie,3039:Fe,5577:Se,1959:ge,5276:Ce,5228:de,5303:he,7322:$e,5558:ke,5405:Ae}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[805],{4337:Te,5996:Oe,7960:Pe,6914:je,9548:Re,5028:we,2039:Ne,2988:ve,2561:ye,581:Ee,932:be,1863:me,7037:xe,3818:le,1730:fe}]),(u.webpackChunk_N_E=u.webpackChunk_N_E||[]).push([[122],{2067:pe,6195:ie,2615:(l,x,a)=>{"use strict";a.r(x),a.d(x,{ComponentMod:()=>K,default:()=>P});var n={};a.r(n),a.d(n,{GET:()=>T,PATCH:()=>A,runtime:()=>N});var c={};a.r(c),a.d(c,{originalPathname:()=>U,patchFetch:()=>L,requestAsyncStorage:()=>D,routeModule:()=>j,serverHooks:()=>M,staticGenerationAsyncStorage:()=>$});var p=a(932),m=a(2561),b=a(4828),d=a(6631),i=a(9985),v=a(5822),f=a(3326);let N="edge";async function T(F,e){try{let{env:o}=(0,v.getRequestContext)(),t=o.DB,{id:_}=await e.params;if(!t)return i.xk.json({error:"Database not available"},{status:500});let s=await(0,f.d_)(t,_);return s?i.xk.json({success:!0,task:s}):i.xk.json({error:"Task not found"},{status:404})}catch(o){return console.error("Agent task GET error:",o),i.xk.json({error:"Failed to fetch task"},{status:500})}}async function A(F,e){try{let{env:o}=(0,v.getRequestContext)(),t=o.DB,{id:_}=await e.params;if(!t)return i.xk.json({error:"Database not available"},{status:500});let s=await F.json();if(!s.action)return i.xk.json({error:"Missing required field: action"},{status:400});let g=!1,y="";switch(s.action){case"claim":if(!s.agent_name)return i.xk.json({error:"agent_name is required for claim action"},{status:400});y=(g=await(0,f.$)(t,_,s.agent_name))?`Task claimed by ${s.agent_name}`:"Failed to claim task (may already be claimed or not exist)";break;case"start":y=(g=await(0,f.Rr)(t,_))?"Task started":"Failed to start task (must be claimed first)";break;case"complete":if(!s.result)return i.xk.json({error:"result is required for complete action"},{status:400});y=(g=await(0,f.Xw)(t,_,s.result))?"Task completed":"Failed to complete task";break;case"fail":if(!s.error)return i.xk.json({error:"error is required for fail action"},{status:400});y=(g=await(0,f.zf)(t,_,s.error))?"Task marked as failed":"Failed to update task";break;default:return i.xk.json({error:"Invalid action. Must be one of: claim, start, complete, fail"},{status:400})}if(!g)return i.xk.json({error:y},{status:400});let w=await(0,f.d_)(t,_);return i.xk.json({success:!0,message:y,task:w})}catch(o){return console.error("Agent task PATCH error:",o),i.xk.json({error:"Failed to update task"},{status:500})}}let j=new m.AppRouteRouteModule({definition:{kind:b.x.APP_ROUTE,page:"/api/agent-tasks/[id]/route",pathname:"/api/agent-tasks/[id]",filename:"route",bundlePath:"app/api/agent-tasks/[id]/route"},resolvedPagePath:"/Users/mattiapetrucciani/CascadeProjects/Onde/apps/surfboard/src/app/api/agent-tasks/[id]/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:D,staticGenerationAsyncStorage:$,serverHooks:M}=j,U="/api/agent-tasks/[id]/route";function L(){return(0,d.XH)({serverHooks:M,staticGenerationAsyncStorage:$})}let K=c,P=p.a.wrap(j)},7185:se,3326:ue,5822:oe},l=>{var x=n=>l(l.s=n);l.O(0,[241,805],()=>x(2615));var a=l.O();(k._ENTRIES=typeof k._ENTRIES>"u"?{}:k._ENTRIES)["middleware_app/api/agent-tasks/[id]/route"]=a}]),function(){let l={exports:{},loaded:!1};return function(a,n){"use strict";var c=Object.defineProperty,p=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,b=Object.prototype.hasOwnProperty,d=(e,o)=>{for(var t in o)c(e,t,{get:o[t],enumerable:!0})},i=(e,o,t,_)=>{if(o&&typeof o=="object"||typeof o=="function")for(let s of m(o))!b.call(e,s)&&s!==t&&c(e,s,{get:()=>o[s],enumerable:!(_=p(o,s))||_.enumerable});return e},v=e=>i(c({},"__esModule",{value:!0}),e),f={};d(f,{default:()=>K}),a.exports=v(f);var N=(G(),Z(I)),T="@next/request-context",A=Symbol.for(T),j=Symbol.for("internal.storage");function D(){let e=k;if(!e[A]){let o=new N.AsyncLocalStorage,t={get:()=>o.getStore(),[j]:o};e[A]=t}return e[A]}var $=D();function M(e,o){return $[j].run(e,o)}function U(e){let o={};return e&&e.forEach((t,_)=>{o[_]=t,_.toLowerCase()==="set-cookie"&&(o[_]=L(t))}),o}function L(e){let o=[],t=0,_,s,g,y,w;function R(){for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length}function O(){return s=e.charAt(t),s!=="="&&s!==";"&&s!==","}for(;t<e.length;){for(_=t,w=!1;R();)if(s=e.charAt(t),s===","){for(g=t,t+=1,R(),y=t;t<e.length&&O();)t+=1;t<e.length&&e.charAt(t)==="="?(w=!0,t=y,o.push(e.substring(_,g)),_=t):t=g+1}else t+=1;(!w||t>=e.length)&&o.push(e.substring(_,e.length))}return o}function K(e){let o=e.staticRoutes.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page})),t=e.dynamicRoutes?.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page}))||[];return async function(_,s){let g=new URL(_.url).pathname,y={};if(e.nextConfig?.basePath&&g.startsWith(e.nextConfig.basePath)&&(g=g.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let R of e.nextConfig.i18n.locales){let O=new RegExp(`^/${R}($|/)`,"i");if(g.match(O)){g=g.replace(O,"/")||"/";break}}for(let R of o)if(R.regexp.exec(g)){y.name=R.page;break}if(!y.name){let R=F(g);for(let O of t||[]){if(R&&!F(O.page))continue;let X=O.regexp.exec(g);if(X){y={name:O.page,params:X.groups};break}}}let w=await M({waitUntil:s.waitUntil},()=>k._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:_.url,method:_.method,headers:U(_.headers),ip:P(_.headers,"x-real-ip"),geo:{city:P(_.headers,"x-vercel-ip-city",!0),country:P(_.headers,"x-vercel-ip-country",!0),latitude:P(_.headers,"x-vercel-ip-latitude"),longitude:P(_.headers,"x-vercel-ip-longitude"),region:P(_.headers,"x-vercel-ip-country-region",!0)},nextConfig:e.nextConfig,page:y,body:_.body}}));return w.waitUntil&&s.waitUntil(w.waitUntil),w.response}}function P(e,o,t=!1){let _=e.get(o)||void 0;return t&&_?decodeURIComponent(_):_}function F(e){return e==="/api"||e.startsWith("/api/")}}(l,l.exports),l.exports}.call({}).default({name:"app/api/agent-tasks/[id]/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/coming-soon",regex:"^/coming\\-soon(?:/)?$",routeKeys:{},namedRegex:"^/coming\\-soon(?:/)?$"},{page:"/corde",regex:"^/corde(?:/)?$",routeKeys:{},namedRegex:"^/corde(?:/)?$"},{page:"/frh",regex:"^/frh(?:/)?$",routeKeys:{},namedRegex:"^/frh(?:/)?$"},{page:"/house",regex:"^/house(?:/)?$",routeKeys:{},namedRegex:"^/house(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/pr",regex:"^/pr(?:/)?$",routeKeys:{},namedRegex:"^/pr(?:/)?$"},{page:"/social",regex:"^/social(?:/)?$",routeKeys:{},namedRegex:"^/social(?:/)?$"}],dynamicRoutes:[{page:"/api/agent-tasks/[id]",regex:"^/api/agent\\-tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/agent\\-tasks/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"},{page:"/api/pr/posts/[id]/approve",regex:"^/api/pr/posts/([^/]+?)/approve(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/pr/posts/(?<nxtPid>[^/]+?)/approve(?:/)?$"},{page:"/api/pr/posts/[id]/feedback",regex:"^/api/pr/posts/([^/]+?)/feedback(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/pr/posts/(?<nxtPid>[^/]+?)/feedback(?:/)?$"}],nextConfig:{basePath:""}})))(h,h,h);export{yt as default};
