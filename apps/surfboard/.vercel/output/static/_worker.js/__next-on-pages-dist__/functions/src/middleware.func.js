var cs=Object.defineProperty;var nu=Object.getOwnPropertyDescriptor;var iu=Object.getOwnPropertyNames;var au=Object.prototype.hasOwnProperty;var ou=(ze,Se)=>()=>(ze&&(Se=ze(ze=0)),Se);var Ri=(ze,Se,mr,Ae)=>{if(Se&&typeof Se=="object"||typeof Se=="function")for(let F of iu(Se))!au.call(ze,F)&&F!==mr&&cs(ze,F,{get:()=>Se[F],enumerable:!(Ae=nu(Se,F))||Ae.enumerable});return ze},Oi=(ze,Se,mr)=>(Ri(ze,Se,"default"),mr&&Ri(mr,Se,"default"));var su=ze=>Ri(cs({},"__esModule",{value:!0}),ze);var Mr={};import*as Ou from"async_hooks";var ls=ou(()=>{Oi(Mr,Ou)});import{__getNamedExports as cu}from"../../../__next-on-pages-dist__/webpack/d6830180ae0f03b84fd7a5e7248c5aa2.js";var fr=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/src/middleware"),gr=cu(fr,fr,fr),lu=gr.__chunk_5558,uu=gr.__chunk_5303,du=gr.__chunk_5228,pu=gr.__chunk_1959,hu=gr.__chunk_6195,fu=gr.__chunk_2067,Uu=((ze,Se,mr)=>(Se._ENTRIES={},(()=>{"use strict";var Ae={},F={};function G(ne){var le=F[ne];if(le!==void 0)return le.exports;var Y=F[ne]={exports:{}},M=!0;try{Ae[ne](Y,Y.exports,G),M=!1}finally{M&&delete F[ne]}return Y.exports}G.m=Ae,G.amdO={},(()=>{var ne=[];G.O=(le,Y,M,j)=>{if(Y){j=j||0;for(var c=ne.length;c>0&&ne[c-1][2]>j;c--)ne[c]=ne[c-1];ne[c]=[Y,M,j];return}for(var f=1/0,c=0;c<ne.length;c++){for(var[Y,M,j]=ne[c],E=!0,_=0;_<Y.length;_++)f>=j&&Object.keys(G.O).every(m=>G.O[m](Y[_]))?Y.splice(_--,1):(E=!1,j<f&&(f=j));if(E){ne.splice(c--,1);var T=M();T!==void 0&&(le=T)}}return le}})(),G.n=ne=>{var le=ne&&ne.__esModule?()=>ne.default:()=>ne;return G.d(le,{a:le}),le},G.d=(ne,le)=>{for(var Y in le)G.o(le,Y)&&!G.o(ne,Y)&&Object.defineProperty(ne,Y,{enumerable:!0,get:le[Y]})},G.e=()=>Promise.resolve(),G.g=function(){if(typeof Se=="object")return Se;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),G.o=(ne,le)=>Object.prototype.hasOwnProperty.call(ne,le),G.r=ne=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ne,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ne,"__esModule",{value:!0})},(()=>{var ne={993:0};G.O.j=M=>ne[M]===0;var le=(M,j)=>{var c,f,[E,_,T]=j,d=0;if(E.some(x=>ne[x]!==0)){for(c in _)G.o(_,c)&&(G.m[c]=_[c]);if(T)var y=T(G)}for(M&&M(j);d<E.length;d++)f=E[d],G.o(ne,f)&&ne[f]&&ne[f][0](),ne[f]=0;return G.O(y)},Y=ze.webpackChunk_N_E=ze.webpackChunk_N_E||[];Y.forEach(le.bind(null,0)),Y.push=le.bind(null,Y.push.bind(Y))})()})(),(ze.webpackChunk_N_E=ze.webpackChunk_N_E||[]).push([[727],{2067:fu,6195:hu,7299:(Ae,F,G)=>{"use strict";let ne,le,Y,M,j,c,f;G.r(F),G.d(F,{default:()=>ru});var E,_,T={};G.r(T),G.d(T,{parse:()=>gc,serialize:()=>mc});var d={};async function y(){let e="globalThis._ENTRIES"in Se&&Se._ENTRIES.middleware_instrumentation&&(await Se._ENTRIES.middleware_instrumentation).register;if(e)try{await e()}catch(t){throw t.message=`An error occurred while loading instrumentation hook: ${t.message}`,t}}G.r(d),G.d(d,{config:()=>tu,default:()=>eu});let x=null;function C(){return x||(x=y()),x}function m(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==G.g.process&&(process.env=G.g.process.env,G.g.process=process),Object.defineProperty(Se,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(r,n){if(n==="then")return{};throw Error(m(e))},construct(){throw Error(m(e))},apply(r,n,i){if(typeof i[0]=="function")return i[0](t);throw Error(m(e))}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!0}),C();class v extends Error{constructor({page:t}){super(`The middleware "${t}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class w extends Error{constructor(){super("The request.page has been deprecated in favour of `URLPattern`.\n  Read more: https://nextjs.org/docs/messages/middleware-request-page\n  ")}}class S extends Error{constructor(){super("The request.ua has been removed in favour of `userAgent` function.\n  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent\n  ")}}let R={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",api:"api",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route",appRouteHandler:"app-route-handler"};function re(e){var t,r,n,i,a,o=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,a=!1;l();)if((r=e.charAt(s))===","){for(n=s,s+=1,l(),i=s;s<e.length&&(r=e.charAt(s))!=="="&&r!==";"&&r!==",";)s+=1;s<e.length&&e.charAt(s)==="="?(a=!0,s=i,o.push(e.substring(t,n)),t=s):s=n+1}else s+=1;(!a||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function me(e){let t={},r=[];if(e)for(let[n,i]of e.entries())n.toLowerCase()==="set-cookie"?(r.push(...re(i)),t[n]=r.length===1?r[0]:r):t[n]=i;return t}function D(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}({...R,GROUP:(R.reactServerComponents,R.actionBrowser,R.appMetadataRoute,R.appRouteHandler,R.instrument,R.serverSideRendering,R.appPagesBrowser,R.middleware,R.api,R.reactServerComponents,R.actionBrowser,R.appMetadataRoute,R.appRouteHandler,R.serverSideRendering,R.appPagesBrowser,R.shared,R.instrument)});let W=Symbol("response"),V=Symbol("passThrough"),ie=Symbol("waitUntil");class Te{constructor(t){this[ie]=[],this[V]=!1}respondWith(t){this[W]||(this[W]=Promise.resolve(t))}passThroughOnException(){this[V]=!0}waitUntil(t){this[ie].push(t)}}class Ce extends Te{constructor(t){super(t.request),this.sourcePage=t.page}get request(){throw new v({page:this.sourcePage})}respondWith(){throw new v({page:this.sourcePage})}}function Me(e){return e.replace(/\/$/,"")||"/"}function Re(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function Be(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=Re(e);return""+t+r+n+i}function Ve(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=Re(e);return""+r+t+n+i}function N(e,t){if(typeof e!="string")return!1;let{pathname:r}=Re(e);return r===t||r.startsWith(t+"/")}function ee(e,t){let r,n=e.split("/");return(t||[]).some(i=>!!n[1]&&n[1].toLowerCase()===i.toLowerCase()&&(r=i,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}let ke=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function Ne(e,t){return new URL(String(e).replace(ke,"localhost"),t&&String(t).replace(ke,"localhost"))}let X=Symbol("NextURLInternal");class He{constructor(t,r,n){let i,a;typeof r=="object"&&"pathname"in r||typeof r=="string"?(i=r,a=n||{}):a=n||r||{},this[X]={url:Ne(t,i??a.base),options:a,basePath:""},this.analyze()}analyze(){var t,r,n,i,a;let o=function(h,p){var u,k;let{basePath:b,i18n:O,trailingSlash:L}=(u=p.nextConfig)!=null?u:{},A={pathname:h,trailingSlash:h!=="/"?h.endsWith("/"):L};b&&N(A.pathname,b)&&(A.pathname=function($,U){if(!N($,U))return $;let g=$.slice(U.length);return g.startsWith("/")?g:"/"+g}(A.pathname,b),A.basePath=b);let H=A.pathname;if(A.pathname.startsWith("/_next/data/")&&A.pathname.endsWith(".json")){let $=A.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),U=$[0];A.buildId=U,H=$[1]!=="index"?"/"+$.slice(1).join("/"):"/",p.parseData===!0&&(A.pathname=H)}if(O){let $=p.i18nProvider?p.i18nProvider.analyze(A.pathname):ee(A.pathname,O.locales);A.locale=$.detectedLocale,A.pathname=(k=$.pathname)!=null?k:A.pathname,!$.detectedLocale&&A.buildId&&($=p.i18nProvider?p.i18nProvider.analyze(H):ee(H,O.locales)).detectedLocale&&(A.locale=$.detectedLocale)}return A}(this[X].url.pathname,{nextConfig:this[X].options.nextConfig,parseData:!0,i18nProvider:this[X].options.i18nProvider}),s=function(h,p){let u;if(p?.host&&!Array.isArray(p.host))u=p.host.toString().split(":",1)[0];else{if(!h.hostname)return;u=h.hostname}return u.toLowerCase()}(this[X].url,this[X].options.headers);this[X].domainLocale=this[X].options.i18nProvider?this[X].options.i18nProvider.detectDomainLocale(s):function(h,p,u){if(h)for(let O of(u&&(u=u.toLowerCase()),h)){var k,b;if(p===((k=O.domain)==null?void 0:k.split(":",1)[0].toLowerCase())||u===O.defaultLocale.toLowerCase()||((b=O.locales)==null?void 0:b.some(L=>L.toLowerCase()===u)))return O}}((r=this[X].options.nextConfig)==null||(t=r.i18n)==null?void 0:t.domains,s);let l=((n=this[X].domainLocale)==null?void 0:n.defaultLocale)||((a=this[X].options.nextConfig)==null||(i=a.i18n)==null?void 0:i.defaultLocale);this[X].url.pathname=o.pathname,this[X].defaultLocale=l,this[X].basePath=o.basePath??"",this[X].buildId=o.buildId,this[X].locale=o.locale??l,this[X].trailingSlash=o.trailingSlash}formatPathname(){var t;let r;return r=function(n,i,a,o){if(!i||i===a)return n;let s=n.toLowerCase();return!o&&(N(s,"/api")||N(s,"/"+i.toLowerCase()))?n:Be(n,"/"+i)}((t={basePath:this[X].basePath,buildId:this[X].buildId,defaultLocale:this[X].options.forceLocale?void 0:this[X].defaultLocale,locale:this[X].locale,pathname:this[X].url.pathname,trailingSlash:this[X].trailingSlash}).pathname,t.locale,t.buildId?void 0:t.defaultLocale,t.ignorePrefix),(t.buildId||!t.trailingSlash)&&(r=Me(r)),t.buildId&&(r=Ve(Be(r,"/_next/data/"+t.buildId),t.pathname==="/"?"index.json":".json")),r=Be(r,t.basePath),!t.buildId&&t.trailingSlash?r.endsWith("/")?r:Ve(r,"/"):Me(r)}formatSearch(){return this[X].url.search}get buildId(){return this[X].buildId}set buildId(t){this[X].buildId=t}get locale(){return this[X].locale??""}set locale(t){var r,n;if(!this[X].locale||!(!((n=this[X].options.nextConfig)==null||(r=n.i18n)==null)&&r.locales.includes(t)))throw TypeError(`The NextURL configuration includes no locale "${t}"`);this[X].locale=t}get defaultLocale(){return this[X].defaultLocale}get domainLocale(){return this[X].domainLocale}get searchParams(){return this[X].url.searchParams}get host(){return this[X].url.host}set host(t){this[X].url.host=t}get hostname(){return this[X].url.hostname}set hostname(t){this[X].url.hostname=t}get port(){return this[X].url.port}set port(t){this[X].url.port=t}get protocol(){return this[X].url.protocol}set protocol(t){this[X].url.protocol=t}get href(){let t=this.formatPathname(),r=this.formatSearch();return`${this.protocol}//${this.host}${t}${r}${this.hash}`}set href(t){this[X].url=Ne(t),this.analyze()}get origin(){return this[X].url.origin}get pathname(){return this[X].url.pathname}set pathname(t){this[X].url.pathname=t}get hash(){return this[X].url.hash}set hash(t){this[X].url.hash=t}get search(){return this[X].url.search}set search(t){this[X].url.search=t}get password(){return this[X].url.password}set password(t){this[X].url.password=t}get username(){return this[X].url.username}set username(t){this[X].url.username=t}get basePath(){return this[X].basePath}set basePath(t){this[X].basePath=t.startsWith("/")?t:`/${t}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new He(String(this),this[X].options)}}var ye=G(5945);let Oe=Symbol("internal request");class Ue extends Request{constructor(t,r={}){let n=typeof t!="string"&&"url"in t?t.url:String(t);D(n),t instanceof Request?super(t,r):super(n,r);let i=new He(n,{headers:me(this.headers),nextConfig:r.nextConfig});this[Oe]={cookies:new ye.RequestCookies(this.headers),geo:r.geo||{},ip:r.ip,nextUrl:i,url:i.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[Oe].cookies}get geo(){return this[Oe].geo}get ip(){return this[Oe].ip}get nextUrl(){return this[Oe].nextUrl}get page(){throw new w}get ua(){throw new S}get url(){return this[Oe].url}}class _e{static get(t,r,n){let i=Reflect.get(t,r,n);return typeof i=="function"?i.bind(t):i}static set(t,r,n,i){return Reflect.set(t,r,n,i)}static has(t,r){return Reflect.has(t,r)}static deleteProperty(t,r){return Reflect.deleteProperty(t,r)}}let qe=Symbol("internal response"),ft=new Set([301,302,303,307,308]);function Tt(e,t){var r;if(!(e==null||(r=e.request)==null)&&r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let n=[];for(let[i,a]of e.request.headers)t.set("x-middleware-request-"+i,a),n.push(i);t.set("x-middleware-override-headers",n.join(","))}}class We extends Response{constructor(t,r={}){super(t,r);let n=this.headers,i=new Proxy(new ye.ResponseCookies(n),{get(a,o,s){switch(o){case"delete":case"set":return(...l)=>{let h=Reflect.apply(a[o],a,l),p=new Headers(n);return h instanceof ye.ResponseCookies&&n.set("x-middleware-set-cookie",h.getAll().map(u=>(0,ye.stringifyCookie)(u)).join(",")),Tt(r,p),h};default:return _e.get(a,o,s)}}});this[qe]={cookies:i,url:r.url?new He(r.url,{headers:me(n),nextConfig:r.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[qe].cookies}static json(t,r){let n=Response.json(t,r);return new We(n.body,n)}static redirect(t,r){let n=typeof r=="number"?r:r?.status??307;if(!ft.has(n))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let i=typeof r=="object"?r:{},a=new Headers(i?.headers);return a.set("Location",D(t)),new We(null,{...i,headers:a,status:n})}static rewrite(t,r){let n=new Headers(r?.headers);return n.set("x-middleware-rewrite",D(t)),Tt(r,n),new We(null,{...r,headers:n})}static next(t){let r=new Headers(t?.headers);return r.set("x-middleware-next","1"),Tt(t,r),new We(null,{...t,headers:r})}}function et(e,t){let r=typeof t=="string"?new URL(t):t,n=new URL(e,t),i=r.protocol+"//"+r.host;return n.protocol+"//"+n.host===i?n.toString().replace(i,""):n.toString()}let Qe=[["RSC"],["Next-Router-State-Tree"],["Next-Router-Prefetch"]],lt=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound","_rsc"],_t=["__nextDataReq"];class gt extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new gt}}class pt extends Headers{constructor(t){super(),this.headers=new Proxy(t,{get(r,n,i){if(typeof n=="symbol")return _e.get(r,n,i);let a=n.toLowerCase(),o=Object.keys(t).find(s=>s.toLowerCase()===a);if(o!==void 0)return _e.get(r,o,i)},set(r,n,i,a){if(typeof n=="symbol")return _e.set(r,n,i,a);let o=n.toLowerCase(),s=Object.keys(t).find(l=>l.toLowerCase()===o);return _e.set(r,s??n,i,a)},has(r,n){if(typeof n=="symbol")return _e.has(r,n);let i=n.toLowerCase(),a=Object.keys(t).find(o=>o.toLowerCase()===i);return a!==void 0&&_e.has(r,a)},deleteProperty(r,n){if(typeof n=="symbol")return _e.deleteProperty(r,n);let i=n.toLowerCase(),a=Object.keys(t).find(o=>o.toLowerCase()===i);return a===void 0||_e.deleteProperty(r,a)}})}static seal(t){return new Proxy(t,{get(r,n,i){switch(n){case"append":case"delete":case"set":return gt.callable;default:return _e.get(r,n,i)}}})}merge(t){return Array.isArray(t)?t.join(", "):t}static from(t){return t instanceof Headers?t:new pt(t)}append(t,r){let n=this.headers[t];typeof n=="string"?this.headers[t]=[n,r]:Array.isArray(n)?n.push(r):this.headers[t]=r}delete(t){delete this.headers[t]}get(t){let r=this.headers[t];return r!==void 0?this.merge(r):null}has(t){return this.headers[t]!==void 0}set(t,r){this.headers[t]=r}forEach(t,r){for(let[n,i]of this.entries())t.call(r,i,n,this)}*entries(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase(),n=this.get(r);yield[r,n]}}*keys(){for(let t of Object.keys(this.headers))yield t.toLowerCase()}*values(){for(let t of Object.keys(this.headers))yield this.get(t)}[Symbol.iterator](){return this.entries()}}var Pt=G(6865);class Vt extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new Vt}}class yr{static seal(t){return new Proxy(t,{get(r,n,i){switch(n){case"clear":case"delete":case"set":return Vt.callable;default:return _e.get(r,n,i)}}})}}let Hr=Symbol.for("next.mutated.cookies");class rt{static wrap(t,r){let n=new ye.ResponseCookies(new Headers);for(let s of t.getAll())n.set(s);let i=[],a=new Set,o=()=>{let s=Pt.A.getStore();if(s&&(s.pathWasRevalidated=!0),i=n.getAll().filter(l=>a.has(l.name)),r){let l=[];for(let h of i){let p=new ye.ResponseCookies(new Headers);p.set(h),l.push(p.toString())}r(l)}};return new Proxy(n,{get(s,l,h){switch(l){case Hr:return i;case"delete":return function(...p){a.add(typeof p[0]=="string"?p[0]:p[0].name);try{s.delete(...p)}finally{o()}};case"set":return function(...p){a.add(typeof p[0]=="string"?p[0]:p[0].name);try{return s.set(...p)}finally{o()}};default:return _e.get(s,l,h)}}})}}(function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"})(Da||(Da={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(Ma||(Ma={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(Ha||(Ha={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(Wa||(Wa={})),(Ka||(Ka={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(Ba||(Ba={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(Va||(Va={})),(qa||(qa={})).executeRoute="Router.executeRoute",(Ja||(Ja={})).runHandler="Node.runHandler",(Fa||(Fa={})).runHandler="AppRouteRouteHandlers.runHandler",function(e){e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport"}(za||(za={})),(Zn||(Zn={})).execute="Middleware.execute";let Ct=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],Zt=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"],{context:he,propagation:Pe,trace:ue,SpanStatusCode:$e,SpanKind:mt,ROOT_CONTEXT:xe}=ne=G(8439),yt=e=>e!==null&&typeof e=="object"&&typeof e.then=="function",de=(e,t)=>{t?.bubble===!0?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:$e.ERROR,message:t?.message})),e.end()},tt=new Map,Qt=ne.createContextKey("next.rootSpanId"),Wr=0,us=()=>Wr++;class ds{getTracerInstance(){return ue.getTracer("next.js","0.0.1")}getContext(){return he}getActiveScopeSpan(){return ue.getSpan(he?.active())}withPropagatedContext(t,r,n){let i=he.active();if(ue.getSpanContext(i))return r();let a=Pe.extract(i,t,n);return he.with(a,r)}trace(...t){var r;let[n,i,a]=t,{fn:o,options:s}=typeof i=="function"?{fn:i,options:{}}:{fn:a,options:{...i}},l=s.spanName??n;if(!Ct.includes(n)&&process.env.NEXT_OTEL_VERBOSE!=="1"||s.hideSpan)return o();let h=this.getSpanContext(s?.parentSpan??this.getActiveScopeSpan()),p=!1;h?(r=ue.getSpanContext(h))!=null&&r.isRemote&&(p=!0):(h=he?.active()??xe,p=!0);let u=us();return s.attributes={"next.span_name":l,"next.span_type":n,...s.attributes},he.with(h.setValue(Qt,u),()=>this.getTracerInstance().startActiveSpan(l,s,k=>{let b="performance"in Se?Se.performance.now():void 0,O=()=>{tt.delete(u),b&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&Zt.includes(n||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(n.split(".").pop()||"").replace(/[A-Z]/g,L=>"-"+L.toLowerCase())}`,{start:b,end:performance.now()})};p&&tt.set(u,new Map(Object.entries(s.attributes??{})));try{if(o.length>1)return o(k,A=>de(k,A));let L=o(k);return yt(L)?L.then(A=>(k.end(),A)).catch(A=>{throw de(k,A),A}).finally(O):(k.end(),O(),L)}catch(L){throw de(k,L),O(),L}}))}wrap(...t){let r=this,[n,i,a]=t.length===3?t:[t[0],{},t[1]];return Ct.includes(n)||process.env.NEXT_OTEL_VERBOSE==="1"?function(){let o=i;typeof o=="function"&&typeof a=="function"&&(o=o.apply(this,arguments));let s=arguments.length-1,l=arguments[s];if(typeof l!="function")return r.trace(n,o,()=>a.apply(this,arguments));{let h=r.getContext().bind(he.active(),l);return r.trace(n,o,(p,u)=>(arguments[s]=function(k){return u?.(k),h.apply(this,arguments)},a.apply(this,arguments)))}}:a}startSpan(...t){let[r,n]=t,i=this.getSpanContext(n?.parentSpan??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(r,n,i)}getSpanContext(t){return t?ue.setSpan(he.active(),t):void 0}getRootSpanAttributes(){let t=he.active().getValue(Qt);return tt.get(t)}}let Ii=(()=>{let e=new ds;return()=>e})(),Kr="__prerender_bypass";Symbol("__next_preview_data"),Symbol(Kr);class ps{constructor(t,r,n,i){var a;let o=t&&function(l,h){let p=pt.from(l.headers);return{isOnDemandRevalidate:p.get("x-prerender-revalidate")===h.previewModeId,revalidateOnlyGenerated:p.has("x-prerender-revalidate-if-generated")}}(r,t).isOnDemandRevalidate,s=(a=n.get(Kr))==null?void 0:a.value;this.isEnabled=!!(!o&&s&&t&&s===t.previewModeId),this._previewModeId=t?.previewModeId,this._mutableCookies=i}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:Kr,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:Kr,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}function Ui(e,t){if("x-middleware-set-cookie"in e.headers&&typeof e.headers["x-middleware-set-cookie"]=="string"){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let i of re(r))n.append("set-cookie",i);for(let i of new ye.ResponseCookies(n).getAll())t.set(i)}}let hs={wrap(e,{req:t,res:r,renderOpts:n},i){let a;function o(h){r&&r.setHeader("Set-Cookie",h)}n&&"previewProps"in n&&(a=n.previewProps);let s={},l={get headers(){return s.headers||(s.headers=function(h){let p=pt.from(h);for(let u of Qe)p.delete(u.toString().toLowerCase());return pt.seal(p)}(t.headers)),s.headers},get cookies(){if(!s.cookies){let h=new ye.RequestCookies(pt.from(t.headers));Ui(t,h),s.cookies=yr.seal(h)}return s.cookies},get mutableCookies(){if(!s.mutableCookies){let h=function(p,u){let k=new ye.RequestCookies(pt.from(p));return rt.wrap(k,u)}(t.headers,n?.onUpdateCookies||(r?o:void 0));Ui(t,h),s.mutableCookies=h}return s.mutableCookies},get draftMode(){return s.draftMode||(s.draftMode=new ps(a,t,this.cookies,this.mutableCookies)),s.draftMode},reactLoadableManifest:n?.reactLoadableManifest||{},assetPrefix:n?.assetPrefix||""};return e.run(l,i,l)}};var An=G(5303);function Ni(e){let t=An.F.getStore();if(t)return t;throw Error("`"+e+"` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context")}function $i(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID,previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}class fs extends Ue{constructor(t){super(t.input,t.init),this.sourcePage=t.page}get request(){throw new v({page:this.sourcePage})}respondWith(){throw new v({page:this.sourcePage})}waitUntil(){throw new v({page:this.sourcePage})}}let gs={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},Tn=(e,t)=>Ii().withPropagatedContext(e.headers,t,gs),Li=!1;async function ms(e){let t,r;(function(){if(!Li&&(Li=!0,process.env.NEXT_PRIVATE_TEST_PROXY==="true")){let{interceptTestApis:A,wrapRequestHandler:H}=G(4177);A(),Tn=H(Tn)}})(),await C();let n=ze.__BUILD_MANIFEST!==void 0;e.request.url=e.request.url.replace(/\.rsc($|\?)/,"$1");let i=new He(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig});for(let A of[...i.searchParams.keys()]){let H=i.searchParams.getAll(A);(function($,U){for(let g of["nxtP","nxtI"])$!==g&&$.startsWith(g)&&U($.substring(g.length))})(A,$=>{for(let U of(i.searchParams.delete($),H))i.searchParams.append($,U);i.searchParams.delete(A)})}let a=i.buildId;i.buildId="";let o=e.request.headers["x-nextjs-data"];o&&i.pathname==="/index"&&(i.pathname="/");let s=function(A){let H=new Headers;for(let[$,U]of Object.entries(A))for(let g of Array.isArray(U)?U:[U])g!==void 0&&(typeof g=="number"&&(g=g.toString()),H.append($,g));return H}(e.request.headers),l=new Map;if(!n)for(let A of Qe){let H=A.toString().toLowerCase();s.get(H)&&(l.set(H,s.get(H)),s.delete(H))}let h=new fs({page:e.page,input:function(A,H){let $=typeof A=="string",U=$?new URL(A):A;for(let g of lt)U.searchParams.delete(g);if(H)for(let g of _t)U.searchParams.delete(g);return $?U.toString():U}(i,!0).toString(),init:{body:e.request.body,geo:e.request.geo,headers:s,ip:e.request.ip,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});o&&Object.defineProperty(h,"__isData",{enumerable:!1,value:!0}),!Se.__incrementalCacheShared&&e.IncrementalCache&&(Se.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:$i()})}));let p=new Ce({request:h,page:e.page});if((t=await Tn(h,()=>e.page==="/middleware"||e.page==="/src/middleware"?Ii().trace(Zn.execute,{spanName:`middleware ${h.method} ${h.nextUrl.pathname}`,attributes:{"http.target":h.nextUrl.pathname,"http.method":h.method}},()=>hs.wrap(An.F,{req:h,renderOpts:{onUpdateCookies:A=>{r=A},previewProps:$i()}},()=>e.handler(h,p))):e.handler(h,p)))&&!(t instanceof Response))throw TypeError("Expected an instance of Response to be returned");t&&r&&t.headers.set("set-cookie",r);let u=t?.headers.get("x-middleware-rewrite");if(t&&u&&!n){let A=new He(u,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});A.host===h.nextUrl.host&&(A.buildId=a||A.buildId,t.headers.set("x-middleware-rewrite",String(A)));let H=et(String(A),String(i));o&&t.headers.set("x-nextjs-rewrite",H)}let k=t?.headers.get("Location");if(t&&k&&!n){let A=new He(k,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});t=new Response(t.body,t),A.host===h.nextUrl.host&&(A.buildId=a||A.buildId,t.headers.set("Location",String(A))),o&&(t.headers.delete("Location"),t.headers.set("x-nextjs-redirect",et(String(A),String(i))))}let b=t||We.next(),O=b.headers.get("x-middleware-override-headers"),L=[];if(O){for(let[A,H]of l)b.headers.set(`x-middleware-request-${A}`,H),L.push(A);L.length>0&&b.headers.set("x-middleware-override-headers",O+","+L.join(","))}return{response:b,waitUntil:Promise.all(p[ie]),fetchMetrics:h.fetchMetrics}}var ji=function(e,t,r,n,i){if(n==="m")throw TypeError("Private method is not writable");if(n==="a"&&!i)throw TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},at=function(e,t,r,n){if(r==="a"&&!n)throw TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)};function Di(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class ys{constructor(t,r,n){if(Er.add(this),Nt.set(this,{}),or.set(this,void 0),rn.set(this,void 0),ji(this,rn,n,"f"),ji(this,or,t,"f"),!r)return;let{name:i}=t;for(let[a,o]of Object.entries(r))a.startsWith(i)&&o&&(at(this,Nt,"f")[a]=o)}get value(){return Object.keys(at(this,Nt,"f")).sort((t,r)=>parseInt(t.split(".").pop()||"0")-parseInt(r.split(".").pop()||"0")).map(t=>at(this,Nt,"f")[t]).join("")}chunk(t,r){let n=at(this,Er,"m",Qn).call(this);for(let i of at(this,Er,"m",Ga).call(this,{name:at(this,or,"f").name,value:t,options:{...at(this,or,"f").options,...r}}))n[i.name]=i;return Object.values(n)}clean(){return Object.values(at(this,Er,"m",Qn).call(this))}}Nt=new WeakMap,or=new WeakMap,rn=new WeakMap,Er=new WeakSet,Ga=function(e){let t=Math.ceil(e.value.length/3936);if(t===1)return at(this,Nt,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let i=`${e.name}.${n}`,a=e.value.substr(3936*n,3936);r.push({...e,name:i,value:a}),at(this,Nt,"f")[i]=a}return at(this,rn,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(n=>n.value.length+160)}),r},Qn=function(){let e={};for(let t in at(this,Nt,"f"))delete at(this,Nt,"f")?.[t],e[t]={name:t,value:"",options:{...at(this,or,"f").options,maxAge:0}};return e};class we extends Error{constructor(t,r){t instanceof Error?super(void 0,{cause:{err:t,...t.cause,...r}}):typeof t=="string"?(r instanceof Error&&(r={err:r,...r.cause}),super(t,r)):super(void 0,t),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let n=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${n}`}}class $t extends we{}$t.kind="signIn";class Pn extends we{}Pn.type="AdapterError";class wr extends we{}wr.type="AccessDenied";class Mi extends we{}Mi.type="CallbackRouteError";class Hi extends we{}Hi.type="ErrorPageLoop";class Wi extends we{}Wi.type="EventError";class Cn extends we{}Cn.type="InvalidCallbackUrl";class Rn extends $t{constructor(){super(...arguments),this.code="credentials"}}Rn.type="CredentialsSignin";class Ki extends we{}Ki.type="InvalidEndpoints";class er extends we{}er.type="InvalidCheck";class Bi extends we{}Bi.type="JWTSessionError";class br extends we{}br.type="MissingAdapter";class Vi extends we{}Vi.type="MissingAdapterMethods";class qi extends we{}qi.type="MissingAuthorize";class Ji extends we{}Ji.type="MissingSecret";class On extends $t{}On.type="OAuthAccountNotLinked";class In extends $t{}In.type="OAuthCallbackError";class Fi extends we{}Fi.type="OAuthProfileParseError";class zi extends we{}zi.type="SessionTokenError";class ws extends $t{}ws.type="OAuthSignInError";class bs extends $t{}bs.type="EmailSignInError";class Gi extends we{}Gi.type="SignOutError";class qt extends we{}qt.type="UnknownAction";class Xi extends we{}Xi.type="UnsupportedStrategy";class Br extends we{}Br.type="InvalidProvider";class Yi extends we{}Yi.type="UntrustedHost";class Zi extends we{}Zi.type="Verification";class Qi extends $t{}Qi.type="MissingCSRF";let vs=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class ea extends we{}ea.type="DuplicateConditionalUI";class ta extends we{}ta.type="MissingWebAuthnAutocomplete";class vr extends we{}vr.type="WebAuthnVerificationError";class Un extends $t{}Un.type="AccountNotLinked";class ra extends we{}ra.type="ExperimentalFeatureNotEnabled";let Nn=!1;function na(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let ia=!1,$n=!1,aa=!1,_s=["createVerificationToken","useVerificationToken","getUserByEmail"],Ss=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],ks=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"],xs=()=>{if(typeof Se<"u")return Se;if(typeof ze<"u")return ze;if(typeof window<"u")return window;throw Error("unable to locate global object")},Es=async(e,t,r,n,i)=>{let{crypto:{subtle:a}}=xs();return new Uint8Array(await a.deriveBits({name:"HKDF",hash:`SHA-${e.substr(3)}`,salt:r,info:n},await a.importKey("raw",t,"HKDF",!1,["deriveBits"]),i<<3))};function Ln(e,t){if(typeof e=="string")return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function As(e,t,r,n,i){return Es(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(e),function(a){let o=Ln(a,"ikm");if(!o.byteLength)throw TypeError('"ikm" must be at least one byte in length');return o}(t),Ln(r,"salt"),function(a){let o=Ln(a,"info");if(o.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return o}(n),function(a,o){if(typeof a!="number"||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(o.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(i,e))}async function oa(e,t){let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))}let sa=new TextEncoder,tr=new TextDecoder;function Lt(...e){let t=new Uint8Array(e.reduce((n,{length:i})=>n+i,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function jn(e,t,r){if(t<0||t>=4294967296)throw RangeError(`value must be >= 0 and <= ${4294967296-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function ca(e){let t=new Uint8Array(8);return jn(t,Math.floor(e/4294967296),0),jn(t,e%4294967296,4),t}function Dn(e){let t=new Uint8Array(4);return jn(t,e),t}function Rt(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function ot(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof e=="string"?e:tr.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=tr.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{return function(r){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let n=atob(r),i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}(t)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function nt(e){let t=e;return typeof t=="string"&&(t=sa.encode(t)),Uint8Array.prototype.toBase64?t.toBase64({alphabet:"base64url",omitPadding:!0}):function(r){if(Uint8Array.prototype.toBase64)return r.toBase64();let n=[];for(let i=0;i<r.length;i+=32768)n.push(String.fromCharCode.apply(null,r.subarray(i,i+32768)));return btoa(n.join(""))}(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Ot extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(t,r){super(t,r),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class ut extends Ot{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(t,r,n="unspecified",i="unspecified"){super(t,{cause:{claim:n,reason:i,payload:r}}),this.claim=n,this.reason=i,this.payload=r}}class la extends Ot{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(t,r,n="unspecified",i="unspecified"){super(t,{cause:{claim:n,reason:i,payload:r}}),this.claim=n,this.reason=i,this.payload=r}}class ua extends Ot{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class Je extends Ot{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class Mn extends Ot{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(t="decryption operation failed",r){super(t,r)}}class oe extends Ot{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class jt extends Ot{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class Ts extends Ot{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class gu extends Ot{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(t="multiple matching keys found in the JSON Web Key Set",r){super(t,r)}}function _r(e){if(!rr(e))throw Error("CryptoKey instance expected")}let rr=e=>{if(e?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return e instanceof CryptoKey}catch{return!1}},Hn=e=>e?.[Symbol.toStringTag]==="KeyObject",Wn=e=>rr(e)||Hn(e),Ps=e=>typeof e=="object"&&e!==null;function It(e){if(!Ps(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let Vr=e=>It(e)&&typeof e.kty=="string",Cs=e=>e.kty!=="oct"&&(e.kty==="AKP"&&typeof e.priv=="string"||typeof e.d=="string"),Rs=e=>e.kty!=="oct"&&e.d===void 0&&e.priv===void 0,Os=e=>e.kty==="oct"&&typeof e.k=="string";function da(e,t,...r){if((r=r.filter(Boolean)).length>2){let n=r.pop();e+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let nr=(e,...t)=>da("Key must be ",e,...t),pa=(e,t,...r)=>da(`Key for the ${e} algorithm must be `,t,...r);async function Is(e){if(Hn(e)){if(e.type!=="secret")return e.export({format:"jwk"});e=e.export()}if(e instanceof Uint8Array)return{kty:"oct",k:nt(e)};if(!rr(e))throw TypeError(nr(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...a}=await crypto.subtle.exportKey("jwk",e);return a.kty==="AKP"&&(a.alg=n),a}async function ha(e){return Is(e)}let St=(e,t)=>{if(typeof e!="string"||!e)throw new Ts(`${t} missing or invalid`)};async function fa(e,t){let r,n;if(Vr(e))r=e;else if(Wn(e))r=await ha(e);else throw TypeError(nr(e,"CryptoKey","KeyObject","JSON Web Key"));if((t??="sha256")!=="sha256"&&t!=="sha384"&&t!=="sha512")throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"AKP":St(r.alg,'"alg" (Algorithm) Parameter'),St(r.pub,'"pub" (Public key) Parameter'),n={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":St(r.crv,'"crv" (Curve) Parameter'),St(r.x,'"x" (X Coordinate) Parameter'),St(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":St(r.crv,'"crv" (Subtype of Key Pair) Parameter'),St(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":St(r.e,'"e" (Exponent) Parameter'),St(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":St(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new Je('"kty" (Key Type) Parameter missing or unsupported')}let i=Rt(JSON.stringify(n));return nt(await oa(t,i))}let Us=Symbol();function ga(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Je(`Unsupported JWE Algorithm: ${e}`)}}let Ns=e=>crypto.getRandomValues(new Uint8Array(ga(e)>>3));function ma(e,t){if(t.length<<3!==ga(e))throw new oe("Invalid Initialization Vector length")}function qr(e,t){let r=e.byteLength<<3;if(r!==t)throw new oe(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)}let Dt=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`),Jr=(e,t)=>e.name===t;function Mt(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Jr(e.algorithm,"AES-GCM"))throw Dt("AES-GCM");let n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Dt(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Jr(e.algorithm,"AES-KW"))throw Dt("AES-KW");let n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Dt(n,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw Dt("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Jr(e.algorithm,"PBKDF2"))throw Dt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Jr(e.algorithm,"RSA-OAEP"))throw Dt("RSA-OAEP");let n=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==n)throw Dt(`SHA-${n}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}(function(n,i){if(i&&!n.usages.includes(i))throw TypeError(`CryptoKey does not support this operation, its usages must include ${i}.`)})(e,r)}async function $s(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(nr(r,"Uint8Array"));let a=parseInt(e.slice(1,4),10),o=await crypto.subtle.importKey("raw",r.subarray(a>>3),"AES-CBC",!1,["encrypt"]),s=await crypto.subtle.importKey("raw",r.subarray(0,a>>3),{hash:`SHA-${a<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},o,t)),h=Lt(i,n,l,ca(i.length<<3));return{ciphertext:l,tag:new Uint8Array((await crypto.subtle.sign("HMAC",s,h)).slice(0,a>>3)),iv:n}}async function Ls(e,t,r,n,i){let a;r instanceof Uint8Array?a=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(Mt(r,e,"encrypt"),a=r);let o=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},a,t)),s=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:s,iv:n}}async function ya(e,t,r,n,i){if(!rr(r)&&!(r instanceof Uint8Array))throw TypeError(nr(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));switch(n?ma(e,n):n=Ns(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&qr(r,parseInt(e.slice(-3),10)),$s(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&qr(r,parseInt(e.slice(1,4),10)),Ls(e,t,r,n,i);default:throw new Je("Unsupported JWE Content Encryption Algorithm")}}function wa(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function ba(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(Mt(e,t,r),e)}async function Kn(e,t,r){let n=await ba(t,e,"wrapKey");wa(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function Bn(e,t,r){let n=await ba(t,e,"unwrapKey");wa(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}function Vn(e){return Lt(Dn(e.length),e)}async function js(e,t,r){let n=t>>3,i=Math.ceil(n/32),a=new Uint8Array(32*i);for(let o=1;o<=i;o++){let s=new Uint8Array(4+e.length+r.length);s.set(Dn(o),0),s.set(e,4),s.set(r,4+e.length);let l=await oa("sha256",s);a.set(l,(o-1)*32)}return a.slice(0,n)}async function va(e,t,r,n,i=new Uint8Array,a=new Uint8Array){Mt(e,"ECDH"),Mt(t,"ECDH","deriveBits");let o=Vn(Rt(r)),s=Vn(i),l=Lt(o,s,Vn(a),Dn(n),new Uint8Array);return js(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,e.algorithm.name==="X25519"?256:Math.ceil(parseInt(e.algorithm.namedCurve.slice(-3),10)/8)<<3)),n,l)}function _a(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return e.algorithm.name==="X25519"}}let Ds=(e,t)=>Lt(Rt(e),Uint8Array.of(0),t);async function Sa(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new oe("PBES2 Salt Input must be 8 or more octets");let i=Ds(t,e),a=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},s=await(n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(Mt(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(o,s,a))}async function Ms(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let a=await Sa(i,e,n,t);return{encryptedKey:await Kn(e.slice(-6),a,r),p2c:n,p2s:nt(i)}}async function Hs(e,t,r,n,i){let a=await Sa(i,e,n,t);return Bn(e.slice(-6),a,r)}function ka(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let xa=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Je(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function Ws(e,t,r){return Mt(t,e,"encrypt"),ka(e,t),new Uint8Array(await crypto.subtle.encrypt(xa(e),t,r))}async function Ks(e,t,r){return Mt(t,e,"decrypt"),ka(e,t),new Uint8Array(await crypto.subtle.decrypt(xa(e),t,r))}async function Fr(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(i){let a,o;switch(i.kty){case"AKP":switch(i.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":a={name:i.alg},o=i.priv?["sign"]:["verify"];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(i.alg){case"PS256":case"PS384":case"PS512":a={name:"RSA-PSS",hash:`SHA-${i.alg.slice(-3)}`},o=i.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":a={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${i.alg.slice(-3)}`},o=i.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":a={name:"RSA-OAEP",hash:`SHA-${parseInt(i.alg.slice(-3),10)||1}`},o=i.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(i.alg){case"ES256":a={name:"ECDSA",namedCurve:"P-256"},o=i.d?["sign"]:["verify"];break;case"ES384":a={name:"ECDSA",namedCurve:"P-384"},o=i.d?["sign"]:["verify"];break;case"ES512":a={name:"ECDSA",namedCurve:"P-521"},o=i.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":a={name:"ECDH",namedCurve:i.crv},o=i.d?["deriveBits"]:[];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(i.alg){case"Ed25519":case"EdDSA":a={name:"Ed25519"},o=i.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":a={name:i.crv},o=i.d?["deriveBits"]:[];break;default:throw new Je('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new Je('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:a,keyUsages:o}}(e),n={...e};return n.kty!=="AKP"&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let Ea=async(e,t,r,n=!1)=>{let i=(le||=new WeakMap).get(e);if(i?.[r])return i[r];let a=await Fr({...t,alg:r});return n&&Object.freeze(e),i?i[r]=a:le.set(e,{[r]:a}),a},Bs=(e,t)=>{let r,n=(le||=new WeakMap).get(e);if(n?.[t])return n[t];let i=e.type==="public",a=!!i;if(e.asymmetricKeyType==="x25519"){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,a,i?[]:["deriveBits"])}if(e.asymmetricKeyType==="ed25519"){if(t!=="EdDSA"&&t!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[i?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(t!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[i?"verify":"sign"])}if(e.asymmetricKeyType==="rsa"){let o;switch(t){case"RSA-OAEP":o="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":o="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":o="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":o="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:o},a,i?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:o},a,[i?"verify":"sign"])}if(e.asymmetricKeyType==="ec"){let o=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!o)throw TypeError("given KeyObject instance cannot be used for this algorithm");t==="ES256"&&o==="P-256"&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:o},a,[i?"verify":"sign"])),t==="ES384"&&o==="P-384"&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:o},a,[i?"verify":"sign"])),t==="ES512"&&o==="P-521"&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:o},a,[i?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:o},a,i?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:le.set(e,{[t]:r}),r};async function qn(e,t){if(e instanceof Uint8Array||rr(e))return e;if(Hn(e)){if(e.type==="secret")return e.export();if("toCryptoKey"in e&&typeof e.toCryptoKey=="function")try{return Bs(e,t)}catch(n){if(n instanceof TypeError)throw n}let r=e.export({format:"jwk"});return Ea(e,r,t)}if(Vr(e))return e.k?ot(e.k):Ea(e,e,t,!0);throw Error("unreachable")}function Jn(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Je(`Unsupported JWE Algorithm: ${e}`)}}let ir=e=>crypto.getRandomValues(new Uint8Array(Jn(e)>>3));async function Vs(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),a=new Uint8Array(await crypto.subtle.sign(r,n,t)),o=0,s=-1;for(;++s<32;)o|=i[s]^a[s];return o===0}async function qs(e,t,r,n,i,a){let o,s;if(!(t instanceof Uint8Array))throw TypeError(nr(t,"Uint8Array"));let l=parseInt(e.slice(1,4),10),h=await crypto.subtle.importKey("raw",t.subarray(l>>3),"AES-CBC",!1,["decrypt"]),p=await crypto.subtle.importKey("raw",t.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),u=Lt(a,n,r,ca(a.length<<3)),k=new Uint8Array((await crypto.subtle.sign("HMAC",p,u)).slice(0,l>>3));try{o=await Vs(i,k)}catch{}if(!o)throw new Mn;try{s=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},h,r))}catch{}if(!s)throw new Mn;return s}async function Js(e,t,r,n,i,a){let o;t instanceof Uint8Array?o=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(Mt(t,e,"decrypt"),o=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},o,Lt(r,i)))}catch{throw new Mn}}async function Aa(e,t,r,n,i,a){if(!rr(t)&&!(t instanceof Uint8Array))throw TypeError(nr(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new oe("JWE Initialization Vector missing");if(!i)throw new oe("JWE Authentication Tag missing");switch(ma(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&qr(t,parseInt(e.slice(-3),10)),qs(e,t,r,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&qr(t,parseInt(e.slice(1,4),10)),Js(e,t,r,n,i,a);default:throw new Je("Unsupported JWE Content Encryption Algorithm")}}async function Fs(e,t,r,n){let i=e.slice(0,7),a=await ya(i,r,t,n,new Uint8Array);return{encryptedKey:a.ciphertext,iv:nt(a.iv),tag:nt(a.tag)}}async function zs(e,t,r,n,i){return Aa(e.slice(0,7),t,r,n,i,new Uint8Array)}async function Gs(e,t,r,n,i={}){let a,o,s;switch(e){case"dir":s=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let l;if(_r(r),!_a(r))throw new Je("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:h,apv:p}=i;l=i.epk?await qn(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:u,y:k,crv:b,kty:O}=await ha(l),L=await va(r,l,e==="ECDH-ES"?t:e,e==="ECDH-ES"?Jn(t):parseInt(e.slice(-5,-2),10),h,p);if(o={epk:{x:u,crv:b,kty:O}},O==="EC"&&(o.epk.y=k),h&&(o.apu=nt(h)),p&&(o.apv=nt(p)),e==="ECDH-ES"){s=L;break}s=n||ir(t);let A=e.slice(-6);a=await Kn(A,L,s);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=n||ir(t),_r(r),a=await Ws(e,r,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=n||ir(t);let{p2c:l,p2s:h}=i;({encryptedKey:a,...o}=await Ms(e,r,s,l,h));break}case"A128KW":case"A192KW":case"A256KW":s=n||ir(t),a=await Kn(e,r,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=n||ir(t);let{iv:l}=i;({encryptedKey:a,...o}=await Fs(e,r,s,l));break}default:throw new Je('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:a,parameters:o}}function Ta(...e){let t,r=e.filter(Boolean);if(r.length===0||r.length===1)return!0;for(let n of r){let i=Object.keys(n);if(!t||t.size===0){t=new Set(i);continue}for(let a of i){if(t.has(a))return!1;t.add(a)}}return!0}function Pa(e,t,r,n,i){let a;if(i.crit!==void 0&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let o of(a=r!==void 0?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(o))throw new Je(`Extension Header Parameter "${o}" is not recognized`);if(i[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(a.get(o)&&n[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}let ar=e=>e?.[Symbol.toStringTag],Fn=(e,t,r)=>{if(t.use!==void 0){let n;switch(r){case"sign":case"verify":n="sig";break;case"encrypt":case"decrypt":n="enc"}if(t.use!==n)throw TypeError(`Invalid key for this operation, its "use" must be "${n}" when present`)}if(t.alg!==void 0&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case(r==="sign"||r==="verify"):case e==="dir":case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?r==="encrypt"?"wrapKey":"unwrapKey":r;break;case(r==="encrypt"&&e.startsWith("RSA")):n="wrapKey";break;case r==="decrypt":n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0},Xs=(e,t,r)=>{if(!(t instanceof Uint8Array)){if(Vr(t)){if(Os(t)&&Fn(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Wn(t))throw TypeError(pa(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(t.type!=="secret")throw TypeError(`${ar(t)} instances for symmetric algorithms must be of type "secret"`)}},Ys=(e,t,r)=>{if(Vr(t))switch(r){case"decrypt":case"sign":if(Cs(t)&&Fn(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(Rs(t)&&Fn(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!Wn(t))throw TypeError(pa(e,t,"CryptoKey","KeyObject","JSON Web Key"));if(t.type==="secret")throw TypeError(`${ar(t)} instances for asymmetric algorithms must not be of type "secret"`);if(t.type==="public")switch(r){case"sign":throw TypeError(`${ar(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${ar(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if(t.type==="private")switch(r){case"verify":throw TypeError(`${ar(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${ar(t)} instances for asymmetric algorithm encryption must be of type "public"`)}};function Ca(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":Xs(e,t,r);break;default:Ys(e,t,r)}}class Zs{#e;#t;#i;#r;#o;#a;#s;#n;constructor(t){if(!(t instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=t}setKeyManagementParameters(t){if(this.#n)throw TypeError("setKeyManagementParameters can only be called once");return this.#n=t,this}setProtectedHeader(t){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=t,this}setSharedUnprotectedHeader(t){if(this.#i)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#i=t,this}setUnprotectedHeader(t){if(this.#r)throw TypeError("setUnprotectedHeader can only be called once");return this.#r=t,this}setAdditionalAuthenticatedData(t){return this.#o=t,this}setContentEncryptionKey(t){if(this.#a)throw TypeError("setContentEncryptionKey can only be called once");return this.#a=t,this}setInitializationVector(t){if(this.#s)throw TypeError("setInitializationVector can only be called once");return this.#s=t,this}async encrypt(t,r){let n,i,a,o,s,l;if(!this.#t&&!this.#r&&!this.#i)throw new oe("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Ta(this.#t,this.#r,this.#i))throw new oe("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let h={...this.#t,...this.#r,...this.#i};if(Pa(oe,new Map,r?.crit,this.#t,h),h.zip!==void 0)throw new Je('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:p,enc:u}=h;if(typeof p!="string"||!p)throw new oe('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof u!="string"||!u)throw new oe('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#a&&(p==="dir"||p==="ECDH-ES"))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${p}`);Ca(p==="dir"?u:p,t,"encrypt");{let A,H=await qn(t,p);({cek:i,encryptedKey:n,parameters:A}=await Gs(p,u,H,this.#a,this.#n)),A&&(r&&Us in r?this.#r?this.#r={...this.#r,...A}:this.setUnprotectedHeader(A):this.#t?this.#t={...this.#t,...A}:this.setProtectedHeader(A))}if(this.#t?s=Rt(o=nt(JSON.stringify(this.#t))):(o="",s=new Uint8Array),this.#o){let A=Rt(l=nt(this.#o));a=Lt(s,Rt("."),A)}else a=s;let{ciphertext:k,tag:b,iv:O}=await ya(u,this.#e,i,this.#s,a),L={ciphertext:nt(k)};return O&&(L.iv=nt(O)),b&&(L.tag=nt(b)),n&&(L.encrypted_key=nt(n)),l&&(L.aad=l),this.#t&&(L.protected=o),this.#i&&(L.unprotected=this.#i),this.#r&&(L.header=this.#r),L}}class Qs{#e;constructor(t){this.#e=new Zs(t)}setContentEncryptionKey(t){return this.#e.setContentEncryptionKey(t),this}setInitializationVector(t){return this.#e.setInitializationVector(t),this}setProtectedHeader(t){return this.#e.setProtectedHeader(t),this}setKeyManagementParameters(t){return this.#e.setKeyManagementParameters(t),this}async encrypt(t,r){let n=await this.#e.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}let Ht=e=>Math.floor(e.getTime()/1e3),ec=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function Sr(e){let t,r=ec.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(31557600*n)}return r[1]==="-"||r[4]==="ago"?-t:t}function Jt(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let Ra=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`,tc=(e,t)=>typeof e=="string"?t.includes(e):!!Array.isArray(e)&&t.some(Set.prototype.has.bind(new Set(e)));class rc{#e;constructor(t){if(!It(t))throw TypeError("JWT Claims Set MUST be an object");this.#e=structuredClone(t)}data(){return sa.encode(JSON.stringify(this.#e))}get iss(){return this.#e.iss}set iss(t){this.#e.iss=t}get sub(){return this.#e.sub}set sub(t){this.#e.sub=t}get aud(){return this.#e.aud}set aud(t){this.#e.aud=t}set jti(t){this.#e.jti=t}set nbf(t){typeof t=="number"?this.#e.nbf=Jt("setNotBefore",t):t instanceof Date?this.#e.nbf=Jt("setNotBefore",Ht(t)):this.#e.nbf=Ht(new Date)+Sr(t)}set exp(t){typeof t=="number"?this.#e.exp=Jt("setExpirationTime",t):t instanceof Date?this.#e.exp=Jt("setExpirationTime",Ht(t)):this.#e.exp=Ht(new Date)+Sr(t)}set iat(t){t===void 0?this.#e.iat=Ht(new Date):t instanceof Date?this.#e.iat=Jt("setIssuedAt",Ht(t)):typeof t=="string"?this.#e.iat=Jt("setIssuedAt",Ht(new Date)+Sr(t)):this.#e.iat=Jt("setIssuedAt",t)}}class nc{#e;#t;#i;#r;#o;#a;#s;#n;constructor(t={}){this.#n=new rc(t)}setIssuer(t){return this.#n.iss=t,this}setSubject(t){return this.#n.sub=t,this}setAudience(t){return this.#n.aud=t,this}setJti(t){return this.#n.jti=t,this}setNotBefore(t){return this.#n.nbf=t,this}setExpirationTime(t){return this.#n.exp=t,this}setIssuedAt(t){return this.#n.iat=t,this}setProtectedHeader(t){if(this.#r)throw TypeError("setProtectedHeader can only be called once");return this.#r=t,this}setKeyManagementParameters(t){if(this.#i)throw TypeError("setKeyManagementParameters can only be called once");return this.#i=t,this}setContentEncryptionKey(t){if(this.#e)throw TypeError("setContentEncryptionKey can only be called once");return this.#e=t,this}setInitializationVector(t){if(this.#t)throw TypeError("setInitializationVector can only be called once");return this.#t=t,this}replicateIssuerAsHeader(){return this.#o=!0,this}replicateSubjectAsHeader(){return this.#a=!0,this}replicateAudienceAsHeader(){return this.#s=!0,this}async encrypt(t,r){let n=new Qs(this.#n.data());return this.#r&&(this.#o||this.#a||this.#s)&&(this.#r={...this.#r,iss:this.#o?this.#n.iss:void 0,sub:this.#a?this.#n.sub:void 0,aud:this.#s?this.#n.aud:void 0}),n.setProtectedHeader(this.#r),this.#t&&n.setInitializationVector(this.#t),this.#e&&n.setContentEncryptionKey(this.#e),this.#i&&n.setKeyManagementParameters(this.#i),n.encrypt(t,r)}}async function ic(e,t,r){let n;if(!It(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return ot(e.k);case"RSA":if("oth"in e&&e.oth!==void 0)throw new Je('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return Fr({...e,alg:t,ext:n});case"AKP":if(typeof e.alg!="string"||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(t!==void 0&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return Fr({...e,ext:n});case"EC":case"OKP":return Fr({...e,alg:t,ext:n});default:throw new Je('Unsupported "kty" (Key Type) Parameter value')}}async function ac(e,t,r,n,i){switch(e){case"dir":if(r!==void 0)throw new oe("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(r!==void 0)throw new oe("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let a,o;if(!It(n.epk))throw new oe('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(_r(t),!_a(t))throw new Je("ECDH with the provided key is not allowed or not supported by your javascript runtime");let s=await ic(n.epk,e);if(_r(s),n.apu!==void 0){if(typeof n.apu!="string")throw new oe('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{a=ot(n.apu)}catch{throw new oe("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new oe('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{o=ot(n.apv)}catch{throw new oe("Failed to base64url decode the apv")}}let l=await va(s,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?Jn(n.enc):parseInt(e.slice(-5,-2),10),a,o);if(e==="ECDH-ES")return l;if(r===void 0)throw new oe("JWE Encrypted Key missing");return Bn(e.slice(-6),l,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(r===void 0)throw new oe("JWE Encrypted Key missing");return _r(t),Ks(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let a;if(r===void 0)throw new oe("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new oe('JOSE Header "p2c" (PBES2 Count) missing or invalid');let o=i?.maxPBES2Count||1e4;if(n.p2c>o)throw new oe('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new oe('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{a=ot(n.p2s)}catch{throw new oe("Failed to base64url decode the p2s")}return Hs(e,t,r,n.p2c,a)}case"A128KW":case"A192KW":case"A256KW":if(r===void 0)throw new oe("JWE Encrypted Key missing");return Bn(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let a,o;if(r===void 0)throw new oe("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new oe('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new oe('JOSE Header "tag" (Authentication Tag) missing or invalid');try{a=ot(n.iv)}catch{throw new oe("Failed to base64url decode the iv")}try{o=ot(n.tag)}catch{throw new oe("Failed to base64url decode the tag")}return zs(e,t,r,a,o)}default:throw new Je('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Oa(e,t){if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}async function oc(e,t,r){let n,i,a,o,s,l,h;if(!It(e))throw new oe("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new oe("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new oe("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new oe("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new oe("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new oe("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new oe("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new oe("JWE AAD incorrect type");if(e.header!==void 0&&!It(e.header))throw new oe("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!It(e.unprotected))throw new oe("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let U=ot(e.protected);n=JSON.parse(tr.decode(U))}catch{throw new oe("JWE Protected Header is invalid")}if(!Ta(n,e.header,e.unprotected))throw new oe("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let p={...n,...e.header,...e.unprotected};if(Pa(oe,new Map,r?.crit,n,p),p.zip!==void 0)throw new Je('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:u,enc:k}=p;if(typeof u!="string"||!u)throw new oe("missing JWE Algorithm (alg) in JWE Header");if(typeof k!="string"||!k)throw new oe("missing JWE Encryption Algorithm (enc) in JWE Header");let b=r&&Oa("keyManagementAlgorithms",r.keyManagementAlgorithms),O=r&&Oa("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(b&&!b.has(u)||!b&&u.startsWith("PBES2"))throw new ua('"alg" (Algorithm) Header Parameter value not allowed');if(O&&!O.has(k))throw new ua('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(e.encrypted_key!==void 0)try{i=ot(e.encrypted_key)}catch{throw new oe("Failed to base64url decode the encrypted_key")}let L=!1;typeof t=="function"&&(t=await t(n,e),L=!0),Ca(u==="dir"?k:u,t,"decrypt");let A=await qn(t,u);try{a=await ac(u,A,i,p,r)}catch(U){if(U instanceof TypeError||U instanceof oe||U instanceof Je)throw U;a=ir(k)}if(e.iv!==void 0)try{o=ot(e.iv)}catch{throw new oe("Failed to base64url decode the iv")}if(e.tag!==void 0)try{s=ot(e.tag)}catch{throw new oe("Failed to base64url decode the tag")}let H=e.protected!==void 0?Rt(e.protected):new Uint8Array;l=e.aad!==void 0?Lt(H,Rt("."),Rt(e.aad)):H;try{h=ot(e.ciphertext)}catch{throw new oe("Failed to base64url decode the ciphertext")}let $={plaintext:await Aa(k,a,h,o,s,l)};if(e.protected!==void 0&&($.protectedHeader=n),e.aad!==void 0)try{$.additionalAuthenticatedData=ot(e.aad)}catch{throw new oe("Failed to base64url decode the aad")}return e.unprotected!==void 0&&($.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&($.unprotectedHeader=e.header),L?{...$,key:A}:$}async function sc(e,t,r){if(e instanceof Uint8Array&&(e=tr.decode(e)),typeof e!="string")throw new oe("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:a,3:o,4:s,length:l}=e.split(".");if(l!==5)throw new oe("Invalid Compact JWE");let h=await oc({ciphertext:o,iv:a||void 0,protected:n,tag:s||void 0,encrypted_key:i||void 0},t,r),p={plaintext:h.plaintext,protectedHeader:h.protectedHeader};return typeof t=="function"?{...p,key:h.key}:p}async function cc(e,t,r){let n=await sc(e,t,r),i=function(s,l,h={}){let p,u;try{p=JSON.parse(tr.decode(l))}catch{}if(!It(p))throw new jt("JWT Claims Set must be a top-level JSON object");let{typ:k}=h;if(k&&(typeof s.typ!="string"||Ra(s.typ)!==Ra(k)))throw new ut('unexpected "typ" JWT header value',p,"typ","check_failed");let{requiredClaims:b=[],issuer:O,subject:L,audience:A,maxTokenAge:H}=h,$=[...b];for(let P of(H!==void 0&&$.push("iat"),A!==void 0&&$.push("aud"),L!==void 0&&$.push("sub"),O!==void 0&&$.push("iss"),new Set($.reverse())))if(!(P in p))throw new ut(`missing required "${P}" claim`,p,P,"missing");if(O&&!(Array.isArray(O)?O:[O]).includes(p.iss))throw new ut('unexpected "iss" claim value',p,"iss","check_failed");if(L&&p.sub!==L)throw new ut('unexpected "sub" claim value',p,"sub","check_failed");if(A&&!tc(p.aud,typeof A=="string"?[A]:A))throw new ut('unexpected "aud" claim value',p,"aud","check_failed");switch(typeof h.clockTolerance){case"string":u=Sr(h.clockTolerance);break;case"number":u=h.clockTolerance;break;case"undefined":u=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:U}=h,g=Ht(U||new Date);if((p.iat!==void 0||H)&&typeof p.iat!="number")throw new ut('"iat" claim must be a number',p,"iat","invalid");if(p.nbf!==void 0){if(typeof p.nbf!="number")throw new ut('"nbf" claim must be a number',p,"nbf","invalid");if(p.nbf>g+u)throw new ut('"nbf" claim timestamp check failed',p,"nbf","check_failed")}if(p.exp!==void 0){if(typeof p.exp!="number")throw new ut('"exp" claim must be a number',p,"exp","invalid");if(p.exp<=g-u)throw new la('"exp" claim timestamp check failed',p,"exp","check_failed")}if(H){let P=g-p.iat;if(P-u>(typeof H=="number"?H:Sr(H)))throw new la('"iat" claim timestamp check failed (too far in the past)',p,"iat","check_failed");if(P<0-u)throw new ut('"iat" claim timestamp check failed (it should be in the past)',p,"iat","check_failed")}return p}(n.protectedHeader,n.plaintext,r),{protectedHeader:a}=n;if(a.iss!==void 0&&a.iss!==i.iss)throw new ut('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(a.sub!==void 0&&a.sub!==i.sub)throw new ut('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(a.aud!==void 0&&JSON.stringify(a.aud)!==JSON.stringify(i.aud))throw new ut('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let o={payload:i,protectedHeader:a};return typeof t=="function"?{...o,key:n.key}:o}let lc=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,uc=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,dc=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,pc=/^[\u0020-\u003A\u003D-\u007E]*$/,hc=Object.prototype.toString,fc=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function gc(e,t){let r=new fc,n=e.length;if(n<2)return r;let i=t?.decode||yc,a=0;do{let o=e.indexOf("=",a);if(o===-1)break;let s=e.indexOf(";",a),l=s===-1?n:s;if(o>l){a=e.lastIndexOf(";",o-1)+1;continue}let h=Ia(e,a,o),p=Ua(e,o,h),u=e.slice(h,p);if(r[u]===void 0){let k=Ia(e,o+1,l),b=Ua(e,l,k),O=i(e.slice(k,b));r[u]=O}a=l+1}while(a<n);return r}function Ia(e,t,r){do{let n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function Ua(e,t,r){for(;t>r;){let n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function mc(e,t,r){let n=r?.encode||encodeURIComponent;if(!lc.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!uc.test(i))throw TypeError(`argument val is invalid: ${t}`);let a=e+"="+i;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!dc.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!pc.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){var o;if(o=r.expires,hc.call(o)!=="[object Date]"||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function yc(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}let{parse:mu}=T,wc=()=>Date.now()/1e3|0,zn="A256CBC-HS512";async function zr(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,a=Array.isArray(r)?r:[r],o=await Na(zn,a[0],i),s=await fa({kty:"oct",k:nt(o)},`sha${o.byteLength<<3}`);return await new nc(t).setProtectedHeader({alg:"dir",enc:zn,kid:s}).setIssuedAt().setExpirationTime(wc()+n).setJti(crypto.randomUUID()).encrypt(o)}async function Gr(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:a}=await cc(t,async({kid:o,enc:s})=>{for(let l of i){let h=await Na(s,l,n);if(o===void 0||o===await fa({kty:"oct",k:nt(h)},`sha${h.byteLength<<3}`))return h}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[zn,"A256GCM"]});return a}async function Na(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await As("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function bc({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,a=n.origin;return t?a=await i.redirect({url:t,baseUrl:n.origin}):r&&(a=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:a,callbackUrlCookie:a!==r?a:void 0}}let Gn="\x1B[31m",kr="\x1B[0m",vc={error(e){let t=e instanceof we?e.type:e.name;if(console.error(`${Gn}[auth][error]${kr} ${t}: ${e.message}`),e.cause&&typeof e.cause=="object"&&"err"in e.cause&&e.cause.err instanceof Error){let{err:r,...n}=e.cause;console.error(`${Gn}[auth][cause]${kr}:`,r.stack),n&&console.error(`${Gn}[auth][details]${kr}:`,JSON.stringify(n,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`\x1B[33m[auth][warn][${e}]${kr}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`\x1B[90m[auth][debug]:${kr} ${e}`,JSON.stringify(t,null,2))}};function xr(e){let t={...vc};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let _c=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{parse:Sc,serialize:kc}=T;async function xc(e){if(!("body"in e)||!e.body||e.method!=="POST")return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function Ec(e,t){try{if(e.method!=="GET"&&e.method!=="POST")throw new qt("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(a,o){let s=a.match(RegExp(`^${o}(.+)`));if(s===null)throw new qt(`Cannot parse action at ${a}`);let l=s.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(l.length!==1&&l.length!==2)throw new qt(`Cannot parse action at ${a}`);let[h,p]=l;if(!_c.includes(h)||p&&!["signin","callback","webauthn-options"].includes(h))throw new qt(`Cannot parse action at ${a}`);return{action:h,providerId:p=="undefined"?void 0:p}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await xc(e):void 0,cookies:Sc(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(r){let n=xr(t);n.error(r),n.debug("request",e)}}function $a(e){let t=new Headers(e.headers);e.cookies?.forEach(i=>{let{name:a,value:o,options:s}=i,l=kc(a,o,s);t.has("Set-Cookie")?t.append("Set-Cookie",l):t.set("Set-Cookie",l)});let r=e.body;t.get("content-type")==="application/json"?r=JSON.stringify(e.body):t.get("content-type")==="application/x-www-form-urlencoded"&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function Xr(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(r=>r.toString(16).padStart(2,"0")).join("").toString()}function Xn(e){let t=r=>("0"+r.toString(16)).slice(-2);return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((r,n)=>r+t(n),"")}async function Ac({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[o,s]=t.split("|");if(s===await Xr(`${o}${e.secret}`))return{csrfTokenVerified:r&&o===n,csrfToken:o}}let i=Xn(32),a=await Xr(`${i}${e.secret}`);return{cookie:`${i}|${a}`,csrfToken:i}}function Yr(e,t){if(!t)throw new Qi(`CSRF token was missing during an action ${e}`)}function Zr(e){return e!==null&&typeof e=="object"}function Qr(e,...t){if(!t.length)return e;let r=t.shift();if(Zr(e)&&Zr(r))for(let n in r)Zr(r[n])?(Zr(e[n])||(e[n]=Array.isArray(r[n])?[]:{}),Qr(e[n],r[n])):r[n]!==void 0&&(e[n]=r[n]);return Qr(e,...t)}let en=Symbol("skip-csrf-check"),tn=Symbol("return-type-raw"),Ut=Symbol("custom-fetch"),La=Symbol("conform-internal"),Tc=e=>ja({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),Pc=e=>ja({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function ja(e){let t={};for(let[r,n]of Object.entries(e))n!==void 0&&(t[r]=n);return t}function Yn(e,t){if(!e&&t)return;if(typeof e=="string")return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[n,i]of Object.entries(e.params))n==="claims"&&(i=JSON.stringify(i)),r.searchParams.set(n,String(i));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}let Cc={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function Rc({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:a,csrfToken:o,csrfDisabled:s,isPost:l}){var h;let p=xr(e),{providers:u,provider:k}=function($){let{providerId:U,config:g}=$,P=new URL(g.basePath??"/auth",$.url.origin),I=g.providers.map(K=>{let te=typeof K=="function"?K():K,{options:J,...z}=te,ae=J?.id??z.id,pe=Qr(z,J,{signinUrl:`${P}/signin/${ae}`,callbackUrl:`${P}/callback/${ae}`});if(te.type==="oauth"||te.type==="oidc"){pe.redirectProxyUrl??(pe.redirectProxyUrl=J?.redirectProxyUrl??g.redirectProxyUrl);let Z=function(B){B.issuer&&(B.wellKnown??(B.wellKnown=`${B.issuer}/.well-known/openid-configuration`));let fe=Yn(B.authorization,B.issuer);fe&&!fe.url?.searchParams.has("scope")&&fe.url.searchParams.set("scope","openid profile email");let je=Yn(B.token,B.issuer),ge=Yn(B.userinfo,B.issuer),Le=B.checks??["pkce"];return B.redirectProxyUrl&&(Le.includes("state")||Le.push("state"),B.redirectProxyUrl=`${B.redirectProxyUrl}/callback/${B.id}`),{...B,authorization:fe,token:je,checks:Le,userinfo:ge,profile:B.profile??Tc,account:B.account??Pc}}(pe);return Z.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete Z.redirectProxyUrl,Z[Ut]??(Z[Ut]=J?.[Ut]),Z}return pe}),q=I.find(({id:K})=>K===U);if(U&&!q){let K=I.map(te=>te.id).join(", ");throw Error(`Provider with id "${U}" not found. Available providers: [${K}].`)}return{providers:I,provider:q}}({url:n,providerId:t,config:e}),b=!1;if((k?.type==="oauth"||k?.type==="oidc")&&k.redirectProxyUrl)try{b=new URL(k.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${k.redirectProxyUrl}`)}let O={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:k,cookies:Qr(Di(e.useSecureCookies??n.protocol==="https:"),e.cookies),providers:u,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:zr,decode:Gr,...e.jwt},events:Object.keys(h=e.events??{}).reduce(($,U)=>($[U]=async(...g)=>{try{let P=h[U];return await P(...g)}catch(P){p.error(new Wi(P))}},$),{}),adapter:function($,U){if($)return Object.keys($).reduce((g,P)=>(g[P]=async(...I)=>{try{U.debug(`adapter_${P}`,{args:I});let q=$[P];return await q(...I)}catch(q){let K=new Pn(q);throw U.error(K),K}},g),{})}(e.adapter,p),callbacks:{...Cc,...e.callbacks},logger:p,callbackUrl:n.origin,isOnRedirectProxy:b,experimental:{...e.experimental}},L=[];if(s)O.csrfTokenVerified=!0;else{let{csrfToken:$,cookie:U,csrfTokenVerified:g}=await Ac({options:O,cookieValue:i?.[O.cookies.csrfToken.name],isPost:l,bodyValue:o});O.csrfToken=$,O.csrfTokenVerified=g,U&&L.push({name:O.cookies.csrfToken.name,value:U,options:O.cookies.csrfToken.options})}let{callbackUrl:A,callbackUrlCookie:H}=await bc({options:O,cookieValue:i?.[O.cookies.callbackUrl.name],paramValue:a});return O.callbackUrl=A,H&&L.push({name:O.cookies.callbackUrl.name,value:H,options:O.cookies.callbackUrl.options}),{options:O,cookies:L}}var Da,Ma,Ha,Wa,Ka,Ba,Va,qa,Ja,Fa,za,Zn,Er,Nt,or,rn,Ga,Qn,nn,be,Xa,Ft,Ya,Za,ei,ti,ri,ni,Ar={},Qa=[],Oc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ii=Array.isArray;function Wt(e,t){for(var r in t)e[r]=t[r];return e}function eo(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function to(e,t,r){var n,i,a,o={};for(a in t)a=="key"?n=t[a]:a=="ref"?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?nn.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)o[a]===void 0&&(o[a]=e.defaultProps[a]);return an(e,o,n,i,null)}function an(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++Xa,__i:-1,__u:0};return i==null&&be.vnode!=null&&be.vnode(a),a}function kt(e){return e.children}function on(e,t){this.props=e,this.context=t}function sr(e,t){if(t==null)return e.__?sr(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?sr(e):null}function ro(e){(!e.__d&&(e.__d=!0)&&Ft.push(e)&&!sn.__r++||Ya!==be.debounceRendering)&&((Ya=be.debounceRendering)||Za)(sn)}function sn(){var e,t,r,n,i,a,o,s;for(Ft.sort(ei);e=Ft.shift();)e.__d&&(t=Ft.length,n=void 0,a=(i=(r=e).__v).__e,o=[],s=[],r.__P&&((n=Wt({},i)).__v=i.__v+1,be.vnode&&be.vnode(n),ai(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[a]:null,o,a??sr(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,oo(o,n,s),n.__e!=a&&function l(h){var p,u;if((h=h.__)!=null&&h.__c!=null){for(h.__e=h.__c.base=null,p=0;p<h.__k.length;p++)if((u=h.__k[p])!=null&&u.__e!=null){h.__e=h.__c.base=u.__e;break}return l(h)}}(n)),Ft.length>t&&Ft.sort(ei));sn.__r=0}function no(e,t,r,n,i,a,o,s,l,h,p){var u,k,b,O,L,A=n&&n.__k||Qa,H=t.length;for(r.__d=l,function($,U,g){var P,I,q,K,te,J=U.length,z=g.length,ae=z,pe=0;for($.__k=[],P=0;P<J;P++)(I=U[P])!=null&&typeof I!="boolean"&&typeof I!="function"?(K=P+pe,(I=$.__k[P]=typeof I=="string"||typeof I=="number"||typeof I=="bigint"||I.constructor==String?an(null,I,null,null,null):ii(I)?an(kt,{children:I},null,null,null):I.constructor===void 0&&I.__b>0?an(I.type,I.props,I.key,I.ref?I.ref:null,I.__v):I).__=$,I.__b=$.__b+1,q=null,(te=I.__i=function(Z,B,fe,je){var ge=Z.key,Le=Z.type,ce=fe-1,Ze=fe+1,De=B[fe];if(De===null||De&&ge==De.key&&Le===De.type&&(131072&De.__u)==0)return fe;if(je>(De!=null&&(131072&De.__u)==0?1:0))for(;ce>=0||Ze<B.length;){if(ce>=0){if((De=B[ce])&&(131072&De.__u)==0&&ge==De.key&&Le===De.type)return ce;ce--}if(Ze<B.length){if((De=B[Ze])&&(131072&De.__u)==0&&ge==De.key&&Le===De.type)return Ze;Ze++}}return-1}(I,g,K,ae))!==-1&&(ae--,(q=g[te])&&(q.__u|=131072)),q==null||q.__v===null?(te==-1&&pe--,typeof I.type!="function"&&(I.__u|=65536)):te!==K&&(te==K-1?pe--:te==K+1?pe++:(te>K?pe--:pe++,I.__u|=65536))):I=$.__k[P]=null;if(ae)for(P=0;P<z;P++)(q=g[P])!=null&&(131072&q.__u)==0&&(q.__e==$.__d&&($.__d=sr(q)),function Z(B,fe,je){var ge,Le;if(be.unmount&&be.unmount(B),(ge=B.ref)&&(ge.current&&ge.current!==B.__e||oi(ge,null,fe)),(ge=B.__c)!=null){if(ge.componentWillUnmount)try{ge.componentWillUnmount()}catch(ce){be.__e(ce,fe)}ge.base=ge.__P=null}if(ge=B.__k)for(Le=0;Le<ge.length;Le++)ge[Le]&&Z(ge[Le],fe,je||typeof B.type!="function");je||eo(B.__e),B.__c=B.__=B.__e=B.__d=void 0}(q,q))}(r,t,A),l=r.__d,u=0;u<H;u++)(b=r.__k[u])!=null&&(k=b.__i===-1?Ar:A[b.__i]||Ar,b.__i=u,ai(e,b,k,i,a,o,s,l,h,p),O=b.__e,b.ref&&k.ref!=b.ref&&(k.ref&&oi(k.ref,null,b),p.push(b.ref,b.__c||O,b)),L==null&&O!=null&&(L=O),65536&b.__u||k.__k===b.__k?l=function $(U,g,P){var I,q;if(typeof U.type=="function"){for(I=U.__k,q=0;I&&q<I.length;q++)I[q]&&(I[q].__=U,g=$(I[q],g,P));return g}U.__e!=g&&(g&&U.type&&!P.contains(g)&&(g=sr(U)),P.insertBefore(U.__e,g||null),g=U.__e);do g=g&&g.nextSibling;while(g!=null&&g.nodeType===8);return g}(b,l,e):typeof b.type=="function"&&b.__d!==void 0?l=b.__d:O&&(l=O.nextSibling),b.__d=void 0,b.__u&=-196609);r.__d=l,r.__e=L}function io(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Oc.test(t)?r:r+"px"}function cn(e,t,r,n,i){var a;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||io(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||io(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n?r.u=n.u:(r.u=ti,e.addEventListener(t,a?ni:ri,a)):e.removeEventListener(t,a?ni:ri,a);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function ao(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=ti++;else if(t.t<r.u)return;return r(be.event?be.event(t):t)}}}function ai(e,t,r,n,i,a,o,s,l,h){var p,u,k,b,O,L,A,H,$,U,g,P,I,q,K,te,J=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),a=[s=t.__e=r.__e]),(p=be.__b)&&p(t);e:if(typeof J=="function")try{if(H=t.props,$="prototype"in J&&J.prototype.render,U=(p=J.contextType)&&n[p.__c],g=p?U?U.props.value:p.__:n,r.__c?A=(u=t.__c=r.__c).__=u.__E:($?t.__c=u=new J(H,g):(t.__c=u=new on(H,g),u.constructor=J,u.render=Ic),U&&U.sub(u),u.props=H,u.state||(u.state={}),u.context=g,u.__n=n,k=u.__d=!0,u.__h=[],u._sb=[]),$&&u.__s==null&&(u.__s=u.state),$&&J.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Wt({},u.__s)),Wt(u.__s,J.getDerivedStateFromProps(H,u.__s))),b=u.props,O=u.state,u.__v=t,k)$&&J.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),$&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if($&&J.getDerivedStateFromProps==null&&H!==b&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(H,g),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(H,u.__s,g)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(u.props=H,u.state=u.__s,u.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(z){z&&(z.__=t)}),P=0;P<u._sb.length;P++)u.__h.push(u._sb[P]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(H,u.__s,g),$&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(b,O,L)})}if(u.context=g,u.props=H,u.__P=e,u.__e=!1,I=be.__r,q=0,$){for(u.state=u.__s,u.__d=!1,I&&I(t),p=u.render(u.props,u.state,u.context),K=0;K<u._sb.length;K++)u.__h.push(u._sb[K]);u._sb=[]}else do u.__d=!1,I&&I(t),p=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++q<25);u.state=u.__s,u.getChildContext!=null&&(n=Wt(Wt({},n),u.getChildContext())),$&&!k&&u.getSnapshotBeforeUpdate!=null&&(L=u.getSnapshotBeforeUpdate(b,O)),no(e,ii(te=p!=null&&p.type===kt&&p.key==null?p.props.children:p)?te:[te],t,r,n,i,a,o,s,l,h),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),A&&(u.__E=u.__=null)}catch(z){if(t.__v=null,l||a!=null){for(t.__u|=l?160:128;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else t.__e=r.__e,t.__k=r.__k;be.__e(z,t,r)}else a==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(z,ae,pe,Z,B,fe,je,ge,Le){var ce,Ze,De,hr,Fe,At,dt,Xe=pe.props,Ke=ae.props,ve=ae.type;if(ve==="svg"?B="http://www.w3.org/2000/svg":ve==="math"?B="http://www.w3.org/1998/Math/MathML":B||(B="http://www.w3.org/1999/xhtml"),fe!=null){for(ce=0;ce<fe.length;ce++)if((Fe=fe[ce])&&"setAttribute"in Fe==!!ve&&(ve?Fe.localName===ve:Fe.nodeType===3)){z=Fe,fe[ce]=null;break}}if(z==null){if(ve===null)return document.createTextNode(Ke);z=document.createElementNS(B,ve,Ke.is&&Ke),ge&&(be.__m&&be.__m(ae,fe),ge=!1),fe=null}if(ve===null)Xe===Ke||ge&&z.data===Ke||(z.data=Ke);else{if(fe=fe&&nn.call(z.childNodes),Xe=pe.props||Ar,!ge&&fe!=null)for(Xe={},ce=0;ce<z.attributes.length;ce++)Xe[(Fe=z.attributes[ce]).name]=Fe.value;for(ce in Xe)if(Fe=Xe[ce],ce!="children"){if(ce=="dangerouslySetInnerHTML")De=Fe;else if(!(ce in Ke)){if(ce=="value"&&"defaultValue"in Ke||ce=="checked"&&"defaultChecked"in Ke)continue;cn(z,ce,null,Fe,B)}}for(ce in Ke)Fe=Ke[ce],ce=="children"?hr=Fe:ce=="dangerouslySetInnerHTML"?Ze=Fe:ce=="value"?At=Fe:ce=="checked"?dt=Fe:ge&&typeof Fe!="function"||Xe[ce]===Fe||cn(z,ce,Fe,Xe[ce],B);if(Ze)ge||De&&(Ze.__html===De.__html||Ze.__html===z.innerHTML)||(z.innerHTML=Ze.__html),ae.__k=[];else if(De&&(z.innerHTML=""),no(z,ii(hr)?hr:[hr],ae,pe,Z,ve==="foreignObject"?"http://www.w3.org/1999/xhtml":B,fe,je,fe?fe[0]:pe.__k&&sr(pe,0),ge,Le),fe!=null)for(ce=fe.length;ce--;)eo(fe[ce]);ge||(ce="value",ve==="progress"&&At==null?z.removeAttribute("value"):At===void 0||At===z[ce]&&(ve!=="progress"||At)&&(ve!=="option"||At===Xe[ce])||cn(z,ce,At,Xe[ce],B),ce="checked",dt!==void 0&&dt!==z[ce]&&cn(z,ce,dt,Xe[ce],B))}return z}(r.__e,t,r,n,i,a,o,l,h);(p=be.diffed)&&p(t)}function oo(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)oi(r[n],r[++n],r[++n]);be.__c&&be.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){be.__e(a,i.__v)}})}function oi(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(i){be.__e(i,r)}}function Ic(e,t,r){return this.constructor(e,r)}function Kt(e,t){var r,n,i,a,o;r=e,be.__&&be.__(r,t),i=(n=typeof Kt=="function")?null:Kt&&Kt.__k||t.__k,a=[],o=[],ai(t,r=(!n&&Kt||t).__k=to(kt,null,[r]),i||Ar,Ar,t.namespaceURI,!n&&Kt?[Kt]:i?null:t.firstChild?nn.call(t.childNodes):null,a,!n&&Kt?Kt:i?i.__e:t.firstChild,n,o),oo(a,r,o)}nn=Qa.slice,be={__e:function(e,t,r,n){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),o=i.__d),o)return i.__E=i}catch(s){e=s}throw e}},Xa=0,on.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wt({},this.state),typeof e=="function"&&(e=e(Wt({},r),this.props)),e&&Wt(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),ro(this))},on.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ro(this))},on.prototype.render=kt,Ft=[],Za=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ei=function(e,t){return e.__v.__b-t.__v.__b},sn.__r=0,ti=0,ri=ao(!1),ni=ao(!0);var so=/[\s\n\\/='"\0<>]/,co=/^(xlink|xmlns|xml)([A-Z])/,Uc=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,Nc=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,$c=new Set(["draggable","spellcheck"]),Lc=/["&<]/;function ln(e){if(e.length===0||Lc.test(e)===!1)return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var lo={},jc=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),Dc=/[A-Z]/g;function uo(){this.__d=!0}var si,zt,Tr,Pr,ci={},po=[],Cr=Array.isArray,li=Object.assign;function ho(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,r.state==null&&(r.state=ci),r.__s==null&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=li({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),Tr&&Tr(e),r.render(r.props,r.state,t)}var Mc=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),Hc=0;function Q(e,t,r,n,i,a){t||(t={});var o,s,l=t;"ref"in t&&(o=t.ref,delete t.ref);var h={type:e,props:l,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Hc,__i:-1,__u:0,__source:i,__self:a};if(typeof e=="function"&&(o=e.defaultProps))for(s in o)l[s]===void 0&&(l[s]=o[s]);return be.vnode&&be.vnode(h),h}async function Wc(e,t){let r=window.SimpleWebAuthnBrowser;async function n(p){let u=new URL(`${e}/webauthn-options/${t}`);p&&u.searchParams.append("action",p),a().forEach(b=>{u.searchParams.append(b.name,b.value)});let k=await fetch(u);if(!k.ok){console.error("Failed to fetch options",k);return}return k.json()}function i(){let p=`#${t}-form`,u=document.querySelector(p);if(!u)throw Error(`Form '${p}' not found`);return u}function a(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function o(p,u){let k=i();if(p){let b=document.createElement("input");b.type="hidden",b.name="action",b.value=p,k.appendChild(b)}if(u){let b=document.createElement("input");b.type="hidden",b.name="data",b.value=JSON.stringify(u),k.appendChild(b)}return k.submit()}async function s(p,u){let k=await r.startAuthentication(p,u);return await o("authenticate",k)}async function l(p){a().forEach(k=>{if(k.required&&!k.value)throw Error(`Missing required field: ${k.name}`)});let u=await r.startRegistration(p);return await o("register",u)}async function h(){if(!r.browserSupportsWebAuthnAutofill())return;let p=await n("authenticate");if(!p){console.error("Failed to fetch option for autofill authentication");return}try{await s(p.options,!0)}catch(u){console.error(u)}}(async function(){let p=i();if(!r.browserSupportsWebAuthn()){p.style.display="none";return}p&&p.addEventListener("submit",async u=>{u.preventDefault();let k=await n(void 0);if(!k){console.error("Failed to fetch options for form submission");return}if(k.action==="authenticate")try{await s(k.options,!1)}catch(b){console.error(b)}else if(k.action==="register")try{await l(k.options)}catch(b){console.error(b)}})})(),h()}let fo={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},Kc=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function un({html:e,title:t,status:r,cookies:n,theme:i,headTags:a}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${Kc}</style><title>${t}</title>${a??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${function(o,s,l){var h=be.__s;be.__s=!0,si=be.__b,zt=be.diffed,Tr=be.__r,Pr=be.unmount;var p=to(kt,null);p.__k=[o];try{var u=function k(b,O,L,A,H,$,U){if(b==null||b===!0||b===!1||b==="")return"";var g=typeof b;if(g!="object")return g=="function"?"":g=="string"?ln(b):b+"";if(Cr(b)){var P,I="";H.__k=b;for(var q=0;q<b.length;q++){var K=b[q];if(K!=null&&typeof K!="boolean"){var te,J=k(K,O,L,A,H,$,U);typeof J=="string"?I+=J:(P||(P=[]),I&&P.push(I),I="",Cr(J)?(te=P).push.apply(te,J):P.push(J))}}return P?(I&&P.push(I),P):I}if(b.constructor!==void 0)return"";b.__=H,si&&si(b);var z=b.type,ae=b.props;if(typeof z=="function"){var pe,Z,B,fe=O;if(z===kt){if("tpl"in ae){for(var je="",ge=0;ge<ae.tpl.length;ge++)if(je+=ae.tpl[ge],ae.exprs&&ge<ae.exprs.length){var Le=ae.exprs[ge];if(Le==null)continue;typeof Le=="object"&&(Le.constructor===void 0||Cr(Le))?je+=k(Le,O,L,A,b,$,U):je+=Le}return je}if("UNSTABLE_comment"in ae)return"<!--"+ln(ae.UNSTABLE_comment)+"-->";Z=ae.children}else{if((pe=z.contextType)!=null){var ce=O[pe.__c];fe=ce?ce.props.value:pe.__}var Ze=z.prototype&&typeof z.prototype.render=="function";if(Ze)Z=ho(b,fe),B=b.__c;else{b.__c=B={__v:b,context:fe,props:b.props,setState:uo,forceUpdate:uo,__d:!0,__h:[]};for(var De=0;B.__d&&De++<25;)B.__d=!1,Tr&&Tr(b),Z=z.call(B,ae,fe);B.__d=!0}if(B.getChildContext!=null&&(O=li({},O,B.getChildContext())),Ze&&be.errorBoundaries&&(z.getDerivedStateFromError||B.componentDidCatch)){Z=Z!=null&&Z.type===kt&&Z.key==null&&Z.props.tpl==null?Z.props.children:Z;try{return k(Z,O,L,A,b,$,U)}catch(ht){return z.getDerivedStateFromError&&(B.__s=z.getDerivedStateFromError(ht)),B.componentDidCatch&&B.componentDidCatch(ht,ci),B.__d?(Z=ho(b,O),(B=b.__c).getChildContext!=null&&(O=li({},O,B.getChildContext())),k(Z=Z!=null&&Z.type===kt&&Z.key==null&&Z.props.tpl==null?Z.props.children:Z,O,L,A,b,$,U)):""}finally{zt&&zt(b),b.__=null,Pr&&Pr(b)}}}Z=Z!=null&&Z.type===kt&&Z.key==null&&Z.props.tpl==null?Z.props.children:Z;try{var hr=k(Z,O,L,A,b,$,U);return zt&&zt(b),b.__=null,be.unmount&&be.unmount(b),hr}catch(ht){if(!$&&U&&U.onError){var Fe=U.onError(ht,b,function(Yt){return k(Yt,O,L,A,b,$,U)});if(Fe!==void 0)return Fe;var At=be.__e;return At&&At(ht,b),""}if(!$||!ht||typeof ht.then!="function")throw ht;return ht.then(function Yt(){try{return k(Z,O,L,A,b,$,U)}catch(vt){if(!vt||typeof vt.then!="function")throw vt;return vt.then(function(){return k(Z,O,L,A,b,$,U)},Yt)}})}}var dt,Xe="<"+z,Ke="";for(var ve in ae){var Ye=ae[ve];if(typeof Ye!="function"||ve==="class"||ve==="className"){switch(ve){case"children":dt=Ye;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in ae)continue;ve="for";break;case"className":if("class"in ae)continue;ve="class";break;case"defaultChecked":ve="checked";break;case"defaultSelected":ve="selected";break;case"defaultValue":case"value":switch(ve="value",z){case"textarea":dt=Ye;continue;case"select":A=Ye;continue;case"option":A!=Ye||"selected"in ae||(Xe+=" selected")}break;case"dangerouslySetInnerHTML":Ke=Ye&&Ye.__html;continue;case"style":typeof Ye=="object"&&(Ye=function(ht){var Yt="";for(var vt in ht){var En=ht[vt];if(En!=null&&En!==""){var Ci=vt[0]=="-"?vt:lo[vt]||(lo[vt]=vt.replace(Dc,"-$&").toLowerCase()),ss=";";typeof En!="number"||Ci.startsWith("--")||jc.has(Ci)||(ss="px;"),Yt=Yt+Ci+":"+En+ss}}return Yt||void 0}(Ye));break;case"acceptCharset":ve="accept-charset";break;case"httpEquiv":ve="http-equiv";break;default:if(co.test(ve))ve=ve.replace(co,"$1:$2").toLowerCase();else{if(so.test(ve))continue;(ve[4]==="-"||$c.has(ve))&&Ye!=null?Ye+="":L?Nc.test(ve)&&(ve=ve==="panose1"?"panose-1":ve.replace(/([A-Z])/g,"-$1").toLowerCase()):Uc.test(ve)&&(ve=ve.toLowerCase())}}Ye!=null&&Ye!==!1&&(Xe=Ye===!0||Ye===""?Xe+" "+ve:Xe+" "+ve+'="'+(typeof Ye=="string"?ln(Ye):Ye+"")+'"')}}if(so.test(z))throw Error(z+" is not a valid HTML tag name in "+Xe+">");if(Ke||(typeof dt=="string"?Ke=ln(dt):dt!=null&&dt!==!1&&dt!==!0&&(Ke=k(dt,O,z==="svg"||z!=="foreignObject"&&L,A,b,$,U))),zt&&zt(b),b.__=null,Pr&&Pr(b),!Ke&&Mc.has(z))return Xe+"/>";var Ti="</"+z+">",Pi=Xe+">";return Cr(Ke)?[Pi].concat(Ke,[Ti]):typeof Ke!="string"?[Pi,Ke,Ti]:Pi+Ke+Ti}(o,ci,!1,void 0,p,!1,void 0);return Cr(u)?u.join(""):u}catch(k){throw k.then?Error('Use "renderToStringAsync" for suspenseful rendering.'):k}finally{be.__c&&be.__c(o,po),be.__s=h,po.length=0}}(e)}</div></body></html>`}}function go(e){let{url:t,theme:r,query:n,cookies:i,pages:a,providers:o}=e;return{csrf:(s,l,h)=>s?(l.logger.warn("csrf-disabled"),h.push({name:l.cookies.csrfToken.name,value:"",options:{...l.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:h}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:l.csrfToken},cookies:h},providers:s=>({headers:{"Content-Type":"application/json"},body:s.reduce((l,{id:h,name:p,type:u,signinUrl:k,callbackUrl:b})=>(l[h]={id:h,name:p,type:u,signinUrl:k,callbackUrl:b},l),{})}),signin(s,l){if(s)throw new qt("Unsupported action");if(a?.signIn){let u=`${a.signIn}${a.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return l&&(u=`${u}&${new URLSearchParams({error:l})}`),{redirect:u,cookies:i}}let h=o?.find(u=>u.type==="webauthn"&&u.enableConditionalUI&&!!u.simpleWebAuthnBrowserVersion),p="";if(h){let{simpleWebAuthnBrowserVersion:u}=h;p=`<script src="https://unpkg.com/@simplewebauthn/browser@${u}/dist/bundle/index.umd.min.js" crossorigin="anonymous"><\/script>`}return un({cookies:i,theme:r,html:function(u){let{csrfToken:k,providers:b=[],callbackUrl:O,theme:L,email:A,error:H}=u;typeof document<"u"&&L?.brandColor&&document.documentElement.style.setProperty("--brand-color",L.brandColor),typeof document<"u"&&L?.buttonText&&document.documentElement.style.setProperty("--button-text-color",L.buttonText);let $=H&&(fo[H]??fo.default),U=b.find(g=>g.type==="webauthn"&&g.enableConditionalUI)?.id;return Q("div",{className:"signin",children:[L?.brandColor&&Q("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${L.brandColor}}`}}),L?.buttonText&&Q("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${L.buttonText}
        }
      `}}),Q("div",{className:"card",children:[$&&Q("div",{className:"error",children:Q("p",{children:$})}),L?.logo&&Q("img",{src:L.logo,alt:"Logo",className:"logo"}),b.map((g,P)=>{let I,q,K;(g.type==="oauth"||g.type==="oidc")&&({bg:I="#fff",brandColor:q,logo:K=`https://authjs.dev/img/providers/${g.id}.svg`}=g.style??{});let te=q??I??"#fff";return Q("div",{className:"provider",children:[g.type==="oauth"||g.type==="oidc"?Q("form",{action:g.signinUrl,method:"POST",children:[Q("input",{type:"hidden",name:"csrfToken",value:k}),O&&Q("input",{type:"hidden",name:"callbackUrl",value:O}),Q("button",{type:"submit",className:"button",style:{"--provider-brand-color":te},tabIndex:0,children:[Q("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",g.name]}),K&&Q("img",{loading:"lazy",height:24,src:K})]})]}):null,(g.type==="email"||g.type==="credentials"||g.type==="webauthn")&&P>0&&b[P-1].type!=="email"&&b[P-1].type!=="credentials"&&b[P-1].type!=="webauthn"&&Q("hr",{}),g.type==="email"&&Q("form",{action:g.signinUrl,method:"POST",children:[Q("input",{type:"hidden",name:"csrfToken",value:k}),Q("label",{className:"section-header",htmlFor:`input-email-for-${g.id}-provider`,children:"Email"}),Q("input",{id:`input-email-for-${g.id}-provider`,autoFocus:!0,type:"email",name:"email",value:A,placeholder:"email@example.com",required:!0}),Q("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",g.name]})]}),g.type==="credentials"&&Q("form",{action:g.callbackUrl,method:"POST",children:[Q("input",{type:"hidden",name:"csrfToken",value:k}),Object.keys(g.credentials).map(J=>Q("div",{children:[Q("label",{className:"section-header",htmlFor:`input-${J}-for-${g.id}-provider`,children:g.credentials[J].label??J}),Q("input",{name:J,id:`input-${J}-for-${g.id}-provider`,type:g.credentials[J].type??"text",placeholder:g.credentials[J].placeholder??"",...g.credentials[J]})]},`input-group-${g.id}`)),Q("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",g.name]})]}),g.type==="webauthn"&&Q("form",{action:g.callbackUrl,method:"POST",id:`${g.id}-form`,children:[Q("input",{type:"hidden",name:"csrfToken",value:k}),Object.keys(g.formFields).map(J=>Q("div",{children:[Q("label",{className:"section-header",htmlFor:`input-${J}-for-${g.id}-provider`,children:g.formFields[J].label??J}),Q("input",{name:J,"data-form-field":!0,id:`input-${J}-for-${g.id}-provider`,type:g.formFields[J].type??"text",placeholder:g.formFields[J].placeholder??"",...g.formFields[J]})]},`input-group-${g.id}`)),Q("button",{id:`submitButton-${g.id}`,type:"submit",tabIndex:0,children:["Sign in with ",g.name]})]}),(g.type==="email"||g.type==="credentials"||g.type==="webauthn")&&P+1<b.length&&Q("hr",{})]},g.id)})]}),U&&Q(kt,{children:Q("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${Wc})(authURL, "${U}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(u=>["email","oauth","oidc"].includes(u.type)||u.type==="credentials"&&u.credentials||u.type==="webauthn"&&u.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:l,...n}),title:"Sign In",headTags:p})},signout:()=>a?.signOut?{redirect:a.signOut,cookies:i}:un({cookies:i,theme:r,html:function(s){let{url:l,csrfToken:h,theme:p}=s;return Q("div",{className:"signout",children:[p?.brandColor&&Q("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${p.brandColor}
        }
      `}}),p?.buttonText&&Q("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${p.buttonText}
        }
      `}}),Q("div",{className:"card",children:[p?.logo&&Q("img",{src:p.logo,alt:"Logo",className:"logo"}),Q("h1",{children:"Signout"}),Q("p",{children:"Are you sure you want to sign out?"}),Q("form",{action:l?.toString(),method:"POST",children:[Q("input",{type:"hidden",name:"csrfToken",value:h}),Q("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:s=>a?.verifyRequest?{redirect:`${a.verifyRequest}${t?.search??""}`,cookies:i}:un({cookies:i,theme:r,html:function(l){let{url:h,theme:p}=l;return Q("div",{className:"verify-request",children:[p.brandColor&&Q("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${p.brandColor}
        }
      `}}),Q("div",{className:"card",children:[p.logo&&Q("img",{src:p.logo,alt:"Logo",className:"logo"}),Q("h1",{children:"Check your email"}),Q("p",{children:"A sign in link has been sent to your email address."}),Q("p",{children:Q("a",{className:"site",href:h.origin,children:h.host})})]})]})}({url:t,theme:r,...s}),title:"Verify Request"}),error:s=>a?.error?{redirect:`${a.error}${a.error.includes("?")?"&":"?"}error=${s}`,cookies:i}:un({cookies:i,theme:r,...function(l){let{url:h,error:p="default",theme:u}=l,k=`${h}/signin`,b={default:{status:200,heading:"Error",message:Q("p",{children:Q("a",{className:"site",href:h?.origin,children:h?.host})})},Configuration:{status:500,heading:"Server error",message:Q("div",{children:[Q("p",{children:"There is a problem with the server configuration."}),Q("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:Q("div",{children:[Q("p",{children:"You do not have permission to sign in."}),Q("p",{children:Q("a",{className:"button",href:k,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:Q("div",{children:[Q("p",{children:"The sign in link is no longer valid."}),Q("p",{children:"It may have been used already or it may have expired."})]}),signin:Q("a",{className:"button",href:k,children:"Sign in"})}},{status:O,heading:L,message:A,signin:H}=b[p]??b.default;return{status:O,html:Q("div",{className:"error",children:[u?.brandColor&&Q("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${u?.brandColor}
        }
      `}}),Q("div",{className:"card",children:[u?.logo&&Q("img",{src:u?.logo,alt:"Logo",className:"logo"}),Q("h1",{children:L}),Q("div",{className:"message",children:A}),H]})]})}}({url:t,theme:r,error:s}),title:"Error"})}}function Gt(e,t=Date.now()){return new Date(t+1e3*e)}async function ui(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:a,events:o,session:{strategy:s,generateSessionToken:l}}=n;if(!i)return{user:t,account:r};let h=r,{createUser:p,updateUser:u,getUser:k,getUserByAccount:b,getUserByEmail:O,linkAccount:L,createSession:A,getSessionAndUser:H,deleteSession:$}=i,U=null,g=null,P=!1,I=s==="jwt";if(e)if(I)try{let K=n.cookies.sessionToken.name;(U=await a.decode({...a,token:e,salt:K}))&&"sub"in U&&U.sub&&(g=await k(U.sub))}catch{}else{let K=await H(e);K&&(U=K.session,g=K.user)}if(h.type==="email"){let K=await O(t.email);return K?(g?.id!==K.id&&!I&&e&&await $(e),g=await u({id:K.id,emailVerified:new Date}),await o.updateUser?.({user:g})):(g=await p({...t,emailVerified:new Date}),await o.createUser?.({user:g}),P=!0),{session:U=I?{}:await A({sessionToken:l(),userId:g.id,expires:Gt(n.session.maxAge)}),user:g,isNewUser:P}}if(h.type==="webauthn"){let K=await b({providerAccountId:h.providerAccountId,provider:h.provider});if(K){if(g){if(K.id===g.id){let J={...h,userId:g.id};return{session:U,user:g,isNewUser:P,account:J}}throw new Un("The account is already associated with another user",{provider:h.provider})}U=I?{}:await A({sessionToken:l(),userId:K.id,expires:Gt(n.session.maxAge)});let te={...h,userId:K.id};return{session:U,user:K,isNewUser:P,account:te}}{if(g){await L({...h,userId:g.id}),await o.linkAccount?.({user:g,account:h,profile:t});let J={...h,userId:g.id};return{session:U,user:g,isNewUser:P,account:J}}if(t.email&&await O(t.email))throw new Un("Another account already exists with the same e-mail address",{provider:h.provider});g=await p({...t}),await o.createUser?.({user:g}),await L({...h,userId:g.id}),await o.linkAccount?.({user:g,account:h,profile:t}),U=I?{}:await A({sessionToken:l(),userId:g.id,expires:Gt(n.session.maxAge)});let te={...h,userId:g.id};return{session:U,user:g,isNewUser:!0,account:te}}}let q=await b({providerAccountId:h.providerAccountId,provider:h.provider});if(q){if(g){if(q.id===g.id)return{session:U,user:g,isNewUser:P};throw new On("The account is already associated with another user",{provider:h.provider})}return{session:U=I?{}:await A({sessionToken:l(),userId:q.id,expires:Gt(n.session.maxAge)}),user:q,isNewUser:P}}{let{provider:K}=n,{type:te,provider:J,providerAccountId:z,userId:ae,...pe}=h;if(h=Object.assign(K.account(pe)??{},{providerAccountId:z,provider:J,type:te,userId:ae}),g)return await L({...h,userId:g.id}),await o.linkAccount?.({user:g,account:h,profile:t}),{session:U,user:g,isNewUser:P};let Z=t.email?await O(t.email):null;if(Z)if(n.provider?.allowDangerousEmailAccountLinking)g=Z,P=!1;else throw new On("Another account already exists with the same e-mail address",{provider:h.provider});else g=await p({...t,emailVerified:null}),P=!0;return await o.createUser?.({user:g}),await L({...h,userId:g.id}),await o.linkAccount?.({user:g,account:h,profile:t}),{session:U=I?{}:await A({sessionToken:l(),userId:g.id,expires:Gt(n.session.maxAge)}),user:g,isNewUser:P}}}function cr(e,t){if(e==null)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}typeof navigator<"u"&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(Y="oauth4webapi/v3.8.3");let st="ERR_INVALID_ARG_VALUE",it="ERR_INVALID_ARG_TYPE";function Ie(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let xt=Symbol(),mo=Symbol(),Bc=Symbol(),Et=Symbol(),yo=Symbol(),di=Symbol(),yu=Symbol(),Vc=new TextEncoder,qc=new TextDecoder;function wt(e){return typeof e=="string"?Vc.encode(e):qc.decode(e)}function bt(e){return typeof e=="string"?j(e):M(e)}Uint8Array.prototype.toBase64?M=e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):M=e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Uint8Array.fromBase64?j=e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(t){throw Ie("The input to be decoded is not correctly encoded.",st,t)}}:j=e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}catch(t){throw Ie("The input to be decoded is not correctly encoded.",st,t)}};class ct extends Error{code;constructor(t,r){super(t,r),this.name=this.constructor.name,this.code=_l,Error.captureStackTrace?.(this,this.constructor)}}class Jc extends Error{code;constructor(t,r){super(t,r),this.name=this.constructor.name,r?.code&&(this.code=r?.code),Error.captureStackTrace?.(this,this.constructor)}}function se(e,t,r){return new Jc(e,{code:t,cause:r})}function Rr(e){return!(e===null||typeof e!="object"||Array.isArray(e))}function Or(e){cr(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e??{});if(Y&&!t.has("user-agent")&&t.set("user-agent",Y),t.has("authorization"))throw Ie('"options.headers" must not include the "authorization" header name',st);return t}function dn(e,t){if(t!==void 0){if(typeof t=="function"&&(t=t(e.href)),!(t instanceof AbortSignal))throw Ie('"options.signal" must return or be an instance of AbortSignal',it);return t}}function wo(e){return e.includes("//")?e.replace("//","/"):e}async function Fc(e,t,r,n){if(!(e instanceof URL))throw Ie(`"${t}" must be an instance of URL`,it);fi(e,n?.[xt]!==!0);let i=r(new URL(e.href)),a=Or(n?.headers);return a.set("accept","application/json"),(n?.[Et]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(a.entries()),method:"GET",redirect:"manual",signal:dn(i,n?.signal)})}async function pi(e,t){return Fc(e,"issuerIdentifier",r=>{switch(t?.algorithm){case void 0:case"oidc":r.pathname=wo(`${r.pathname}/.well-known/openid-configuration`);break;case"oauth2":(function(n,i,a=!1){n.pathname==="/"?n.pathname=i:n.pathname=wo(`${i}/${a?n.pathname:n.pathname.replace(/(\/)$/,"")}`)})(r,".well-known/oauth-authorization-server");break;default:throw Ie('"options.algorithm" must be "oidc" (default), or "oauth2"',st)}return r},t)}function Ir(e,t,r,n,i){try{if(typeof e!="number"||!Number.isFinite(e))throw Ie(`${r} must be a number`,it,i);if(e>0)return;if(t){if(e!==0)throw Ie(`${r} must be a non-negative number`,st,i);return}throw Ie(`${r} must be a positive number`,st,i)}catch(a){throw n?se(a.message,n,i):a}}function Ge(e,t,r,n){try{if(typeof e!="string")throw Ie(`${t} must be a string`,it,n);if(e.length===0)throw Ie(`${t} must not be empty`,st,n)}catch(i){throw r?se(i.message,r,n):i}}async function hi(e,t){if(!(e instanceof URL)&&e!==jo)throw Ie('"expectedIssuerIdentifier" must be an instance of URL',it);if(!cr(t,Response))throw Ie('"response" must be an instance of Response',it);if(t.status!==200)throw se('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',gn,t);$r(t);let r=await yn(t);if(Ge(r.issuer,'"response" body "issuer" property',Ee,{body:r}),e!==jo&&new URL(r.issuer).href!==e.href)throw se('"response" body "issuer" property does not match the expected value',Io,{expected:e.href,body:r,attribute:"issuer"});return r}function bo(e){(function(t,r){if(mi(t)!==r)throw vo(t,r)})(e,"application/json")}function vo(e,...t){let r='"response" content-type must be ';if(t.length>2){let n=t.pop();r+=`${t.join(", ")}, or ${n}`}else t.length===2?r+=`${t[0]} or ${t[1]}`:r+=t[0];return se(r,xl,e)}function pn(){return bt(crypto.getRandomValues(new Uint8Array(32)))}async function zc(e){return Ge(e,"codeVerifier"),bt(await crypto.subtle.digest("SHA-256",wt(e)))}function lr(e){let t=e?.[mo];return typeof t=="number"&&Number.isFinite(t)?t:0}function hn(e){let t=e?.[Bc];return typeof t=="number"&&Number.isFinite(t)&&Math.sign(t)!==-1?t:30}function Ur(){return Math.floor(Date.now()/1e3)}function ur(e){if(typeof e!="object"||e===null)throw Ie('"as" must be an object',it);Ge(e.issuer,'"as.issuer"')}function Nr(e){if(typeof e!="object"||e===null)throw Ie('"client" must be an object',it);Ge(e.client_id,'"client.client_id"')}function _o(e,t){let r=Ur()+lr(t);return{jti:pn(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function Gc(e,t,r){if(!r.usages.includes("sign"))throw Ie('CryptoKey instances used for signing assertions must include "sign" in their "usages"',st);let n=`${bt(wt(JSON.stringify(e)))}.${bt(wt(JSON.stringify(t)))}`,i=bt(await crypto.subtle.sign(Cl(r),r,wt(n)));return`${n}.${i}`}async function wu(e,t){let{kty:r,e:n,n:i,x:a,y:o,crv:s,pub:l}=await crypto.subtle.exportKey("jwk",e),h={kty:r,e:n,n:i,x:a,y:o,crv:s,pub:l};return r==="AKP"&&(h.alg=t),c.set(e,h),h}let Xc=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function fi(e,t){if(t&&e.protocol!=="https:")throw se("only requests to HTTPS are allowed",El,e);if(e.protocol!=="https:"&&e.protocol!=="http:")throw se("only HTTP and HTTPS requests are allowed",Al,e)}function So(e,t,r,n){let i;if(typeof e!="string"||!(i=Xc(e)))throw se(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,e===void 0?Tl:Pl,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return fi(i,n),i}function gi(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?So(e.mtls_endpoint_aliases[t],t,r,n):So(e[t],t,r,n)}class Yc extends Error{cause;code;error;status;error_description;response;constructor(t,r){super(t,r),this.name=this.constructor.name,this.code=vl,this.cause=r.cause,this.error=r.cause.error,this.status=r.response.status,this.error_description=r.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:r.response}),Error.captureStackTrace?.(this,this.constructor)}}class ko extends Error{cause;code;error;error_description;constructor(t,r){super(t,r),this.name=this.constructor.name,this.code=Sl,this.cause=r.cause,this.error=r.cause.get("error"),this.error_description=r.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class Zc extends Error{cause;code;response;status;constructor(t,r){super(t,r),this.name=this.constructor.name,this.code=bl,this.cause=r.cause,this.status=r.response.status,this.response=r.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let fn="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",Qc=RegExp("^[,\\s]*("+fn+")"),el=RegExp("^[,\\s]*("+fn+')\\s*=\\s*"((?:[^"\\\\]|\\\\[\\s\\S])*)"[,\\s]*(.*)'),tl=RegExp("^[,\\s]*("+fn+")\\s*=\\s*("+fn+")[,\\s]*(.*)"),rl=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2})(?:$|[,\\s])(.*)");async function nl(e){if(e.status>399&&e.status<500){$r(e),bo(e);try{let t=await e.clone().json();if(Rr(t)&&typeof t.error=="string"&&t.error.length)return t}catch{}}}async function il(e,t,r){if(e.status!==t){let n;throw Co(e),(n=await nl(e))?(await e.body?.cancel(),new Yc("server responded with an error in the response body",{cause:n,response:e})):se(`"response" is not a conform ${r} response (unexpected HTTP status code)`,gn,e)}}function xo(e){if(!wi.has(e))throw Ie('"options.DPoP" is not a valid DPoPHandle',st)}async function al(e,t,r,n,i,a){if(Ge(e,'"accessToken"'),!(r instanceof URL))throw Ie('"url" must be an instance of URL',it);fi(r,a?.[xt]!==!0),n=Or(n),a?.DPoP&&(xo(a.DPoP),await a.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let o=await(a?.[Et]||fetch)(r.href,{body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:dn(r,a?.signal)});return a?.DPoP?.cacheNonce(o,r),o}async function Eo(e,t,r,n){ur(e),Nr(t);let i=gi(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[xt]!==!0),a=Or(n?.headers);return t.userinfo_signed_response_alg?a.set("accept","application/jwt"):(a.set("accept","application/json"),a.append("accept","application/jwt")),al(r,"GET",i,a,null,{...n,[mo]:lr(t)})}function bu(e,t,r,n){(f||=new WeakMap).set(e,{jwks:t,uat:r,get age(){return Ur()-this.uat}}),n&&Object.assign(n,{jwks:structuredClone(t),uat:r})}function vu(e,t){f?.delete(e),delete t?.jwks,delete t?.uat}let ol=Symbol();function mi(e){return e.headers.get("content-type")?.split(";")[0]}async function sl(e,t,r,n,i){let a;if(ur(e),Nr(t),!cr(n,Response))throw Ie('"response" must be an instance of Response',it);if(Co(n),n.status!==200)throw se('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',gn,n);if($r(n),mi(n)==="application/jwt"){let{claims:o,jwt:s}=await No(await n.text(),$o.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),lr(t),hn(t),i?.[di]).then(ul.bind(void 0,t.client_id)).then(dl.bind(void 0,e));To.set(n,s),a=o}else{if(t.userinfo_signed_response_alg)throw se("JWT UserInfo Response expected",kl,n);a=await yn(n)}if(Ge(a.sub,'"response" body "sub" property',Ee,{body:a}),r!==ol){if(Ge(r,'"expectedSubject"'),a.sub!==r)throw se('unexpected "response" body "sub" property value',Io,{expected:r,body:a,attribute:"sub"})}return a}async function cl(e,t,r,n,i,a,o){return await r(e,t,i,a),a.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(o?.[Et]||fetch)(n.href,{body:i,headers:Object.fromEntries(a.entries()),method:"POST",redirect:"manual",signal:dn(n,o?.signal)})}async function ll(e,t,r,n,i,a){let o=gi(e,"token_endpoint",t.use_mtls_endpoint_aliases,a?.[xt]!==!0);i.set("grant_type",n);let s=Or(a?.headers);s.set("accept","application/json"),a?.DPoP!==void 0&&(xo(a.DPoP),await a.DPoP.addProof(o,s,"POST"));let l=await cl(e,t,r,o,i,s,a);return a?.DPoP?.cacheNonce(l,o),l}let Ao=new WeakMap,To=new WeakMap;function yi(e){if(!e.id_token)return;let t=Ao.get(e);if(!t)throw Ie('"ref" was already garbage collected or did not resolve from the proper sources',st);return t}async function Po(e,t,r,n,i,a){if(ur(e),Nr(t),!cr(r,Response))throw Ie('"response" must be an instance of Response',it);await il(r,200,"Token Endpoint"),$r(r);let o=await yn(r);if(Ge(o.access_token,'"response" body "access_token" property',Ee,{body:o}),Ge(o.token_type,'"response" body "token_type" property',Ee,{body:o}),o.token_type=o.token_type.toLowerCase(),o.expires_in!==void 0){let s=typeof o.expires_in!="number"?parseFloat(o.expires_in):o.expires_in;Ir(s,!0,'"response" body "expires_in" property',Ee,{body:o}),o.expires_in=s}if(o.refresh_token!==void 0&&Ge(o.refresh_token,'"response" body "refresh_token" property',Ee,{body:o}),o.scope!==void 0&&typeof o.scope!="string")throw se('"response" body "scope" property must be a string',Ee,{body:o});if(o.id_token!==void 0){Ge(o.id_token,'"response" body "id_token" property',Ee,{body:o});let s=["aud","exp","iat","iss","sub"];t.require_auth_time===!0&&s.push("auth_time"),t.default_max_age!==void 0&&(Ir(t.default_max_age,!0,'"client.default_max_age"'),s.push("auth_time")),n?.length&&s.push(...n);let{claims:l,jwt:h}=await No(o.id_token,$o.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),lr(t),hn(t),i).then(gl.bind(void 0,s)).then(Oo.bind(void 0,e)).then(Ro.bind(void 0,t.client_id));if(Array.isArray(l.aud)&&l.aud.length!==1){if(l.azp===void 0)throw se('ID Token "aud" (audience) claim includes additional untrusted audiences',Bt,{claims:l,claim:"aud"});if(l.azp!==t.client_id)throw se('unexpected ID Token "azp" (authorized party) claim value',Bt,{expected:t.client_id,claims:l,claim:"azp"})}l.auth_time!==void 0&&Ir(l.auth_time,!0,'ID Token "auth_time" (authentication time)',Ee,{claims:l}),To.set(r,h),Ao.set(o,l)}if(a?.[o.token_type]!==void 0)a[o.token_type](r,o);else if(o.token_type!=="dpop"&&o.token_type!=="bearer")throw new ct("unsupported `token_type` value",{cause:{body:o}});return o}function Co(e){let t;if(t=function(r){if(!cr(r,Response))throw Ie('"response" must be an instance of Response',it);let n=r.headers.get("www-authenticate");if(n===null)return;let i=[],a=n;for(;a;){let o,s=a.match(Qc),l=s?.[1].toLowerCase();if(!l)return;let h=a.substring(s[0].length);if(h&&!h.match(/^[\s,]/))return;let p=h.match(/^\s+(.*)$/),u=!!p;a=p?p[1]:void 0;let k={};if(u)for(;a;){let O,L;if(s=a.match(el)){if([,O,L,a]=s,L.includes("\\"))try{L=JSON.parse(`"${L}"`)}catch{}k[O.toLowerCase()]=L;continue}if(s=a.match(tl)){[,O,L,a]=s,k[O.toLowerCase()]=L;continue}if(s=a.match(rl)){if(Object.keys(k).length)break;[,o,a]=s;break}return}else a=h||void 0;let b={scheme:l,parameters:k};o&&(b.token68=o),i.push(b)}if(i.length)return i}(e))throw new Zc("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function ul(e,t){return t.claims.aud!==void 0?Ro(e,t):t}function Ro(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw se('unexpected JWT "aud" (audience) claim value',Bt,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw se('unexpected JWT "aud" (audience) claim value',Bt,{expected:e,claims:t.claims,claim:"aud"});return t}function dl(e,t){return t.claims.iss!==void 0?Oo(e,t):t}function Oo(e,t){let r=e[Ol]?.(t)??e.issuer;if(t.claims.iss!==r)throw se('unexpected JWT "iss" (issuer) claim value',Bt,{expected:r,claims:t.claims,claim:"iss"});return t}let wi=new WeakSet,pl=Symbol();async function hl(e,t,r,n,i,a,o){if(ur(e),Nr(t),!wi.has(n))throw Ie('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',st);Ge(i,'"redirectUri"');let s=Xt(n,"code");if(!s)throw se('no authorization code in "callbackParameters"',Ee);let l=new URLSearchParams(o?.additionalParameters);return l.set("redirect_uri",i),l.set("code",s),a!==pl&&(Ge(a,'"codeVerifier"'),l.set("code_verifier",a)),ll(e,t,r,"authorization_code",l,o)}let fl={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function gl(e,t){for(let r of e)if(t.claims[r]===void 0)throw se(`JWT "${r}" (${fl[r]}) claim missing`,Ee,{claims:t.claims});return t}let bi=Symbol(),vi=Symbol();async function ml(e,t,r,n){return typeof n?.expectedNonce=="string"||typeof n?.maxAge=="number"||n?.requireIdToken?yl(e,t,r,n.expectedNonce,n.maxAge,n[di],n.recognizedTokenTypes):wl(e,t,r,n?.[di],n?.recognizedTokenTypes)}async function yl(e,t,r,n,i,a,o){let s=[];switch(n){case void 0:n=bi;break;case bi:break;default:Ge(n,'"expectedNonce" argument'),s.push("nonce")}switch(i??=t.default_max_age){case void 0:i=vi;break;case vi:break;default:Ir(i,!0,'"maxAge" argument'),s.push("auth_time")}let l=await Po(e,t,r,s,a,o);Ge(l.id_token,'"response" body "id_token" property',Ee,{body:l});let h=yi(l);if(i!==vi){let p=Ur()+lr(t),u=hn(t);if(h.auth_time+i<p-u)throw se("too much time has elapsed since the last End-User authentication",mn,{claims:h,now:p,tolerance:u,claim:"auth_time"})}if(n===bi){if(h.nonce!==void 0)throw se('unexpected ID Token "nonce" claim value',Bt,{expected:void 0,claims:h,claim:"nonce"})}else if(h.nonce!==n)throw se('unexpected ID Token "nonce" claim value',Bt,{expected:n,claims:h,claim:"nonce"});return l}async function wl(e,t,r,n,i){let a=await Po(e,t,r,void 0,n,i),o=yi(a);if(o){if(t.default_max_age!==void 0){Ir(t.default_max_age,!0,'"client.default_max_age"');let s=Ur()+lr(t),l=hn(t);if(o.auth_time+t.default_max_age<s-l)throw se("too much time has elapsed since the last End-User authentication",mn,{claims:o,now:s,tolerance:l,claim:"auth_time"})}if(o.nonce!==void 0)throw se('unexpected ID Token "nonce" claim value',Bt,{expected:void 0,claims:o,claim:"nonce"})}return a}let bl="OAUTH_WWW_AUTHENTICATE_CHALLENGE",vl="OAUTH_RESPONSE_BODY_ERROR",_l="OAUTH_UNSUPPORTED_OPERATION",Sl="OAUTH_AUTHORIZATION_RESPONSE_ERROR",kl="OAUTH_JWT_USERINFO_EXPECTED",_i="OAUTH_PARSE_ERROR",Ee="OAUTH_INVALID_RESPONSE",xl="OAUTH_RESPONSE_IS_NOT_JSON",gn="OAUTH_RESPONSE_IS_NOT_CONFORM",El="OAUTH_HTTP_REQUEST_FORBIDDEN",Al="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",mn="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",Bt="OAUTH_JWT_CLAIM_COMPARISON_FAILED",Io="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",_u="OAUTH_KEY_SELECTION_FAILED",Tl="OAUTH_MISSING_SERVER_METADATA",Pl="OAUTH_INVALID_SERVER_METADATA";function $r(e){if(e.bodyUsed)throw Ie('"response" body has been used already',st)}async function Su(e,t){ur(e);let r=gi(e,"jwks_uri",!1,t?.[xt]!==!0),n=Or(t?.headers);return n.set("accept","application/json"),n.append("accept","application/jwk-set+json"),(t?.[Et]||fetch)(r.href,{body:void 0,headers:Object.fromEntries(n.entries()),method:"GET",redirect:"manual",signal:dn(r,t?.signal)})}async function ku(e){if(!cr(e,Response))throw Ie('"response" must be an instance of Response',it);if(e.status!==200)throw se('"response" is not a conform JSON Web Key Set response (unexpected HTTP status code)',gn,e);$r(e);let t=await yn(e,r=>function(n,...i){if(!i.includes(mi(n)))throw vo(n,...i)}(r,"application/json","application/jwk-set+json"));if(!Array.isArray(t.keys))throw se('"response" body "keys" property must be an array',Ee,{body:t});if(!Array.prototype.every.call(t.keys,Rr))throw se('"response" body "keys" property members must be JWK formatted objects',Ee,{body:t});return t}function Uo(e){let{algorithm:t}=e;if(typeof t.modulusLength!="number"||t.modulusLength<2048)throw new ct(`unsupported ${t.name} modulusLength`,{cause:e})}function Cl(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(t){let{algorithm:r}=t;switch(r.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new ct("unsupported ECDSA namedCurve",{cause:t})}}(e)};case"RSA-PSS":switch(Uo(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new ct("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return Uo(e),e.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return e.algorithm.name}throw new ct("unsupported CryptoKey algorithm name",{cause:e})}async function No(e,t,r,n,i){let a,o,{0:s,1:l,length:h}=e.split(".");if(h===5)if(i!==void 0)e=await i(e),{0:s,1:l,length:h}=e.split(".");else throw new ct("JWE decryption is not configured",{cause:e});if(h!==3)throw se("Invalid JWT",Ee,e);try{a=JSON.parse(wt(bt(s)))}catch(u){throw se("failed to parse JWT Header body as base64url encoded JSON",_i,u)}if(!Rr(a))throw se("JWT Header must be a top level object",Ee,e);if(t(a),a.crit!==void 0)throw new ct('no JWT "crit" header parameter extensions are supported',{cause:{header:a}});try{o=JSON.parse(wt(bt(l)))}catch(u){throw se("failed to parse JWT Payload body as base64url encoded JSON",_i,u)}if(!Rr(o))throw se("JWT Payload must be a top level object",Ee,e);let p=Ur()+r;if(o.exp!==void 0){if(typeof o.exp!="number")throw se('unexpected JWT "exp" (expiration time) claim type',Ee,{claims:o});if(o.exp<=p-n)throw se('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',mn,{claims:o,now:p,tolerance:n,claim:"exp"})}if(o.iat!==void 0&&typeof o.iat!="number")throw se('unexpected JWT "iat" (issued at) claim type',Ee,{claims:o});if(o.iss!==void 0&&typeof o.iss!="string")throw se('unexpected JWT "iss" (issuer) claim type',Ee,{claims:o});if(o.nbf!==void 0){if(typeof o.nbf!="number")throw se('unexpected JWT "nbf" (not before) claim type',Ee,{claims:o});if(o.nbf>p+n)throw se('unexpected JWT "nbf" (not before) claim value',mn,{claims:o,now:p,tolerance:n,claim:"nbf"})}if(o.aud!==void 0&&typeof o.aud!="string"&&!Array.isArray(o.aud))throw se('unexpected JWT "aud" (audience) claim type',Ee,{claims:o});return{header:a,claims:o,jwt:e}}async function xu(e,t,r){let n;switch(t.alg){case"RS256":case"PS256":case"ES256":n="SHA-256";break;case"RS384":case"PS384":case"ES384":n="SHA-384";break;case"RS512":case"PS512":case"ES512":case"Ed25519":case"EdDSA":n="SHA-512";break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":n={name:"cSHAKE256",length:512};break;default:throw new ct(`unsupported JWS algorithm for ${r} calculation`,{cause:{alg:t.alg}})}let i=await crypto.subtle.digest(n,wt(e));return bt(i.slice(0,i.byteLength/2))}async function Eu(e){if(e.bodyUsed)throw Ie("form_post Request instances must contain a readable body",st,{cause:e});return e.text()}function $o(e,t,r,n){if(e!==void 0){if(typeof e=="string"?n.alg!==e:!e.includes(n.alg))throw se('unexpected JWT "alg" header parameter',Ee,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw se('unexpected JWT "alg" header parameter',Ee,{header:n,expected:t,reason:"authorization server metadata"});return}if(r!==void 0){if(typeof r=="string"?n.alg!==r:typeof r=="function"?!r(n.alg):!r.includes(n.alg))throw se('unexpected JWT "alg" header parameter',Ee,{header:n,expected:r,reason:"default value"});return}throw se('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function Xt(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw se(`"${t}" parameter must be provided only once`,Ee);return r}let Lo=Symbol(),Rl=Symbol();async function Au(e,t){let{ext:r,key_ops:n,use:i,...a}=t;return crypto.subtle.importKey("jwk",a,function(o){switch(o){case"PS256":case"PS384":case"PS512":return{name:"RSA-PSS",hash:`SHA-${o.slice(-3)}`};case"RS256":case"RS384":case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:`SHA-${o.slice(-3)}`};case"ES256":case"ES384":return{name:"ECDSA",namedCurve:`P-${o.slice(-3)}`};case"ES512":return{name:"ECDSA",namedCurve:"P-521"};case"EdDSA":return"Ed25519";case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return o;default:throw new ct("unsupported JWS algorithm",{cause:{alg:o}})}}(e),!0,["verify"])}async function yn(e,t=bo){let r;try{r=await e.json()}catch(n){throw t(e),se('failed to parse "response" body as JSON',_i,n)}if(!Rr(r))throw se('"response" body must be a top level object',Ee,{body:r});return r}let jo=Symbol(),Ol=Symbol();async function wn(e,t,r){let{cookies:n,logger:i}=r,a=n[e],o=new Date;o.setTime(o.getTime()+9e5),i.debug(`CREATE_${e.toUpperCase()}`,{name:a.name,payload:t,COOKIE_TTL:900,expires:o});let s=await zr({...r.jwt,maxAge:900,token:{value:t},salt:a.name}),l={...a.options,expires:o};return{name:a.name,value:s,options:l}}async function Do(e,t,r){try{let{logger:n,cookies:i,jwt:a}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new er(`${e} cookie was missing`);let o=await Gr({...a,token:t,salt:i[e].name});if(o?.value)return o.value;throw Error("Invalid cookie")}catch(n){throw new er(`${e} value could not be parsed`,{cause:n})}}function Mo(e,t,r){let{logger:n,cookies:i}=t,a=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:a}),r.push({name:a.name,value:"",options:{...i[e].options,maxAge:0}})}function Si(e,t){return async function(r,n,i){let{provider:a,logger:o}=i;if(!a?.checks?.includes(e))return;let s=r?.[i.cookies[t].name];o.debug(`USE_${t.toUpperCase()}`,{value:s});let l=await Do(t,s,i);return Mo(t,i,n),l}}let Ho={async create(e){let t=pn(),r=await zc(t);return{cookie:await wn("pkceCodeVerifier",t,e),value:r}},use:Si("pkce","pkceCodeVerifier")},Wo="encodedState",ki={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new er("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:pn()},i=await zr({secret:e.jwt.secret,token:n,salt:Wo,maxAge:900});return{cookie:await wn("state",i,e),value:i}},use:Si("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await Gr({secret:t.jwt.secret,token:e,salt:Wo});if(r)return r;throw Error("Invalid state")}catch(r){throw new er("State could not be decoded",{cause:r})}}},Ko={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=pn();return{cookie:await wn("nonce",t,e),value:t}},use:Si("nonce","nonce")},Bo="encodedWebauthnChallenge",bn={create:async(e,t,r)=>({cookie:await wn("webauthnChallenge",await zr({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:Bo,maxAge:900}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await Do("webauthnChallenge",n,e),a=await Gr({secret:e.jwt.secret,token:i,salt:Bo});if(Mo("webauthnChallenge",e,r),!a)throw new er("WebAuthn challenge was missing");return a}};function Vo(e){return encodeURIComponent(e).replace(/%20/g,"+")}async function Il(e,t,r){let n,i,a,{logger:o,provider:s}=r,{token:l,userinfo:h}=s;if(l?.url&&l.url.host!=="authjs.dev"||h?.url&&h.url.host!=="authjs.dev")n={issuer:s.issuer??"https://authjs.dev",token_endpoint:l?.url.toString(),userinfo_endpoint:h?.url.toString()};else{let g=new URL(s.issuer),P=await pi(g,{[xt]:!0,[Et]:s[Ut]});if(!(n=await hi(g,P)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!n.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let p={client_id:s.clientId,...s.client};switch(p.token_endpoint_auth_method){case void 0:case"client_secret_basic":i=(g,P,I,q)=>{q.set("authorization",function(K,te){let J=Vo(K),z=Vo(te);return`Basic ${btoa(`${J}:${z}`)}`}(s.clientId,s.clientSecret))};break;case"client_secret_post":var u;Ge(u=s.clientSecret,'"clientSecret"'),i=(g,P,I,q)=>{I.set("client_id",P.client_id),I.set("client_secret",u)};break;case"client_secret_jwt":i=function(g,P){let I;Ge(g,'"clientSecret"');let q;return async(K,te,J,z)=>{I||=await crypto.subtle.importKey("raw",wt(g),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let ae={alg:"HS256"},pe=_o(K,te);q?.(ae,pe);let Z=`${bt(wt(JSON.stringify(ae)))}.${bt(wt(JSON.stringify(pe)))}`,B=await crypto.subtle.sign(I.algorithm,I,wt(Z));J.set("client_id",te.client_id),J.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),J.set("client_assertion",`${Z}.${bt(new Uint8Array(B))}`)}}(s.clientSecret);break;case"private_key_jwt":i=function(g,P){let{key:I,kid:q}=g instanceof CryptoKey?{key:g}:g?.key instanceof CryptoKey?(g.kid!==void 0&&Ge(g.kid,'"kid"'),{key:g.key,kid:g.kid}):{};return function(K,te){if(function(J,z){if(!(J instanceof CryptoKey))throw Ie(`${z} must be a CryptoKey`,it)}(K,te),K.type!=="private")throw Ie(`${te} must be a private CryptoKey`,st)}(I,'"clientPrivateKey.key"'),async(K,te,J,z)=>{let ae={alg:function(Z){switch(Z.algorithm.name){case"RSA-PSS":return function(B){switch(B.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new ct("unsupported RsaHashedKeyAlgorithm hash name",{cause:B})}}(Z);case"RSASSA-PKCS1-v1_5":return function(B){switch(B.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new ct("unsupported RsaHashedKeyAlgorithm hash name",{cause:B})}}(Z);case"ECDSA":return function(B){switch(B.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new ct("unsupported EcKeyAlgorithm namedCurve",{cause:B})}}(Z);case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return Z.algorithm.name;case"EdDSA":return"Ed25519";default:throw new ct("unsupported CryptoKey algorithm name",{cause:Z})}}(I),kid:q},pe=_o(K,te);P?.[yo]?.(ae,pe),J.set("client_id",te.client_id),J.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),J.set("client_assertion",await Gc(ae,pe,I))}}(s.token.clientPrivateKey,{[yo](g,P){P.aud=[n.issuer,n.token_endpoint]}});break;case"none":i=(g,P,I,q)=>{I.set("client_id",P.client_id)};break;default:throw Error("unsupported client authentication method")}let k=[],b=await ki.use(t,k,r);try{a=function(g,P,I,q){var K;if(ur(g),Nr(P),I instanceof URL&&(I=I.searchParams),!(I instanceof URLSearchParams))throw Ie('"parameters" must be an instance of URLSearchParams, or URL',it);if(Xt(I,"response"))throw se('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',Ee,{parameters:I});let te=Xt(I,"iss"),J=Xt(I,"state");if(!te&&g.authorization_response_iss_parameter_supported)throw se('response parameter "iss" (issuer) missing',Ee,{parameters:I});if(te&&te!==g.issuer)throw se('unexpected "iss" (issuer) response parameter value',Ee,{expected:g.issuer,parameters:I});switch(q){case void 0:case Rl:if(J!==void 0)throw se('unexpected "state" response parameter encountered',Ee,{expected:void 0,parameters:I});break;case Lo:break;default:if(Ge(q,'"expectedState" argument'),J!==q)throw se(J===void 0?'response parameter "state" missing':'unexpected "state" response parameter value',Ee,{expected:q,parameters:I})}if(Xt(I,"error"))throw new ko("authorization response from the server is an error",{cause:I});let z=Xt(I,"id_token"),ae=Xt(I,"token");if(z!==void 0||ae!==void 0)throw new ct("implicit and hybrid flows are not supported");return K=new URLSearchParams(I),wi.add(K),K}(n,p,new URLSearchParams(e),s.checks.includes("state")?b:Lo)}catch(g){if(g instanceof ko){let P={providerId:s.id,...Object.fromEntries(g.cause.entries())};throw o.debug("OAuthCallbackError",P),new In("OAuth Provider returned an error",P)}throw g}let O=await Ho.use(t,k,r),L=s.callbackUrl;!r.isOnRedirectProxy&&s.redirectProxyUrl&&(L=s.redirectProxyUrl);let A=await hl(n,p,i,a,L,O??"decoy",{[xt]:!0,[Et]:(...g)=>(s.checks.includes("pkce")||g[1].body.delete("code_verifier"),(s[Ut]??fetch)(...g))});s.token?.conform&&(A=await s.token.conform(A.clone())??A);let H={},$=s.type==="oidc";if(s[La])switch(s.id){case"microsoft-entra-id":case"azure-ad":{let g=await A.clone().json();if(g.error){let I={providerId:s.id,...g};throw new In(`OAuth Provider returned an error: ${g.error}`,I)}let{tid:P}=function(I){let q,K;if(typeof I!="string")throw new jt("JWTs must use Compact JWS serialization, JWT must be a string");let{1:te,length:J}=I.split(".");if(J===5)throw new jt("Only JWTs using Compact JWS serialization can be decoded");if(J!==3)throw new jt("Invalid JWT");if(!te)throw new jt("JWTs must contain a payload");try{q=ot(te)}catch{throw new jt("Failed to base64url decode the payload")}try{K=JSON.parse(tr.decode(q))}catch{throw new jt("Failed to parse the decoded payload as JSON")}if(!It(K))throw new jt("Invalid JWT Claims Set");return K}(g.id_token);if(typeof P=="string"){let I=n.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",q=new URL(n.issuer.replace(I,P)),K=await pi(q,{[Et]:s[Ut]});n=await hi(q,K)}}}let U=await ml(n,p,A,{expectedNonce:await Ko.use(t,k,r),requireIdToken:$});if($){let g=yi(U);if(H=g,s[La]&&s.id==="apple")try{H.user=JSON.parse(e?.user)}catch{}if(s.idToken===!1){let P=await Eo(n,p,U.access_token,{[Et]:s[Ut],[xt]:!0});H=await sl(n,p,g.sub,P)}}else if(h?.request){let g=await h.request({tokens:U,provider:s});g instanceof Object&&(H=g)}else if(h?.url)H=await(await Eo(n,p,U.access_token,{[Et]:s[Ut],[xt]:!0})).json();else throw TypeError("No userinfo endpoint configured");return U.expires_in&&(U.expires_at=Math.floor(Date.now()/1e3)+Number(U.expires_in)),{...await Ul(H,s,U,o),profile:H,cookies:k}}async function Ul(e,t,r,n){try{let i=await t.profile(e,r);return{user:{...i,id:crypto.randomUUID(),email:i.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:i.id??crypto.randomUUID()}}}catch(i){n.debug("getProfile error details",e),n.error(new Fi(i,{provider:t.id}))}}var qo=G(6195).Buffer;async function Nl(e,t,r,n){let i=await Ml(e,t,r),{cookie:a}=await bn.create(e,i.challenge,r);return{status:200,cookies:[...n??[],a],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function $l(e,t,r,n){let i=await Dl(e,t,r),{cookie:a}=await bn.create(e,i.challenge);return{status:200,cookies:[...n??[],a],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function Ll(e,t,r){let n,{adapter:i,provider:a}=e,o=t.body&&typeof t.body.data=="string"?JSON.parse(t.body.data):void 0;if(!o||typeof o!="object"||!("id"in o)||typeof o.id!="string")throw new we("Invalid WebAuthn Authentication response");let s=vn(Lr(o.id)),l=await i.getAuthenticator(s);if(!l)throw new we(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:s})}`);let{challenge:h}=await bn.use(e,t.cookies,r);try{let O=a.getRelayingParty(e,t);n=await a.simpleWebAuthn.verifyAuthenticationResponse({...a.verifyAuthenticationOptions,expectedChallenge:h,response:o,authenticator:{...l,credentialDeviceType:l.credentialDeviceType,transports:xi(l.transports),credentialID:Lr(l.credentialID),credentialPublicKey:Lr(l.credentialPublicKey)},expectedOrigin:O.origin,expectedRPID:O.id})}catch(O){throw new vr(O)}let{verified:p,authenticationInfo:u}=n;if(!p)throw new vr("WebAuthn authentication response could not be verified");try{let{newCounter:O}=u;await i.updateAuthenticatorCounter(l.credentialID,O)}catch(O){throw new Pn(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:s,oldCounter:l.counter,newCounter:u.newCounter})}`,O)}let k=await i.getAccount(l.providerAccountId,a.id);if(!k)throw new we(`WebAuthn account not found in database: ${JSON.stringify({credentialID:s,providerAccountId:l.providerAccountId})}`);let b=await i.getUser(k.userId);if(!b)throw new we(`WebAuthn user not found in database: ${JSON.stringify({credentialID:s,providerAccountId:l.providerAccountId,userID:k.userId})}`);return{account:k,user:b}}async function jl(e,t,r){var n;let i,{provider:a}=e,o=t.body&&typeof t.body.data=="string"?JSON.parse(t.body.data):void 0;if(!o||typeof o!="object"||!("id"in o)||typeof o.id!="string")throw new we("Invalid WebAuthn Registration response");let{challenge:s,registerData:l}=await bn.use(e,t.cookies,r);if(!l)throw new we("Missing user registration data in WebAuthn challenge cookie");try{let u=a.getRelayingParty(e,t);i=await a.simpleWebAuthn.verifyRegistrationResponse({...a.verifyRegistrationOptions,expectedChallenge:s,response:o,expectedOrigin:u.origin,expectedRPID:u.id})}catch(u){throw new vr(u)}if(!i.verified||!i.registrationInfo)throw new vr("WebAuthn registration response could not be verified");let h={providerAccountId:vn(i.registrationInfo.credentialID),provider:e.provider.id,type:a.type},p={providerAccountId:h.providerAccountId,counter:i.registrationInfo.counter,credentialID:vn(i.registrationInfo.credentialID),credentialPublicKey:vn(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=o.response.transports,n?.join(","))};return{user:l,account:h,authenticator:p}}async function Dl(e,t,r){let{provider:n,adapter:i}=e,a=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:o.id,allowCredentials:a?.map(s=>({id:Lr(s.credentialID),type:"public-key",transports:xi(s.transports)}))})}async function Ml(e,t,r){let{provider:n,adapter:i}=e,a=r.id?await i.listAuthenticatorsByUserId(r.id):null,o=Xn(32),s=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:o,userName:r.email,userDisplayName:r.name??void 0,rpID:s.id,rpName:s.name,excludeCredentials:a?.map(l=>({id:Lr(l.credentialID),type:"public-key",transports:xi(l.transports)}))})}function Jo(e){let{provider:t,adapter:r}=e;if(!r)throw new br("An adapter is required for the WebAuthn provider");if(!t||t.type!=="webauthn")throw new Br("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function Lr(e){return new Uint8Array(qo.from(e,"base64"))}function vn(e){return qo.from(e).toString("base64")}function xi(e){return e?e.split(","):void 0}async function Fo(e,t,r,n){if(!t.provider)throw new Br("Callback route called without provider");let{query:i,body:a,method:o,headers:s}=e,{provider:l,adapter:h,url:p,callbackUrl:u,pages:k,jwt:b,events:O,callbacks:L,session:{strategy:A,maxAge:H},logger:$}=t,U=A==="jwt";try{if(l.type==="oauth"||l.type==="oidc"){let g,P=l.authorization?.url.searchParams.get("response_mode")==="form_post"?a:i;if(t.isOnRedirectProxy&&P?.state){let Z=await ki.decode(P.state,t);if(Z?.origin&&new URL(Z.origin).origin!==t.url.origin){let B=`${Z.origin}?${new URLSearchParams(P)}`;return $.debug("Proxy redirecting to",B),{redirect:B,cookies:n}}}let I=await Il(P,e.cookies,t);I.cookies.length&&n.push(...I.cookies),$.debug("authorization result",I);let{user:q,account:K,profile:te}=I;if(!q||!K||!te)return{redirect:`${p}/signin`,cookies:n};if(h){let{getUserByAccount:Z}=h;g=await Z({providerAccountId:K.providerAccountId,provider:l.id})}let J=await _n({user:g??q,account:K,profile:te},t);if(J)return{redirect:J,cookies:n};let{user:z,session:ae,isNewUser:pe}=await ui(r.value,q,K,t);if(U){let Z={name:z.name,email:z.email,picture:z.image,sub:z.id?.toString()},B=await L.jwt({token:Z,user:z,account:K,profile:te,isNewUser:pe,trigger:pe?"signUp":"signIn"});if(B===null)n.push(...r.clean());else{let fe=t.cookies.sessionToken.name,je=await b.encode({...b,token:B,salt:fe}),ge=new Date;ge.setTime(ge.getTime()+1e3*H);let Le=r.chunk(je,{expires:ge});n.push(...Le)}}else n.push({name:t.cookies.sessionToken.name,value:ae.sessionToken,options:{...t.cookies.sessionToken.options,expires:ae.expires}});return await O.signIn?.({user:z,account:K,profile:te,isNewUser:pe}),pe&&k.newUser?{redirect:`${k.newUser}${k.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:u})}`,cookies:n}:{redirect:u,cookies:n}}if(l.type==="email"){let g=i?.token,P=i?.email;if(!g){let je=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!g}});throw je.name="Configuration",je}let I=l.secret??t.secret,q=await h.useVerificationToken({identifier:P,token:await Xr(`${g}${I}`)}),K=!!q,te=K&&q.expires.valueOf()<Date.now();if(!K||te||P&&q.identifier!==P)throw new Zi({hasInvite:K,expired:te});let{identifier:J}=q,z=await h.getUserByEmail(J)??{id:crypto.randomUUID(),email:J,emailVerified:null},ae={providerAccountId:z.email,userId:z.id,type:"email",provider:l.id},pe=await _n({user:z,account:ae},t);if(pe)return{redirect:pe,cookies:n};let{user:Z,session:B,isNewUser:fe}=await ui(r.value,z,ae,t);if(U){let je={name:Z.name,email:Z.email,picture:Z.image,sub:Z.id?.toString()},ge=await L.jwt({token:je,user:Z,account:ae,isNewUser:fe,trigger:fe?"signUp":"signIn"});if(ge===null)n.push(...r.clean());else{let Le=t.cookies.sessionToken.name,ce=await b.encode({...b,token:ge,salt:Le}),Ze=new Date;Ze.setTime(Ze.getTime()+1e3*H);let De=r.chunk(ce,{expires:Ze});n.push(...De)}}else n.push({name:t.cookies.sessionToken.name,value:B.sessionToken,options:{...t.cookies.sessionToken.options,expires:B.expires}});return await O.signIn?.({user:Z,account:ae,isNewUser:fe}),fe&&k.newUser?{redirect:`${k.newUser}${k.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:u})}`,cookies:n}:{redirect:u,cookies:n}}if(l.type==="credentials"&&o==="POST"){let g=a??{};Object.entries(i??{}).forEach(([J,z])=>p.searchParams.set(J,z));let P=await l.authorize(g,new Request(p,{headers:s,method:o,body:JSON.stringify(a)}));if(P)P.id=P.id?.toString()??crypto.randomUUID();else throw new Rn;let I={providerAccountId:P.id,type:"credentials",provider:l.id},q=await _n({user:P,account:I,credentials:g},t);if(q)return{redirect:q,cookies:n};let K={name:P.name,email:P.email,picture:P.image,sub:P.id},te=await L.jwt({token:K,user:P,account:I,isNewUser:!1,trigger:"signIn"});if(te===null)n.push(...r.clean());else{let J=t.cookies.sessionToken.name,z=await b.encode({...b,token:te,salt:J}),ae=new Date;ae.setTime(ae.getTime()+1e3*H);let pe=r.chunk(z,{expires:ae});n.push(...pe)}return await O.signIn?.({user:P,account:I}),{redirect:u,cookies:n}}if(l.type==="webauthn"&&o==="POST"){let g,P,I,q=e.body?.action;if(typeof q!="string"||q!=="authenticate"&&q!=="register")throw new we("Invalid action parameter");let K=Jo(t);switch(q){case"authenticate":{let pe=await Ll(K,e,n);g=pe.user,P=pe.account;break}case"register":{let pe=await jl(t,e,n);g=pe.user,P=pe.account,I=pe.authenticator}}await _n({user:g,account:P},t);let{user:te,isNewUser:J,session:z,account:ae}=await ui(r.value,g,P,t);if(!ae)throw new we("Error creating or finding account");if(I&&te.id&&await K.adapter.createAuthenticator({...I,userId:te.id}),U){let pe={name:te.name,email:te.email,picture:te.image,sub:te.id?.toString()},Z=await L.jwt({token:pe,user:te,account:ae,isNewUser:J,trigger:J?"signUp":"signIn"});if(Z===null)n.push(...r.clean());else{let B=t.cookies.sessionToken.name,fe=await b.encode({...b,token:Z,salt:B}),je=new Date;je.setTime(je.getTime()+1e3*H);let ge=r.chunk(fe,{expires:je});n.push(...ge)}}else n.push({name:t.cookies.sessionToken.name,value:z.sessionToken,options:{...t.cookies.sessionToken.options,expires:z.expires}});return await O.signIn?.({user:te,account:ae,isNewUser:J}),J&&k.newUser?{redirect:`${k.newUser}${k.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:u})}`,cookies:n}:{redirect:u,cookies:n}}throw new Br(`Callback for provider type (${l.type}) is not supported`)}catch(g){if(g instanceof we)throw g;let P=new Mi(g,{provider:l.id});throw $.debug("callback route error details",{method:o,query:i,body:a}),P}}async function _n(e,t){let r,{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(a){throw a instanceof we?a:new wr(a)}if(!r)throw new wr("AccessDenied");if(typeof r=="string")return await i({url:r,baseUrl:t.url.origin})}async function zo(e,t,r,n,i){let{adapter:a,jwt:o,events:s,callbacks:l,logger:h,session:{strategy:p,maxAge:u}}=e,k={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},b=t.value;if(!b)return k;if(p==="jwt"){try{let O=e.cookies.sessionToken.name,L=await o.decode({...o,token:b,salt:O});if(!L)throw Error("Invalid JWT");let A=await l.jwt({token:L,...n&&{trigger:"update"},session:i}),H=Gt(u);if(A!==null){let $={user:{name:A.name,email:A.email,image:A.picture},expires:H.toISOString()},U=await l.session({session:$,token:A});k.body=U;let g=await o.encode({...o,token:A,salt:O}),P=t.chunk(g,{expires:H});k.cookies?.push(...P),await s.session?.({session:U,token:A})}else k.cookies?.push(...t.clean())}catch(O){h.error(new Bi(O)),k.cookies?.push(...t.clean())}return k}try{let{getSessionAndUser:O,deleteSession:L,updateSession:A}=a,H=await O(b);if(H&&H.session.expires.valueOf()<Date.now()&&(await L(b),H=null),H){let{user:$,session:U}=H,g=e.session.updateAge,P=U.expires.valueOf()-1e3*u+1e3*g,I=Gt(u);P<=Date.now()&&await A({sessionToken:b,expires:I});let q=await l.session({session:{...U,user:$},user:$,newSession:i,...n?{trigger:"update"}:{}});k.body=q,k.cookies?.push({name:e.cookies.sessionToken.name,value:b,options:{...e.cookies.sessionToken.options,expires:I}}),await s.session?.({session:q})}else b&&k.cookies?.push(...t.clean())}catch(O){h.error(new zi(O))}return k}async function Hl(e,t){let r,n,{logger:i,provider:a}=t,o=a.authorization?.url;if(!o||o.host==="authjs.dev"){let b=new URL(a.issuer),O=await pi(b,{[Et]:a[Ut],[xt]:!0}),L=await hi(b,O).catch(A=>{throw!(A instanceof TypeError)||A.message!=="Invalid URL"?A:TypeError(`Discovery request responded with an invalid issuer. expected: ${b}`)});if(!L.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");o=new URL(L.authorization_endpoint)}let s=o.searchParams,l=a.callbackUrl;!t.isOnRedirectProxy&&a.redirectProxyUrl&&(l=a.redirectProxyUrl,n=a.callbackUrl,i.debug("using redirect proxy",{redirect_uri:l,data:n}));let h=Object.assign({response_type:"code",client_id:a.clientId,redirect_uri:l,...a.authorization?.params},Object.fromEntries(a.authorization?.url.searchParams??[]),e);for(let b in h)s.set(b,h[b]);let p=[];a.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let u=await ki.create(t,n);if(u&&(s.set("state",u.value),p.push(u.cookie)),a.checks?.includes("pkce"))if(r&&!r.code_challenge_methods_supported?.includes("S256"))a.type==="oidc"&&(a.checks=["nonce"]);else{let{value:b,cookie:O}=await Ho.create(t);s.set("code_challenge",b),s.set("code_challenge_method","S256"),p.push(O)}let k=await Ko.create(t);return k&&(s.set("nonce",k.value),p.push(k.cookie)),a.type!=="oidc"||o.searchParams.has("scope")||o.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:o,cookies:p,provider:a}),{redirect:o.toString(),cookies:p}}async function Wl(e,t){let r,{body:n}=e,{provider:i,callbacks:a,adapter:o}=t,s=(i.normalizeIdentifier??function(U){if(!U)throw Error("Missing email from request body.");let[g,P]=U.toLowerCase().trim().split("@");return P=P.split(",")[0],`${g}@${P}`})(n?.email),l={id:crypto.randomUUID(),email:s,emailVerified:null},h=await o.getUserByEmail(s)??l,p={providerAccountId:s,userId:h.id,type:"email",provider:i.id};try{r=await a.signIn({user:h,account:p,email:{verificationRequest:!0}})}catch(U){throw new wr(U)}if(!r)throw new wr("AccessDenied");if(typeof r=="string")return{redirect:await a.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:u,theme:k}=t,b=await i.generateVerificationToken?.()??Xn(32),O=new Date(Date.now()+(i.maxAge??86400)*1e3),L=i.secret??t.secret,A=new URL(t.basePath,t.url.origin),H=i.sendVerificationRequest({identifier:s,token:b,expires:O,url:`${A}/callback/${i.id}?${new URLSearchParams({callbackUrl:u,token:b,email:s})}`,provider:i,theme:k,request:new Request(e.url,{headers:e.headers,method:e.method,body:e.method==="POST"?JSON.stringify(e.body??{}):void 0})}),$=o.createVerificationToken?.({identifier:s,token:await Xr(`${b}${L}`),expires:O});return await Promise.all([H,$]),{redirect:`${A}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function Kl(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:i,cookies:a}=await Hl(e.query,r);return a&&t.push(...a),{redirect:i,cookies:t}}case"email":return{...await Wl(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function Bl(e,t,r){let{jwt:n,events:i,callbackUrl:a,logger:o,session:s}=r,l=t.value;if(!l)return{redirect:a,cookies:e};try{if(s.strategy==="jwt"){let h=r.cookies.sessionToken.name,p=await n.decode({...n,token:l,salt:h});await i.signOut?.({token:p})}else{let h=await r.adapter?.deleteSession(l);await i.signOut?.({session:h})}}catch(h){o.error(new Gi(h))}return e.push(...t.clean()),{redirect:a,cookies:e}}async function Vl(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,a=t.value;if(!a)return null;if(i==="jwt"){let o=e.cookies.sessionToken.name,s=await n.decode({...n,token:a,salt:o});if(s&&s.sub)return{id:s.sub,name:s.name,email:s.email,image:s.picture}}else{let o=await r?.getSessionAndUser(a);if(o)return o.user}return null}async function ql(e,t,r,n){let i=Jo(t),{provider:a}=i,{action:o}=e.query??{};if(o!=="register"&&o!=="authenticate"&&o!==void 0)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let s=await Vl(t,r),l=s?{user:s,exists:!0}:await a.getUserInfo(t,e),h=l?.user;switch(function(p,u,k){let{user:b,exists:O=!1}=k??{};switch(p){case"authenticate":return"authenticate";case"register":if(b&&u===O)return"register";break;case void 0:if(!u)return!b||O?"authenticate":"register"}return null}(o,!!s,l)){case"authenticate":return $l(i,e,h,n);case"register":if(typeof h?.email=="string")return Nl(i,e,h,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function Jl(e,t){let{action:r,providerId:n,error:i,method:a}=e,o=t.skipCSRFCheck===en,{options:s,cookies:l}=await Rc({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:a==="POST",csrfDisabled:o}),h=new ys(s.cookies.sessionToken,e.cookies,s.logger);if(a==="GET"){let p=go({...s,query:e.query,cookies:l});switch(r){case"callback":return await Fo(e,s,h,l);case"csrf":return p.csrf(o,s,l);case"error":return p.error(i);case"providers":return p.providers(s.providers);case"session":return await zo(s,h,l);case"signin":return p.signin(n,i);case"signout":return p.signout();case"verify-request":return p.verifyRequest();case"webauthn-options":return await ql(e,s,h,l)}}else{let{csrfTokenVerified:p}=s;switch(r){case"callback":return s.provider.type==="credentials"&&Yr(r,p),await Fo(e,s,h,l);case"session":return Yr(r,p),await zo(s,h,l,!0,e.body?.data);case"signin":return Yr(r,p),await Kl(e,l,s);case"signout":return Yr(r,p),await Bl(l,h,s)}}throw new qt(`Cannot handle action: ${r}`)}function Sn(e,t,r,n,i){let a,o=i?.basePath,s=n.AUTH_URL??n.NEXTAUTH_URL;if(s)a=new URL(s),o&&o!=="/"&&a.pathname!=="/"&&(a.pathname!==o&&xr(i).warn("env-url-basepath-mismatch"),a.pathname="/");else{let h=r.get("x-forwarded-host")??r.get("host"),p=r.get("x-forwarded-proto")??t??"https",u=p.endsWith(":")?p:p+":";a=new URL(`${u}//${h}`)}let l=a.toString().replace(/\/$/,"");if(o){let h=o?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${l}/${h}/${e}`)}return new URL(`${l}/${e}`)}async function dr(e,t){let r=xr(t),n=await Ec(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=function(s,l){let{url:h}=s,p=[];if(!Nn&&l.debug&&p.push("debug-enabled"),!l.trustHost)return new Yi(`Host must be trusted. URL was: ${s.url}`);if(!l.secret?.length)return new Ji("Please define a `secret`");let u=s.query?.callbackUrl;if(u&&!na(u,h.origin))return new Cn(`Invalid callback URL. Received: ${u}`);let{callbackUrl:k}=Di(l.useSecureCookies??h.protocol==="https:"),b=s.cookies?.[l.cookies?.callbackUrl?.name??k.name];if(b&&!na(b,h.origin))return new Cn(`Invalid callback URL. Received: ${b}`);let O=!1;for(let U of l.providers){let g=typeof U=="function"?U():U;if((g.type==="oauth"||g.type==="oidc")&&!(g.issuer??g.options?.issuer)){let P,{authorization:I,token:q,userinfo:K}=g;if(typeof I=="string"||I?.url?typeof q=="string"||q?.url?typeof K=="string"||K?.url||(P="userinfo"):P="token":P="authorization",P)return new Ki(`Provider "${g.id}" is missing both \`issuer\` and \`${P}\` endpoint config. At least one of them is required`)}if(g.type==="credentials")ia=!0;else if(g.type==="email")$n=!0;else if(g.type==="webauthn"){var L;if(aa=!0,g.simpleWebAuthnBrowserVersion&&(L=g.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(L)))return new we(`Invalid provider config for "${g.id}": simpleWebAuthnBrowserVersion "${g.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(g.enableConditionalUI){if(O)return new ea("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(O=!0,!Object.values(g.formFields).some(P=>P.autocomplete&&P.autocomplete.toString().indexOf("webauthn")>-1))return new ta(`Provider "${g.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(ia){let U=l.session?.strategy==="database",g=!l.providers.some(P=>(typeof P=="function"?P():P).type!=="credentials");if(U&&g)return new Xi("Signing in with credentials only supported if JWT strategy is enabled");if(l.providers.some(P=>{let I=typeof P=="function"?P():P;return I.type==="credentials"&&!I.authorize}))return new qi("Must define an authorize() handler to use credentials authentication provider")}let{adapter:A,session:H}=l,$=[];if($n||H?.strategy==="database"||!H?.strategy&&A)if($n){if(!A)return new br("Email login requires an adapter");$.push(..._s)}else{if(!A)return new br("Database session requires an adapter");$.push(...Ss)}if(aa){if(!l.experimental?.enableWebAuthn)return new ra("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(p.push("experimental-webauthn"),!A)return new br("WebAuthn requires an adapter");$.push(...ks)}if(A){let U=$.filter(g=>!(g in A));if(U.length)return new Vi(`Required adapter methods were missing: ${U.join(", ")}`)}return Nn||(Nn=!0),p}(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||n.method!=="GET")return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:s,theme:l}=t,h=s?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(s.error);if(!s?.error||h)return h&&r.error(new Hi(`The error page ${s?.error} should not require authentication`)),$a(go({theme:l}).error("Configuration"));let p=`${n.url.origin}${s.error}?error=Configuration`;return Response.redirect(p)}let a=e.headers?.has("X-Auth-Return-Redirect"),o=t.raw===tn;try{let s=await Jl(n,t);if(o)return s;let l=$a(s),h=l.headers.get("Location");return!a||!h?l:Response.json({url:h},{headers:l.headers})}catch(s){r.error(s);let l=s instanceof we;if(l&&o&&!a)throw s;if(e.method==="POST"&&n.action==="session")return Response.json(null,{status:400});let h=new URLSearchParams({error:s instanceof we&&vs.has(s.type)?s.type:"Configuration"});s instanceof Rn&&h.set("code",s.code);let p=l&&s.kind||"error",u=t.pages?.[p]??`${t.basePath}/${p.toLowerCase()}`,k=`${n.url.origin}${u}?${h}`;return a?Response.json({url:k}):Response.redirect(k)}}function Ei(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new Ue(n.replace(i,r),e)}function pr(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if(r==="/")return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(t,r,n=!1){try{let i=t.AUTH_URL;i&&(r.basePath?n||xr(r).warn("env-url-basepath-redundant"):r.basePath=new URL(i).pathname)}catch{}finally{r.basePath??(r.basePath="/auth")}if(!r.secret?.length){r.secret=[];let i=t.AUTH_SECRET;for(let a of(i&&r.secret.push(i),[1,2,3])){let o=t[`AUTH_SECRET_${a}`];o&&r.secret.unshift(o)}}r.redirectProxyUrl??(r.redirectProxyUrl=t.AUTH_REDIRECT_PROXY_URL),r.trustHost??(r.trustHost=!!(t.AUTH_URL??t.AUTH_TRUST_HOST??t.VERCEL??t.CF_PAGES??t.NODE_ENV!=="production")),r.providers=r.providers.map(i=>{let{id:a}=typeof i=="function"?i({}):i,o=a.toUpperCase().replace(/-/g,"_"),s=t[`AUTH_${o}_ID`],l=t[`AUTH_${o}_SECRET`],h=t[`AUTH_${o}_ISSUER`],p=t[`AUTH_${o}_KEY`],u=typeof i=="function"?i({clientId:s,clientSecret:l,issuer:h,apiKey:p}):i;return u.type==="oauth"||u.type==="oidc"?(u.clientId??(u.clientId=s),u.clientSecret??(u.clientSecret=l),u.issuer??(u.issuer=h)):u.type==="email"&&(u.apiKey??(u.apiKey=p)),u})}(process.env,e,!0)}}G(340),typeof URLPattern>"u"||URLPattern;var Go=G(1959),Xo=G(2479);class Fl extends Error{constructor(t){super("Dynamic server usage: "+t),this.description=t,this.digest="DYNAMIC_SERVER_USAGE"}}class zl extends Error{constructor(...t){super(...t),this.code="NEXT_STATIC_GEN_BAILOUT"}}let Gl=typeof Xo.unstable_postpone=="function";function Yo(e,t){let r=new URL(e.urlPathname,"http://n").pathname;if(e.isUnstableCacheCallback)throw Error(`Route ${r} used "${t}" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "${t}" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if(e.dynamicShouldError)throw new zl(`Route ${r} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(e.prerenderState)(function(n,i,a){(function(){if(!Gl)throw Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js")})();let o=`Route ${a} needs to bail out of prerendering at this point because it used ${i}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`;n.dynamicAccesses.push({stack:n.isDebugSkeleton?Error().stack:void 0,expression:i}),Xo.unstable_postpone(o)})(e.prerenderState,t,r);else if(e.revalidate=0,e.isStaticGeneration){let n=new Fl(`Route ${r} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw e.dynamicUsageDescription=t,e.dynamicUsageStack=n.stack,n}}function jr(){let e="headers",t=Pt.A.getStore();if(t){if(t.forceStatic)return pt.seal(new Headers({}));Yo(t,e)}return Ni(e).headers}function Ai(){let e="cookies",t=Pt.A.getStore();if(t){if(t.forceStatic)return yr.seal(new ye.RequestCookies(new Headers({})));Yo(t,e)}let r=Ni(e),n=Go.W.getStore();return n?.isAction||n?.isAppRoute?r.mutableCookies:r.cookies}async function Dr(e,t){return dr(new Request(Sn("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...r){let n=await t.callbacks?.session?.(...r)??{...r[0].session,expires:r[0].session.expires?.toISOString?.()??r[0].session.expires};return{user:r[0].user??r[0].token,...n}}}})}function Zo(e){return typeof e=="function"}function Qo(e,t){return typeof e=="function"?async(...r)=>{if(!r.length){let o=await jr(),s=await e(void 0);return t?.(s),Dr(o,s).then(l=>l.json())}if(r[0]instanceof Request){let o=r[0],s=r[1],l=await e(o);return t?.(l),kn([o,s],l)}if(Zo(r[0])){let o=r[0];return async(...s)=>{let l=await e(s[0]);return t?.(l),kn(s,l,o)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],a=await e(n);return t?.(a),Dr(new Headers(n.headers),a).then(async o=>{let s=await o.json();for(let l of o.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",l):i.appendHeader("set-cookie",l);return s})}:(...r)=>{if(!r.length)return Promise.resolve(jr()).then(a=>Dr(a,e).then(o=>o.json()));if(r[0]instanceof Request)return kn([r[0],r[1]],e);if(Zo(r[0])){let a=r[0];return async(...o)=>kn(o,e,a).then(s=>s)}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1];return Dr(new Headers(n.headers),e).then(async a=>{let o=await a.json();for(let s of a.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",s):i.appendHeader("set-cookie",s);return o})}}async function kn(e,t,r){let n=Ei(e[0]),i=await Dr(n.headers,t),a=await i.json(),o=!0;t.callbacks?.authorized&&(o=await t.callbacks.authorized({request:n,auth:a}));let s=We.next?.();if(o instanceof Response){s=o;let h=o.headers.get("Location"),{pathname:p}=n.nextUrl;h&&function(u,k,b){let O=k.replace(`${u}/`,""),L=Object.values(b.pages??{});return(Xl.has(O)||L.includes(k))&&k===u}(p,new URL(h).pathname,t)&&(o=!0)}else if(r)n.auth=a,s=await r(n,e[1])??We.next();else if(!o){let h=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==h){let p=n.nextUrl.clone();p.pathname=h,p.searchParams.set("callbackUrl",n.nextUrl.href),s=We.redirect(p)}}let l=new Response(s?.body,s);for(let h of i.headers.getSetCookie())l.headers.append("set-cookie",h);return l}let Xl=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);(function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"})(E||(E={}));let es="NEXT_REDIRECT";function xn(e,t){t===void 0&&(t="replace");let r=Go.W.getStore();throw function(n,i,a){a===void 0&&(a=E.TemporaryRedirect);let o=Error(es);o.digest=es+";"+i+";"+n+";"+a+";";let s=An.F.getStore();return s&&(o.mutableCookies=s.mutableCookies),o}(e,t,r?.isAction?E.SeeOther:E.TemporaryRedirect)}async function ts(e,t={},r,n){let i=new Headers(await jr()),{redirect:a=!0,redirectTo:o,...s}=t instanceof FormData?Object.fromEntries(t):t,l=o?.toString()??i.get("Referer")??"/",h=Sn("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return h.searchParams.append("callbackUrl",l),a&&xn(h.toString()),h.toString();let p=`${h}/${e}?${new URLSearchParams(r)}`,u={};for(let A of n.providers){let{options:H,...$}=typeof A=="function"?A():A,U=H?.id??$.id;if(U===e){u={id:U,type:H?.type??$.type};break}}if(!u.id){let A=`${h}?${new URLSearchParams({callbackUrl:l})}`;return a&&xn(A),A}u.type==="credentials"&&(p=p.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let k=new Request(p,{method:"POST",headers:i,body:new URLSearchParams({...s,callbackUrl:l})}),b=await dr(k,{...n,raw:tn,skipCSRFCheck:en}),O=await Ai();for(let A of b?.cookies??[])O.set(A.name,A.value,A.options);let L=(b instanceof Response?b.headers.get("Location"):b.redirect)??p;return a?xn(L):L}async function rs(e,t){let r=new Headers(await jr());r.set("Content-Type","application/x-www-form-urlencoded");let n=Sn("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),a=new Request(n,{method:"POST",headers:r,body:i}),o=await dr(a,{...t,raw:tn,skipCSRFCheck:en}),s=await Ai();for(let l of o?.cookies??[])s.set(l.name,l.value,l.options);return e?.redirect??!0?xn(o.redirect):o}async function ns(e,t){let r=new Headers(await jr());r.set("Content-Type","application/json");let n=new Request(Sn("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await dr(n,{...t,raw:tn,skipCSRFCheck:en}),a=await Ai();for(let o of i?.cookies??[])a.set(o.name,o.value,o.options);return i.body}(function(e){e.push="push",e.replace="replace"})(_||(_={}));let Yl=["mattiapetrucciani@gmail.com","mattiapetrucciani@mac.com","mattia@freeriverhouse.com","mattia@onde.la","magmaticxr@gmail.com","freeriverhouse@gmail.com"],{handlers:Tu,auth:Zl,signIn:Pu,signOut:Cu}=function(e){if(typeof e=="function"){let r=async n=>{let i=await e(n);return pr(i),dr(Ei(n),i)};return{handlers:{GET:r,POST:r},auth:Qo(e,n=>pr(n)),signIn:async(n,i,a)=>{let o=await e(void 0);return pr(o),ts(n,i,a,o)},signOut:async n=>{let i=await e(void 0);return pr(i),rs(n,i)},unstable_update:async n=>{let i=await e(void 0);return pr(i),ns(n,i)}}}pr(e);let t=r=>dr(Ei(r),e);return{handlers:{GET:t,POST:t},auth:Qo(e),signIn:(r,n,i)=>ts(r,n,i,e),signOut:r=>rs(r,e),unstable_update:r=>ns(r,e)}}({secret:(()=>{let e=Se;return process.env.AUTH_SECRET||e.AUTH_SECRET||""})(),providers:[{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{brandColor:"#1a73e8"},options:{clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}}],callbacks:{signIn:async({user:e})=>{var t;return!!(e.email&&(t=e.email,Yl.includes(t.toLowerCase())))||"https://onde.la"},session:async({session:e})=>e},pages:{signIn:"/login",error:"/coming-soon"},trustHost:!0}),Ql=["/login","/coming-soon","/api/auth","/api/sync","/api/agent-tasks","/frh"],eu=Zl(e=>{let{pathname:t}=e.nextUrl;if(Ql.some(r=>t===r||t.startsWith(r+"/"))||t.startsWith("/_next")||t.startsWith("/static")||t.includes("."))return We.next();if(!e.auth?.user?.email){let r=new URL("/login",e.url);return r.searchParams.set("callbackUrl",t),We.redirect(r)}return We.next()}),tu={matcher:["/((?!_next/static|_next/image|favicon.ico).*)"]},is={...d},as=is.middleware||is.default,os="/src/middleware";if(typeof as!="function")throw Error(`The Middleware "${os}" must export a \`middleware\` or a \`default\` function`);function ru(e){return ms({...e,page:os,handler:as})}},5945:Ae=>{"use strict";var F=Object.defineProperty,G=Object.getOwnPropertyDescriptor,ne=Object.getOwnPropertyNames,le=Object.prototype.hasOwnProperty,Y={};function M(d){var y;let x=["path"in d&&d.path&&`Path=${d.path}`,"expires"in d&&(d.expires||d.expires===0)&&`Expires=${(typeof d.expires=="number"?new Date(d.expires):d.expires).toUTCString()}`,"maxAge"in d&&typeof d.maxAge=="number"&&`Max-Age=${d.maxAge}`,"domain"in d&&d.domain&&`Domain=${d.domain}`,"secure"in d&&d.secure&&"Secure","httpOnly"in d&&d.httpOnly&&"HttpOnly","sameSite"in d&&d.sameSite&&`SameSite=${d.sameSite}`,"partitioned"in d&&d.partitioned&&"Partitioned","priority"in d&&d.priority&&`Priority=${d.priority}`].filter(Boolean),C=`${d.name}=${encodeURIComponent((y=d.value)!=null?y:"")}`;return x.length===0?C:`${C}; ${x.join("; ")}`}function j(d){let y=new Map;for(let x of d.split(/; */)){if(!x)continue;let C=x.indexOf("=");if(C===-1){y.set(x,"true");continue}let[m,v]=[x.slice(0,C),x.slice(C+1)];try{y.set(m,decodeURIComponent(v??"true"))}catch{}}return y}function c(d){var y,x;if(!d)return;let[[C,m],...v]=j(d),{domain:w,expires:S,httponly:R,maxage:re,path:me,samesite:D,secure:W,partitioned:V,priority:ie}=Object.fromEntries(v.map(([Te,Ce])=>[Te.toLowerCase(),Ce]));return function(Te){let Ce={};for(let Me in Te)Te[Me]&&(Ce[Me]=Te[Me]);return Ce}({name:C,value:decodeURIComponent(m),domain:w,...S&&{expires:new Date(S)},...R&&{httpOnly:!0},...typeof re=="string"&&{maxAge:Number(re)},path:me,...D&&{sameSite:f.includes(y=(y=D).toLowerCase())?y:void 0},...W&&{secure:!0},...ie&&{priority:E.includes(x=(x=ie).toLowerCase())?x:void 0},...V&&{partitioned:!0}})}((d,y)=>{for(var x in y)F(d,x,{get:y[x],enumerable:!0})})(Y,{RequestCookies:()=>_,ResponseCookies:()=>T,parseCookie:()=>j,parseSetCookie:()=>c,stringifyCookie:()=>M}),Ae.exports=((d,y,x,C)=>{if(y&&typeof y=="object"||typeof y=="function")for(let m of ne(y))le.call(d,m)||m===x||F(d,m,{get:()=>y[m],enumerable:!(C=G(y,m))||C.enumerable});return d})(F({},"__esModule",{value:!0}),Y);var f=["strict","lax","none"],E=["low","medium","high"],_=class{constructor(d){this._parsed=new Map,this._headers=d;let y=d.get("cookie");if(y)for(let[x,C]of j(y))this._parsed.set(x,{name:x,value:C})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...d){let y=typeof d[0]=="string"?d[0]:d[0].name;return this._parsed.get(y)}getAll(...d){var y;let x=Array.from(this._parsed);if(!d.length)return x.map(([m,v])=>v);let C=typeof d[0]=="string"?d[0]:(y=d[0])==null?void 0:y.name;return x.filter(([m])=>m===C).map(([m,v])=>v)}has(d){return this._parsed.has(d)}set(...d){let[y,x]=d.length===1?[d[0].name,d[0].value]:d,C=this._parsed;return C.set(y,{name:y,value:x}),this._headers.set("cookie",Array.from(C).map(([m,v])=>M(v)).join("; ")),this}delete(d){let y=this._parsed,x=Array.isArray(d)?d.map(C=>y.delete(C)):y.delete(d);return this._headers.set("cookie",Array.from(y).map(([C,m])=>M(m)).join("; ")),x}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(d=>`${d.name}=${encodeURIComponent(d.value)}`).join("; ")}},T=class{constructor(d){var y,x,C;this._parsed=new Map,this._headers=d;let m=(C=(x=(y=d.getSetCookie)==null?void 0:y.call(d))!=null?x:d.get("set-cookie"))!=null?C:[];for(let v of Array.isArray(m)?m:function(w){if(!w)return[];var S,R,re,me,D,W=[],V=0;function ie(){for(;V<w.length&&/\s/.test(w.charAt(V));)V+=1;return V<w.length}for(;V<w.length;){for(S=V,D=!1;ie();)if((R=w.charAt(V))===","){for(re=V,V+=1,ie(),me=V;V<w.length&&(R=w.charAt(V))!=="="&&R!==";"&&R!==",";)V+=1;V<w.length&&w.charAt(V)==="="?(D=!0,V=me,W.push(w.substring(S,re)),S=V):V=re+1}else V+=1;(!D||V>=w.length)&&W.push(w.substring(S,w.length))}return W}(m)){let w=c(v);w&&this._parsed.set(w.name,w)}}get(...d){let y=typeof d[0]=="string"?d[0]:d[0].name;return this._parsed.get(y)}getAll(...d){var y;let x=Array.from(this._parsed.values());if(!d.length)return x;let C=typeof d[0]=="string"?d[0]:(y=d[0])==null?void 0:y.name;return x.filter(m=>m.name===C)}has(d){return this._parsed.has(d)}set(...d){let[y,x,C]=d.length===1?[d[0].name,d[0].value,d[0]]:d,m=this._parsed;return m.set(y,function(v={name:"",value:""}){return typeof v.expires=="number"&&(v.expires=new Date(v.expires)),v.maxAge&&(v.expires=new Date(Date.now()+1e3*v.maxAge)),(v.path===null||v.path===void 0)&&(v.path="/"),v}({name:y,value:x,...C})),function(v,w){for(let[,S]of(w.delete("set-cookie"),v)){let R=M(S);w.append("set-cookie",R)}}(m,this._headers),this}delete(...d){let[y,x,C]=typeof d[0]=="string"?[d[0]]:[d[0].name,d[0].path,d[0].domain];return this.set({name:y,path:x,domain:C,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(M).join("; ")}}},8439:(Ae,F,G)=>{(()=>{"use strict";var ne={491:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ContextAPI=void 0;let E=f(223),_=f(172),T=f(930),d="context",y=new E.NoopContextManager;class x{constructor(){}static getInstance(){return this._instance||(this._instance=new x),this._instance}setGlobalContextManager(m){return(0,_.registerGlobal)(d,m,T.DiagAPI.instance())}active(){return this._getContextManager().active()}with(m,v,w,...S){return this._getContextManager().with(m,v,w,...S)}bind(m,v){return this._getContextManager().bind(m,v)}_getContextManager(){return(0,_.getGlobal)(d)||y}disable(){this._getContextManager().disable(),(0,_.unregisterGlobal)(d,T.DiagAPI.instance())}}c.ContextAPI=x},930:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DiagAPI=void 0;let E=f(56),_=f(912),T=f(957),d=f(172);class y{constructor(){function C(v){return function(...w){let S=(0,d.getGlobal)("diag");if(S)return S[v](...w)}}let m=this;m.setLogger=(v,w={logLevel:T.DiagLogLevel.INFO})=>{var S,R,re;if(v===m){let W=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return m.error((S=W.stack)!==null&&S!==void 0?S:W.message),!1}typeof w=="number"&&(w={logLevel:w});let me=(0,d.getGlobal)("diag"),D=(0,_.createLogLevelDiagLogger)((R=w.logLevel)!==null&&R!==void 0?R:T.DiagLogLevel.INFO,v);if(me&&!w.suppressOverrideMessage){let W=(re=Error().stack)!==null&&re!==void 0?re:"<failed to generate stacktrace>";me.warn(`Current logger will be overwritten from ${W}`),D.warn(`Current logger will overwrite one already registered from ${W}`)}return(0,d.registerGlobal)("diag",D,m,!0)},m.disable=()=>{(0,d.unregisterGlobal)("diag",m)},m.createComponentLogger=v=>new E.DiagComponentLogger(v),m.verbose=C("verbose"),m.debug=C("debug"),m.info=C("info"),m.warn=C("warn"),m.error=C("error")}static instance(){return this._instance||(this._instance=new y),this._instance}}c.DiagAPI=y},653:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.MetricsAPI=void 0;let E=f(660),_=f(172),T=f(930),d="metrics";class y{constructor(){}static getInstance(){return this._instance||(this._instance=new y),this._instance}setGlobalMeterProvider(C){return(0,_.registerGlobal)(d,C,T.DiagAPI.instance())}getMeterProvider(){return(0,_.getGlobal)(d)||E.NOOP_METER_PROVIDER}getMeter(C,m,v){return this.getMeterProvider().getMeter(C,m,v)}disable(){(0,_.unregisterGlobal)(d,T.DiagAPI.instance())}}c.MetricsAPI=y},181:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.PropagationAPI=void 0;let E=f(172),_=f(874),T=f(194),d=f(277),y=f(369),x=f(930),C="propagation",m=new _.NoopTextMapPropagator;class v{constructor(){this.createBaggage=y.createBaggage,this.getBaggage=d.getBaggage,this.getActiveBaggage=d.getActiveBaggage,this.setBaggage=d.setBaggage,this.deleteBaggage=d.deleteBaggage}static getInstance(){return this._instance||(this._instance=new v),this._instance}setGlobalPropagator(S){return(0,E.registerGlobal)(C,S,x.DiagAPI.instance())}inject(S,R,re=T.defaultTextMapSetter){return this._getGlobalPropagator().inject(S,R,re)}extract(S,R,re=T.defaultTextMapGetter){return this._getGlobalPropagator().extract(S,R,re)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,E.unregisterGlobal)(C,x.DiagAPI.instance())}_getGlobalPropagator(){return(0,E.getGlobal)(C)||m}}c.PropagationAPI=v},997:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TraceAPI=void 0;let E=f(172),_=f(846),T=f(139),d=f(607),y=f(930),x="trace";class C{constructor(){this._proxyTracerProvider=new _.ProxyTracerProvider,this.wrapSpanContext=T.wrapSpanContext,this.isSpanContextValid=T.isSpanContextValid,this.deleteSpan=d.deleteSpan,this.getSpan=d.getSpan,this.getActiveSpan=d.getActiveSpan,this.getSpanContext=d.getSpanContext,this.setSpan=d.setSpan,this.setSpanContext=d.setSpanContext}static getInstance(){return this._instance||(this._instance=new C),this._instance}setGlobalTracerProvider(v){let w=(0,E.registerGlobal)(x,this._proxyTracerProvider,y.DiagAPI.instance());return w&&this._proxyTracerProvider.setDelegate(v),w}getTracerProvider(){return(0,E.getGlobal)(x)||this._proxyTracerProvider}getTracer(v,w){return this.getTracerProvider().getTracer(v,w)}disable(){(0,E.unregisterGlobal)(x,y.DiagAPI.instance()),this._proxyTracerProvider=new _.ProxyTracerProvider}}c.TraceAPI=C},277:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.deleteBaggage=c.setBaggage=c.getActiveBaggage=c.getBaggage=void 0;let E=f(491),_=(0,f(780).createContextKey)("OpenTelemetry Baggage Key");function T(d){return d.getValue(_)||void 0}c.getBaggage=T,c.getActiveBaggage=function(){return T(E.ContextAPI.getInstance().active())},c.setBaggage=function(d,y){return d.setValue(_,y)},c.deleteBaggage=function(d){return d.deleteValue(_)}},993:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.BaggageImpl=void 0;class f{constructor(_){this._entries=_?new Map(_):new Map}getEntry(_){let T=this._entries.get(_);if(T)return Object.assign({},T)}getAllEntries(){return Array.from(this._entries.entries()).map(([_,T])=>[_,T])}setEntry(_,T){let d=new f(this._entries);return d._entries.set(_,T),d}removeEntry(_){let T=new f(this._entries);return T._entries.delete(_),T}removeEntries(..._){let T=new f(this._entries);for(let d of _)T._entries.delete(d);return T}clear(){return new f}}c.BaggageImpl=f},830:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.baggageEntryMetadataSymbol=void 0,c.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.baggageEntryMetadataFromString=c.createBaggage=void 0;let E=f(930),_=f(993),T=f(830),d=E.DiagAPI.instance();c.createBaggage=function(y={}){return new _.BaggageImpl(new Map(Object.entries(y)))},c.baggageEntryMetadataFromString=function(y){return typeof y!="string"&&(d.error(`Cannot create baggage metadata from unknown type: ${typeof y}`),y=""),{__TYPE__:T.baggageEntryMetadataSymbol,toString:()=>y}}},67:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.context=void 0;let E=f(491);c.context=E.ContextAPI.getInstance()},223:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NoopContextManager=void 0;let E=f(780);class _{active(){return E.ROOT_CONTEXT}with(d,y,x,...C){return y.call(x,...C)}bind(d,y){return y}enable(){return this}disable(){return this}}c.NoopContextManager=_},780:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ROOT_CONTEXT=c.createContextKey=void 0,c.createContextKey=function(E){return Symbol.for(E)};class f{constructor(_){let T=this;T._currentContext=_?new Map(_):new Map,T.getValue=d=>T._currentContext.get(d),T.setValue=(d,y)=>{let x=new f(T._currentContext);return x._currentContext.set(d,y),x},T.deleteValue=d=>{let y=new f(T._currentContext);return y._currentContext.delete(d),y}}}c.ROOT_CONTEXT=new f},506:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.diag=void 0;let E=f(930);c.diag=E.DiagAPI.instance()},56:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DiagComponentLogger=void 0;let E=f(172);class _{constructor(y){this._namespace=y.namespace||"DiagComponentLogger"}debug(...y){return T("debug",this._namespace,y)}error(...y){return T("error",this._namespace,y)}info(...y){return T("info",this._namespace,y)}warn(...y){return T("warn",this._namespace,y)}verbose(...y){return T("verbose",this._namespace,y)}}function T(d,y,x){let C=(0,E.getGlobal)("diag");if(C)return x.unshift(y),C[d](...x)}c.DiagComponentLogger=_},972:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DiagConsoleLogger=void 0;let f=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class E{constructor(){for(let T=0;T<f.length;T++)this[f[T].n]=function(d){return function(...y){if(console){let x=console[d];if(typeof x!="function"&&(x=console.log),typeof x=="function")return x.apply(console,y)}}}(f[T].c)}}c.DiagConsoleLogger=E},912:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createLogLevelDiagLogger=void 0;let E=f(957);c.createLogLevelDiagLogger=function(_,T){function d(y,x){let C=T[y];return typeof C=="function"&&_>=x?C.bind(T):function(){}}return _<E.DiagLogLevel.NONE?_=E.DiagLogLevel.NONE:_>E.DiagLogLevel.ALL&&(_=E.DiagLogLevel.ALL),T=T||{},{error:d("error",E.DiagLogLevel.ERROR),warn:d("warn",E.DiagLogLevel.WARN),info:d("info",E.DiagLogLevel.INFO),debug:d("debug",E.DiagLogLevel.DEBUG),verbose:d("verbose",E.DiagLogLevel.VERBOSE)}}},957:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.DiagLogLevel=void 0,function(f){f[f.NONE=0]="NONE",f[f.ERROR=30]="ERROR",f[f.WARN=50]="WARN",f[f.INFO=60]="INFO",f[f.DEBUG=70]="DEBUG",f[f.VERBOSE=80]="VERBOSE",f[f.ALL=9999]="ALL"}(c.DiagLogLevel||(c.DiagLogLevel={}))},172:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.unregisterGlobal=c.getGlobal=c.registerGlobal=void 0;let E=f(200),_=f(521),T=f(130),d=_.VERSION.split(".")[0],y=Symbol.for(`opentelemetry.js.api.${d}`),x=E._globalThis;c.registerGlobal=function(C,m,v,w=!1){var S;let R=x[y]=(S=x[y])!==null&&S!==void 0?S:{version:_.VERSION};if(!w&&R[C]){let re=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${C}`);return v.error(re.stack||re.message),!1}if(R.version!==_.VERSION){let re=Error(`@opentelemetry/api: Registration of version v${R.version} for ${C} does not match previously registered API v${_.VERSION}`);return v.error(re.stack||re.message),!1}return R[C]=m,v.debug(`@opentelemetry/api: Registered a global for ${C} v${_.VERSION}.`),!0},c.getGlobal=function(C){var m,v;let w=(m=x[y])===null||m===void 0?void 0:m.version;if(w&&(0,T.isCompatible)(w))return(v=x[y])===null||v===void 0?void 0:v[C]},c.unregisterGlobal=function(C,m){m.debug(`@opentelemetry/api: Unregistering a global for ${C} v${_.VERSION}.`);let v=x[y];v&&delete v[C]}},130:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.isCompatible=c._makeCompatibilityCheck=void 0;let E=f(521),_=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function T(d){let y=new Set([d]),x=new Set,C=d.match(_);if(!C)return()=>!1;let m={major:+C[1],minor:+C[2],patch:+C[3],prerelease:C[4]};if(m.prerelease!=null)return function(w){return w===d};function v(w){return x.add(w),!1}return function(w){if(y.has(w))return!0;if(x.has(w))return!1;let S=w.match(_);if(!S)return v(w);let R={major:+S[1],minor:+S[2],patch:+S[3],prerelease:S[4]};return R.prerelease!=null||m.major!==R.major?v(w):m.major===0?m.minor===R.minor&&m.patch<=R.patch?(y.add(w),!0):v(w):m.minor<=R.minor?(y.add(w),!0):v(w)}}c._makeCompatibilityCheck=T,c.isCompatible=T(E.VERSION)},886:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.metrics=void 0;let E=f(653);c.metrics=E.MetricsAPI.getInstance()},901:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ValueType=void 0,function(f){f[f.INT=0]="INT",f[f.DOUBLE=1]="DOUBLE"}(c.ValueType||(c.ValueType={}))},102:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createNoopMeter=c.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=c.NOOP_OBSERVABLE_GAUGE_METRIC=c.NOOP_OBSERVABLE_COUNTER_METRIC=c.NOOP_UP_DOWN_COUNTER_METRIC=c.NOOP_HISTOGRAM_METRIC=c.NOOP_COUNTER_METRIC=c.NOOP_METER=c.NoopObservableUpDownCounterMetric=c.NoopObservableGaugeMetric=c.NoopObservableCounterMetric=c.NoopObservableMetric=c.NoopHistogramMetric=c.NoopUpDownCounterMetric=c.NoopCounterMetric=c.NoopMetric=c.NoopMeter=void 0;class f{constructor(){}createHistogram(w,S){return c.NOOP_HISTOGRAM_METRIC}createCounter(w,S){return c.NOOP_COUNTER_METRIC}createUpDownCounter(w,S){return c.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(w,S){return c.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(w,S){return c.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(w,S){return c.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(w,S){}removeBatchObservableCallback(w){}}c.NoopMeter=f;class E{}c.NoopMetric=E;class _ extends E{add(w,S){}}c.NoopCounterMetric=_;class T extends E{add(w,S){}}c.NoopUpDownCounterMetric=T;class d extends E{record(w,S){}}c.NoopHistogramMetric=d;class y{addCallback(w){}removeCallback(w){}}c.NoopObservableMetric=y;class x extends y{}c.NoopObservableCounterMetric=x;class C extends y{}c.NoopObservableGaugeMetric=C;class m extends y{}c.NoopObservableUpDownCounterMetric=m,c.NOOP_METER=new f,c.NOOP_COUNTER_METRIC=new _,c.NOOP_HISTOGRAM_METRIC=new d,c.NOOP_UP_DOWN_COUNTER_METRIC=new T,c.NOOP_OBSERVABLE_COUNTER_METRIC=new x,c.NOOP_OBSERVABLE_GAUGE_METRIC=new C,c.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new m,c.createNoopMeter=function(){return c.NOOP_METER}},660:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NOOP_METER_PROVIDER=c.NoopMeterProvider=void 0;let E=f(102);class _{getMeter(d,y,x){return E.NOOP_METER}}c.NoopMeterProvider=_,c.NOOP_METER_PROVIDER=new _},200:function(j,c,f){var E=this&&this.__createBinding||(Object.create?function(T,d,y,x){x===void 0&&(x=y),Object.defineProperty(T,x,{enumerable:!0,get:function(){return d[y]}})}:function(T,d,y,x){x===void 0&&(x=y),T[x]=d[y]}),_=this&&this.__exportStar||function(T,d){for(var y in T)y==="default"||Object.prototype.hasOwnProperty.call(d,y)||E(d,T,y)};Object.defineProperty(c,"__esModule",{value:!0}),_(f(46),c)},651:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c._globalThis=void 0,c._globalThis=typeof Se=="object"?Se:G.g},46:function(j,c,f){var E=this&&this.__createBinding||(Object.create?function(T,d,y,x){x===void 0&&(x=y),Object.defineProperty(T,x,{enumerable:!0,get:function(){return d[y]}})}:function(T,d,y,x){x===void 0&&(x=y),T[x]=d[y]}),_=this&&this.__exportStar||function(T,d){for(var y in T)y==="default"||Object.prototype.hasOwnProperty.call(d,y)||E(d,T,y)};Object.defineProperty(c,"__esModule",{value:!0}),_(f(651),c)},939:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.propagation=void 0;let E=f(181);c.propagation=E.PropagationAPI.getInstance()},874:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NoopTextMapPropagator=void 0;class f{inject(_,T){}extract(_,T){return _}fields(){return[]}}c.NoopTextMapPropagator=f},194:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.defaultTextMapSetter=c.defaultTextMapGetter=void 0,c.defaultTextMapGetter={get(f,E){if(f!=null)return f[E]},keys:f=>f==null?[]:Object.keys(f)},c.defaultTextMapSetter={set(f,E,_){f!=null&&(f[E]=_)}}},845:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.trace=void 0;let E=f(997);c.trace=E.TraceAPI.getInstance()},403:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NonRecordingSpan=void 0;let E=f(476);class _{constructor(d=E.INVALID_SPAN_CONTEXT){this._spanContext=d}spanContext(){return this._spanContext}setAttribute(d,y){return this}setAttributes(d){return this}addEvent(d,y){return this}setStatus(d){return this}updateName(d){return this}end(d){}isRecording(){return!1}recordException(d,y){}}c.NonRecordingSpan=_},614:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NoopTracer=void 0;let E=f(491),_=f(607),T=f(403),d=f(139),y=E.ContextAPI.getInstance();class x{startSpan(m,v,w=y.active()){if(v?.root)return new T.NonRecordingSpan;let S=w&&(0,_.getSpanContext)(w);return typeof S=="object"&&typeof S.spanId=="string"&&typeof S.traceId=="string"&&typeof S.traceFlags=="number"&&(0,d.isSpanContextValid)(S)?new T.NonRecordingSpan(S):new T.NonRecordingSpan}startActiveSpan(m,v,w,S){let R,re,me;if(arguments.length<2)return;arguments.length==2?me=v:arguments.length==3?(R=v,me=w):(R=v,re=w,me=S);let D=re??y.active(),W=this.startSpan(m,R,D),V=(0,_.setSpan)(D,W);return y.with(V,me,void 0,W)}}c.NoopTracer=x},124:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.NoopTracerProvider=void 0;let E=f(614);class _{getTracer(d,y,x){return new E.NoopTracer}}c.NoopTracerProvider=_},125:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ProxyTracer=void 0;let E=new(f(614)).NoopTracer;class _{constructor(d,y,x,C){this._provider=d,this.name=y,this.version=x,this.options=C}startSpan(d,y,x){return this._getTracer().startSpan(d,y,x)}startActiveSpan(d,y,x,C){let m=this._getTracer();return Reflect.apply(m.startActiveSpan,m,arguments)}_getTracer(){if(this._delegate)return this._delegate;let d=this._provider.getDelegateTracer(this.name,this.version,this.options);return d?(this._delegate=d,this._delegate):E}}c.ProxyTracer=_},846:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.ProxyTracerProvider=void 0;let E=f(125),_=new(f(124)).NoopTracerProvider;class T{getTracer(y,x,C){var m;return(m=this.getDelegateTracer(y,x,C))!==null&&m!==void 0?m:new E.ProxyTracer(this,y,x,C)}getDelegate(){var y;return(y=this._delegate)!==null&&y!==void 0?y:_}setDelegate(y){this._delegate=y}getDelegateTracer(y,x,C){var m;return(m=this._delegate)===null||m===void 0?void 0:m.getTracer(y,x,C)}}c.ProxyTracerProvider=T},996:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SamplingDecision=void 0,function(f){f[f.NOT_RECORD=0]="NOT_RECORD",f[f.RECORD=1]="RECORD",f[f.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(c.SamplingDecision||(c.SamplingDecision={}))},607:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.getSpanContext=c.setSpanContext=c.deleteSpan=c.setSpan=c.getActiveSpan=c.getSpan=void 0;let E=f(780),_=f(403),T=f(491),d=(0,E.createContextKey)("OpenTelemetry Context Key SPAN");function y(C){return C.getValue(d)||void 0}function x(C,m){return C.setValue(d,m)}c.getSpan=y,c.getActiveSpan=function(){return y(T.ContextAPI.getInstance().active())},c.setSpan=x,c.deleteSpan=function(C){return C.deleteValue(d)},c.setSpanContext=function(C,m){return x(C,new _.NonRecordingSpan(m))},c.getSpanContext=function(C){var m;return(m=y(C))===null||m===void 0?void 0:m.spanContext()}},325:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TraceStateImpl=void 0;let E=f(564);class _{constructor(d){this._internalState=new Map,d&&this._parse(d)}set(d,y){let x=this._clone();return x._internalState.has(d)&&x._internalState.delete(d),x._internalState.set(d,y),x}unset(d){let y=this._clone();return y._internalState.delete(d),y}get(d){return this._internalState.get(d)}serialize(){return this._keys().reduce((d,y)=>(d.push(y+"="+this.get(y)),d),[]).join(",")}_parse(d){!(d.length>512)&&(this._internalState=d.split(",").reverse().reduce((y,x)=>{let C=x.trim(),m=C.indexOf("=");if(m!==-1){let v=C.slice(0,m),w=C.slice(m+1,x.length);(0,E.validateKey)(v)&&(0,E.validateValue)(w)&&y.set(v,w)}return y},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let d=new _;return d._internalState=new Map(this._internalState),d}}c.TraceStateImpl=_},564:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.validateValue=c.validateKey=void 0;let f="[_0-9a-z-*/]",E=`[a-z]${f}{0,255}`,_=`[a-z0-9]${f}{0,240}@[a-z]${f}{0,13}`,T=RegExp(`^(?:${E}|${_})$`),d=/^[ -~]{0,255}[!-~]$/,y=/,|=/;c.validateKey=function(x){return T.test(x)},c.validateValue=function(x){return d.test(x)&&!y.test(x)}},98:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.createTraceState=void 0;let E=f(325);c.createTraceState=function(_){return new E.TraceStateImpl(_)}},476:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.INVALID_SPAN_CONTEXT=c.INVALID_TRACEID=c.INVALID_SPANID=void 0;let E=f(475);c.INVALID_SPANID="0000000000000000",c.INVALID_TRACEID="00000000000000000000000000000000",c.INVALID_SPAN_CONTEXT={traceId:c.INVALID_TRACEID,spanId:c.INVALID_SPANID,traceFlags:E.TraceFlags.NONE}},357:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SpanKind=void 0,function(f){f[f.INTERNAL=0]="INTERNAL",f[f.SERVER=1]="SERVER",f[f.CLIENT=2]="CLIENT",f[f.PRODUCER=3]="PRODUCER",f[f.CONSUMER=4]="CONSUMER"}(c.SpanKind||(c.SpanKind={}))},139:(j,c,f)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.wrapSpanContext=c.isSpanContextValid=c.isValidSpanId=c.isValidTraceId=void 0;let E=f(476),_=f(403),T=/^([0-9a-f]{32})$/i,d=/^[0-9a-f]{16}$/i;function y(C){return T.test(C)&&C!==E.INVALID_TRACEID}function x(C){return d.test(C)&&C!==E.INVALID_SPANID}c.isValidTraceId=y,c.isValidSpanId=x,c.isSpanContextValid=function(C){return y(C.traceId)&&x(C.spanId)},c.wrapSpanContext=function(C){return new _.NonRecordingSpan(C)}},847:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.SpanStatusCode=void 0,function(f){f[f.UNSET=0]="UNSET",f[f.OK=1]="OK",f[f.ERROR=2]="ERROR"}(c.SpanStatusCode||(c.SpanStatusCode={}))},475:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.TraceFlags=void 0,function(f){f[f.NONE=0]="NONE",f[f.SAMPLED=1]="SAMPLED"}(c.TraceFlags||(c.TraceFlags={}))},521:(j,c)=>{Object.defineProperty(c,"__esModule",{value:!0}),c.VERSION=void 0,c.VERSION="1.6.0"}},le={};function Y(j){var c=le[j];if(c!==void 0)return c.exports;var f=le[j]={exports:{}},E=!0;try{ne[j].call(f.exports,f,f.exports,Y),E=!1}finally{E&&delete le[j]}return f.exports}Y.ab="//";var M={};(()=>{Object.defineProperty(M,"__esModule",{value:!0}),M.trace=M.propagation=M.metrics=M.diag=M.context=M.INVALID_SPAN_CONTEXT=M.INVALID_TRACEID=M.INVALID_SPANID=M.isValidSpanId=M.isValidTraceId=M.isSpanContextValid=M.createTraceState=M.TraceFlags=M.SpanStatusCode=M.SpanKind=M.SamplingDecision=M.ProxyTracerProvider=M.ProxyTracer=M.defaultTextMapSetter=M.defaultTextMapGetter=M.ValueType=M.createNoopMeter=M.DiagLogLevel=M.DiagConsoleLogger=M.ROOT_CONTEXT=M.createContextKey=M.baggageEntryMetadataFromString=void 0;var j=Y(369);Object.defineProperty(M,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return j.baggageEntryMetadataFromString}});var c=Y(780);Object.defineProperty(M,"createContextKey",{enumerable:!0,get:function(){return c.createContextKey}}),Object.defineProperty(M,"ROOT_CONTEXT",{enumerable:!0,get:function(){return c.ROOT_CONTEXT}});var f=Y(972);Object.defineProperty(M,"DiagConsoleLogger",{enumerable:!0,get:function(){return f.DiagConsoleLogger}});var E=Y(957);Object.defineProperty(M,"DiagLogLevel",{enumerable:!0,get:function(){return E.DiagLogLevel}});var _=Y(102);Object.defineProperty(M,"createNoopMeter",{enumerable:!0,get:function(){return _.createNoopMeter}});var T=Y(901);Object.defineProperty(M,"ValueType",{enumerable:!0,get:function(){return T.ValueType}});var d=Y(194);Object.defineProperty(M,"defaultTextMapGetter",{enumerable:!0,get:function(){return d.defaultTextMapGetter}}),Object.defineProperty(M,"defaultTextMapSetter",{enumerable:!0,get:function(){return d.defaultTextMapSetter}});var y=Y(125);Object.defineProperty(M,"ProxyTracer",{enumerable:!0,get:function(){return y.ProxyTracer}});var x=Y(846);Object.defineProperty(M,"ProxyTracerProvider",{enumerable:!0,get:function(){return x.ProxyTracerProvider}});var C=Y(996);Object.defineProperty(M,"SamplingDecision",{enumerable:!0,get:function(){return C.SamplingDecision}});var m=Y(357);Object.defineProperty(M,"SpanKind",{enumerable:!0,get:function(){return m.SpanKind}});var v=Y(847);Object.defineProperty(M,"SpanStatusCode",{enumerable:!0,get:function(){return v.SpanStatusCode}});var w=Y(475);Object.defineProperty(M,"TraceFlags",{enumerable:!0,get:function(){return w.TraceFlags}});var S=Y(98);Object.defineProperty(M,"createTraceState",{enumerable:!0,get:function(){return S.createTraceState}});var R=Y(139);Object.defineProperty(M,"isSpanContextValid",{enumerable:!0,get:function(){return R.isSpanContextValid}}),Object.defineProperty(M,"isValidTraceId",{enumerable:!0,get:function(){return R.isValidTraceId}}),Object.defineProperty(M,"isValidSpanId",{enumerable:!0,get:function(){return R.isValidSpanId}});var re=Y(476);Object.defineProperty(M,"INVALID_SPANID",{enumerable:!0,get:function(){return re.INVALID_SPANID}}),Object.defineProperty(M,"INVALID_TRACEID",{enumerable:!0,get:function(){return re.INVALID_TRACEID}}),Object.defineProperty(M,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return re.INVALID_SPAN_CONTEXT}});let me=Y(67);Object.defineProperty(M,"context",{enumerable:!0,get:function(){return me.context}});let D=Y(506);Object.defineProperty(M,"diag",{enumerable:!0,get:function(){return D.diag}});let W=Y(886);Object.defineProperty(M,"metrics",{enumerable:!0,get:function(){return W.metrics}});let V=Y(939);Object.defineProperty(M,"propagation",{enumerable:!0,get:function(){return V.propagation}});let ie=Y(845);Object.defineProperty(M,"trace",{enumerable:!0,get:function(){return ie.trace}}),M.default={context:me.context,diag:D.diag,metrics:W.metrics,propagation:V.propagation,trace:ie.trace}})(),Ae.exports=M})()},1133:Ae=>{(()=>{"use strict";typeof __nccwpck_require__<"u"&&(__nccwpck_require__.ab="//");var F={};(()=>{F.parse=function(M,j){if(typeof M!="string")throw TypeError("argument str must be a string");for(var c={},f=M.split(le),E=(j||{}).decode||G,_=0;_<f.length;_++){var T=f[_],d=T.indexOf("=");if(!(d<0)){var y=T.substr(0,d).trim(),x=T.substr(++d,T.length).trim();x[0]=='"'&&(x=x.slice(1,-1)),c[y]==null&&(c[y]=function(C,m){try{return m(C)}catch{return C}}(x,E))}}return c},F.serialize=function(M,j,c){var f=c||{},E=f.encode||ne;if(typeof E!="function")throw TypeError("option encode is invalid");if(!Y.test(M))throw TypeError("argument name is invalid");var _=E(j);if(_&&!Y.test(_))throw TypeError("argument val is invalid");var T=M+"="+_;if(f.maxAge!=null){var d=f.maxAge-0;if(isNaN(d)||!isFinite(d))throw TypeError("option maxAge is invalid");T+="; Max-Age="+Math.floor(d)}if(f.domain){if(!Y.test(f.domain))throw TypeError("option domain is invalid");T+="; Domain="+f.domain}if(f.path){if(!Y.test(f.path))throw TypeError("option path is invalid");T+="; Path="+f.path}if(f.expires){if(typeof f.expires.toUTCString!="function")throw TypeError("option expires is invalid");T+="; Expires="+f.expires.toUTCString()}if(f.httpOnly&&(T+="; HttpOnly"),f.secure&&(T+="; Secure"),f.sameSite)switch(typeof f.sameSite=="string"?f.sameSite.toLowerCase():f.sameSite){case!0:case"strict":T+="; SameSite=Strict";break;case"lax":T+="; SameSite=Lax";break;case"none":T+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return T};var G=decodeURIComponent,ne=encodeURIComponent,le=/; */,Y=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),Ae.exports=F})()},340:(Ae,F,G)=>{var ne;(()=>{var le={226:function(c,f){(function(E,_){"use strict";var T="function",d="undefined",y="object",x="string",C="major",m="model",v="name",w="type",S="vendor",R="version",re="architecture",me="console",D="mobile",W="tablet",V="smarttv",ie="wearable",Te="embedded",Ce="Amazon",Me="Apple",Re="ASUS",Be="BlackBerry",Ve="Browser",N="Chrome",ee="Firefox",ke="Google",Ne="Huawei",X="Microsoft",He="Motorola",ye="Opera",Oe="Samsung",Ue="Sharp",_e="Sony",qe="Xiaomi",ft="Zebra",Tt="Facebook",We="Chromium OS",et="Mac OS",Qe=function(he,Pe){var ue={};for(var $e in he)Pe[$e]&&Pe[$e].length%2==0?ue[$e]=Pe[$e].concat(he[$e]):ue[$e]=he[$e];return ue},lt=function(he){for(var Pe={},ue=0;ue<he.length;ue++)Pe[he[ue].toUpperCase()]=he[ue];return Pe},_t=function(he,Pe){return typeof he===x&&gt(Pe).indexOf(gt(he))!==-1},gt=function(he){return he.toLowerCase()},pt=function(he,Pe){if(typeof he===x)return he=he.replace(/^\s\s*/,""),typeof Pe===d?he:he.substring(0,350)},Pt=function(he,Pe){for(var ue,$e,mt,xe,yt,de,tt=0;tt<Pe.length&&!yt;){var Qt=Pe[tt],Wr=Pe[tt+1];for(ue=$e=0;ue<Qt.length&&!yt&&Qt[ue];)if(yt=Qt[ue++].exec(he))for(mt=0;mt<Wr.length;mt++)de=yt[++$e],typeof(xe=Wr[mt])===y&&xe.length>0?xe.length===2?typeof xe[1]==T?this[xe[0]]=xe[1].call(this,de):this[xe[0]]=xe[1]:xe.length===3?typeof xe[1]!==T||xe[1].exec&&xe[1].test?this[xe[0]]=de?de.replace(xe[1],xe[2]):void 0:this[xe[0]]=de?xe[1].call(this,de,xe[2]):void 0:xe.length===4&&(this[xe[0]]=de?xe[3].call(this,de.replace(xe[1],xe[2])):void 0):this[xe]=de||_;tt+=2}},Vt=function(he,Pe){for(var ue in Pe)if(typeof Pe[ue]===y&&Pe[ue].length>0){for(var $e=0;$e<Pe[ue].length;$e++)if(_t(Pe[ue][$e],he))return ue==="?"?_:ue}else if(_t(Pe[ue],he))return ue==="?"?_:ue;return he},yr={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Hr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[R,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[R,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,R],[/opios[\/ ]+([\w\.]+)/i],[R,[v,ye+" Mini"]],[/\bopr\/([\w\.]+)/i],[R,[v,ye]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,R],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[R,[v,"UC"+Ve]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[R,[v,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[R,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[R,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[R,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[R,[v,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure "+Ve],R],[/\bfocus\/([\w\.]+)/i],[R,[v,ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[R,[v,ye+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[R,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[R,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[R,[v,ye+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[R,[v,"MIUI "+Ve]],[/fxios\/([-\w\.]+)/i],[R,[v,ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[v,"360 "+Ve]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 "+Ve],R],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],R],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[v,R],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,Tt],R],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[v,R],[/\bgsa\/([\w\.]+) .*safari\//i],[R,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[R,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[R,[v,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,N+" WebView"],R],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[R,[v,"Android "+Ve]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,R],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[R,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[R,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[R,Vt,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[v,R],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],R],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[R,[v,ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[v,R],[/(cobalt)\/([\w\.]+)/i],[v,[R,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[re,"amd64"]],[/(ia32(?=;))/i],[[re,gt]],[/((?:i[346]|x)86)[;\)]/i],[[re,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[re,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[re,"armhf"]],[/windows (ce|mobile); ppc;/i],[[re,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[re,/ower/,"",gt]],[/(sun4\w)[;\)]/i],[[re,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[re,gt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[S,Oe],[w,W]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[S,Oe],[w,D]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[S,Me],[w,D]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[S,Me],[w,W]],[/(macintosh);/i],[m,[S,Me]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[S,Ue],[w,D]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[S,Ne],[w,W]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[S,Ne],[w,D]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[S,qe],[w,D]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[S,qe],[w,W]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[S,"OPPO"],[w,D]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[S,"Vivo"],[w,D]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[m,[S,"Realme"],[w,D]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[S,He],[w,D]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[S,He],[w,W]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[S,"LG"],[w,W]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[S,"LG"],[w,D]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[S,"Lenovo"],[w,W]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[S,"Nokia"],[w,D]],[/(pixel c)\b/i],[m,[S,ke],[w,W]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[S,ke],[w,D]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[S,_e],[w,D]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[S,_e],[w,W]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[S,"OnePlus"],[w,D]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[S,Ce],[w,W]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[S,Ce],[w,D]],[/(playbook);[-\w\),; ]+(rim)/i],[m,S,[w,W]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[S,Be],[w,D]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[S,Re],[w,W]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[S,Re],[w,D]],[/(nexus 9)/i],[m,[S,"HTC"],[w,W]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[S,[m,/_/g," "],[w,D]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[S,"Acer"],[w,W]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[S,"Meizu"],[w,D]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[S,m,[w,D]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[S,m,[w,W]],[/(surface duo)/i],[m,[S,X],[w,W]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[S,"Fairphone"],[w,D]],[/(u304aa)/i],[m,[S,"AT&T"],[w,D]],[/\bsie-(\w*)/i],[m,[S,"Siemens"],[w,D]],[/\b(rct\w+) b/i],[m,[S,"RCA"],[w,W]],[/\b(venue[\d ]{2,7}) b/i],[m,[S,"Dell"],[w,W]],[/\b(q(?:mv|ta)\w+) b/i],[m,[S,"Verizon"],[w,W]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[S,"Barnes & Noble"],[w,W]],[/\b(tm\d{3}\w+) b/i],[m,[S,"NuVision"],[w,W]],[/\b(k88) b/i],[m,[S,"ZTE"],[w,W]],[/\b(nx\d{3}j) b/i],[m,[S,"ZTE"],[w,D]],[/\b(gen\d{3}) b.+49h/i],[m,[S,"Swiss"],[w,D]],[/\b(zur\d{3}) b/i],[m,[S,"Swiss"],[w,W]],[/\b((zeki)?tb.*\b) b/i],[m,[S,"Zeki"],[w,W]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[S,"Dragon Touch"],m,[w,W]],[/\b(ns-?\w{0,9}) b/i],[m,[S,"Insignia"],[w,W]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[S,"NextBook"],[w,W]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[S,"Voice"],m,[w,D]],[/\b(lvtel\-)?(v1[12]) b/i],[[S,"LvTel"],m,[w,D]],[/\b(ph-1) /i],[m,[S,"Essential"],[w,D]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[S,"Envizen"],[w,W]],[/\b(trio[-\w\. ]+) b/i],[m,[S,"MachSpeed"],[w,W]],[/\btu_(1491) b/i],[m,[S,"Rotor"],[w,W]],[/(shield[\w ]+) b/i],[m,[S,"Nvidia"],[w,W]],[/(sprint) (\w+)/i],[S,m,[w,D]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[S,X],[w,D]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[S,ft],[w,W]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[S,ft],[w,D]],[/smart-tv.+(samsung)/i],[S,[w,V]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[S,Oe],[w,V]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[S,"LG"],[w,V]],[/(apple) ?tv/i],[S,[m,Me+" TV"],[w,V]],[/crkey/i],[[m,N+"cast"],[S,ke],[w,V]],[/droid.+aft(\w)( bui|\))/i],[m,[S,Ce],[w,V]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[S,Ue],[w,V]],[/(bravia[\w ]+)( bui|\))/i],[m,[S,_e],[w,V]],[/(mitv-\w{5}) bui/i],[m,[S,qe],[w,V]],[/Hbbtv.*(technisat) (.*);/i],[S,m,[w,V]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[S,pt],[m,pt],[w,V]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[w,V]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[S,m,[w,me]],[/droid.+; (shield) bui/i],[m,[S,"Nvidia"],[w,me]],[/(playstation [345portablevi]+)/i],[m,[S,_e],[w,me]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[S,X],[w,me]],[/((pebble))app/i],[S,m,[w,ie]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[S,Me],[w,ie]],[/droid.+; (glass) \d/i],[m,[S,ke],[w,ie]],[/droid.+; (wt63?0{2,3})\)/i],[m,[S,ft],[w,ie]],[/(quest( 2| pro)?)/i],[m,[S,Tt],[w,ie]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[S,[w,Te]],[/(aeobc)\b/i],[m,[S,Ce],[w,Te]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[m,[w,D]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[w,W]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[w,W]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[w,D]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[S,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[R,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[R,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,R],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[R,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,R],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[v,[R,Vt,yr]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,"Windows"],[R,Vt,yr]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[R,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,et],[R,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[R,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,R],[/\(bb(10);/i],[R,[v,Be]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[R,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[R,[v,ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[R,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[R,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[R,[v,N+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,We],R],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,R],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],R],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,R]]},rt=function(he,Pe){if(typeof he===y&&(Pe=he,he=_),!(this instanceof rt))return new rt(he,Pe).getResult();var ue=typeof E!==d&&E.navigator?E.navigator:_,$e=he||(ue&&ue.userAgent?ue.userAgent:""),mt=ue&&ue.userAgentData?ue.userAgentData:_,xe=Pe?Qe(Hr,Pe):Hr,yt=ue&&ue.userAgent==$e;return this.getBrowser=function(){var de,tt={};return tt[v]=_,tt[R]=_,Pt.call(tt,$e,xe.browser),tt[C]=typeof(de=tt[R])===x?de.replace(/[^\d\.]/g,"").split(".")[0]:_,yt&&ue&&ue.brave&&typeof ue.brave.isBrave==T&&(tt[v]="Brave"),tt},this.getCPU=function(){var de={};return de[re]=_,Pt.call(de,$e,xe.cpu),de},this.getDevice=function(){var de={};return de[S]=_,de[m]=_,de[w]=_,Pt.call(de,$e,xe.device),yt&&!de[w]&&mt&&mt.mobile&&(de[w]=D),yt&&de[m]=="Macintosh"&&ue&&typeof ue.standalone!==d&&ue.maxTouchPoints&&ue.maxTouchPoints>2&&(de[m]="iPad",de[w]=W),de},this.getEngine=function(){var de={};return de[v]=_,de[R]=_,Pt.call(de,$e,xe.engine),de},this.getOS=function(){var de={};return de[v]=_,de[R]=_,Pt.call(de,$e,xe.os),yt&&!de[v]&&mt&&mt.platform!="Unknown"&&(de[v]=mt.platform.replace(/chrome os/i,We).replace(/macos/i,et)),de},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return $e},this.setUA=function(de){return $e=typeof de===x&&de.length>350?pt(de,350):de,this},this.setUA($e),this};rt.VERSION="1.0.35",rt.BROWSER=lt([v,R,C]),rt.CPU=lt([re]),rt.DEVICE=lt([m,S,w,me,D,V,W,ie,Te]),rt.ENGINE=rt.OS=lt([v,R]),typeof f!==d?(c.exports&&(f=c.exports=rt),f.UAParser=rt):G.amdO?(ne=function(){return rt}.call(F,G,F,Ae))!==void 0&&(Ae.exports=ne):typeof E!==d&&(E.UAParser=rt);var Ct=typeof E!==d&&(E.jQuery||E.Zepto);if(Ct&&!Ct.ua){var Zt=new rt;Ct.ua=Zt.getResult(),Ct.ua.get=function(){return Zt.getUA()},Ct.ua.set=function(he){Zt.setUA(he);var Pe=Zt.getResult();for(var ue in Pe)Ct.ua[ue]=Pe[ue]}}})(typeof window=="object"?window:this)}},Y={};function M(c){var f=Y[c];if(f!==void 0)return f.exports;var E=Y[c]={exports:{}},_=!0;try{le[c].call(E.exports,E,E.exports,M),_=!1}finally{_&&delete Y[c]}return E.exports}M.ab="//";var j=M(226);Ae.exports=j})()},2912:(Ae,F,G)=>{"use strict";G.r(F),G.d(F,{bailoutToClientRendering:()=>Y});class ne extends Error{constructor(j){super("Bail out to client-side rendering: "+j),this.reason=j,this.digest="BAILOUT_TO_CLIENT_SIDE_RENDERING"}}var le=G(6865);function Y(M){let j=le.A.getStore();if((j==null||!j.forceStatic)&&j?.isStaticGeneration)throw new ne(M)}},6865:(Ae,F,G)=>{"use strict";G.d(F,{A:()=>ne.A});var ne=G(5558)},8488:(Ae,F,G)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),function(j,c){for(var f in c)Object.defineProperty(j,f,{enumerable:!0,get:c[f]})}(F,{getTestReqInfo:function(){return M},withRequest:function(){return Y}});let ne=new(G(2067)).AsyncLocalStorage;function le(j,c){let f=c.header(j,"next-test-proxy-port");if(f)return{url:c.url(j),proxyPort:Number(f),testData:c.header(j,"next-test-data")||""}}function Y(j,c,f){let E=le(j,c);return E?ne.run(E,f):f()}function M(j,c){return ne.getStore()||(j&&c?le(j,c):void 0)}},375:(Ae,F,G)=>{"use strict";var ne=G(6195).Buffer;Object.defineProperty(F,"__esModule",{value:!0}),function(f,E){for(var _ in E)Object.defineProperty(f,_,{enumerable:!0,get:E[_]})}(F,{handleFetch:function(){return j},interceptFetch:function(){return c},reader:function(){return Y}});let le=G(8488),Y={url:f=>f.url,header:(f,E)=>f.headers.get(E)};async function M(f,E){let{url:_,method:T,headers:d,body:y,cache:x,credentials:C,integrity:m,mode:v,redirect:w,referrer:S,referrerPolicy:R}=E;return{testData:f,api:"fetch",request:{url:_,method:T,headers:[...Array.from(d),["next-test-stack",function(){let re=(Error().stack??"").split(`
`);for(let me=1;me<re.length;me++)if(re[me].length>0){re=re.slice(me);break}return(re=(re=(re=re.filter(me=>!me.includes("/next/dist/"))).slice(0,5)).map(me=>me.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:y?ne.from(await E.arrayBuffer()).toString("base64"):null,cache:x,credentials:C,integrity:m,mode:v,redirect:w,referrer:S,referrerPolicy:R}}}async function j(f,E){let _=(0,le.getTestReqInfo)(E,Y);if(!_)return f(E);let{testData:T,proxyPort:d}=_,y=await M(T,E),x=await f(`http://localhost:${d}`,{method:"POST",body:JSON.stringify(y),next:{internal:!0}});if(!x.ok)throw Error(`Proxy request failed: ${x.status}`);let C=await x.json(),{api:m}=C;switch(m){case"continue":return f(E);case"abort":case"unhandled":throw Error(`Proxy request aborted [${E.method} ${E.url}]`)}return function(v){let{status:w,headers:S,body:R}=v.response;return new Response(R?ne.from(R,"base64"):null,{status:w,headers:new Headers(S)})}(C)}function c(f){return G.g.fetch=function(E,_){var T;return!(_==null||(T=_.next)==null)&&T.internal?f(E,_):j(f,new Request(E,_))},()=>{G.g.fetch=f}}},4177:(Ae,F,G)=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0}),function(j,c){for(var f in c)Object.defineProperty(j,f,{enumerable:!0,get:c[f]})}(F,{interceptTestApis:function(){return Y},wrapRequestHandler:function(){return M}});let ne=G(8488),le=G(375);function Y(){return(0,le.interceptFetch)(G.g.fetch)}function M(j){return(c,f)=>(0,ne.withRequest)(c,le.reader,()=>j(c,f))}},8304:(Ae,F)=>{"use strict";var G=Symbol.for("react.element"),ne=Symbol.for("react.portal"),le=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),d=Symbol.iterator,y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function m(N,ee,ke){this.props=N,this.context=ee,this.refs=C,this.updater=ke||y}function v(){}function w(N,ee,ke){this.props=N,this.context=ee,this.refs=C,this.updater=ke||y}m.prototype.isReactComponent={},m.prototype.setState=function(N,ee){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,ee,"setState")},m.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")},v.prototype=m.prototype;var S=w.prototype=new v;S.constructor=w,x(S,m.prototype),S.isPureReactComponent=!0;var R=Array.isArray,re=Object.prototype.hasOwnProperty,me={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function W(N,ee,ke){var Ne,X={},He=null,ye=null;if(ee!=null)for(Ne in ee.ref!==void 0&&(ye=ee.ref),ee.key!==void 0&&(He=""+ee.key),ee)re.call(ee,Ne)&&!D.hasOwnProperty(Ne)&&(X[Ne]=ee[Ne]);var Oe=arguments.length-2;if(Oe===1)X.children=ke;else if(1<Oe){for(var Ue=Array(Oe),_e=0;_e<Oe;_e++)Ue[_e]=arguments[_e+2];X.children=Ue}if(N&&N.defaultProps)for(Ne in Oe=N.defaultProps)X[Ne]===void 0&&(X[Ne]=Oe[Ne]);return{$$typeof:G,type:N,key:He,ref:ye,props:X,_owner:me.current}}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===G}var ie=/\/+/g;function Te(N,ee){var ke,Ne;return typeof N=="object"&&N!==null&&N.key!=null?(ke=""+N.key,Ne={"=":"=0",":":"=2"},"$"+ke.replace(/[=:]/g,function(X){return Ne[X]})):ee.toString(36)}function Ce(N,ee,ke){if(N==null)return N;var Ne=[],X=0;return function He(ye,Oe,Ue,_e,qe){var ft,Tt,We,et=typeof ye;(et==="undefined"||et==="boolean")&&(ye=null);var Qe=!1;if(ye===null)Qe=!0;else switch(et){case"string":case"number":Qe=!0;break;case"object":switch(ye.$$typeof){case G:case ne:Qe=!0}}if(Qe)return qe=qe(Qe=ye),ye=_e===""?"."+Te(Qe,0):_e,R(qe)?(Ue="",ye!=null&&(Ue=ye.replace(ie,"$&/")+"/"),He(qe,Oe,Ue,"",function(gt){return gt})):qe!=null&&(V(qe)&&(ft=qe,Tt=Ue+(!qe.key||Qe&&Qe.key===qe.key?"":(""+qe.key).replace(ie,"$&/")+"/")+ye,qe={$$typeof:G,type:ft.type,key:Tt,ref:ft.ref,props:ft.props,_owner:ft._owner}),Oe.push(qe)),1;if(Qe=0,_e=_e===""?".":_e+":",R(ye))for(var lt=0;lt<ye.length;lt++){var _t=_e+Te(et=ye[lt],lt);Qe+=He(et,Oe,Ue,_t,qe)}else if(typeof(_t=(We=ye)===null||typeof We!="object"?null:typeof(We=d&&We[d]||We["@@iterator"])=="function"?We:null)=="function")for(ye=_t.call(ye),lt=0;!(et=ye.next()).done;)_t=_e+Te(et=et.value,lt++),Qe+=He(et,Oe,Ue,_t,qe);else if(et==="object")throw Error("Objects are not valid as a React child (found: "+((Oe=String(ye))==="[object Object]"?"object with keys {"+Object.keys(ye).join(", ")+"}":Oe)+"). If you meant to render a collection of children, use an array instead.");return Qe}(N,Ne,"","",function(He){return ee.call(ke,He,X++)}),Ne}function Me(N){if(N._status===-1){var ee=N._result;(ee=ee()).then(function(ke){(N._status===0||N._status===-1)&&(N._status=1,N._result=ke)},function(ke){(N._status===0||N._status===-1)&&(N._status=2,N._result=ke)}),N._status===-1&&(N._status=0,N._result=ee)}if(N._status===1)return N._result.default;throw N._result}var Re={current:null},Be={transition:null};function Ve(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:Ce,forEach:function(N,ee,ke){Ce(N,function(){ee.apply(this,arguments)},ke)},count:function(N){var ee=0;return Ce(N,function(){ee++}),ee},toArray:function(N){return Ce(N,function(ee){return ee})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},F.Component=m,F.Fragment=le,F.Profiler=M,F.PureComponent=w,F.StrictMode=Y,F.Suspense=E,F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Be,ReactCurrentOwner:me},F.act=Ve,F.cloneElement=function(N,ee,ke){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ne=x({},N.props),X=N.key,He=N.ref,ye=N._owner;if(ee!=null){if(ee.ref!==void 0&&(He=ee.ref,ye=me.current),ee.key!==void 0&&(X=""+ee.key),N.type&&N.type.defaultProps)var Oe=N.type.defaultProps;for(Ue in ee)re.call(ee,Ue)&&!D.hasOwnProperty(Ue)&&(Ne[Ue]=ee[Ue]===void 0&&Oe!==void 0?Oe[Ue]:ee[Ue])}var Ue=arguments.length-2;if(Ue===1)Ne.children=ke;else if(1<Ue){Oe=Array(Ue);for(var _e=0;_e<Ue;_e++)Oe[_e]=arguments[_e+2];Ne.children=Oe}return{$$typeof:G,type:N.type,key:X,ref:He,props:Ne,_owner:ye}},F.createContext=function(N){return(N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:j,_context:N},N.Consumer=N},F.createElement=W,F.createFactory=function(N){var ee=W.bind(null,N);return ee.type=N,ee},F.createRef=function(){return{current:null}},F.forwardRef=function(N){return{$$typeof:f,render:N}},F.isValidElement=V,F.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:Me}},F.memo=function(N,ee){return{$$typeof:_,type:N,compare:ee===void 0?null:ee}},F.startTransition=function(N){var ee=Be.transition;Be.transition={};try{N()}finally{Be.transition=ee}},F.unstable_act=Ve,F.useCallback=function(N,ee){return Re.current.useCallback(N,ee)},F.useContext=function(N){return Re.current.useContext(N)},F.useDebugValue=function(){},F.useDeferredValue=function(N){return Re.current.useDeferredValue(N)},F.useEffect=function(N,ee){return Re.current.useEffect(N,ee)},F.useId=function(){return Re.current.useId()},F.useImperativeHandle=function(N,ee,ke){return Re.current.useImperativeHandle(N,ee,ke)},F.useInsertionEffect=function(N,ee){return Re.current.useInsertionEffect(N,ee)},F.useLayoutEffect=function(N,ee){return Re.current.useLayoutEffect(N,ee)},F.useMemo=function(N,ee){return Re.current.useMemo(N,ee)},F.useReducer=function(N,ee,ke){return Re.current.useReducer(N,ee,ke)},F.useRef=function(N){return Re.current.useRef(N)},F.useState=function(N){return Re.current.useState(N)},F.useSyncExternalStore=function(N,ee,ke){return Re.current.useSyncExternalStore(N,ee,ke)},F.useTransition=function(){return Re.current.useTransition()},F.version="18.3.1"},2479:(Ae,F,G)=>{"use strict";Ae.exports=G(8304)},1959:pu,5228:du,5303:uu,5558:lu},Ae=>{var F=Ae(Ae.s=7299);(Se._ENTRIES=typeof Se._ENTRIES>"u"?{}:Se._ENTRIES)["middleware_src/middleware"]=F}]),function(){let Ae={exports:{},loaded:!1};return function(G,ne){"use strict";var le=Object.defineProperty,Y=Object.getOwnPropertyDescriptor,M=Object.getOwnPropertyNames,j=Object.prototype.hasOwnProperty,c=(D,W)=>{for(var V in W)le(D,V,{get:W[V],enumerable:!0})},f=(D,W,V,ie)=>{if(W&&typeof W=="object"||typeof W=="function")for(let Te of M(W))!j.call(D,Te)&&Te!==V&&le(D,Te,{get:()=>W[Te],enumerable:!(ie=Y(W,Te))||ie.enumerable});return D},E=D=>f(le({},"__esModule",{value:!0}),D),_={};c(_,{default:()=>R}),G.exports=E(_);var T=(ls(),su(Mr)),d="@next/request-context",y=Symbol.for(d),x=Symbol.for("internal.storage");function C(){let D=Se;if(!D[y]){let W=new T.AsyncLocalStorage,V={get:()=>W.getStore(),[x]:W};D[y]=V}return D[y]}var m=C();function v(D,W){return m[x].run(D,W)}function w(D){let W={};return D&&D.forEach((V,ie)=>{W[ie]=V,ie.toLowerCase()==="set-cookie"&&(W[ie]=S(V))}),W}function S(D){let W=[],V=0,ie,Te,Ce,Me,Re;function Be(){for(;V<D.length&&/\s/.test(D.charAt(V));)V+=1;return V<D.length}function Ve(){return Te=D.charAt(V),Te!=="="&&Te!==";"&&Te!==","}for(;V<D.length;){for(ie=V,Re=!1;Be();)if(Te=D.charAt(V),Te===","){for(Ce=V,V+=1,Be(),Me=V;V<D.length&&Ve();)V+=1;V<D.length&&D.charAt(V)==="="?(Re=!0,V=Me,W.push(D.substring(ie,Ce)),ie=V):V=Ce+1}else V+=1;(!Re||V>=D.length)&&W.push(D.substring(ie,D.length))}return W}function R(D){let W=D.staticRoutes.map(ie=>({regexp:new RegExp(ie.namedRegex),page:ie.page})),V=D.dynamicRoutes?.map(ie=>({regexp:new RegExp(ie.namedRegex),page:ie.page}))||[];return async function(ie,Te){let Ce=new URL(ie.url).pathname,Me={};if(D.nextConfig?.basePath&&Ce.startsWith(D.nextConfig.basePath)&&(Ce=Ce.replace(D.nextConfig.basePath,"")||"/"),D.nextConfig?.i18n)for(let Be of D.nextConfig.i18n.locales){let Ve=new RegExp(`^/${Be}($|/)`,"i");if(Ce.match(Ve)){Ce=Ce.replace(Ve,"/")||"/";break}}for(let Be of W)if(Be.regexp.exec(Ce)){Me.name=Be.page;break}if(!Me.name){let Be=me(Ce);for(let Ve of V||[]){if(Be&&!me(Ve.page))continue;let N=Ve.regexp.exec(Ce);if(N){Me={name:Ve.page,params:N.groups};break}}}let Re=await v({waitUntil:Te.waitUntil},()=>Se._ENTRIES[`middleware_${D.name}`].default.call({},{request:{url:ie.url,method:ie.method,headers:w(ie.headers),ip:re(ie.headers,"x-real-ip"),geo:{city:re(ie.headers,"x-vercel-ip-city",!0),country:re(ie.headers,"x-vercel-ip-country",!0),latitude:re(ie.headers,"x-vercel-ip-latitude"),longitude:re(ie.headers,"x-vercel-ip-longitude"),region:re(ie.headers,"x-vercel-ip-country-region",!0)},nextConfig:D.nextConfig,page:Me,body:ie.body}}));return Re.waitUntil&&Te.waitUntil(Re.waitUntil),Re.response}}function re(D,W,V=!1){let ie=D.get(W)||void 0;return V&&ie?decodeURIComponent(ie):ie}function me(D){return D==="/api"||D.startsWith("/api/")}}(Ae,Ae.exports),Ae.exports}.call({}).default({name:"src/middleware",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/coming-soon",regex:"^/coming\\-soon(?:/)?$",routeKeys:{},namedRegex:"^/coming\\-soon(?:/)?$"},{page:"/corde",regex:"^/corde(?:/)?$",routeKeys:{},namedRegex:"^/corde(?:/)?$"},{page:"/frh",regex:"^/frh(?:/)?$",routeKeys:{},namedRegex:"^/frh(?:/)?$"},{page:"/login",regex:"^/login(?:/)?$",routeKeys:{},namedRegex:"^/login(?:/)?$"},{page:"/social",regex:"^/social(?:/)?$",routeKeys:{},namedRegex:"^/social(?:/)?$"}],dynamicRoutes:[{page:"/api/agent-tasks/[id]",regex:"^/api/agent\\-tasks/([^/]+?)(?:/)?$",routeKeys:{nxtPid:"nxtPid"},namedRegex:"^/api/agent\\-tasks/(?<nxtPid>[^/]+?)(?:/)?$"},{page:"/api/auth/[...nextauth]",regex:"^/api/auth/(.+?)(?:/)?$",routeKeys:{nxtPnextauth:"nxtPnextauth"},namedRegex:"^/api/auth/(?<nxtPnextauth>.+?)(?:/)?$"}],nextConfig:{basePath:""}})))(fr,fr,fr);export{Uu as default};
