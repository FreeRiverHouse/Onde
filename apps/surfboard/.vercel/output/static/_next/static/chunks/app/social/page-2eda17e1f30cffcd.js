(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{4593:function(e,t,s){Promise.resolve().then(s.bind(s,6281))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},6281:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(7437),r=s(2265),n=s(4070),l=s(9376);let i=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),d=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c=()=>(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),o=()=>(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),x=()=>(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h=()=>(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),m={onde:{bg:"from-cyan-500 to-teal-500",border:"border-cyan-400/30",text:"text-cyan-400",handle:"@Onde_FRH"},frh:{bg:"from-purple-500 to-purple-600",border:"border-purple-400/30",text:"text-purple-400",handle:"@FreeRiverHouse"},magmatic:{bg:"from-amber-500 to-orange-500",border:"border-amber-400/30",text:"text-amber-400",handle:"@magmatic__"}},p={pending:{bg:"bg-yellow-500/20",text:"text-yellow-400",label:"In attesa"},approved:{bg:"bg-green-500/20",text:"text-green-400",label:"Approvato"},rejected:{bg:"bg-red-500/20",text:"text-red-400",label:"Rifiutato"},posted:{bg:"bg-cyan-500/20",text:"text-cyan-400",label:"Pubblicato"}};function u(e){let{post:t,onApprove:s,onReject:r,loading:n}=e,l=m[t.account],h=p[t.status];return(0,a.jsxs)("div",{className:"bg-white/5 rounded-2xl border ".concat(l.border," hover:bg-white/10 transition-all duration-300"),children:[(0,a.jsx)("div",{className:"p-4 border-b border-white/5",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br ".concat(l.bg," flex items-center justify-center text-white"),children:(0,a.jsx)(i,{})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-bold text-white",children:l.handle}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat(h.bg," ").concat(h.text),children:h.label})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-white/50",children:[t.scheduled_for&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{}),(0,a.jsx)("span",{children:t.scheduled_for})]}),t.source&&(0,a.jsxs)("span",{className:"text-white/30",children:["• ",t.source]})]})]})]})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("p",{className:"text-white whitespace-pre-line text-[15px] leading-relaxed",children:t.content}),t.media_files&&t.media_files.length>0&&(0,a.jsxs)("div",{className:"mt-3 p-3 rounded-xl bg-white/5 border border-white/10 flex items-center gap-2 text-white/60",children:[(0,a.jsx)(x,{}),(0,a.jsxs)("span",{className:"text-sm",children:[t.media_files.length," file allegati"]})]}),t.feedback&&t.feedback.length>0&&(0,a.jsxs)("div",{className:"mt-3 p-3 rounded-xl bg-amber-500/10 border border-amber-500/20",children:[(0,a.jsx)("span",{className:"text-xs text-amber-400 font-medium",children:"Feedback:"}),t.feedback.map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-white/70 mt-1",children:e},t))]})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-white/5 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:["pending"===t.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>s(t.id),disabled:n,className:"px-4 py-2 rounded-xl bg-green-500/20 text-green-400 hover:bg-green-500/30 transition-colors flex items-center gap-2 text-sm font-medium disabled:opacity-50",children:[(0,a.jsx)(d,{})," Approva"]}),(0,a.jsxs)("button",{onClick:()=>r(t.id),disabled:n,className:"px-4 py-2 rounded-xl bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-colors flex items-center gap-2 text-sm font-medium disabled:opacity-50",children:[(0,a.jsx)(c,{})," Rifiuta"]})]}),"posted"===t.status&&t.post_url&&(0,a.jsx)("a",{href:t.post_url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 rounded-xl bg-cyan-500/20 text-cyan-400 hover:bg-cyan-500/30 transition-colors flex items-center gap-2 text-sm font-medium",children:"Vedi su X"})]}),(0,a.jsx)("span",{className:"text-xs text-white/30",children:new Date(t.created_at).toLocaleDateString("it-IT",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]})}function b(e){let{active:t,onClick:s,children:r,count:n}=e;return(0,a.jsxs)("button",{onClick:s,className:"px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-2 ".concat(t?"bg-cyan-500/20 text-cyan-400 border border-cyan-400/30":"bg-white/5 text-white/60 hover:bg-white/10 border border-white/10"),children:[r,void 0!==n&&n>0&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 text-xs rounded-full ".concat(t?"bg-cyan-400/30":"bg-white/10"),children:n})]})}function g(){let{status:e}=(0,n.kP)(),t=(0,l.useRouter)(),[s,d]=(0,r.useState)([]),[c,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)("all"),[j,f]=(0,r.useState)("pending"),[v,N]=(0,r.useState)("");(0,r.useEffect)(()=>{"unauthenticated"===e&&t.push("/login")},[e,t]);let w=(0,r.useCallback)(async()=>{o(!0);try{let e=await fetch("/api/posts/pending");if(e.ok){let t=await e.json();d(t.posts||[]),N(t.source||"unknown")}}catch(e){console.error("Error fetching posts:",e)}finally{o(!1)}},[]);(0,r.useEffect)(()=>{"authenticated"===e&&w()},[e,w]);let y=async e=>{m(!0);try{(await fetch("/api/posts/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&d(t=>t.map(t=>t.id===e?{...t,status:"approved",approved_at:new Date().toISOString()}:t))}catch(e){console.error("Error approving post:",e)}finally{m(!1)}},k=async e=>{m(!0);try{(await fetch("/api/posts/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&d(t=>t.map(t=>t.id===e?{...t,status:"rejected"}:t))}catch(e){console.error("Error rejecting post:",e)}finally{m(!1)}},C=s.filter(e=>("all"===p||e.account===p)&&("all"===j||e.status===j)),_={all:s.length,onde:s.filter(e=>"onde"===e.account).length,frh:s.filter(e=>"frh"===e.account).length,magmatic:s.filter(e=>"magmatic"===e.account).length,pending:s.filter(e=>"pending"===e.status).length,approved:s.filter(e=>"approved"===e.status).length,posted:s.filter(e=>"posted"===e.status).length};return"loading"===e?(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-12",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-cyan-400/30 border-t-cyan-400 rounded-full animate-spin"})})}):"unauthenticated"===e?null:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[(0,a.jsxs)("section",{className:"mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center text-white",children:(0,a.jsx)(i,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Social Dashboard"}),(0,a.jsx)("p",{className:"text-white/60",children:"Approva i post per tutti gli account"})]})]}),(0,a.jsxs)("button",{onClick:w,disabled:c,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 border border-white/10 text-white/60 hover:bg-white/10 hover:text-white transition-colors disabled:opacity-50",children:[(0,a.jsx)(h,{}),"Aggiorna"]})]}),v&&(0,a.jsxs)("div",{className:"text-xs text-white/30 mb-4",children:["Dati da: ","d1"===v?"Cloudflare D1":"memory"===v?"Memoria locale (dev)":v]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl border border-white/10 p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-cyan-400 mb-1",children:_.all}),(0,a.jsx)("div",{className:"text-white/50 text-sm",children:"Post Totali"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl border border-white/10 p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-400 mb-1",children:_.pending}),(0,a.jsx)("div",{className:"text-white/50 text-sm",children:"In Attesa"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl border border-white/10 p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-400 mb-1",children:_.approved}),(0,a.jsx)("div",{className:"text-white/50 text-sm",children:"Approvati"})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-xl border border-white/10 p-4 text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-cyan-400 mb-1",children:_.posted}),(0,a.jsx)("div",{className:"text-white/50 text-sm",children:"Pubblicati"})]})]})]}),(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4",children:[(0,a.jsx)("span",{className:"text-white/50 text-sm py-2",children:"Account:"}),(0,a.jsx)(b,{active:"all"===p,onClick:()=>g("all"),count:_.all,children:"Tutti"}),(0,a.jsx)(b,{active:"onde"===p,onClick:()=>g("onde"),count:_.onde,children:(0,a.jsx)("span",{className:"text-cyan-400",children:"@Onde_FRH"})}),(0,a.jsx)(b,{active:"frh"===p,onClick:()=>g("frh"),count:_.frh,children:(0,a.jsx)("span",{className:"text-purple-400",children:"@FreeRiverHouse"})}),(0,a.jsx)(b,{active:"magmatic"===p,onClick:()=>g("magmatic"),count:_.magmatic,children:(0,a.jsx)("span",{className:"text-amber-400",children:"@magmatic__"})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("span",{className:"text-white/50 text-sm py-2",children:"Stato:"}),(0,a.jsx)(b,{active:"all"===j,onClick:()=>f("all"),children:"Tutti"}),(0,a.jsx)(b,{active:"pending"===j,onClick:()=>f("pending"),count:_.pending,children:(0,a.jsx)("span",{className:"text-yellow-400",children:"In Attesa"})}),(0,a.jsx)(b,{active:"approved"===j,onClick:()=>f("approved"),count:_.approved,children:(0,a.jsx)("span",{className:"text-green-400",children:"Approvati"})}),(0,a.jsx)(b,{active:"posted"===j,onClick:()=>f("posted"),count:_.posted,children:(0,a.jsx)("span",{className:"text-cyan-400",children:"Pubblicati"})})]})]}),(0,a.jsxs)("section",{className:"mb-8 bg-white/5 rounded-xl border border-white/10 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDCC5 Schedule"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-cyan-500/10 border border-cyan-500/20",children:[(0,a.jsx)("div",{className:"text-cyan-400 font-bold mb-2",children:"@Onde_FRH"}),(0,a.jsx)("div",{className:"text-white/60 text-sm",children:"3x/giorno"}),(0,a.jsx)("div",{className:"text-white mt-2 font-mono text-lg",children:"8:08 • 11:11 • 22:22"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-400/20",children:[(0,a.jsx)("div",{className:"text-purple-400 font-bold mb-2",children:"@FreeRiverHouse"}),(0,a.jsx)("div",{className:"text-white/60 text-sm",children:"3x/giorno"}),(0,a.jsx)("div",{className:"text-white mt-2 font-mono text-lg",children:"9:09 • 12:12 • 21:21"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20",children:[(0,a.jsx)("div",{className:"text-amber-400 font-bold mb-2",children:"@magmatic__"}),(0,a.jsx)("div",{className:"text-white/60 text-sm",children:"1x/giorno"}),(0,a.jsx)("div",{className:"text-white mt-2 font-mono text-lg",children:"17:17"})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:["Post (",C.length,")",c&&(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-cyan-400/30 border-t-cyan-400 rounded-full animate-spin"})]}),c&&0===s.length?(0,a.jsx)("div",{className:"flex justify-center py-16",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-cyan-400/30 border-t-cyan-400 rounded-full animate-spin"})}):(0,a.jsx)("div",{className:"grid gap-6",children:C.map(e=>(0,a.jsx)(u,{post:e,onApprove:y,onReject:k,loading:x},e.id))}),!c&&0===C.length&&(0,a.jsx)("div",{className:"text-center py-16 text-white/50",children:0===s.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg mb-2",children:"Nessun post in coda"}),(0,a.jsx)("p",{className:"text-sm",children:"I post arrivano dal bot Telegram o dalla dashboard FRH"})]}):"Nessun post trovato con questi filtri"})]})]})}}},function(e){e.O(0,[70,971,30,744],function(){return e(e.s=4593)}),_N_E=e.O()}]);