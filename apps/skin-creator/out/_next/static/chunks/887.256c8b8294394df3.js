"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[887],{2887:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var l=a(7437);a(2265);var s=a(6828);function n(e){var t;let{layers:a,activeLayer:n,setActiveLayer:i,toggleLayerVisibility:r,setLayerOpacity:o,setLayerTint:c,setLayerTintIntensity:d,setLayers:x,moveLayer:m,clearLayer:p,copyLayerTo:u,flattenLayers:g,compositeLayersToMain:h,updatePreview:b,playSound:y,showLayerPanel:v,setShowLayerPanel:j,showDuplicateMenu:f,setShowDuplicateMenu:N,customTintColors:w,setCustomTintColors:C}=e;return v?(0,l.jsxs)("div",{className:"fixed left-4 top-1/2 -translate-y-1/2 bg-white/95 backdrop-blur rounded-2xl p-4 shadow-2xl z-40 w-64",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsx)("h3",{className:"text-lg font-bold",children:"\uD83C\uDFA8 Layers"}),(0,l.jsx)("button",{onClick:()=>j(!1),"aria-label":"Close layers panel",className:"text-gray-500 hover:text-gray-700 text-xl min-w-[44px] min-h-[44px] flex items-center justify-center",children:"\xd7"})]}),(0,l.jsx)("div",{className:"space-y-2 mb-3",children:a.slice().reverse().map((e,t)=>(0,l.jsxs)("div",{className:"p-2 rounded-lg border-2 transition-all cursor-pointer ".concat(n===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>i(e.id),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},"aria-label":e.visible?"Hide ".concat(e.name," layer"):"Show ".concat(e.name," layer"),className:"text-lg min-w-[36px] min-h-[36px] flex items-center justify-center ".concat(e.visible?"":"opacity-30"),title:e.visible?"Hide layer":"Show layer",children:e.visible?"\uD83D\uDC41️":"\uD83D\uDEAB"}),(0,l.jsx)("span",{className:"text-lg",children:e.emoji}),(0,l.jsx)("span",{className:"text-sm font-medium",children:e.name})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e.id,"up"),y("click")},disabled:0===t,"aria-label":"Move ".concat(e.name," layer up"),className:"text-sm px-2 py-1.5 min-w-[36px] min-h-[36px] disabled:opacity-30 hover:bg-blue-100 hover:scale-110 rounded transition-all",title:"Move layer up",children:"⬆️"}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),m(e.id,"down"),y("click")},disabled:t===a.length-1,"aria-label":"Move ".concat(e.name," layer down"),className:"text-sm px-2 py-1.5 min-w-[36px] min-h-[36px] disabled:opacity-30 hover:bg-blue-100 hover:scale-110 rounded transition-all",title:"Move layer down",children:"⬇️"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"Opacity:"}),(0,l.jsx)("input",{type:"range",min:"0",max:"100",value:e.opacity,onChange:t=>{o(e.id,parseInt(t.target.value)),h(),b()},onClick:e=>e.stopPropagation(),className:"flex-1 h-1"}),(0,l.jsxs)("span",{className:"text-xs text-gray-600 w-8",children:[e.opacity,"%"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"Quick:"}),[25,50,75,100].map(t=>(0,l.jsxs)("button",{onClick:a=>{a.stopPropagation(),o(e.id,t),h(),b()},className:"px-2 py-0.5 text-xs rounded transition-all ".concat(e.opacity===t?"bg-blue-500 text-white font-medium":"bg-gray-100 hover:bg-gray-200 text-gray-600"),children:[t,"%"]},t))]}),(0,l.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"\uD83C\uDFA8 Tint:"}),(0,l.jsxs)("div",{className:"flex gap-1 flex-wrap items-center",children:[s._9.map(t=>(0,l.jsx)("button",{onClick:a=>{a.stopPropagation(),c(e.id,t.color),setTimeout(()=>{h(),b()},0)},"aria-label":"Tint: ".concat(t.name),className:"w-7 h-7 min-w-[28px] min-h-[28px] rounded text-xs flex items-center justify-center transition-all ".concat(e.tint===t.color?"ring-2 ring-blue-500 ring-offset-1 scale-110":"hover:scale-110"),style:{backgroundColor:t.color||"transparent",border:t.color?"none":"1px dashed #ccc"},title:t.name,children:!t.color&&"⭕"},t.name)),(0,l.jsx)("div",{className:"relative ml-1",children:(0,l.jsx)("input",{type:"color",value:e.tint||"#808080",onChange:t=>{t.stopPropagation();let a=t.target.value;c(e.id,a),C(e=>{let t=e.filter(e=>e!==a);return[a,...t].slice(0,6)}),setTimeout(()=>{h(),b()},0)},onClick:e=>e.stopPropagation(),"aria-label":"Pick custom tint color",className:"w-7 h-7 min-w-[28px] min-h-[28px] rounded cursor-pointer border-0 p-0",title:"Custom color",style:{background:"linear-gradient(135deg, #ff6b6b, #4d96ff, #6bcb77)"}})})]})]}),w.length>0&&(0,l.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"Recent:"}),(0,l.jsx)("div",{className:"flex gap-1",children:w.map((t,a)=>(0,l.jsx)("button",{onClick:a=>{a.stopPropagation(),c(e.id,t),setTimeout(()=>{h(),b()},0)},"aria-label":"Recent tint color ".concat(t),className:"w-6 h-6 min-w-[24px] min-h-[24px] rounded text-xs transition-all ".concat(e.tint===t?"ring-2 ring-blue-500 ring-offset-1 scale-110":"hover:scale-110"),style:{backgroundColor:t},title:t},"custom-".concat(a,"-").concat(t)))})]}),e.tint&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-xs text-gray-600",children:"Intensity:"}),(0,l.jsx)("input",{type:"range",min:"0",max:"100",value:e.tintIntensity,onChange:t=>{d(e.id,parseInt(t.target.value)),h(),b()},onClick:e=>e.stopPropagation(),className:"flex-1 h-1",style:{accentColor:e.tint}}),(0,l.jsxs)("span",{className:"text-xs text-gray-600 w-8",children:[e.tintIntensity,"%"]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,l.jsxs)("button",{onClick:t=>{t.stopPropagation(),x(t=>t.map(t=>t.id===e.id?{...t,glow:!t.glow}:t)),setTimeout(()=>{h(),b()},0)},className:"px-2 py-0.5 rounded text-xs font-bold transition-all ".concat(e.glow?"bg-yellow-400 text-yellow-900 shadow-lg shadow-yellow-400/50":"bg-gray-200 text-gray-600 hover:bg-gray-300"),children:["✨ Glow ",e.glow?"ON":"OFF"]})})]})]},e.id))}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1.5 relative",children:[(0,l.jsx)("button",{onClick:()=>p(n),"aria-label":"Clear current layer",className:"px-3 py-2 min-h-[36px] text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 font-medium",title:"Clear current layer",children:"\uD83D\uDDD1️ Clear"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>N(!f),"aria-label":"Duplicate layer",className:"px-3 py-2 min-h-[36px] text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 font-medium",title:"Duplicate to another layer",children:"\uD83D\uDCCB Duplicate"}),f&&(0,l.jsxs)("div",{className:"absolute bottom-full left-0 mb-1 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-10 min-w-[140px]",children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Copy to:"}),a.filter(e=>e.id!==n).map(e=>(0,l.jsxs)("button",{onClick:()=>{u(n,e.id),N(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded hover:bg-blue-50 text-left",children:[(0,l.jsx)("span",{children:e.emoji}),(0,l.jsx)("span",{children:e.name})]},e.id)),(0,l.jsx)("button",{onClick:()=>N(!1),className:"w-full text-xs text-gray-400 mt-1 hover:text-gray-600",children:"Cancel"})]})]}),(0,l.jsx)("button",{onClick:g,"aria-label":"Flatten all layers",className:"px-3 py-2 min-h-[36px] text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200 font-medium",title:"Merge all layers",children:"\uD83D\uDD17 Flatten"})]}),(0,l.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,l.jsxs)("p",{className:"text-xs text-gray-700",children:["Active: ",(0,l.jsx)("span",{className:"font-bold",children:null===(t=a.find(e=>e.id===n))||void 0===t?void 0:t.name})]})})]}):null}}}]);