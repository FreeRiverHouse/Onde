(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4293:function(e,t,a){Promise.resolve().then(a.bind(a,9349))},9349:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(7437),l=a(8819),i=a.n(l),r=a(2265),d=a(166),n=a(257);function o(){return!!n.env.NEXT_PUBLIC_OPENAI_API_KEY}async function c(e){let t=n.env.NEXT_PUBLIC_OPENAI_API_KEY;if(!t)return{success:!1,error:"OpenAI API key not configured. Set NEXT_PUBLIC_OPENAI_API_KEY environment variable."};let a=function(e){switch(e){case"cartoon":return"cartoon style, vibrant colors, bold outlines, playful";case"realistic":return"semi-realistic, detailed textures, natural shading";case"pixel-art":return"pixel art style, 8-bit, retro gaming aesthetic";case"anime":return"anime style, cel-shaded, Japanese animation aesthetic";case"blocky":return"Minecraft blocky style, voxel-like, cubic proportions";default:return"Minecraft style, blocky, pixel-art"}}(e.style||"blocky"),s="Create a Minecraft character skin texture sheet. The character is: ".concat(e.prompt,". \nStyle: ").concat(a,". \nImportant: Generate a flat texture layout showing front view of head, body, arms, and legs suitable for a Minecraft skin.\nThe image should be clean, simple, with clear distinct regions for each body part.\nNo background, just the character texture on a transparent or white background.");try{var l,i,r;let a=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({model:"dall-e-3",prompt:s,n:1,size:"1024x1024",quality:e.quality||"standard",response_format:"url"})});if(!a.ok){let e=await a.json().catch(()=>({error:{message:"Unknown error"}}));return{success:!1,error:(null===(r=e.error)||void 0===r?void 0:r.message)||"API error: ".concat(a.status)}}let d=await a.json(),n=null===(i=d.data)||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.url;if(!n)return{success:!1,error:"No image URL in response"};return{success:!0,imageUrl:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}async function x(e){return new Promise((t,a)=>{let s=new Image;s.crossOrigin="anonymous",s.onload=()=>{let e=document.createElement("canvas");e.width=64,e.height=64;let l=e.getContext("2d");if(!l){a(Error("Could not create canvas context"));return}l.clearRect(0,0,64,64);let i=s.width;l.drawImage(s,.375*i,.05*i,.25*i,.25*i,8,8,8,8),l.drawImage(s,.375*i,.05*i,.25*i,.25*i,24,8,8,8),l.drawImage(s,.375*i,.02*i,.25*i,.15*i,8,0,8,8),l.drawImage(s,.375*i,.28*i,.25*i,.15*i,16,0,8,8),l.drawImage(s,.3*i,.05*i,.15*i,.25*i,0,8,8,8),l.drawImage(s,.55*i,.05*i,.15*i,.25*i,16,8,8,8),l.drawImage(s,.4*i,.32*i,.2*i,.35*i,20,20,8,12),l.drawImage(s,.4*i,.32*i,.2*i,.35*i,32,20,8,12),l.drawImage(s,.25*i,.32*i,.1*i,.35*i,44,20,4,12),l.drawImage(s,.65*i,.32*i,.1*i,.35*i,36,52,4,12),l.drawImage(s,.35*i,.68*i,.1*i,.3*i,4,20,4,12),l.drawImage(s,.55*i,.68*i,.1*i,.3*i,20,52,4,12),t(e.toDataURL("image/png"))},s.onerror=()=>{a(Error("Failed to load AI-generated image"))},s.src=e})}async function u(e){let t=await c(e);if(!t.success||!t.imageUrl)return{success:!1,error:t.error||"Failed to generate image"};try{let e=await x(t.imageUrl);return{success:!0,skinDataUrl:e,originalImageUrl:t.imageUrl}}catch(e){return{success:!1,originalImageUrl:t.imageUrl,error:e instanceof Error?e.message:"Failed to convert to skin format"}}}let m=a(257).env.NEXT_PUBLIC_LOCAL_LLM_URL||"http://192.168.1.111:8080";async function b(){try{let e=new AbortController,t=setTimeout(()=>e.abort(),3e3),a=await fetch("".concat(m,"/health"),{signal:e.signal});if(clearTimeout(t),a.ok){let e=await a.json();return"ok"===e.status}return!1}catch(e){return!1}}async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxTokens:a=256,temperature:s=.7,systemPrompt:l,timeoutMs:i=6e4}=t;try{var r,d,n;if(!await b())return{success:!1,error:"Local LLM not available"};let t=[];l&&t.push({role:"system",content:l}),t.push({role:"user",content:e});let o=new AbortController,c=setTimeout(()=>o.abort(),i),x=await fetch("".concat(m,"/v1/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"llama-3.1-8b-instruct",messages:t,max_tokens:a,temperature:s}),signal:o.signal});if(clearTimeout(c),!x.ok)return{success:!1,error:"HTTP ".concat(x.status)};let u=await x.json(),h=null===(n=u.choices)||void 0===n?void 0:null===(d=n[0])||void 0===d?void 0:null===(r=d.message)||void 0===r?void 0:r.content;if(h)return{success:!0,content:h};return{success:!1,error:"No content in response"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function p(e){let t=await h(e,{maxTokens:100,temperature:.8,systemPrompt:"You are a Minecraft skin design assistant. \nGiven a user's description, enhance it into a detailed prompt for generating a Minecraft character skin.\nKeep it concise (1-2 sentences) but add specific details about colors, style, and features.\nOutput ONLY the enhanced prompt, nothing else."});return t.success&&t.content?t.content.trim():e}let f=(0,d.default)(()=>a.e(285).then(a.bind(a,9285)),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),g=[{id:"base",name:"Base (Skin)",emoji:"\uD83D\uDC64",visible:!0,opacity:100,tint:null,tintIntensity:50},{id:"clothing",name:"Clothing",emoji:"\uD83D\uDC55",visible:!0,opacity:100,tint:null,tintIntensity:50},{id:"accessories",name:"Accessories",emoji:"\uD83C\uDFA9",visible:!0,opacity:100,tint:null,tintIntensity:50}],j=[{color:null,name:"None",emoji:"⭕"},{color:"#FF6B6B",name:"Red",emoji:"\uD83D\uDD34"},{color:"#FFD93D",name:"Gold",emoji:"\uD83D\uDFE1"},{color:"#4D96FF",name:"Blue",emoji:"\uD83D\uDD35"},{color:"#6BCB77",name:"Green",emoji:"\uD83D\uDFE2"},{color:"#9B59B6",name:"Purple",emoji:"\uD83D\uDFE3"},{color:"#FF8E53",name:"Orange",emoji:"\uD83D\uDFE0"},{color:"#00BCD4",name:"Cyan",emoji:"\uD83E\uDE75"},{color:"#E91E63",name:"Pink",emoji:"\uD83D\uDC97"}],y={minecraft:{name:"Minecraft",emoji:"⛏️",width:64,height:64,exportFormat:"PNG 64x64"},roblox:{name:"Roblox",emoji:"\uD83C\uDFAE",width:128,height:128,exportFormat:"PNG 128x128"}},D={head:{x:0,y:0,w:32,h:16,label:"\uD83D\uDDE3️ Head"},body:{x:16,y:16,w:24,h:16,label:"\uD83D\uDC55 Body"},rightArm:{x:40,y:16,w:16,h:16,label:"\uD83D\uDCAA Right Arm"},leftArm:{x:32,y:48,w:16,h:16,label:"\uD83E\uDD1B Left Arm"},rightLeg:{x:0,y:16,w:16,h:16,label:"\uD83E\uDDB5 Right Leg"},leftLeg:{x:16,y:48,w:16,h:16,label:"\uD83E\uDDBF Left Leg"}},w={steve:{name:"\uD83D\uDC66 Steve",skin:"#c4a57b",hair:"#442920",shirt:"#00a8a8",pants:"#3c2a5e",shoes:"#444444",eyes:"#ffffff",pupils:"#5a3825"},robot:{name:"\uD83E\uDD16 Robot",skin:"#8a8a8a",hair:"#444444",shirt:"#3498db",pants:"#2c3e50",shoes:"#1a1a1a",eyes:"#00ff00",pupils:"#00aa00"},ninja:{name:"\uD83E\uDD77 Ninja",skin:"#c4a57b",hair:"#1a1a1a",shirt:"#1a1a1a",pants:"#1a1a1a",shoes:"#2c2c2c",eyes:"#ffffff",pupils:"#000000"},alien:{name:"\uD83D\uDC7D Alien",skin:"#7dcea0",hair:"#27ae60",shirt:"#9b59b6",pants:"#8e44ad",shoes:"#6c3483",eyes:"#000000",pupils:"#1a1a1a"},princess:{name:"\uD83D\uDC78 Princess",skin:"#ffdfc4",hair:"#f1c40f",shirt:"#e91e63",pants:"#9c27b0",shoes:"#ff69b4",eyes:"#87ceeb",pupils:"#4169e1"},zombie:{name:"\uD83E\uDDDF Zombie",skin:"#5a8f5a",hair:"#2d4a2d",shirt:"#00a8a8",pants:"#3c2a5e",shoes:"#444444",eyes:"#1a1a1a",pupils:"#000000"},creeper:{name:"\uD83D\uDC9A Creeper",skin:"#5ba555",hair:"#3d7a3d",shirt:"#4a934a",pants:"#3d7a3d",shoes:"#2d5a2d",eyes:"#000000",pupils:"#000000"}};w.steve;let k=["#ffdfc4","#f0c8a8","#d4a76a","#c4a57b","#8d6e4c","#5c4033","#FF6B6B","#FF8E53","#FFD93D","#6BCB77","#4D96FF","#9B59B6","#E91E63","#00BCD4","#8BC34A","#FF5722","#795548","#607D8B","#FFFFFF","#CCCCCC","#888888","#444444","#222222","#000000"];function v(){var e;let t=(0,r.useRef)(null),a=(0,r.useRef)(null),[l,d]=(0,r.useState)("minecraft"),[n,c]=(0,r.useState)("#FF6B6B"),[x,m]=(0,r.useState)(!1),[h,v]=(0,r.useState)("brush"),[N,C]=(0,r.useState)("star"),[R,S]=(0,r.useState)(null),[E,I]=(0,r.useState)(!1),[F,A]=(0,r.useState)(!1),T=(0,r.useRef)(null),[B,L]=(0,r.useState)(window.innerWidth<768?4:6),[P,U]=(0,r.useState)("#4D96FF"),[M,O]=(0,r.useState)(1),[_,z]=(0,r.useState)("my-skin"),[G,K]=(0,r.useState)([]),[V,q]=(0,r.useState)([]),[Y,H]=(0,r.useState)(!1),[W,X]=(0,r.useState)(!1),[J,Z]=(0,r.useState)(""),[Q,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[ea,es]=(0,r.useState)(!1),[el,ei]=(0,r.useState)("blocky"),[er,ed]=(0,r.useState)(null),[en,eo]=(0,r.useState)(!1),[ec,ex]=(0,r.useState)([]),[eu,em]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("minecraft-skin-ai-history");if(e){let t=JSON.parse(e);Array.isArray(t)&&ex(t)}}catch(e){}b().then(es)},[]),(0,r.useEffect)(()=>{try{localStorage.setItem("minecraft-skin-ai-history",JSON.stringify(ec))}catch(e){}},[ec]);let eb=(0,r.useCallback)((e,t,a)=>{let s={id:"ai-".concat(Date.now()),prompt:e,style:t,skinDataUrl:a,timestamp:Date.now(),isFavorite:!1};ex(e=>{let t=e.filter(e=>e.isFavorite);return[...[s,...e.filter(e=>!e.isFavorite)].slice(0,10),...t].sort((e,t)=>t.timestamp-e.timestamp)})},[]),eh=(0,r.useCallback)(e=>{ex(t=>t.map(t=>t.id===e?{...t,isFavorite:!t.isFavorite}:t))},[]),ep=(0,r.useCallback)(e=>{let a=t.current;if(!a)return;let s=a.getContext("2d");if(!s)return;let l=new Image;l.onload=()=>{s.clearRect(0,0,64,64),s.drawImage(l,0,0),e3(),e0(),X(!1),e5("click")},l.src=e.skinDataUrl},[]),ef=(0,r.useCallback)(e=>{Z(e.prompt),ei(e.style),em(!1)},[]),eg=(0,r.useCallback)(e=>{ex(t=>t.filter(t=>t.id!==e))},[]),[ej,ey]=(0,r.useState)(g),[eD,ew]=(0,r.useState)("base"),[ek,ev]=(0,r.useState)(!0),eN=(0,r.useRef)({}),eC=(0,r.useCallback)(e=>{if(!eN.current[e]){let t=document.createElement("canvas");t.width=64,t.height=64,eN.current[e]=t}return eN.current[e]},[]),eR=(0,r.useCallback)(e=>{ey(t=>t.map(t=>t.id===e?{...t,visible:!t.visible}:t))},[]),eS=(0,r.useCallback)((e,t)=>{ey(a=>a.map(a=>a.id===e?{...a,opacity:t}:a))},[]),eE=(0,r.useCallback)((e,t)=>{ey(a=>a.map(a=>a.id===e?{...a,tint:t}:a))},[]),eI=(0,r.useCallback)((e,t)=>{ey(a=>a.map(a=>a.id===e?{...a,tintIntensity:t}:a))},[]),eF=(0,r.useCallback)((e,t,a)=>{let s=document.createElement("canvas");s.width=e.width,s.height=e.height;let l=s.getContext("2d");return l?(l.drawImage(e,0,0),l.globalCompositeOperation="multiply",l.globalAlpha=a/100,l.fillStyle=t,l.fillRect(0,0,s.width,s.height),l.globalCompositeOperation="destination-in",l.globalAlpha=1,l.drawImage(e,0,0),s):e},[]),eA=(0,r.useCallback)((e,t)=>{ey(a=>{let s=a.findIndex(t=>t.id===e);if(-1===s)return a;let l="up"===t?s+1:s-1;if(l<0||l>=a.length)return a;let i=[...a];return[i[s],i[l]]=[i[l],i[s]],i})},[]),eT=(0,r.useCallback)(()=>{let e=t.current;if(!e)return;let a=e.getContext("2d");a&&(a.clearRect(0,0,64,64),ej.forEach(e=>{if(!e.visible)return;let t=eN.current[e.id];if(!t)return;let s=t;e.tint&&e.tintIntensity>0&&(s=eF(t,e.tint,e.tintIntensity)),a.globalAlpha=e.opacity/100,a.drawImage(s,0,0)}),a.globalAlpha=1)},[ej,eF]),eB=(0,r.useCallback)(e=>{let t=eC(e).getContext("2d");t&&t.clearRect(0,0,64,64),eT(),e3()},[eC,eT]),eL=(0,r.useCallback)((e,t)=>{let a=eC(e),s=eC(t).getContext("2d");s&&(s.clearRect(0,0,64,64),s.drawImage(a,0,0)),eT(),e3(),e0(),e5("click")},[eC,eT]),[eP,eU]=(0,r.useState)(!1),eM=(0,r.useCallback)(()=>{if(!confirm("Merge all visible layers into base? This cannot be undone."))return;let e=t.current;if(!e)return;let a=eC("base").getContext("2d");a&&(a.clearRect(0,0,64,64),a.drawImage(e,0,0)),eB("clothing"),eB("accessories"),eT(),e3(),e5("click")},[eC,eB,eT]),eO=async()=>{if(J.trim()&&ea){et(!0);try{let e=await p(J);e&&e!==J&&Z(e)}catch(e){console.error("Enhance failed:",e)}finally{et(!1)}}},e_=async()=>{if(!J.trim())return;$(!0),ed(null);let e=t.current;if(!e){$(!1);return}let a=e.getContext("2d");if(!a){$(!1);return}if(en&&o())try{let e=await u({prompt:J,style:el});if(e.success&&e.skinDataUrl){let t=new Image;t.onload=()=>{a.clearRect(0,0,64,64),a.drawImage(t,0,0),e3(),e0(),eb(J,el,e.skinDataUrl),$(!1),X(!1),e5("download")},t.onerror=()=>{ed("Failed to load generated skin"),$(!1)},t.src=e.skinDataUrl;return}ed(e.error||"AI generation failed")}catch(e){ed(e instanceof Error?e.message:"AI generation failed")}await new Promise(e=>setTimeout(e,800));let s=J.toLowerCase(),l={skin:"#c4a57b",hair:"#442920",shirt:"#00a8a8",pants:"#3c2a5e",shoes:"#444444"},i="anime"===el?1.2:"cartoon"===el?1.1:1;if(s.includes("zombie")||s.includes("undead"))l={skin:"#5a8f5a",hair:"#2d4a2d",shirt:"#3d5a3d",pants:"#2d4a2d",shoes:"#1a3a1a"};else if(s.includes("robot")||s.includes("mech")||s.includes("android"))l={skin:"#8a8a8a",hair:"#444444",shirt:"#3498db",pants:"#2c3e50",shoes:"#1a1a1a"};else if(s.includes("ninja")||s.includes("assassin")||s.includes("stealth"))l={skin:"#c4a57b",hair:"#1a1a1a",shirt:"#1a1a1a",pants:"#1a1a1a",shoes:"#2c2c2c"};else if(s.includes("princess")||s.includes("queen")||s.includes("royalty"))l={skin:"#ffdfc4",hair:"#f1c40f",shirt:"#e91e63",pants:"#9c27b0",shoes:"#ff69b4"};else if(s.includes("pirate")||s.includes("captain")||s.includes("sailor"))l={skin:"#d4a76a",hair:"#2c1810",shirt:"#8B0000",pants:"#1a1a1a",shoes:"#3d2314"};else if(s.includes("wizard")||s.includes("mage")||s.includes("sorcerer"))l={skin:"#e8d5c4",hair:"#c0c0c0",shirt:"#4B0082",pants:"#2E0854",shoes:"#1a1a2e"};else if(s.includes("alien")||s.includes("space")||s.includes("extraterrestrial"))l={skin:"#7dcea0",hair:"#27ae60",shirt:"#9b59b6",pants:"#8e44ad",shoes:"#6c3483"};else if(s.includes("knight")||s.includes("armor")||s.includes("warrior"))l={skin:"#d4a76a",hair:"#4a3728",shirt:"#7f8c8d",pants:"#5d6d7e",shoes:"#2c3e50"};else if(s.includes("elf")||s.includes("fairy")||s.includes("nature"))l={skin:"#f5deb3",hair:"#228b22",shirt:"#006400",pants:"#556b2f",shoes:"#8b4513"};else if(s.includes("vampire")||s.includes("dark")||s.includes("gothic"))l={skin:"#e8e8e8",hair:"#1a1a1a",shirt:"#8b0000",pants:"#1a1a1a",shoes:"#2c2c2c"};else if(s.includes("superhero")||s.includes("hero"))l={skin:"#d4a76a",hair:"#2c1810",shirt:"#dc143c",pants:"#00008b",shoes:"#ffd700"};else if(s.includes("chef")||s.includes("cook"))l={skin:"#d4a76a",hair:"#3d2314",shirt:"#ffffff",pants:"#1a1a1a",shoes:"#2c2c2c"};else if(s.includes("doctor")||s.includes("nurse")||s.includes("medical"))l={skin:"#d4a76a",hair:"#3d2314",shirt:"#87ceeb",pants:"#87ceeb",shoes:"#ffffff"};else{let e=J.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%360;l.shirt="hsl(".concat(e,", 70%, ").concat(50*i,"%)"),l.pants="hsl(".concat((e+180)%360,", 60%, ").concat(40*i,"%)"),l.hair="hsl(".concat((e+90)%360,", 40%, 25%)")}a.clearRect(0,0,64,64),a.fillStyle=l.skin,a.fillRect(8,8,8,8),a.fillRect(24,8,8,8),a.fillRect(0,8,8,8),a.fillRect(16,8,8,8),a.fillRect(8,0,8,8),a.fillRect(16,0,8,8),a.fillStyle=l.hair,a.fillRect(8,0,8,8),a.fillRect(8,8,8,2),a.fillRect(0,8,8,3),a.fillRect(16,8,8,3),a.fillRect(24,8,8,3),a.fillStyle="#ffffff",a.fillRect(10,12,2,2),a.fillRect(14,12,2,2),a.fillStyle="#000000",a.fillRect(11,13,1,1),a.fillRect(15,13,1,1),a.fillStyle="#d4a76a",a.fillRect(12,14,2,1),a.fillStyle="#b35a5a",a.fillRect(11,15,4,1),a.fillStyle=l.shirt,a.fillRect(20,20,8,12),a.fillRect(32,20,8,12),a.fillRect(16,20,4,12),a.fillRect(28,20,4,12),a.fillRect(20,16,8,4),a.fillStyle=l.skin,a.fillRect(44,20,4,12),a.fillRect(48,20,4,12),a.fillRect(40,20,4,12),a.fillRect(52,20,4,12),a.fillStyle=l.shirt,a.fillRect(44,20,4,8),a.fillRect(40,20,4,8),a.fillStyle=l.skin,a.fillRect(36,52,4,12),a.fillRect(44,52,4,12),a.fillRect(32,52,4,12),a.fillRect(48,52,4,12),a.fillStyle=l.shirt,a.fillRect(36,52,4,8),a.fillRect(32,52,4,8),a.fillStyle=l.pants,a.fillRect(4,20,4,12),a.fillRect(8,20,4,12),a.fillRect(0,20,4,12),a.fillRect(12,20,4,12),a.fillStyle=l.shoes,a.fillRect(4,28,4,4),a.fillRect(0,28,4,4),a.fillStyle=l.pants,a.fillRect(20,52,4,12),a.fillRect(24,52,4,12),a.fillRect(16,52,4,12),a.fillRect(28,52,4,12),a.fillStyle=l.shoes,a.fillRect(20,60,4,4),a.fillRect(16,60,4,4),e3(),e0(),eb(J,el,e.toDataURL("image/png")),$(!1),X(!1),e5("download")},ez=(0,r.useCallback)(e=>{K(t=>{let a=t.filter(t=>t!==e);return[e,...a].slice(0,8)})},[]),[eG,eK]=(0,r.useState)(!1),[eV,eq]=(0,r.useState)({width:0,height:0}),[eY,eH]=(0,r.useState)([]),eW=(0,r.useRef)(0),eX=(0,r.useRef)(null),[eJ,eZ]=(0,r.useState)([]),[eQ,e$]=(0,r.useState)(-1),e0=(0,r.useCallback)(()=>{let e=t.current;if(!e)return;let a=e.getContext("2d");if(!a)return;let s=a.getImageData(0,0,64,64);eZ(e=>{let t=e.slice(0,eQ+1);return t.push(s),t.length>50&&t.shift(),t}),e$(e=>Math.min(e+1,49));try{localStorage.setItem("minecraft-skin-autosave",e.toDataURL("image/png"))}catch(e){}},[eQ]),e1=(0,r.useCallback)(()=>{if(eQ<=0)return;let e=t.current;if(!e)return;let a=e.getContext("2d");if(!a)return;let s=eQ-1;a.putImageData(eJ[s],0,0),e$(s)},[eJ,eQ]),e2=(0,r.useCallback)(()=>{if(eQ>=eJ.length-1)return;let e=t.current;if(!e)return;let a=e.getContext("2d");if(!a)return;let s=eQ+1;a.putImageData(eJ[s],0,0),e$(s)},[eJ,eQ]),e5=(0,r.useCallback)(e=>{eX.current||(eX.current=new(window.AudioContext||window.webkitAudioContext));let t=eX.current,a=t.createOscillator(),s=t.createGain();a.connect(s),s.connect(t.destination),"draw"===e?(a.frequency.setValueAtTime(800+400*Math.random(),t.currentTime),a.frequency.exponentialRampToValueAtTime(400,t.currentTime+.1),s.gain.setValueAtTime(.1,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1),a.start(t.currentTime),a.stop(t.currentTime+.1)):"click"===e?(a.frequency.setValueAtTime(600,t.currentTime),a.frequency.exponentialRampToValueAtTime(200,t.currentTime+.15),s.gain.setValueAtTime(.2,t.currentTime),s.gain.exponentialRampToValueAtTime(.01,t.currentTime+.15),a.start(t.currentTime),a.stop(t.currentTime+.15)):"download"===e&&[523,659,784,1047].forEach((e,a)=>{let s=t.createOscillator(),l=t.createGain();s.connect(l),l.connect(t.destination),s.frequency.value=e,l.gain.setValueAtTime(.15,t.currentTime+.1*a),l.gain.exponentialRampToValueAtTime(.01,t.currentTime+.1*a+.2),s.start(t.currentTime+.1*a),s.stop(t.currentTime+.1*a+.2)})},[]);(0,r.useEffect)(()=>{eq({width:window.innerWidth,height:window.innerHeight});let e=()=>eq({width:window.innerWidth,height:window.innerHeight});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{let e=localStorage.getItem("minecraft-skin-autosave");if(e&&t.current){let a=t.current.getContext("2d");if(a){let t=new Image;t.onload=()=>{a.clearRect(0,0,64,64),a.drawImage(t,0,0),e3()},t.src=e}}},[]),(0,r.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement))switch(e.key.toLowerCase()){case"b":v("brush");break;case"e":v("eraser");break;case"f":v("fill");break;case"g":v("gradient");break;case"s":v("stamp");break;case"i":v("eyedropper");break;case"?":H(e=>!e);break;case"z":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e1());break;case"y":(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e2());break;case"m":I(e=>!e);break;case"d":A(e=>!e);break;case"1":O(1);break;case"2":O(2);break;case"3":O(3);break;case"l":ev(e=>!e);break;case"[":ew(e=>["base","clothing","accessories"][(["base","clothing","accessories"].indexOf(e)+2)%3]);break;case"]":ew(e=>["base","clothing","accessories"][(["base","clothing","accessories"].indexOf(e)+1)%3]);break;case"c":e.metaKey||e.ctrlKey||eU(e=>!e)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[e1,e2]),(0,r.useCallback)(()=>{if(t.current){let e=t.current.toDataURL("image/png");localStorage.setItem("minecraft-skin-autosave",e)}},[]);let e9=(0,r.useCallback)(()=>{let e=t.current;if(!e)return;let a=e.getContext("2d");if(!a)return;let s=[{skin:"#ffdfc4",hair:"#4a3728",shirt:"#e74c3c",pants:"#2c3e50",shoes:"#1a1a1a"},{skin:"#c4a57b",hair:"#1a1a1a",shirt:"#3498db",pants:"#9b59b6",shoes:"#2c2c2c"},{skin:"#8d6e4c",hair:"#2c1810",shirt:"#27ae60",pants:"#f39c12",shoes:"#34495e"},{skin:"#7dcea0",hair:"#27ae60",shirt:"#e91e63",pants:"#673ab7",shoes:"#4a148c"},{skin:"#ff6b6b",hair:"#c0392b",shirt:"#f1c40f",pants:"#1abc9c",shoes:"#16a085"},{skin:"#a29bfe",hair:"#6c5ce7",shirt:"#fd79a8",pants:"#00cec9",shoes:"#0984e3"},{skin:"#ffeaa7",hair:"#fdcb6e",shirt:"#e17055",pants:"#74b9ff",shoes:"#0984e3"}],l=s[Math.floor(Math.random()*s.length)];a.clearRect(0,0,64,64),a.fillStyle=l.skin,a.fillRect(8,8,8,8),a.fillRect(0,8,8,8),a.fillRect(16,8,8,8),a.fillRect(24,8,8,8),a.fillRect(8,0,8,8),a.fillStyle=l.hair,a.fillRect(8,8,8,Math.random()>.5?2:1),a.fillStyle="#ffffff",a.fillRect(9,11,2,1),a.fillRect(13,11,2,1),a.fillStyle="#000000",a.fillRect(10,11,1,1),a.fillRect(13,11,1,1),a.fillStyle=l.shirt,a.fillRect(20,20,8,12),a.fillRect(16,20,4,12),a.fillRect(28,20,4,12),a.fillRect(20,16,8,4),a.fillStyle=l.skin,a.fillRect(44,20,4,4),a.fillRect(36,52,4,4),a.fillStyle=l.shirt,a.fillRect(44,24,4,8),a.fillRect(36,56,4,8),a.fillStyle=l.pants,a.fillRect(4,20,4,12),a.fillRect(20,52,4,12),a.fillStyle=l.shoes,a.fillRect(4,28,4,4),a.fillRect(20,60,4,4),e3(),e0(),e5("download")},[]),e4=(0,r.useCallback)((e,t)=>{if("eraser"===h)return;let a=eW.current++,s={id:a,x:e,y:t,color:n};eH(e=>[...e.slice(-20),s]),setTimeout(()=>{eH(e=>e.filter(e=>e.id!==a))},600)},[n,h]),e8=(0,r.useCallback)(e=>{let t=eC("base"),a=eC("clothing"),s=eC("accessories"),l=t.getContext("2d"),i=a.getContext("2d"),r=s.getContext("2d");if(!l||!i||!r)return;if(l.clearRect(0,0,64,64),i.clearRect(0,0,64,64),r.clearRect(0,0,64,64),"blank"===e){eT(),e3();return}let d=w[e]||w.steve;l.fillStyle=d.skin,l.fillRect(8,8,8,8),l.fillStyle=d.eyes,l.fillRect(9,11,2,1),l.fillRect(13,11,2,1),l.fillStyle=d.pupils,l.fillRect(10,11,1,1),l.fillRect(13,11,1,1),l.fillStyle=d.hair,l.fillRect(8,8,8,1),l.fillRect(8,8,1,2),l.fillRect(15,8,1,2),l.fillStyle="#a87d5a",l.fillRect(11,14,2,1),l.fillStyle=d.skin,l.fillRect(0,8,8,8),l.fillRect(16,8,8,8),l.fillRect(24,8,8,8),l.fillStyle=d.hair,l.fillRect(24,8,8,1),l.fillStyle=d.hair,l.fillRect(8,0,8,8),l.fillStyle=d.skin,l.fillRect(16,0,8,8),l.fillStyle=d.skin,l.fillRect(44,20,4,12),l.fillRect(40,20,4,12),l.fillRect(48,20,4,12),l.fillRect(52,20,4,12),l.fillRect(36,52,4,12),l.fillRect(32,52,4,12),l.fillRect(40,52,4,12),l.fillRect(44,52,4,12),i.fillStyle=d.shirt,i.fillRect(20,20,8,12),i.fillRect(16,20,4,12),i.fillRect(28,20,4,12),i.fillRect(32,20,8,12),i.fillStyle=d.pants,i.fillRect(4,20,4,12),i.fillRect(0,20,4,12),i.fillRect(8,20,4,12),i.fillRect(12,20,4,12),i.fillRect(20,52,4,12),i.fillRect(16,52,4,12),i.fillRect(24,52,4,12),i.fillRect(28,52,4,12),i.fillStyle=d.shoes,i.fillRect(4,31,4,1),i.fillRect(20,63,4,1),eT(),e3()},[eC,eT]),e3=(0,r.useCallback)(()=>{let e=t.current,s=a.current;if(!e||!s)return;let l=s.getContext("2d");l&&(l.fillStyle="#1a1a2e",l.fillRect(0,0,s.width,s.height),l.imageSmoothingEnabled=!1,l.drawImage(e,8,8,8,8,60,20,64,64),l.drawImage(e,20,20,8,12,60,84,64,96),l.drawImage(e,44,20,4,12,28,84,32,96),l.drawImage(e,36,52,4,12,124,84,32,96),l.drawImage(e,4,20,4,12,60,180,32,96),l.drawImage(e,20,52,4,12,92,180,32,96))},[]);(0,r.useEffect)(()=>{e8("steve")},[e8]),(0,r.useEffect)(()=>{eT(),e3()},[ej,eT]);let e6=e=>{if(!x&&"mousemove"===e.type)return;let a=t.current;if(!a)return;let s=a.getContext("2d");if(!s)return;let l=eC(eD).getContext("2d");if(!l)return;x&&Math.random()>.7&&(e4(e.clientX,e.clientY),e5("draw"));let i=a.getBoundingClientRect(),r=64/i.width,d=64/i.height,o=Math.floor((e.clientX-i.left)*r),u=Math.floor((e.clientY-i.top)*d);if(!(o<0)&&!(o>=64)&&!(u<0)&&!(u>=64)){if("eyedropper"===h){let e=s.getImageData(o,u,1,1).data;e[3]>0&&(c(("#"+[e[0],e[1],e[2]].map(e=>e.toString(16).padStart(2,"0")).join("")).toUpperCase()),e5("click"));return}if(R){let e=D[R];if(o<e.x||o>=e.x+e.w||u<e.y||u>=e.y+e.h)return}for(let e=0;e<M;e++)for(let t=0;t<M;t++){let a=o+e,s=u+t;if(!(a>=64)&&!(s>=64)){if("eraser"===h)l.clearRect(a,s,1,1);else if("fill"===h){if(R){let e=D[R];l.fillStyle=n,l.fillRect(e.x,e.y,e.w,e.h)}}else if("gradient"===h){if(R){let e=D[R],t=l.createLinearGradient(e.x,e.y,e.x+e.w,e.y+e.h);t.addColorStop(0,n),t.addColorStop(1,P),l.fillStyle=t,l.fillRect(e.x,e.y,e.w,e.h)}}else if("glow"===h){l.shadowColor=n,l.shadowBlur=2,l.fillStyle=n;for(let e=0;e<M;e++)for(let t=0;t<M;t++)l.fillRect(o+e,u+t,1,1);l.shadowBlur=0}else if("stamp"===h){l.fillStyle=n;let e={star:[[1,0],[0,1],[1,1],[2,1],[1,2]],heart:[[0,1],[2,1],[0,0],[1,1],[2,0]],diamond:[[1,0],[0,1],[2,1],[1,2]]};(e[N]||e.star).forEach(e=>{let[t,a]=e;l.fillRect(o+t,u+a,1,1)})}else if(l.fillStyle=n,l.fillRect(a,s,1,1),E){let e=63-a;l.fillRect(e,s,1,1)}}}eT(),e3()}},e7=e=>{let a=e.touches[0];if(!a)return;let s=t.current;if(!s)return;let l=eC(eD).getContext("2d");if(!l)return;let i=s.getBoundingClientRect(),r=64/i.width,d=64/i.height,o=Math.floor((a.clientX-i.left)*r),c=Math.floor((a.clientY-i.top)*d);if(!(o<0)&&!(o>=64)&&!(c<0)&&!(c>=64)){if(R){let e=D[R];if(o<e.x||o>=e.x+e.w||c<e.y||c>=e.y+e.h)return}for(let e=0;e<M;e++)for(let t=0;t<M;t++){let a=o+e,s=c+t;if(!(a>=64)&&!(s>=64)){if("eraser"===h)l.clearRect(a,s,1,1);else if(l.fillStyle=n,l.fillRect(a,s,1,1),E){let e=63-a;l.fillRect(e,s,1,1)}}}eT(),e3()}},[te,tt]=(0,r.useState)(!1),[ta,ts]=(0,r.useState)({base:!0,clothing:!0,accessories:!0}),tl=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e){let e=document.createElement("canvas");e.width=64,e.height=64;let t=e.getContext("2d");if(!t)return;ej.forEach(e=>{if(!ta[e.id])return;let a=eN.current[e.id];a&&(t.globalAlpha=e.opacity/100,t.drawImage(a,0,0))}),t.globalAlpha=1;let a=document.createElement("a");a.download="".concat(_||"my-skin",".png"),a.href=e.toDataURL("image/png"),a.click()}else{let e=t.current;if(!e)return;let a=document.createElement("a");a.download="".concat(_||"my-skin",".png"),a.href=e.toDataURL("image/png"),a.click()}eK(!0),e5("download"),setTimeout(()=>eK(!1),3e3),tt(!1)},ti=async()=>{let e=t.current;if(e)try{let t=await new Promise(t=>e.toBlob(e=>t(e),"image/png"));await navigator.clipboard.write([new ClipboardItem({"image/png":t})]),e5("click"),alert("✅ Skin copied to clipboard!")}catch(a){let t=e.toDataURL("image/png");await navigator.clipboard.writeText(t),alert("\uD83D\uDCCB Skin URL copied!")}};return(0,s.jsxs)("div",{style:{backgroundSize:"400% 400%",animation:"gradient 15s ease infinite"},className:"jsx-d254eb5d291d5199 "+"min-h-screen p-6 flex flex-col items-center transition-all duration-700 ".concat(F?"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900":"bg-gradient-to-br from-violet-500 via-fuchsia-500 to-cyan-500"),children:[(0,s.jsx)(i(),{id:"d254eb5d291d5199",children:"@-webkit-keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@-moz-keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@-o-keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}@keyframes gradient{0%{background-position:0%50%}50%{background-position:100%50%}100%{background-position:0%50%}}"}),eG&&(0,s.jsx)(f,{width:eV.width,height:eV.height,recycle:!1,numberOfPieces:500,gravity:.3}),eY.map(e=>(0,s.jsx)("div",{style:{left:e.x-8,top:e.y-8,width:16,height:16,backgroundColor:e.color,borderRadius:"50%",boxShadow:"0 0 10px ".concat(e.color,", 0 0 20px ").concat(e.color),zIndex:9999},className:"jsx-d254eb5d291d5199 fixed pointer-events-none animate-ping"},e.id)),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 text-center mb-6",children:[(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-center gap-2 mb-1",children:(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-sm font-semibold text-white/80 bg-white/20 px-2 py-0.5 rounded-full",children:"\uD83C\uDF19 Moonlight"})}),(0,s.jsx)("h1",{className:"jsx-d254eb5d291d5199 text-4xl md:text-6xl font-black text-white drop-shadow-2xl animate-float",children:"\uD83C\uDFA8 Skin Studio"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-lg text-white/90 mt-1",children:"AI Skin Creator for Minecraft & Roblox ✨"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex gap-2 mt-3",children:Object.entries(y).map(e=>{let[t,a]=e;return(0,s.jsxs)("button",{onClick:()=>d(t),className:"jsx-d254eb5d291d5199 "+"px-4 py-2 rounded-full font-bold transition-all ".concat(l===t?"bg-white text-purple-600 scale-105 shadow-lg":"bg-white/20 text-white hover:bg-white/30"),children:[a.emoji," ",a.name]},t)})})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-col lg:flex-row gap-4 w-full max-w-6xl px-2",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 glass-card rounded-3xl p-6 shadow-2xl hover:shadow-3xl transition-shadow duration-300",children:[(0,s.jsxs)("h2",{className:"jsx-d254eb5d291d5199 text-2xl font-bold text-gray-800 mb-4 text-center flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 animate-bounce-soft",children:"\uD83D\uDC40"})," Preview"]}),(0,s.jsx)("canvas",{ref:a,width:200,height:280,style:{imageRendering:"pixelated"},className:"jsx-d254eb5d291d5199 rounded-xl mx-auto"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm font-semibold text-gray-700 mb-2",children:"Start from:"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 justify-center",children:[Object.entries(w).map(e=>{let[t,a]=e;return(0,s.jsx)("button",{onClick:()=>e8(t),className:"jsx-d254eb5d291d5199 px-2 py-1 bg-blue-500 text-white rounded-lg text-xs font-bold hover:bg-blue-600 hover:scale-105 transition-all",children:a.name},t)}),(0,s.jsx)("button",{onClick:()=>e8("blank"),className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gray-500 text-white rounded-lg text-xs font-bold hover:bg-gray-600",children:"⬜ Blank"}),(0,s.jsx)("button",{onClick:e9,className:"jsx-d254eb5d291d5199 px-2 py-1 bg-gradient-to-r from-pink-500 to-yellow-500 text-white rounded-lg text-xs font-bold hover:scale-105 transition-transform animate-pulse",children:"\uD83C\uDFB2 Random!"})]})]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex-1 glass-card rounded-2xl md:rounded-3xl p-3 md:p-6 shadow-2xl",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 md:gap-2 mb-3 md:mb-4 justify-center",children:[(0,s.jsx)("button",{onClick:()=>v("brush"),title:"Brush (B)",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("brush"===h?"bg-blue-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83D\uDD8C️"}),(0,s.jsx)("button",{onClick:()=>v("eraser"),title:"Eraser (E)",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("eraser"===h?"bg-pink-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83E\uDDFD"}),(0,s.jsx)("button",{onClick:()=>v("fill"),title:"Fill (F)",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("fill"===h?"bg-yellow-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83E\uDEA3"}),(0,s.jsx)("button",{onClick:()=>v("gradient"),title:"Gradient (G)",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("gradient"===h?"bg-gradient-to-r from-pink-500 to-blue-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83C\uDF08"}),(0,s.jsx)("button",{onClick:()=>v("glow"),title:"Glow (W)",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("glow"===h?"bg-purple-600 text-white scale-105 shadow-lg shadow-purple-500/50":"bg-white/80 hover:bg-white"),children:"✨"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 relative group",children:[(0,s.jsxs)("button",{onClick:()=>v("stamp"),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat("stamp"===h?"bg-pink-500 text-white scale-105":"bg-gray-200 hover:bg-gray-300"),children:["star"===N?"⭐":"heart"===N?"❤️":"\uD83D\uDC8E"," Stamp"]}),"stamp"===h&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 absolute top-full left-0 mt-1 flex gap-1 bg-white rounded-lg p-1 shadow-lg z-10",children:[(0,s.jsx)("button",{onClick:()=>C("star"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("star"===N?"bg-pink-200":""),children:"⭐"}),(0,s.jsx)("button",{onClick:()=>C("heart"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("heart"===N?"bg-pink-200":""),children:"❤️"}),(0,s.jsx)("button",{onClick:()=>C("diamond"),className:"jsx-d254eb5d291d5199 "+"p-1 rounded ".concat("diamond"===N?"bg-pink-200":""),children:"\uD83D\uDC8E"})]})]}),(0,s.jsx)("button",{onClick:()=>v("eyedropper"),title:"Eyedropper - pick color (I)",className:"jsx-d254eb5d291d5199 "+"px-2 py-1.5 md:px-3 md:py-2 rounded-lg md:rounded-full text-xs md:text-sm font-bold transition-all ".concat("eyedropper"===h?"bg-amber-500 text-white scale-105 shadow-lg":"bg-white/80 hover:bg-white"),children:"\uD83C\uDFAF"}),(0,s.jsx)("button",{onClick:e1,disabled:eQ<=0,className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat(eQ<=0?"bg-gray-300 text-gray-500":"bg-orange-500 text-white hover:bg-orange-600"),children:"↩️ Undo"}),(0,s.jsx)("button",{onClick:e2,disabled:eQ>=eJ.length-1,className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat(eQ>=eJ.length-1?"bg-gray-300 text-gray-500":"bg-orange-500 text-white hover:bg-orange-600"),children:"↪️ Redo"}),(0,s.jsx)("button",{onClick:()=>I(!E),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat(E?"bg-purple-500 text-white scale-105":"bg-gray-200 hover:bg-gray-300"),children:"\uD83E\uDE9E Mirror"}),(0,s.jsx)("button",{onClick:()=>A(!F),className:"jsx-d254eb5d291d5199 "+"px-3 py-2 rounded-full font-bold transition-all ".concat(F?"bg-yellow-400 text-gray-900":"bg-gray-700 text-white"),children:F?"☀️ Light":"\uD83C\uDF19 Dark"}),(0,s.jsx)("button",{onClick:()=>{var e;return null===(e=T.current)||void 0===e?void 0:e.click()},className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-indigo-500 text-white hover:bg-indigo-600",children:"\uD83D\uDCE5 Import"}),(0,s.jsx)("input",{ref:T,type:"file",accept:"image/png",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;let l=t.current;if(!l)return;let i=l.getContext("2d");if(!i)return;let r=new Image;r.onload=()=>{i.clearRect(0,0,64,64),i.drawImage(r,0,0,64,64),e3(),e0(),e5("click")},r.src=URL.createObjectURL(s),e.target.value=""},className:"jsx-d254eb5d291d5199 hidden"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1",children:[(0,s.jsx)("input",{type:"text",value:_,onChange:e=>z(e.target.value),placeholder:"skin-name",className:"jsx-d254eb5d291d5199 w-24 px-2 py-1 text-sm rounded-lg border-2 border-gray-300 focus:border-green-500 outline-none"}),(0,s.jsx)("button",{onClick:()=>tl(!1),title:"Quick save (all layers)",className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-green-500 text-white hover:bg-green-600 animate-pulse",children:"\uD83D\uDCBE"}),(0,s.jsx)("button",{onClick:()=>tt(!0),title:"Export options (choose layers)",className:"jsx-d254eb5d291d5199 px-2 py-2 rounded-full font-bold bg-green-600 text-white hover:bg-green-700",children:"\uD83D\uDCE4"})]}),(0,s.jsx)("button",{onClick:ti,title:"Copy to clipboard",className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-violet-500 text-white hover:bg-violet-600",children:"\uD83D\uDCCB Copy"}),(0,s.jsx)("button",{onClick:()=>{if(!confirm("Clear the entire canvas?"))return;let e=t.current;if(!e)return;let a=e.getContext("2d");a&&(a.clearRect(0,0,64,64),e3(),e0(),e5("click"))},title:"Clear canvas",className:"jsx-d254eb5d291d5199 px-3 py-2 rounded-full font-bold bg-red-500 text-white hover:bg-red-600",children:"\uD83D\uDDD1️ Clear"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1 ml-2",children:[(0,s.jsx)("button",{onClick:()=>L(Math.max(4,B-1)),className:"jsx-d254eb5d291d5199 w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 font-bold",children:"−"}),(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 text-sm font-bold w-8 text-center",children:[B,"x"]}),(0,s.jsx)("button",{onClick:()=>L(Math.min(10,B+1)),className:"jsx-d254eb5d291d5199 w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 font-bold",children:"+"})]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-center gap-2 mb-3",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-sm font-semibold",children:"Brush:"}),[1,2,3].map(e=>(0,s.jsx)("button",{onClick:()=>O(e),className:"jsx-d254eb5d291d5199 "+"w-8 h-8 rounded-full font-bold ".concat(M===e?"bg-blue-500 text-white":"bg-gray-200"),children:e},e))]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 mb-3 justify-center",children:[(0,s.jsx)("button",{onClick:()=>S(null),className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded text-sm font-bold ".concat(R?"bg-gray-200":"bg-purple-500 text-white"),children:"\uD83C\uDFAF All"}),Object.entries(D).map(e=>{let[t,a]=e;return(0,s.jsx)("button",{onClick:()=>S(t),className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded text-sm font-bold ".concat(R===t?"bg-purple-500 text-white":"bg-gray-200"),children:a.label},t)})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex justify-center",children:(0,s.jsx)("div",{style:{backgroundImage:"repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%)",backgroundSize:"12px 12px"},className:"jsx-d254eb5d291d5199 relative rounded-xl p-1",children:(0,s.jsx)("canvas",{ref:t,width:64,height:64,style:{width:64*B,height:64*B,imageRendering:"pixelated",transition:"all 0.2s ease"},onMouseDown:e=>{m(!0),e6(e)},onMouseUp:()=>{m(!1),e0(),ez(n)},onMouseLeave:()=>{m(!1)},onMouseMove:e6,onTouchStart:e=>{e.preventDefault(),m(!0),e7(e)},onTouchEnd:()=>{m(!1),e0(),ez(n)},onTouchMove:e=>{e.preventDefault(),e7(e)},className:"jsx-d254eb5d291d5199 cursor-crosshair"})})}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-center mt-2 text-gray-500 text-sm",children:"This is the skin texture map - see preview on left!"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 glass-card rounded-3xl p-6 shadow-2xl",children:[(0,s.jsx)("h2",{className:"jsx-d254eb5d291d5199 text-2xl font-bold text-gray-800 mb-4 text-center",children:"\uD83C\uDFA8 Colors"}),G.length>0&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mb-3",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 mb-1",children:"Recent:"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex gap-1 flex-wrap",children:G.map((e,t)=>(0,s.jsx)("button",{onClick:()=>c(e),style:{backgroundColor:e},className:"jsx-d254eb5d291d5199 w-6 h-6 rounded shadow-sm hover:scale-110 transition-transform"},"".concat(e,"-").concat(t)))})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-4 gap-2 max-w-[200px]",children:k.map(e=>(0,s.jsx)("button",{onClick:()=>c(e),style:{backgroundColor:e},className:"jsx-d254eb5d291d5199 "+"w-10 h-10 rounded-lg shadow transition-transform hover:scale-110 ".concat(n===e?"ring-4 ring-blue-400 scale-110":"")},e))}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4 text-center",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm font-semibold text-gray-700",children:"Selected:"}),(0,s.jsx)("div",{style:{backgroundColor:n},className:"jsx-d254eb5d291d5199 w-16 h-16 mx-auto mt-2 rounded-xl shadow-lg border-4 border-white"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-1 items-center",children:[(0,s.jsx)("input",{type:"color",value:n,onChange:e=>c(e.target.value),className:"jsx-d254eb5d291d5199 w-10 h-10 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:n,onChange:e=>{let t=e.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(t)&&c(t)},maxLength:7,className:"jsx-d254eb5d291d5199 flex-1 px-2 py-1 text-xs font-mono rounded border border-gray-300 uppercase"})]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 text-center mt-1",children:"Primary color"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-2",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-1 items-center",children:[(0,s.jsx)("input",{type:"color",value:P,onChange:e=>U(e.target.value),className:"jsx-d254eb5d291d5199 w-8 h-8 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:P,onChange:e=>{let t=e.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(t)&&U(t)},maxLength:7,className:"jsx-d254eb5d291d5199 flex-1 px-2 py-1 text-xs font-mono rounded border border-gray-300 uppercase"})]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 text-center mt-1",children:"Gradient end"})]})]})]}),Y&&(0,s.jsx)("div",{onClick:()=>H(!1),className:"jsx-d254eb5d291d5199 fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-d254eb5d291d5199 bg-white rounded-2xl p-6 max-w-md m-4 shadow-2xl max-h-[80vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"jsx-d254eb5d291d5199 text-xl font-bold mb-4",children:"⌨️ Keyboard Shortcuts"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"B"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Brush"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"E"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Eraser"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"F"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Fill"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"G"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Gradient"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"W"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Glow"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"S"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Stamp"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"I"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Eyedropper"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"M"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Mirror"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"D"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Dark mode"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"1-3"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Brush size"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"⌘Z"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Undo"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"⌘Y"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Redo"})]}),(0,s.jsx)("h4",{className:"jsx-d254eb5d291d5199 text-lg font-bold mt-4 mb-2",children:"\uD83C\uDFA8 Layer Shortcuts"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"L"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Toggle layer panel"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"["}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Previous layer"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"]"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Next layer"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-mono bg-gray-100 px-2 py-1 rounded",children:"C"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:"Duplicate layer"})]}),(0,s.jsx)("button",{onClick:()=>H(!1),className:"jsx-d254eb5d291d5199 mt-4 w-full py-2 bg-blue-500 text-white rounded-lg font-bold",children:"Got it! \uD83D\uDC4D"})]})}),ek&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 fixed left-4 top-1/2 -translate-y-1/2 bg-white/95 backdrop-blur rounded-2xl p-4 shadow-2xl z-40 w-64",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex justify-between items-center mb-3",children:[(0,s.jsx)("h3",{className:"jsx-d254eb5d291d5199 text-lg font-bold",children:"\uD83C\uDFA8 Layers"}),(0,s.jsx)("button",{onClick:()=>ev(!1),className:"jsx-d254eb5d291d5199 text-gray-400 hover:text-gray-600 text-xl",children:"\xd7"})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 space-y-2 mb-3",children:ej.slice().reverse().map((e,t)=>(0,s.jsxs)("div",{onClick:()=>ew(e.id),className:"jsx-d254eb5d291d5199 "+"p-2 rounded-lg border-2 transition-all cursor-pointer ".concat(eD===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),eR(e.id)},title:e.visible?"Hide layer":"Show layer",className:"jsx-d254eb5d291d5199 "+"text-lg ".concat(e.visible?"":"opacity-30"),children:e.visible?"\uD83D\uDC41️":"\uD83D\uDEAB"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-lg",children:e.emoji}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-sm font-medium",children:e.name})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),eA(e.id,"up")},disabled:0===t,className:"jsx-d254eb5d291d5199 text-xs px-1 disabled:opacity-30 hover:bg-gray-200 rounded",children:"↑"}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),eA(e.id,"down")},disabled:t===ej.length-1,className:"jsx-d254eb5d291d5199 text-xs px-1 disabled:opacity-30 hover:bg-gray-200 rounded",children:"↓"})]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500",children:"Opacity:"}),(0,s.jsx)("input",{type:"range",min:"0",max:"100",value:e.opacity,onChange:t=>{eS(e.id,parseInt(t.target.value)),eT(),e3()},onClick:e=>e.stopPropagation(),className:"jsx-d254eb5d291d5199 flex-1 h-1"}),(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 w-8",children:[e.opacity,"%"]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-2 pt-2 border-t border-gray-100",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1 mb-1",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500",children:"\uD83C\uDFA8 Tint:"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-0.5 flex-wrap items-center",children:[j.map(t=>(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),eE(e.id,t.color),setTimeout(()=>{eT(),e3()},0)},style:{backgroundColor:t.color||"transparent",border:t.color?"none":"1px dashed #ccc"},title:t.name,className:"jsx-d254eb5d291d5199 "+"w-5 h-5 rounded text-xs flex items-center justify-center transition-all ".concat(e.tint===t.color?"ring-2 ring-blue-500 ring-offset-1 scale-110":"hover:scale-110"),children:!t.color&&"⭕"},t.name)),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 relative ml-1",children:(0,s.jsx)("input",{type:"color",value:e.tint||"#808080",onChange:t=>{t.stopPropagation();let a=t.target.value;eE(e.id,a),q(e=>{let t=e.filter(e=>e!==a);return[a,...t].slice(0,6)}),setTimeout(()=>{eT(),e3()},0)},onClick:e=>e.stopPropagation(),title:"Custom color",style:{background:"linear-gradient(135deg, #ff6b6b, #4d96ff, #6bcb77)"},className:"jsx-d254eb5d291d5199 w-5 h-5 rounded cursor-pointer border-0 p-0"})})]})]}),V.length>0&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-1 mb-1",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-xs text-gray-400",children:"Recent:"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex gap-0.5",children:V.map((t,a)=>(0,s.jsx)("button",{onClick:a=>{a.stopPropagation(),eE(e.id,t),setTimeout(()=>{eT(),e3()},0)},style:{backgroundColor:t},title:t,className:"jsx-d254eb5d291d5199 "+"w-4 h-4 rounded text-xs transition-all ".concat(e.tint===t?"ring-2 ring-blue-500 ring-offset-1 scale-110":"hover:scale-110")},"custom-".concat(a,"-").concat(t)))})]}),e.tint&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500",children:"Intensity:"}),(0,s.jsx)("input",{type:"range",min:"0",max:"100",value:e.tintIntensity,onChange:t=>{eI(e.id,parseInt(t.target.value)),eT(),e3()},onClick:e=>e.stopPropagation(),style:{accentColor:e.tint},className:"jsx-d254eb5d291d5199 flex-1 h-1"}),(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 w-8",children:[e.tintIntensity,"%"]})]})]})]},e.id))}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 relative",children:[(0,s.jsx)("button",{onClick:()=>eB(eD),title:"Clear current layer",className:"jsx-d254eb5d291d5199 px-2 py-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200",children:"\uD83D\uDDD1️ Clear"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 relative",children:[(0,s.jsx)("button",{onClick:()=>eU(!eP),title:"Duplicate to another layer",className:"jsx-d254eb5d291d5199 px-2 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200",children:"\uD83D\uDCCB Duplicate"}),eP&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 absolute bottom-full left-0 mb-1 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-10 min-w-[140px]",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 mb-1",children:"Copy to:"}),ej.filter(e=>e.id!==eD).map(e=>(0,s.jsxs)("button",{onClick:()=>{eL(eD,e.id),eU(!1)},className:"jsx-d254eb5d291d5199 w-full flex items-center gap-2 px-2 py-1.5 text-sm rounded hover:bg-blue-50 text-left",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:e.emoji}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:e.name})]},e.id)),(0,s.jsx)("button",{onClick:()=>eU(!1),className:"jsx-d254eb5d291d5199 w-full text-xs text-gray-400 mt-1 hover:text-gray-600",children:"Cancel"})]})]}),(0,s.jsx)("button",{onClick:eM,title:"Merge all layers",className:"jsx-d254eb5d291d5199 px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200",children:"\uD83D\uDD17 Flatten"})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 mt-3 pt-3 border-t border-gray-200",children:(0,s.jsxs)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500",children:["Active: ",(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-bold",children:null===(e=ej.find(e=>e.id===eD))||void 0===e?void 0:e.name})]})})]}),te&&(0,s.jsx)("div",{onClick:()=>tt(!1),className:"jsx-d254eb5d291d5199 fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-d254eb5d291d5199 bg-white rounded-2xl p-6 max-w-md m-4 shadow-2xl",children:[(0,s.jsx)("h3",{className:"jsx-d254eb5d291d5199 text-xl font-bold mb-4",children:"\uD83D\uDCE4 Export Skin"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm text-gray-600 mb-4",children:"Choose which layers to include in your export:"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 space-y-2 mb-4",children:ej.map(e=>(0,s.jsxs)("label",{className:"jsx-d254eb5d291d5199 flex items-center gap-2 p-2 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:ta[e.id],onChange:t=>ts(a=>({...a,[e.id]:t.target.checked})),className:"jsx-d254eb5d291d5199 w-4 h-4"}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-lg",children:e.emoji}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:e.name})]},e.id))}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>tl(!0),className:"jsx-d254eb5d291d5199 flex-1 py-2 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600",children:"\uD83D\uDCBE Export Selected"}),(0,s.jsx)("button",{onClick:()=>tl(!1),className:"jsx-d254eb5d291d5199 flex-1 py-2 bg-blue-500 text-white rounded-lg font-bold hover:bg-blue-600",children:"\uD83D\uDCE6 Export All"})]}),(0,s.jsx)("button",{onClick:()=>{let e=eC("base"),t=document.createElement("a");t.download="".concat(_||"my-skin","-base.png"),t.href=e.toDataURL("image/png"),t.click(),e5("download")},className:"jsx-d254eb5d291d5199 w-full mt-2 py-2 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200",children:"\uD83D\uDC64 Export Base Only (no clothes)"})]})}),W&&(0,s.jsx)("div",{onClick:()=>X(!1),className:"jsx-d254eb5d291d5199 fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-d254eb5d291d5199 bg-white rounded-2xl p-6 max-w-md m-4 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"jsx-d254eb5d291d5199 text-xl font-bold mb-2",children:"\uD83E\uDD16 AI Skin Generator"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm text-gray-600 mb-4",children:"Describe your character and AI will create a skin!"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-2 mb-3",children:[(0,s.jsx)("input",{type:"text",value:J,onChange:e=>Z(e.target.value),placeholder:"e.g., pirate with red bandana, wizard with purple robe...",onKeyDown:e=>"Enter"===e.key&&e_(),className:"jsx-d254eb5d291d5199 flex-1 px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 outline-none"}),ea&&(0,s.jsx)("button",{onClick:eO,disabled:ee||!J.trim(),title:"Enhance with AI (local LLM)",className:"jsx-d254eb5d291d5199 px-3 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl font-bold hover:scale-105 transition-all disabled:opacity-50 disabled:hover:scale-100",children:ee?"⏳":"✨"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mb-4",children:[(0,s.jsx)("label",{className:"jsx-d254eb5d291d5199 block text-sm font-medium text-gray-700 mb-2",children:"\uD83C\uDFAD Pick an Idea!"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 space-y-2",children:[{id:"heroes",emoji:"\uD83E\uDDB8",name:"Heroes",color:"bg-red-100 text-red-700 hover:bg-red-200",prompts:[{emoji:"\uD83E\uDDB8",text:"superhero with cape",label:"Superhero"},{emoji:"⚔️",text:"brave knight in shining armor",label:"Knight"},{emoji:"\uD83E\uDD77",text:"cool ninja with black outfit",label:"Ninja"},{emoji:"\uD83C\uDFF4‍☠️",text:"adventure pirate with bandana",label:"Pirate"},{emoji:"\uD83E\uDDD9",text:"powerful wizard with magic staff",label:"Wizard"}]},{id:"animals",emoji:"\uD83D\uDC3E",name:"Animals",color:"bg-green-100 text-green-700 hover:bg-green-200",prompts:[{emoji:"\uD83D\uDC3A",text:"wolf warrior with fur",label:"Wolf"},{emoji:"\uD83D\uDC31",text:"cute cat person with whiskers",label:"Cat"},{emoji:"\uD83E\uDD8A",text:"clever fox with orange fur",label:"Fox"},{emoji:"\uD83D\uDC3C",text:"friendly panda bear",label:"Panda"},{emoji:"\uD83E\uDD81",text:"brave lion with mane",label:"Lion"}]},{id:"fantasy",emoji:"✨",name:"Fantasy",color:"bg-purple-100 text-purple-700 hover:bg-purple-200",prompts:[{emoji:"\uD83E\uDDDA",text:"magical fairy with wings",label:"Fairy"},{emoji:"\uD83D\uDC09",text:"dragon person with scales",label:"Dragon"},{emoji:"\uD83E\uDDDC",text:"mermaid with shiny tail",label:"Mermaid"},{emoji:"\uD83E\uDD84",text:"unicorn with rainbow mane",label:"Unicorn"},{emoji:"\uD83E\uDDDD",text:"elf with pointy ears",label:"Elf"}]},{id:"space",emoji:"\uD83D\uDE80",name:"Space",color:"bg-blue-100 text-blue-700 hover:bg-blue-200",prompts:[{emoji:"\uD83E\uDD16",text:"friendly robot with glowing eyes",label:"Robot"},{emoji:"\uD83D\uDC7D",text:"cool alien from outer space",label:"Alien"},{emoji:"\uD83D\uDC68‍\uD83D\uDE80",text:"astronaut in space suit",label:"Astronaut"},{emoji:"\uD83C\uDF1F",text:"star guardian with cosmic powers",label:"Star"},{emoji:"\uD83D\uDEF8",text:"space explorer with laser gun",label:"Explorer"}]},{id:"jobs",emoji:"\uD83D\uDC77",name:"Jobs",color:"bg-yellow-100 text-yellow-700 hover:bg-yellow-200",prompts:[{emoji:"\uD83D\uDC68‍\uD83C\uDF73",text:"chef with white hat and apron",label:"Chef"},{emoji:"\uD83D\uDC68‍\uD83D\uDE92",text:"firefighter with helmet",label:"Firefighter"},{emoji:"\uD83D\uDC6E",text:"police officer in uniform",label:"Police"},{emoji:"\uD83D\uDC68‍⚕️",text:"doctor with stethoscope",label:"Doctor"},{emoji:"\uD83E\uDDD1‍\uD83D\uDD2C",text:"scientist with lab coat",label:"Scientist"}]},{id:"spooky",emoji:"\uD83D\uDC7B",name:"Spooky",color:"bg-gray-100 text-gray-700 hover:bg-gray-200",prompts:[{emoji:"\uD83E\uDDDF",text:"zombie with torn clothes",label:"Zombie"},{emoji:"\uD83E\uDDDB",text:"vampire with cape and fangs",label:"Vampire"},{emoji:"\uD83D\uDC7B",text:"friendly ghost with spooky glow",label:"Ghost"},{emoji:"\uD83C\uDF83",text:"pumpkin head monster",label:"Pumpkin"},{emoji:"\uD83D\uDC80",text:"skeleton warrior",label:"Skeleton"}]}].map(e=>(0,s.jsxs)("details",{className:"jsx-d254eb5d291d5199 group",children:[(0,s.jsxs)("summary",{className:"jsx-d254eb5d291d5199 "+"flex items-center gap-2 p-2 rounded-lg cursor-pointer ".concat(e.color," font-medium"),children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-lg",children:e.emoji}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:e.name}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 ml-auto text-xs opacity-60",children:e.prompts.length})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 flex flex-wrap gap-1 mt-2 pl-2",children:e.prompts.map(e=>(0,s.jsxs)("button",{onClick:()=>Z(e.text),className:"jsx-d254eb5d291d5199 "+"px-2 py-1 rounded-lg text-xs transition-all flex items-center gap-1 ".concat(J===e.text?"bg-purple-500 text-white scale-105":"bg-white border border-gray-200 hover:border-purple-300 hover:bg-purple-50"),children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:e.emoji}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199",children:e.label})]},e.label))})]},e.id))})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mb-4",children:[(0,s.jsx)("label",{className:"jsx-d254eb5d291d5199 block text-sm font-medium text-gray-700 mb-2",children:"\uD83C\uDFA8 Art Style"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 grid grid-cols-5 gap-2",children:[{id:"blocky",emoji:"\uD83E\uDDF1",name:"Blocky"},{id:"pixel-art",emoji:"\uD83D\uDC7E",name:"Pixel"},{id:"cartoon",emoji:"\uD83C\uDFA8",name:"Cartoon"},{id:"anime",emoji:"✨",name:"Anime"},{id:"realistic",emoji:"\uD83D\uDCF7",name:"Real"}].map(e=>(0,s.jsxs)("button",{onClick:()=>ei(e.id),title:e.name,className:"jsx-d254eb5d291d5199 "+"p-2 rounded-lg text-center transition-all ".concat(el===e.id?"bg-purple-500 text-white ring-2 ring-purple-300":"bg-gray-100 hover:bg-gray-200"),children:[(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 text-xl",children:e.emoji}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 text-xs mt-1",children:e.name})]},e.id))})]}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 mb-4 p-3 bg-gray-50 rounded-xl",children:(0,s.jsxs)("label",{className:"jsx-d254eb5d291d5199 flex items-center justify-between cursor-pointer",children:[(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 font-medium text-gray-700",children:"\uD83E\uDDE0 Use Real AI (DALL-E 3)"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 mt-1",children:o()?"API key configured ✓":"Requires NEXT_PUBLIC_OPENAI_API_KEY"})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 relative",children:[(0,s.jsx)("input",{type:"checkbox",checked:en,onChange:e=>eo(e.target.checked),disabled:!o(),className:"jsx-d254eb5d291d5199 sr-only"}),(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 "+"w-11 h-6 rounded-full transition-colors ".concat(en&&o()?"bg-purple-500":"bg-gray-300"," ").concat(o()?"":"opacity-50"),children:(0,s.jsx)("div",{className:"jsx-d254eb5d291d5199 "+"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ".concat(en?"translate-x-5":"")})})]})]})}),er&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm",children:[(0,s.jsx)("strong",{className:"jsx-d254eb5d291d5199",children:"⚠️ Error:"})," ",er,(0,s.jsx)("button",{onClick:()=>ed(null),className:"jsx-d254eb5d291d5199 ml-2 text-red-500 hover:text-red-700",children:"✕"})]}),(0,s.jsx)("button",{onClick:e_,disabled:Q||!J.trim(),className:"jsx-d254eb5d291d5199 w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold disabled:opacity-50 transition-all hover:scale-[1.02] active:scale-[0.98]",children:Q?(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 animate-spin",children:"\uD83D\uDD04"}),en?"AI is thinking...":"Generating..."]}):"✨ Generate Skin"}),ec.length>0&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-4 pt-4 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>em(!eu),className:"jsx-d254eb5d291d5199 flex items-center justify-between w-full text-left",children:[(0,s.jsxs)("span",{className:"jsx-d254eb5d291d5199 font-medium text-gray-700",children:["\uD83D\uDCDA History & Favorites (",ec.length,")"]}),(0,s.jsx)("span",{className:"jsx-d254eb5d291d5199 text-gray-400",children:eu?"▲":"▼"})]}),eu&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mt-3 space-y-2 max-h-60 overflow-y-auto",children:[ec.filter(e=>e.isFavorite).length>0&&(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 mb-2",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-yellow-600 font-semibold mb-1",children:"⭐ Favorites"}),ec.filter(e=>e.isFavorite).map(e=>(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-2 p-2 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,s.jsx)("img",{src:e.skinDataUrl,alt:e.prompt,style:{imageRendering:"pixelated"},className:"jsx-d254eb5d291d5199 w-12 h-12 rounded border bg-gray-100"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm font-medium truncate",children:e.prompt}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500",children:e.style})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>ep(e),title:"Load this skin",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-green-100 text-green-600 rounded hover:bg-green-200",children:"✓"}),(0,s.jsx)("button",{onClick:()=>ef(e),title:"Use this prompt",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200",children:"\uD83D\uDD04"}),(0,s.jsx)("button",{onClick:()=>eh(e.id),title:"Remove from favorites",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-yellow-100 text-yellow-600 rounded hover:bg-yellow-200",children:"⭐"})]})]},e.id))]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-500 font-semibold mb-1",children:"\uD83D\uDD50 Recent"}),ec.filter(e=>!e.isFavorite).map(e=>(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100",children:[(0,s.jsx)("img",{src:e.skinDataUrl,alt:e.prompt,style:{imageRendering:"pixelated"},className:"jsx-d254eb5d291d5199 w-12 h-12 rounded border bg-white"}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-sm font-medium truncate",children:e.prompt}),(0,s.jsxs)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-400",children:[e.style," • ",new Date(e.timestamp).toLocaleDateString()]})]}),(0,s.jsxs)("div",{className:"jsx-d254eb5d291d5199 flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>ep(e),title:"Load this skin",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-green-100 text-green-600 rounded hover:bg-green-200",children:"✓"}),(0,s.jsx)("button",{onClick:()=>ef(e),title:"Use this prompt",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-purple-100 text-purple-600 rounded hover:bg-purple-200",children:"\uD83D\uDD04"}),(0,s.jsx)("button",{onClick:()=>eh(e.id),title:"Add to favorites",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:"☆"}),(0,s.jsx)("button",{onClick:()=>eg(e.id),title:"Delete",className:"jsx-d254eb5d291d5199 p-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200",children:"✕"})]})]},e.id))]})]}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 text-xs text-gray-400 mt-3 text-center",children:en?"Real AI generates unique skins from your description":"Quick mode uses smart color matching based on keywords"})]})}),(0,s.jsx)("button",{onClick:()=>ev(!ek),title:"Toggle Layers (L)",className:"jsx-d254eb5d291d5199 "+"fixed bottom-4 left-16 w-10 h-10 rounded-full shadow-lg text-xl hover:scale-110 transition-transform ".concat(ek?"bg-blue-500 text-white":"bg-white/90"),children:"\uD83C\uDFA8"}),(0,s.jsx)("button",{onClick:()=>X(!0),title:"AI Skin Generator",className:"jsx-d254eb5d291d5199 fixed bottom-4 left-4 w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full shadow-lg text-xl hover:scale-110 transition-transform",children:"\uD83E\uDD16"}),(0,s.jsx)("button",{onClick:()=>H(!0),title:"Keyboard shortcuts (?)",className:"jsx-d254eb5d291d5199 fixed bottom-4 right-4 w-10 h-10 bg-white/90 rounded-full shadow-lg text-xl font-bold hover:scale-110 transition-transform",children:"?"}),(0,s.jsx)("p",{className:"jsx-d254eb5d291d5199 mt-4 text-white/70 text-sm",children:"Made with \uD83D\uDC96 by Onde • Works with Minecraft Java & Bedrock!"})]})}}},function(e){e.O(0,[857,971,117,744],function(){return e(e.s=4293)}),_N_E=e.O()}]);