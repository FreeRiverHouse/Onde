"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{873:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var r=n(7437),a=n(2265),o=n(3828),i=n(1247);function l(e){let{skinCanvas:t}=e,n=(0,a.useRef)(null),l=(0,a.useRef)(null),s=(0,a.useRef)(null),c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useRef)(null),h=(0,a.useRef)(!1),m=(0,a.useRef)({x:0,y:0}),x=(0,a.useRef)({x:.1,y:.3}),w=(0,a.useRef)(!0),p=(0,a.useRef)(null),[g,v]=(0,a.useState)(!0),[b,y]=(0,a.useState)("walk"),f=(0,a.useRef)("walk");(0,a.useEffect)(()=>{if(!n.current)return;let e=new o.xsS,t=document.createElement("canvas");t.width=2,t.height=256;let r=t.getContext("2d"),a=r.createLinearGradient(0,0,0,256);a.addColorStop(0,"#1a1a3e"),a.addColorStop(.5,"#2a2a4e"),a.addColorStop(1,"#0a0a1e"),r.fillStyle=a,r.fillRect(0,0,2,256);let u=new o.ROQ(t);e.background=u,s.current=e;let g=new o.cPb(45,1,.1,1e3);g.position.set(0,1.2,3.5),g.lookAt(0,.9,0),c.current=g;let v=new i.CP7({antialias:!0,alpha:!0});v.setSize(200,280),v.setPixelRatio(window.devicePixelRatio),v.shadowMap.enabled=!0,v.shadowMap.type=o.ntZ,v.toneMapping=o.LY2,v.toneMappingExposure=1.2,n.current.appendChild(v.domElement),l.current=v;let b=new o.Mig(4210784,.4);e.add(b);let y=new o.Ox3(16777215,1);y.position.set(5,10,7),y.castShadow=!0,y.shadow.mapSize.width=512,y.shadow.mapSize.height=512,y.shadow.camera.near=.5,y.shadow.camera.far=50,e.add(y);let E=new o.Ox3(6724095,.6);E.position.set(-5,5,-5),e.add(E);let D=new o.cek(16750950,.3,10);D.position.set(-3,2,3),e.add(D);let k=new o._12(10,10),j=new o.Tn7({opacity:.3}),M=new o.Kj0(k,j);M.rotation.x=-Math.PI/2,M.position.y=0,M.receiveShadow=!0,e.add(M);let S=new o.ZAu;d.current=S,new o.YBo({color:12887419});let C=new o.Wid({color:12887419,roughness:.8,metalness:.1}),N=new o.DvJ(.5,.5,.5),L=new o.Kj0(N,C.clone());L.position.y=1.75,L.name="head",L.castShadow=!0,L.receiveShadow=!0,S.add(L);let R=new o.DvJ(.5,.75,.25),P=new o.Kj0(R,C.clone());P.position.y=1.125,P.name="body",P.castShadow=!0,P.receiveShadow=!0,S.add(P);let A=new o.DvJ(.25,.75,.25),B=new o.Kj0(A,C.clone());B.position.set(-.375,1.125,0),B.name="rightArm",B.castShadow=!0,S.add(B);let F=new o.Kj0(A,C.clone());F.position.set(.375,1.125,0),F.name="leftArm",F.castShadow=!0,S.add(F);let I=new o.DvJ(.25,.75,.25),Y=new o.Kj0(I,C.clone());Y.position.set(-.125,.375,0),Y.name="rightLeg",Y.castShadow=!0,S.add(Y);let z=new o.Kj0(I,C.clone());z.position.set(.125,.375,0),z.name="leftLeg",z.castShadow=!0,S.add(z),e.add(S);let K=new o.u9r,O=new Float32Array(90),T=new Float32Array(90);for(let e=0;e<30;e++){let t=Math.random()*Math.PI*2,n=.8+.5*Math.random();O[3*e]=Math.cos(t)*n,O[3*e+1]=2.5*Math.random(),O[3*e+2]=Math.sin(t)*n;let r=Math.random();r<.33?(T[3*e]=1,T[3*e+1]=.84,T[3*e+2]=0):(r<.66?(T[3*e]=0,T[3*e+1]=1):(T[3*e]=.5,T[3*e+1]=0),T[3*e+2]=1)}K.setAttribute("position",new o.TlE(O,3)),K.setAttribute("color",new o.TlE(T,3));let X=new o.UY4({size:.05,vertexColors:!0,transparent:!0,opacity:.8,blending:o.WMw}),_=new o.woe(K,X);p.current=_,e.add(_);let J=e=>{h.current=!0,w.current=!1,m.current={x:e.clientX,y:e.clientY}},W=e=>{if(!h.current)return;let t=e.clientX-m.current.x,n=e.clientY-m.current.y;x.current.y+=.01*t,x.current.x+=.01*n,x.current.x=Math.max(-Math.PI/4,Math.min(Math.PI/4,x.current.x)),m.current={x:e.clientX,y:e.clientY}},U=()=>{h.current=!1,setTimeout(()=>{w.current=!0},3e3)},Q=e=>{h.current=!0,w.current=!1,m.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},Z=e=>{if(!h.current)return;let t=e.touches[0].clientX-m.current.x,n=e.touches[0].clientY-m.current.y;x.current.y+=.01*t,x.current.x+=.01*n,x.current.x=Math.max(-Math.PI/4,Math.min(Math.PI/4,x.current.x)),m.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},q=()=>{h.current=!1,setTimeout(()=>{w.current=!0},3e3)};v.domElement.addEventListener("mousedown",J),v.domElement.addEventListener("mousemove",W),v.domElement.addEventListener("mouseup",U),v.domElement.addEventListener("mouseleave",U),v.domElement.addEventListener("touchstart",Q),v.domElement.addEventListener("touchmove",Z),v.domElement.addEventListener("touchend",q);let G=0,H=()=>{requestAnimationFrame(H),G+=.05,w.current&&(x.current.y+=.01),S.rotation.y=x.current.y,S.rotation.x=x.current.x;let t=S.getObjectByName("rightArm"),n=S.getObjectByName("leftArm"),r=S.getObjectByName("rightLeg"),a=S.getObjectByName("leftLeg"),o=f.current;if("walk"===o){let e=.3*Math.sin(G);t&&(t.rotation.x=e),n&&(n.rotation.x=-e),r&&(r.rotation.x=-e),a&&(a.rotation.x=e)}else if("idle"===o){let e=.05*Math.sin(.5*G);t&&(t.rotation.x=e),n&&(n.rotation.x=e),r&&(r.rotation.x=0),a&&(a.rotation.x=0)}else if("wave"===o){let e=.5*Math.sin(3*G)+.8;t&&(t.rotation.x=-1.5,t.rotation.z=e),n&&(n.rotation.x=0),r&&(r.rotation.x=0),a&&(a.rotation.x=0)}let i=_.geometry.attributes.position;for(let e=0;e<30;e++)i.array[3*e+1]+=.01,i.array[3*e+1]>2.8&&(i.array[3*e+1]=0);i.needsUpdate=!0,_.rotation.y=.2*G,v.render(e,g)};return H(),()=>{v.domElement.removeEventListener("mousedown",J),v.domElement.removeEventListener("mousemove",W),v.domElement.removeEventListener("mouseup",U),v.domElement.removeEventListener("mouseleave",U),v.domElement.removeEventListener("touchstart",Q),v.domElement.removeEventListener("touchmove",Z),v.domElement.removeEventListener("touchend",q),v.dispose(),n.current&&n.current.removeChild(v.domElement)}},[]),(0,a.useEffect)(()=>{if(!t||!d.current)return;let e=new o.ROQ(t);e.magFilter=o.TyD,e.minFilter=o.TyD,u.current=e,d.current.traverse(e=>{e instanceof o.Kj0&&e.material})},[t]),(0,a.useEffect)(()=>{p.current&&(p.current.visible=g)},[g]),(0,a.useEffect)(()=>{f.current=b},[b]);let E=e=>{switch(e){case"front":x.current={x:.1,y:0};break;case"side":x.current={x:.1,y:Math.PI/2};break;case"back":x.current={x:.1,y:Math.PI}}w.current=!1,setTimeout(()=>{w.current=!0},3e3)};return(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("div",{className:"relative rounded-xl overflow-hidden mx-auto cursor-grab active:cursor-grabbing shadow-2xl",style:{width:200,height:280,boxShadow:"0 0 30px rgba(100, 149, 237, 0.3), 0 0 60px rgba(138, 43, 226, 0.2)"},children:[(0,r.jsx)("div",{ref:n,className:"w-full h-full"}),(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:{background:"radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.4) 100%)"}}),(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:"radial-gradient(ellipse at center, rgba(255,255,255,0.1) 0%, transparent 60%)"}}),(0,r.jsx)("button",{onClick:()=>{let e=l.current,t=s.current,n=c.current;if(!e||!t||!n)return;let r=e.getSize(new o.FM8);e.setSize(800,1120),e.render(t,n);let a=e.domElement.toDataURL("image/png");e.setSize(r.x,r.y);let i=document.createElement("a");i.download="minecraft-skin-3d.png",i.href=a,i.click()},className:"absolute bottom-2 right-2 px-2 py-1 bg-white/90 hover:bg-white text-gray-800 rounded-lg text-xs font-bold opacity-0 group-hover:opacity-100 transition-all hover:scale-105 shadow-lg",title:"\uD83D\uDCF8 Save 3D preview as image",children:"\uD83D\uDCF8"}),(0,r.jsxs)("div",{className:"absolute bottom-2 left-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[(0,r.jsx)("button",{onClick:()=>E("front"),className:"px-1.5 py-1 bg-white/90 hover:bg-white text-gray-800 rounded text-xs font-bold hover:scale-105 shadow",title:"Front view",children:"\uD83D\uDC64"}),(0,r.jsx)("button",{onClick:()=>E("side"),className:"px-1.5 py-1 bg-white/90 hover:bg-white text-gray-800 rounded text-xs font-bold hover:scale-105 shadow",title:"Side view",children:"\uD83D\uDC48"}),(0,r.jsx)("button",{onClick:()=>E("back"),className:"px-1.5 py-1 bg-white/90 hover:bg-white text-gray-800 rounded text-xs font-bold hover:scale-105 shadow",title:"Back view",children:"\uD83D\uDD19"}),(0,r.jsx)("button",{onClick:()=>v(!g),className:"px-1.5 py-1 rounded text-xs font-bold hover:scale-105 shadow ".concat(g?"bg-yellow-400 text-yellow-900":"bg-gray-400 text-gray-700"),title:g?"Hide particles":"Show particles",children:"✨"})]}),(0,r.jsxs)("div",{className:"absolute top-2 left-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-all",children:[(0,r.jsx)("button",{onClick:()=>y("walk"),className:"px-1.5 py-1 rounded text-xs font-bold hover:scale-105 shadow ".concat("walk"===b?"bg-green-400 text-green-900":"bg-white/90 text-gray-800"),title:"Walking pose",children:"\uD83D\uDEB6"}),(0,r.jsx)("button",{onClick:()=>y("idle"),className:"px-1.5 py-1 rounded text-xs font-bold hover:scale-105 shadow ".concat("idle"===b?"bg-blue-400 text-blue-900":"bg-white/90 text-gray-800"),title:"Idle pose",children:"\uD83E\uDDCD"}),(0,r.jsx)("button",{onClick:()=>y("wave"),className:"px-1.5 py-1 rounded text-xs font-bold hover:scale-105 shadow ".concat("wave"===b?"bg-pink-400 text-pink-900":"bg-white/90 text-gray-800"),title:"Waving pose",children:"\uD83D\uDC4B"})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 text-center mt-1",children:"\uD83D\uDDB1️ Drag to rotate"})]})}}}]);