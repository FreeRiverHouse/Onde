<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Onde Gallery - Content Approval</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Museum Palette - Elegant & Warm */
      --museum-bg: #0f0d0b;
      --museum-wall: #1a1714;
      --museum-accent: #2a2520;
      --frame-gold: #c9a962;
      --frame-gold-light: #ddc078;
      --frame-bronze: #8b7355;
      --frame-dark: #5c4d3a;

      /* Status Colors */
      --approve-green: #4a9d6e;
      --approve-glow: rgba(74, 157, 110, 0.3);
      --reject-red: #c45c5c;
      --reject-glow: rgba(196, 92, 92, 0.3);
      --pending-gold: #d4a84b;

      /* Text */
      --text-cream: #f5f0e8;
      --text-muted: #9a9080;
      --text-dim: #6a6055;

      /* Client Colors */
      --frh-blue: #4a90d9;
      --onde-gold: #f4d03f;
      --magmatic-purple: #a855f7;

      /* Effects */
      --shadow-deep: 0 20px 60px rgba(0,0,0,0.6);
      --shadow-soft: 0 4px 20px rgba(0,0,0,0.3);
      --glass: rgba(255,255,255,0.03);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--museum-bg);
      color: var(--text-cream);
      min-height: 100vh;
      min-height: -webkit-fill-available;
      overscroll-behavior: none;
    }

    /* Elegant Header */
    header {
      background: linear-gradient(180deg, rgba(26,23,20,0.98) 0%, rgba(15,13,11,0.95) 100%);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      padding: 24px 20px 16px;
      border-bottom: 1px solid rgba(201, 169, 98, 0.15);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .logo-icon {
      width: 44px;
      height: 44px;
      background: linear-gradient(145deg, var(--frame-gold), var(--frame-bronze));
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Cormorant Garamond', serif;
      font-size: 26px;
      font-weight: 700;
      color: var(--museum-bg);
      box-shadow: 0 4px 12px rgba(201, 169, 98, 0.3);
    }

    .logo-text {
      display: flex;
      flex-direction: column;
    }

    h1 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 24px;
      font-weight: 600;
      letter-spacing: 1px;
      color: var(--text-cream);
    }

    .logo-subtitle {
      font-size: 11px;
      color: var(--text-muted);
      letter-spacing: 2px;
      text-transform: uppercase;
      margin-top: 2px;
    }

    .header-actions {
      display: flex;
      gap: 8px;
    }

    .view-toggle {
      display: flex;
      background: var(--museum-accent);
      border-radius: 10px;
      padding: 4px;
      border: 1px solid rgba(201, 169, 98, 0.1);
    }

    .view-btn {
      padding: 10px 14px;
      border: none;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.25s ease;
    }

    .view-btn:hover {
      color: var(--text-cream);
    }

    .view-btn.active {
      background: linear-gradient(145deg, var(--frame-gold), var(--frame-bronze));
      color: var(--museum-bg);
      box-shadow: 0 2px 8px rgba(201, 169, 98, 0.25);
    }

    /* Client Tabs - Elegant Pills */
    .client-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 4px;
      -webkit-overflow-scrolling: touch;
    }

    .client-tabs::-webkit-scrollbar {
      display: none;
    }

    .client-tab {
      padding: 12px 20px;
      border-radius: 24px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      background: var(--museum-accent);
      border: 1px solid rgba(255,255,255,0.05);
      color: var(--text-muted);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .client-tab:hover {
      border-color: rgba(201, 169, 98, 0.2);
      transform: translateY(-1px);
    }

    .client-tab .count {
      background: rgba(255,255,255,0.08);
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    .client-tab.active {
      border-color: var(--frame-gold);
      color: var(--text-cream);
      background: linear-gradient(145deg, rgba(201, 169, 98, 0.15), rgba(201, 169, 98, 0.05));
    }

    .client-tab[data-client="frh"].active {
      border-color: var(--frh-blue);
      background: linear-gradient(145deg, rgba(74, 144, 217, 0.15), rgba(74, 144, 217, 0.05));
    }
    .client-tab[data-client="onde"].active {
      border-color: var(--onde-gold);
      background: linear-gradient(145deg, rgba(244, 208, 63, 0.15), rgba(244, 208, 63, 0.05));
    }
    .client-tab[data-client="magmatic"].active {
      border-color: var(--magmatic-purple);
      background: linear-gradient(145deg, rgba(168, 85, 247, 0.15), rgba(168, 85, 247, 0.05));
    }

    /* Stats Bar */
    .stats {
      display: flex;
      gap: 16px;
    }

    .stat {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-muted);
    }

    .stat-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      box-shadow: 0 0 8px currentColor;
    }

    .stat-dot.pending { background: var(--pending-gold); color: var(--pending-gold); }
    .stat-dot.approved { background: var(--approve-green); color: var(--approve-green); }
    .stat-dot.rejected { background: var(--reject-red); color: var(--reject-red); }

    /* Type Filter */
    .type-tabs {
      display: flex;
      gap: 8px;
      padding: 16px 20px;
      background: rgba(0,0,0,0.4);
      border-bottom: 1px solid rgba(201, 169, 98, 0.08);
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }

    .type-tab {
      padding: 10px 18px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--text-muted);
      transition: all 0.25s ease;
    }

    .type-tab:hover {
      border-color: rgba(201, 169, 98, 0.3);
      color: var(--text-cream);
    }

    .type-tab.active {
      background: linear-gradient(145deg, var(--frame-gold), var(--frame-bronze));
      color: var(--museum-bg);
      border-color: transparent;
      box-shadow: 0 2px 12px rgba(201, 169, 98, 0.3);
    }

    /* Main Gallery */
    main {
      padding: 28px 20px;
      padding-bottom: 140px;
      max-width: 1600px;
      margin: 0 auto;
    }

    .empty-gallery {
      text-align: center;
      padding: 100px 20px;
    }

    .empty-gallery h2 {
      font-family: 'Cormorant Garamond', serif;
      font-size: 28px;
      font-weight: 500;
      margin-bottom: 12px;
      color: var(--text-muted);
    }

    .empty-gallery p {
      color: var(--text-dim);
      font-size: 14px;
    }

    /* Gallery Grid */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 32px;
    }

    @media (max-width: 400px) {
      .gallery-grid {
        grid-template-columns: 1fr;
        gap: 28px;
      }
    }

    /* Museum Artwork Card */
    .artwork {
      position: relative;
      background: linear-gradient(180deg, var(--museum-wall) 0%, rgba(26,23,20,0.8) 100%);
      border-radius: 8px;
      padding: 20px;
      box-shadow: var(--shadow-deep);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                  box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(201, 169, 98, 0.08);
    }

    .artwork:hover {
      transform: translateY(-8px) scale(1.01);
      box-shadow: 0 30px 80px rgba(0,0,0,0.7);
      border-color: rgba(201, 169, 98, 0.15);
    }

    /* Ornate Gold Frame */
    .frame {
      position: relative;
      background: linear-gradient(145deg, #ddc078, #a08040);
      padding: 10px;
      border-radius: 4px;
      box-shadow:
        inset 0 2px 4px rgba(255,255,255,0.4),
        inset 0 -2px 4px rgba(0,0,0,0.3),
        0 6px 20px rgba(0,0,0,0.5);
    }

    .frame::before {
      content: '';
      position: absolute;
      inset: 3px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 2px;
      pointer-events: none;
    }

    .frame-inner {
      background: linear-gradient(145deg, #7a6545, #4a3d30);
      padding: 5px;
      box-shadow: inset 0 3px 10px rgba(0,0,0,0.6);
    }

    .artwork-image {
      width: 100%;
      aspect-ratio: 4/3;
      object-fit: cover;
      display: block;
      background: var(--museum-bg);
      border-radius: 1px;
    }

    .artwork-image.placeholder {
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-dim);
      font-size: 14px;
      font-style: italic;
      background: linear-gradient(135deg, #1a1714, #0f0d0b);
    }

    .artwork-video {
      width: 100%;
      aspect-ratio: 16/9;
      background: #000;
      display: block;
      border-radius: 1px;
    }

    /* Museum Plaque - Brass Style */
    .plaque {
      margin-top: 18px;
      background: linear-gradient(180deg, #1f1c18 0%, #151310 100%);
      border: 1px solid rgba(201, 169, 98, 0.12);
      border-radius: 6px;
      padding: 16px;
      position: relative;
    }

    .plaque::before {
      content: '';
      position: absolute;
      top: 0;
      left: 20px;
      right: 20px;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(201, 169, 98, 0.3), transparent);
    }

    .plaque-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
      gap: 12px;
    }

    .artwork-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-cream);
      line-height: 1.3;
    }

    .status-badge {
      padding: 5px 12px;
      border-radius: 14px;
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      flex-shrink: 0;
    }

    .status-badge.pending {
      background: rgba(212, 168, 75, 0.15);
      color: var(--pending-gold);
      border: 1px solid rgba(212, 168, 75, 0.4);
    }

    .status-badge.approved {
      background: rgba(74, 157, 110, 0.15);
      color: var(--approve-green);
      border: 1px solid rgba(74, 157, 110, 0.4);
    }

    .status-badge.rejected {
      background: rgba(196, 92, 92, 0.15);
      color: var(--reject-red);
      border: 1px solid rgba(196, 92, 92, 0.4);
    }

    .plaque-meta {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .meta-tag {
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 6px;
      background: rgba(255,255,255,0.04);
      color: var(--text-muted);
      border-left: 2px solid transparent;
    }

    .meta-tag.client-frh {
      color: var(--frh-blue);
      border-left-color: var(--frh-blue);
      background: rgba(74, 144, 217, 0.08);
    }
    .meta-tag.client-onde {
      color: var(--onde-gold);
      border-left-color: var(--onde-gold);
      background: rgba(244, 208, 63, 0.08);
    }
    .meta-tag.client-magmatic {
      color: var(--magmatic-purple);
      border-left-color: var(--magmatic-purple);
      background: rgba(168, 85, 247, 0.08);
    }

    .artwork-description {
      font-size: 13px;
      color: var(--text-muted);
      line-height: 1.6;
      margin-bottom: 10px;
    }

    .artwork-caption {
      background: rgba(0,0,0,0.4);
      padding: 12px 14px;
      border-radius: 6px;
      border-left: 3px solid var(--frame-gold);
      font-size: 13px;
      color: #c0b8a8;
      margin-bottom: 12px;
      font-style: italic;
      line-height: 1.5;
    }

    /* Action Buttons - Elegant */
    .artwork-actions {
      display: flex;
      gap: 10px;
      margin-top: 14px;
    }

    .action-btn {
      flex: 1;
      padding: 16px 14px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      letter-spacing: 0.3px;
    }

    .action-btn:active {
      transform: scale(0.96);
    }

    .action-btn.approve {
      background: linear-gradient(145deg, var(--approve-green), #3d8a5e);
      color: #fff;
      box-shadow: 0 4px 16px var(--approve-glow);
    }

    .action-btn.approve:hover {
      box-shadow: 0 6px 24px var(--approve-glow);
      transform: translateY(-2px);
    }

    .action-btn.reject {
      background: var(--museum-accent);
      color: var(--text-muted);
      border: 1px solid rgba(255,255,255,0.08);
    }

    .action-btn.reject:hover {
      border-color: var(--reject-red);
      color: var(--reject-red);
    }

    .action-btn.redo {
      background: linear-gradient(145deg, var(--pending-gold), #b8923d);
      color: var(--museum-bg);
      box-shadow: 0 4px 16px rgba(212, 168, 75, 0.3);
    }

    /* Comment Section */
    .comment-section {
      margin-top: 12px;
      display: none;
      animation: slideDown 0.3s ease;
    }

    .comment-section.visible {
      display: block;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .comment-input {
      width: 100%;
      padding: 14px;
      border: 1px solid rgba(201, 169, 98, 0.15);
      border-radius: 10px;
      background: rgba(0,0,0,0.4);
      color: var(--text-cream);
      font-size: 14px;
      font-family: inherit;
      margin-bottom: 12px;
      resize: none;
      transition: border-color 0.2s;
    }

    .comment-input:focus {
      outline: none;
      border-color: var(--pending-gold);
    }

    /* Swipe Mode - Fullscreen Experience */
    .swipe-container {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, #0a0908 0%, #1a1714 100%);
      z-index: 200;
      flex-direction: column;
    }

    .swipe-container.active {
      display: flex;
    }

    .swipe-header {
      padding: 20px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(10px);
    }

    .swipe-close {
      background: var(--museum-accent);
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--text-cream);
      width: 44px;
      height: 44px;
      border-radius: 22px;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .swipe-close:hover {
      background: var(--reject-red);
      border-color: var(--reject-red);
    }

    .swipe-counter {
      font-family: 'Cormorant Garamond', serif;
      font-size: 20px;
      letter-spacing: 2px;
    }

    .swipe-cards {
      flex: 1;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .swipe-card {
      position: absolute;
      width: calc(100% - 40px);
      max-width: 380px;
      background: linear-gradient(180deg, var(--museum-wall) 0%, #151310 100%);
      border-radius: 20px;
      padding: 24px;
      box-shadow: var(--shadow-deep);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                  opacity 0.4s ease;
      touch-action: pan-y;
      user-select: none;
      border: 1px solid rgba(201, 169, 98, 0.1);
    }

    .swipe-card.dragging {
      transition: none;
    }

    .swipe-card .frame {
      margin-bottom: 20px;
    }

    .swipe-card .artwork-image {
      aspect-ratio: 1/1;
      border-radius: 2px;
    }

    .swipe-overlay {
      position: absolute;
      top: 24px;
      padding: 14px 28px;
      border-radius: 12px;
      font-size: 28px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 3px;
      opacity: 0;
      transition: opacity 0.15s;
      pointer-events: none;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    }

    .swipe-overlay.approve {
      right: 24px;
      background: linear-gradient(145deg, var(--approve-green), #3d8a5e);
      color: white;
      transform: rotate(12deg);
    }

    .swipe-overlay.reject {
      left: 24px;
      background: linear-gradient(145deg, var(--reject-red), #a04545);
      color: white;
      transform: rotate(-12deg);
    }

    .swipe-hint {
      text-align: center;
      padding: 24px;
      color: var(--text-dim);
      font-size: 14px;
      display: flex;
      justify-content: center;
      gap: 40px;
    }

    .swipe-hint .hint-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .swipe-hint .hint-icon {
      width: 48px;
      height: 48px;
      border-radius: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .swipe-hint .hint-icon.left {
      background: rgba(196, 92, 92, 0.15);
      color: var(--reject-red);
    }
    .swipe-hint .hint-icon.right {
      background: rgba(74, 157, 110, 0.15);
      color: var(--approve-green);
    }

    /* Bulk Action Bar */
    .bulk-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(180deg, transparent, rgba(15,13,11,0.98) 30%);
      padding: 50px 20px 20px;
      padding-bottom: calc(24px + env(safe-area-inset-bottom));
      display: none;
      pointer-events: none;
    }

    .bulk-bar.visible {
      display: block;
    }

    .bulk-content {
      background: var(--museum-wall);
      border: 1px solid rgba(201, 169, 98, 0.15);
      border-radius: 20px;
      padding: 16px;
      display: flex;
      gap: 12px;
      pointer-events: auto;
      box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
    }

    .bulk-btn {
      flex: 1;
      padding: 18px;
      border: none;
      border-radius: 14px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.2s;
      letter-spacing: 0.3px;
    }

    .bulk-btn:active {
      transform: scale(0.97);
    }

    .bulk-btn.approve-all {
      background: linear-gradient(145deg, var(--approve-green), #3d8a5e);
      color: white;
      box-shadow: 0 4px 16px var(--approve-glow);
    }

    .bulk-btn.swipe-mode {
      background: linear-gradient(145deg, var(--frame-gold), var(--frame-bronze));
      color: var(--museum-bg);
      box-shadow: 0 4px 16px rgba(201, 169, 98, 0.3);
    }

    /* History View */
    .history-view {
      display: none;
    }

    .history-view.active {
      display: block;
    }

    .history-item {
      display: flex;
      gap: 16px;
      padding: 18px;
      background: var(--museum-wall);
      border: 1px solid rgba(201, 169, 98, 0.08);
      border-radius: 14px;
      margin-bottom: 12px;
      align-items: center;
      transition: border-color 0.2s;
    }

    .history-item:hover {
      border-color: rgba(201, 169, 98, 0.2);
    }

    .history-thumb {
      width: 64px;
      height: 64px;
      border-radius: 10px;
      object-fit: cover;
      background: var(--museum-bg);
      border: 2px solid rgba(201, 169, 98, 0.15);
    }

    .history-info {
      flex: 1;
    }

    .history-title {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 4px;
    }

    .history-meta {
      font-size: 12px;
      color: var(--text-muted);
    }

    .history-status {
      padding: 8px 14px;
      border-radius: 18px;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }

    .history-status.approved {
      background: rgba(74, 157, 110, 0.15);
      color: var(--approve-green);
    }

    .history-status.rejected {
      background: rgba(196, 92, 92, 0.15);
      color: var(--reject-red);
    }

    /* Calendar View */
    .calendar-view {
      display: none;
    }

    .calendar-view.active {
      display: block;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .calendar-title {
      font-family: 'Cormorant Garamond', serif;
      font-size: 24px;
    }

    .calendar-nav {
      display: flex;
      gap: 8px;
    }

    .calendar-nav button {
      background: var(--museum-accent);
      border: 1px solid rgba(201, 169, 98, 0.15);
      color: var(--text-cream);
      width: 40px;
      height: 40px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.2s;
    }

    .calendar-nav button:hover {
      border-color: var(--frame-gold);
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
    }

    .calendar-day-header {
      text-align: center;
      padding: 12px 8px;
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .calendar-day {
      aspect-ratio: 1;
      background: var(--museum-accent);
      border-radius: 10px;
      padding: 8px;
      font-size: 13px;
      position: relative;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid transparent;
    }

    .calendar-day:hover {
      background: rgba(201, 169, 98, 0.1);
      border-color: rgba(201, 169, 98, 0.2);
    }

    .calendar-day.today {
      border: 2px solid var(--frame-gold);
      font-weight: 600;
    }

    .calendar-day.has-posts::after {
      content: '';
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 6px;
      height: 6px;
      background: var(--pending-gold);
      border-radius: 50%;
      box-shadow: 0 0 6px var(--pending-gold);
    }

    .calendar-day.other-month {
      opacity: 0.25;
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 120px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--museum-wall);
      color: var(--text-cream);
      padding: 16px 28px;
      border-radius: 14px;
      font-size: 14px;
      font-weight: 500;
      box-shadow: var(--shadow-deep);
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 12px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .toast.success {
      border-left: 4px solid var(--approve-green);
      box-shadow: var(--shadow-deep), 0 0 30px var(--approve-glow);
    }
    .toast.error {
      border-left: 4px solid var(--reject-red);
      box-shadow: var(--shadow-deep), 0 0 30px var(--reject-glow);
    }

    /* Mobile Optimizations */
    @media (max-width: 600px) {
      header { padding: 18px 16px 14px; }
      h1 { font-size: 22px; }
      .logo-subtitle { display: none; }
      main { padding: 20px 16px; }
      .gallery-grid { gap: 24px; }
      .artwork { padding: 16px; }
      .frame { padding: 8px; }
      .plaque { padding: 14px; }
      .action-btn { padding: 18px; font-size: 15px; }
      .client-tab { padding: 10px 16px; }
    }

    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .artwork {
      animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) backwards;
    }

    .artwork:nth-child(1) { animation-delay: 0.05s; }
    .artwork:nth-child(2) { animation-delay: 0.1s; }
    .artwork:nth-child(3) { animation-delay: 0.15s; }
    .artwork:nth-child(4) { animation-delay: 0.2s; }
    .artwork:nth-child(5) { animation-delay: 0.25s; }
    .artwork:nth-child(6) { animation-delay: 0.3s; }

    /* Haptic-like visual feedback */
    @keyframes approve-pulse {
      0% { box-shadow: 0 0 0 0 var(--approve-glow); }
      70% { box-shadow: 0 0 0 20px transparent; }
      100% { box-shadow: 0 0 0 0 transparent; }
    }

    @keyframes reject-pulse {
      0% { box-shadow: 0 0 0 0 var(--reject-glow); }
      70% { box-shadow: 0 0 0 20px transparent; }
      100% { box-shadow: 0 0 0 0 transparent; }
    }

    .artwork.approved-animation {
      animation: approve-pulse 0.6s ease-out;
    }

    .artwork.rejected-animation {
      animation: reject-pulse 0.6s ease-out;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-top">
      <div class="logo">
        <div class="logo-icon">O</div>
        <div class="logo-text">
          <h1>Onde Gallery</h1>
          <span class="logo-subtitle">Content Approval</span>
        </div>
      </div>
      <div class="header-actions">
        <div class="view-toggle">
          <button class="view-btn active" data-view="gallery" title="Gallery">Grid</button>
          <button class="view-btn" data-view="calendar" title="Calendar">Cal</button>
          <button class="view-btn" data-view="history" title="History">Log</button>
        </div>
      </div>
    </div>

    <div class="client-tabs">
      <div class="client-tab active" data-client="all">
        Tutti <span class="count" id="count-all">0</span>
      </div>
      <div class="client-tab" data-client="frh">
        FRH <span class="count" id="count-frh">0</span>
      </div>
      <div class="client-tab" data-client="onde">
        Onde <span class="count" id="count-onde">0</span>
      </div>
      <div class="client-tab" data-client="magmatic">
        Magmatic <span class="count" id="count-magmatic">0</span>
      </div>
    </div>

    <div class="stats">
      <div class="stat">
        <span class="stat-dot pending"></span>
        <span id="stat-pending">0 pending</span>
      </div>
      <div class="stat">
        <span class="stat-dot approved"></span>
        <span id="stat-approved">0 approved</span>
      </div>
      <div class="stat">
        <span class="stat-dot rejected"></span>
        <span id="stat-rejected">0 rejected</span>
      </div>
    </div>
  </header>

  <div class="type-tabs">
    <div class="type-tab active" data-type="all">Tutti</div>
    <div class="type-tab" data-type="illustration">Illustrazioni</div>
    <div class="type-tab" data-type="social">Social</div>
    <div class="type-tab" data-type="video">Video</div>
  </div>

  <main>
    <div id="gallery-view" class="gallery-grid"></div>
    <div id="calendar-view" class="calendar-view"></div>
    <div id="history-view" class="history-view"></div>
  </main>

  <div class="bulk-bar" id="bulk-bar">
    <div class="bulk-content">
      <button class="bulk-btn swipe-mode" onclick="enterSwipeMode()">
        Swipe Mode
      </button>
      <button class="bulk-btn approve-all" onclick="bulkApprove()">
        Approva Tutti
      </button>
    </div>
  </div>

  <!-- Swipe Mode Container -->
  <div class="swipe-container" id="swipe-container">
    <div class="swipe-header">
      <button class="swipe-close" onclick="exitSwipeMode()">X</button>
      <div class="swipe-counter" id="swipe-counter">1 / 10</div>
      <div style="width: 44px;"></div>
    </div>
    <div class="swipe-cards" id="swipe-cards"></div>
    <div class="swipe-hint">
      <div class="hint-item">
        <div class="hint-icon left">X</div>
        <span>Reject</span>
      </div>
      <div class="hint-item">
        <div class="hint-icon right">V</div>
        <span>Approve</span>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script>
    // State
    let items = [];
    let currentClient = 'all';
    let currentType = 'all';
    let currentView = 'gallery';
    let serverInfo = {};
    let swipeItems = [];
    let currentSwipeIndex = 0;

    // Clients mapping
    const clientLabels = {
      'frh': 'FreeRiverHouse',
      'onde': 'Onde',
      'magmatic': 'Magmatic'
    };

    const typeLabels = {
      'illustration': 'Illustrazione',
      'social': 'Social Media',
      'video': 'Video'
    };

    // Initialize
    async function init() {
      try {
        const res = await fetch('/api/info');
        serverInfo = await res.json();
      } catch (e) {}
      loadItems();
    }

    // Load items from API
    async function loadItems() {
      let url = '/api/items?';
      if (currentType !== 'all') url += `type=${currentType}&`;
      if (currentClient !== 'all') url += `client=${currentClient}&`;

      try {
        const res = await fetch(url);
        items = await res.json();
        updateStats();
        render();
      } catch (e) {
        showToast('Errore caricamento', 'error');
      }
    }

    // Update statistics
    function updateStats() {
      const pending = items.filter(i => i.status === 'pending').length;
      const approved = items.filter(i => i.status === 'approved').length;
      const rejected = items.filter(i => i.status === 'rejected').length;

      document.getElementById('stat-pending').textContent = `${pending} pending`;
      document.getElementById('stat-approved').textContent = `${approved} approved`;
      document.getElementById('stat-rejected').textContent = `${rejected} rejected`;

      // Client counts - count ALL items (not just filtered)
      fetch('/api/items').then(r => r.json()).then(allItems => {
        document.getElementById('count-all').textContent = allItems.filter(i => i.status === 'pending').length;
        document.getElementById('count-frh').textContent = allItems.filter(i => i.client === 'frh' && i.status === 'pending').length;
        document.getElementById('count-onde').textContent = allItems.filter(i => i.client === 'onde' && i.status === 'pending').length;
        document.getElementById('count-magmatic').textContent = allItems.filter(i => i.client === 'magmatic' && i.status === 'pending').length;
      });

      // Show/hide bulk bar
      const bulkBar = document.getElementById('bulk-bar');
      bulkBar.classList.toggle('visible', pending > 0);
    }

    // Main render function
    function render() {
      if (currentView === 'gallery') {
        renderGallery();
      } else if (currentView === 'calendar') {
        renderCalendar();
      } else if (currentView === 'history') {
        renderHistory();
      }
    }

    // Render gallery view
    function renderGallery() {
      const container = document.getElementById('gallery-view');
      container.style.display = 'grid';
      document.getElementById('calendar-view').style.display = 'none';
      document.getElementById('history-view').style.display = 'none';

      if (items.length === 0) {
        container.innerHTML = `
          <div class="empty-gallery" style="grid-column: 1/-1;">
            <h2>La galleria e vuota</h2>
            <p>I nuovi contenuti da approvare appariranno qui</p>
          </div>
        `;
        return;
      }

      // Sort: pending first
      const sorted = [...items].sort((a, b) => {
        const order = { pending: 0, rejected: 1, approved: 2 };
        return order[a.status] - order[b.status];
      });

      container.innerHTML = sorted.map(item => `
        <div class="artwork" data-id="${item.id}">
          <div class="frame">
            <div class="frame-inner">
              ${item.video
                ? `<video class="artwork-video" src="${item.video}" controls poster="${item.image || ''}"></video>`
                : item.image
                  ? `<img class="artwork-image" src="${item.image}" alt="${item.title}" loading="lazy">`
                  : `<div class="artwork-image placeholder">In arrivo...</div>`
              }
            </div>
          </div>
          <div class="plaque">
            <div class="plaque-header">
              <div class="artwork-title">${item.title}</div>
              <span class="status-badge ${item.status}">${item.status}</span>
            </div>
            <div class="plaque-meta">
              ${item.client ? `<span class="meta-tag client-${item.client}">${clientLabels[item.client] || item.client}</span>` : ''}
              <span class="meta-tag">${typeLabels[item.type] || item.type}</span>
              ${item.platform ? `<span class="meta-tag">${item.platform}</span>` : ''}
              ${item.book ? `<span class="meta-tag">${item.book}</span>` : ''}
            </div>
            ${item.description ? `<p class="artwork-description">${item.description}</p>` : ''}
            ${item.caption ? `<div class="artwork-caption">"${item.caption}"</div>` : ''}

            ${item.status === 'pending' ? `
              <div class="artwork-actions">
                <button class="action-btn approve" onclick="updateItem(${item.id}, {status:'approved'})">
                  Approva
                </button>
                <button class="action-btn reject" onclick="toggleComment(${item.id})">
                  Rifiuta
                </button>
              </div>
              <div class="comment-section" id="comment-${item.id}">
                <textarea class="comment-input" id="comment-text-${item.id}" placeholder="Note per la revisione..." rows="2"></textarea>
                <button class="action-btn redo" onclick="rejectWithComment(${item.id})">Richiedi Modifiche</button>
              </div>
            ` : item.status === 'rejected' ? `
              <p style="color: var(--reject-red); font-size: 12px; margin-top: 10px;">
                <strong>Note:</strong> ${item.comment || 'Nessun commento'}
              </p>
              <button class="action-btn redo" style="margin-top: 12px; width: 100%;" onclick="updateItem(${item.id}, {status:'pending'})">
                Rimetti in Coda
              </button>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    // Render calendar view
    function renderCalendar() {
      const container = document.getElementById('calendar-view');
      container.style.display = 'block';
      container.classList.add('active');
      document.getElementById('gallery-view').style.display = 'none';
      document.getElementById('history-view').style.display = 'none';

      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth();
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startDay = firstDay.getDay();

      const monthNames = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                         'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];
      const dayNames = ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab'];

      // Find scheduled items by date
      const scheduledByDate = {};
      items.forEach(item => {
        if (item.scheduledFor) {
          const date = new Date(item.scheduledFor).toDateString();
          if (!scheduledByDate[date]) scheduledByDate[date] = [];
          scheduledByDate[date].push(item);
        }
      });

      let html = `
        <div class="calendar-header">
          <h2 class="calendar-title">${monthNames[month]} ${year}</h2>
          <div class="calendar-nav">
            <button onclick="changeMonth(-1)"><</button>
            <button onclick="changeMonth(1)">></button>
          </div>
        </div>
        <div class="calendar-grid">
          ${dayNames.map(d => `<div class="calendar-day-header">${d}</div>`).join('')}
      `;

      // Fill in empty days before start
      for (let i = 0; i < startDay; i++) {
        html += `<div class="calendar-day other-month"></div>`;
      }

      // Fill in days
      for (let day = 1; day <= lastDay.getDate(); day++) {
        const date = new Date(year, month, day);
        const dateStr = date.toDateString();
        const isToday = dateStr === now.toDateString();
        const hasPosts = scheduledByDate[dateStr];

        html += `
          <div class="calendar-day ${isToday ? 'today' : ''} ${hasPosts ? 'has-posts' : ''}"
               onclick="showDayPosts('${dateStr}')">
            ${day}
          </div>
        `;
      }

      html += '</div>';
      container.innerHTML = html;
    }

    // Render history view
    function renderHistory() {
      const container = document.getElementById('history-view');
      container.style.display = 'block';
      container.classList.add('active');
      document.getElementById('gallery-view').style.display = 'none';
      document.getElementById('calendar-view').style.display = 'none';

      const processed = items.filter(i => i.status !== 'pending')
                             .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));

      if (processed.length === 0) {
        container.innerHTML = `
          <div class="empty-gallery">
            <h2>Nessuna cronologia</h2>
            <p>I contenuti approvati/rifiutati appariranno qui</p>
          </div>
        `;
        return;
      }

      container.innerHTML = processed.map(item => `
        <div class="history-item">
          ${item.image
            ? `<img class="history-thumb" src="${item.image}" alt="${item.title}">`
            : `<div class="history-thumb"></div>`
          }
          <div class="history-info">
            <div class="history-title">${item.title}</div>
            <div class="history-meta">
              ${clientLabels[item.client] || 'Generale'} - ${new Date(item.updatedAt).toLocaleDateString('it-IT')}
            </div>
          </div>
          <span class="history-status ${item.status}">${item.status}</span>
        </div>
      `).join('');
    }

    // Update item with animation
    async function updateItem(id, data) {
      const artwork = document.querySelector(`.artwork[data-id="${id}"]`);

      try {
        await fetch(`/api/items/${id}`, {
          method: 'PATCH',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        // Add animation class
        if (artwork) {
          artwork.classList.add(data.status === 'approved' ? 'approved-animation' : 'rejected-animation');
        }

        if (navigator.vibrate) navigator.vibrate(30);
        showToast(data.status === 'approved' ? 'Approvato!' : 'Aggiornato', 'success');

        // Delay reload to show animation
        setTimeout(() => loadItems(), 300);
      } catch (e) {
        showToast('Errore', 'error');
      }
    }

    // Toggle comment section
    function toggleComment(id) {
      const section = document.getElementById(`comment-${id}`);
      section.classList.toggle('visible');
      if (section.classList.contains('visible')) {
        section.querySelector('textarea').focus();
      }
    }

    // Reject with comment
    function rejectWithComment(id) {
      const comment = document.getElementById(`comment-text-${id}`).value;
      updateItem(id, { status: 'rejected', comment });
    }

    // Bulk approve
    async function bulkApprove() {
      if (!confirm('Approvare tutti i contenuti in sospeso?')) return;

      try {
        await fetch('/api/bulk-approve', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            type: currentType !== 'all' ? currentType : null,
            client: currentClient !== 'all' ? currentClient : null
          })
        });
        if (navigator.vibrate) navigator.vibrate([30, 50, 30]);
        showToast('Tutti approvati!', 'success');
        loadItems();
      } catch (e) {
        showToast('Errore', 'error');
      }
    }

    // SWIPE MODE
    function enterSwipeMode() {
      swipeItems = items.filter(i => i.status === 'pending');
      if (swipeItems.length === 0) {
        showToast('Nessun contenuto da approvare', 'error');
        return;
      }

      currentSwipeIndex = 0;
      document.getElementById('swipe-container').classList.add('active');
      renderSwipeCards();
      document.body.style.overflow = 'hidden';
    }

    function exitSwipeMode() {
      document.getElementById('swipe-container').classList.remove('active');
      document.body.style.overflow = '';
      loadItems();
    }

    function renderSwipeCards() {
      const container = document.getElementById('swipe-cards');
      const counter = document.getElementById('swipe-counter');

      if (currentSwipeIndex >= swipeItems.length) {
        exitSwipeMode();
        showToast('Tutti completati!', 'success');
        return;
      }

      counter.textContent = `${currentSwipeIndex + 1} / ${swipeItems.length}`;

      const item = swipeItems[currentSwipeIndex];
      container.innerHTML = `
        <div class="swipe-card" id="current-swipe-card">
          <div class="swipe-overlay approve" id="overlay-approve">SI</div>
          <div class="swipe-overlay reject" id="overlay-reject">NO</div>
          <div class="frame">
            <div class="frame-inner">
              ${item.image
                ? `<img class="artwork-image" src="${item.image}" alt="${item.title}">`
                : `<div class="artwork-image placeholder">No image</div>`
              }
            </div>
          </div>
          <div class="plaque">
            <div class="plaque-header">
              <div class="artwork-title">${item.title}</div>
            </div>
            <div class="plaque-meta">
              ${item.client ? `<span class="meta-tag client-${item.client}">${clientLabels[item.client] || item.client}</span>` : ''}
              <span class="meta-tag">${typeLabels[item.type] || item.type}</span>
            </div>
            ${item.description ? `<p class="artwork-description">${item.description}</p>` : ''}
          </div>
        </div>
      `;

      // Setup touch/drag
      setupSwipeGestures();
    }

    function setupSwipeGestures() {
      const card = document.getElementById('current-swipe-card');
      if (!card) return;

      let startX = 0;
      let currentX = 0;
      let isDragging = false;

      const onStart = (e) => {
        isDragging = true;
        startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
        card.classList.add('dragging');
      };

      const onMove = (e) => {
        if (!isDragging) return;
        currentX = (e.type === 'touchmove' ? e.touches[0].clientX : e.clientX) - startX;

        const rotation = currentX * 0.04;
        const scale = 1 - Math.abs(currentX) * 0.0003;
        card.style.transform = `translateX(${currentX}px) rotate(${rotation}deg) scale(${Math.max(0.95, scale)})`;

        // Show overlays with smooth opacity
        const overlayApprove = document.getElementById('overlay-approve');
        const overlayReject = document.getElementById('overlay-reject');
        const threshold = 60;

        if (currentX > threshold) {
          overlayApprove.style.opacity = Math.min((currentX - threshold) / 80, 1);
          overlayReject.style.opacity = 0;
        } else if (currentX < -threshold) {
          overlayReject.style.opacity = Math.min((-currentX - threshold) / 80, 1);
          overlayApprove.style.opacity = 0;
        } else {
          overlayApprove.style.opacity = 0;
          overlayReject.style.opacity = 0;
        }
      };

      const onEnd = () => {
        if (!isDragging) return;
        isDragging = false;
        card.classList.remove('dragging');

        const threshold = 120;
        const item = swipeItems[currentSwipeIndex];

        if (currentX > threshold) {
          // Approve - fly right
          card.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
          card.style.transform = `translateX(1200px) rotate(40deg) scale(0.8)`;
          card.style.opacity = '0';
          if (navigator.vibrate) navigator.vibrate([20, 30, 20]);
          setTimeout(() => {
            fetch(`/api/items/${item.id}`, {
              method: 'PATCH',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ status: 'approved' })
            });
            currentSwipeIndex++;
            setTimeout(renderSwipeCards, 150);
          }, 200);
        } else if (currentX < -threshold) {
          // Reject - fly left
          card.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
          card.style.transform = `translateX(-1200px) rotate(-40deg) scale(0.8)`;
          card.style.opacity = '0';
          if (navigator.vibrate) navigator.vibrate(50);
          setTimeout(() => {
            fetch(`/api/items/${item.id}`, {
              method: 'PATCH',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ status: 'rejected', comment: 'Rejected via swipe' })
            });
            currentSwipeIndex++;
            setTimeout(renderSwipeCards, 150);
          }, 200);
        } else {
          // Snap back with bounce
          card.style.transition = 'all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)';
          card.style.transform = '';
          document.getElementById('overlay-approve').style.opacity = 0;
          document.getElementById('overlay-reject').style.opacity = 0;
        }

        currentX = 0;
      };

      // Touch events
      card.addEventListener('touchstart', onStart, { passive: true });
      card.addEventListener('touchmove', onMove, { passive: true });
      card.addEventListener('touchend', onEnd);

      // Mouse events
      card.addEventListener('mousedown', onStart);
      document.addEventListener('mousemove', onMove);
      document.addEventListener('mouseup', onEnd);
    }

    // Show toast notification
    function showToast(message, type = 'success') {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.className = `toast ${type} show`;
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Event listeners
    document.querySelectorAll('.client-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.client-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentClient = tab.dataset.client;
        loadItems();
      });
    });

    document.querySelectorAll('.type-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.type-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentType = tab.dataset.type;
        loadItems();
      });
    });

    document.querySelectorAll('.view-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentView = btn.dataset.view;
        render();
      });
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (document.getElementById('swipe-container').classList.contains('active')) {
        if (e.key === 'ArrowRight' || e.key === 'a') {
          // Approve
          const item = swipeItems[currentSwipeIndex];
          if (item) {
            fetch(`/api/items/${item.id}`, {
              method: 'PATCH',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ status: 'approved' })
            });
            currentSwipeIndex++;
            renderSwipeCards();
          }
        } else if (e.key === 'ArrowLeft' || e.key === 'r') {
          // Reject
          const item = swipeItems[currentSwipeIndex];
          if (item) {
            fetch(`/api/items/${item.id}`, {
              method: 'PATCH',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ status: 'rejected' })
            });
            currentSwipeIndex++;
            renderSwipeCards();
          }
        } else if (e.key === 'Escape') {
          exitSwipeMode();
        }
      }
    });

    // Initialize
    init();

    // Auto-refresh every 10 seconds
    setInterval(loadItems, 10000);
  </script>
</body>
</html>
