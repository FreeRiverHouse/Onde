:root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}html,body,#root{margin:0;padding:0;min-height:100vh;min-height:100dvh;width:100%;overflow-x:hidden}h1{font-size:3.2em;line-height:1.1}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media(prefers-color-scheme:light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}*{box-sizing:border-box}.full-page-bg{min-height:100vh;min-height:100dvh;width:100%;background-size:cover;background-position:center;background-repeat:no-repeat;position:relative;overflow:hidden;transition:background-image .5s ease-in-out;display:flex;flex-direction:column;align-items:center;padding:20px;font-family:-apple-system,BlinkMacSystemFont,SF Pro Display,Segoe UI,Roboto,sans-serif}.overlay{position:fixed;inset:0;background:linear-gradient(180deg,#0000004d,#0000001a,#0006);pointer-events:none;z-index:1}.map-overlay{background:linear-gradient(180deg,#1e1432b3,#1e143280,#1e1432cc)}.glass-card{background:#ffffff1a;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:20px;box-shadow:0 8px 32px #0003,inset 0 1px #fff3}.particles{position:fixed;inset:0;pointer-events:none;z-index:2;overflow:hidden}.particle{position:absolute;width:6px;height:6px;background:radial-gradient(circle,rgba(255,215,0,.8) 0%,transparent 70%);border-radius:50%;animation:float-particle 4s ease-in-out infinite}@keyframes float-particle{0%,to{transform:translateY(100vh) scale(0);opacity:0}10%{opacity:1;transform:translateY(90vh) scale(1)}90%{opacity:1;transform:translateY(10vh) scale(1)}to{transform:translateY(0) scale(0);opacity:0}}.header{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;margin-bottom:15px;position:relative;z-index:10;width:100%;max-width:480px}.title{font-size:22px;font-weight:700;color:#fff;margin:0;text-shadow:0 2px 10px rgba(0,0,0,.3);letter-spacing:-.5px}.room-title{font-size:18px}.header-right{display:flex;align-items:center;gap:10px}.lang-toggle,.sound-toggle{background:#ffffff26;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:6px 10px;font-size:20px;cursor:pointer;transition:all .3s ease}.lang-toggle:hover,.sound-toggle:hover{background:#ffffff40;transform:scale(1.1)}.sound-toggle:active{transform:scale(.95)}.weather-toggle{background:#ffffff26;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:6px 10px;font-size:18px;cursor:pointer;transition:all .3s ease;position:relative;display:flex;align-items:center;gap:4px}.weather-toggle:hover{background:#ffffff40;transform:scale(1.1)}.weather-toggle.active{background:linear-gradient(135deg,#64c8ff4d,#96dcff33);border-color:#64c8ff80;box-shadow:0 0 10px #64c8ff4d}.weather-badge{font-size:8px;font-weight:700;background:linear-gradient(135deg,#4caf50,#8bc34a);color:#fff;padding:2px 4px;border-radius:4px;text-transform:uppercase;letter-spacing:.5px;animation:pulse-badge 2s ease-in-out infinite}@keyframes pulse-badge{0%,to{opacity:1}50%{opacity:.7}}.ambient-volume-control{display:flex;align-items:center;gap:6px;background:#ffffff1f;border:1px solid rgba(255,255,255,.18);border-radius:16px;padding:4px 10px;transition:all .3s ease}.ambient-volume-control:hover{background:#fff3}.ambient-icon{font-size:14px;opacity:.9}.ambient-slider{width:60px;height:4px;-webkit-appearance:none;appearance:none;background:#fff3;border-radius:2px;cursor:pointer;transition:all .3s ease}.ambient-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;border-radius:50%;background:linear-gradient(135deg,gold,#ffb700);cursor:pointer;box-shadow:0 2px 4px #0003;transition:all .2s ease}.ambient-slider::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:0 3px 8px #ffd70066}.ambient-slider::-moz-range-thumb{width:12px;height:12px;border-radius:50%;background:linear-gradient(135deg,gold,#ffb700);cursor:pointer;border:none;box-shadow:0 2px 4px #0003}.ambient-slider:disabled{opacity:.4;cursor:not-allowed}.ambient-slider:disabled::-webkit-slider-thumb{background:#888;cursor:not-allowed}.back-btn{background:#ffffff26;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:8px 14px;font-size:16px;color:#fff;cursor:pointer;transition:all .3s ease}.back-btn:hover{background:#ffffff40;transform:scale(1.05)}.coin-container{display:flex;align-items:center;gap:6px;background:#ffd70033;padding:8px 14px;border-radius:20px;border:1px solid rgba(255,215,0,.3)}.coin-icon{font-size:16px;animation:sparkle 2s ease-in-out infinite}.coin-text{color:gold;font-size:18px;font-weight:700;text-shadow:0 0 10px rgba(255,215,0,.5)}@keyframes sparkle{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.2)}}.mini-stats{display:flex;justify-content:center;gap:15px;padding:10px 20px;margin-bottom:15px;position:relative;z-index:10}.mini-stats span{font-size:14px;color:#fff;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.3)}.map-view{padding:0;background:linear-gradient(180deg,#1a1a2e,#16213e,#0f3460)}.house-map-container{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center}.house-map-image{width:100%;height:100%;object-fit:contain;max-height:100vh}.room-hotspot{position:absolute;background:transparent;border:none;border-radius:12px;cursor:pointer;transition:all .3s ease;display:flex;justify-content:center;align-items:flex-end;padding-bottom:8px}.room-hotspot:hover{background:#ffd70033;box-shadow:0 0 30px #ffd70066,inset 0 0 20px #ffd7001a}.room-hotspot:active{transform:scale(.97);background:#ffd7004d}.hotspot-label{opacity:0;padding:6px 12px;font-size:11px;font-weight:600;color:#fff;white-space:nowrap;transition:all .3s ease;border-radius:10px;transform:translateY(5px);background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.room-hotspot:hover .hotspot-label{opacity:1;transform:translateY(0)}.luna-map{position:absolute;z-index:15;transition:left .8s ease-out,top .8s ease-out;cursor:grab;pointer-events:auto;touch-action:none}.luna-map:active{cursor:grabbing}.luna-map.dragging{transition:none;cursor:grabbing;filter:drop-shadow(0 0 30px rgba(255,215,0,.8))}.luna-map-img{width:60px;height:60px;object-fit:cover;border-radius:50%;box-shadow:0 0 20px #ffffff80,0 0 40px #ffd7004d;border:2px solid rgba(255,255,255,.5);transition:transform .2s ease}.luna-map:hover .luna-map-img{transform:scale(1.1)}.luna-map-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:radial-gradient(circle,rgba(255,215,0,.4) 0%,transparent 70%);border-radius:50%;animation:pulse-glow 2s ease-in-out infinite;z-index:-1}.room-hotspot.drag-target{background:#ffd70026;box-shadow:0 0 20px #ffd7004d}.drag-hint{position:absolute;bottom:100px;left:50%;transform:translate(-50%);background:#0009;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:10px 20px;border-radius:20px;color:#fff;font-size:14px;font-weight:500;animation:hint-bounce 2s ease-in-out infinite;z-index:25}@keyframes hint-bounce{0%,to{transform:translate(-50%) translateY(0)}50%{transform:translate(-50%) translateY(-5px)}}.map-header{position:absolute;top:0;left:0;right:0;z-index:20;display:flex;flex-direction:column;align-items:center;padding:15px;background:linear-gradient(180deg,rgba(0,0,0,.5) 0%,transparent 100%)}.map-header .header{margin-bottom:10px}.map-header .mini-stats{margin-bottom:0}.outside-bar{position:absolute;bottom:60px;left:50%;transform:translate(-50%);z-index:20;display:flex;align-items:center;gap:10px;padding:10px 20px}.outside-label{color:#ffffffb3;font-size:14px;font-weight:500}.outside-btn{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:8px 14px;color:#fff;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease}.outside-btn:hover{background:#fff3;transform:translateY(-2px);box-shadow:0 4px 15px #0000004d}.outside-btn:active{transform:scale(.98)}.map-footer{position:absolute;bottom:15px;left:0;right:0;z-index:20}.room-view{justify-content:flex-start}.luna-container{position:absolute;z-index:10;transition:left .5s ease,top .5s ease;display:flex;flex-direction:column;align-items:center}.luna-img{width:140px;height:140px;object-fit:cover;border-radius:50%;box-shadow:0 0 40px #ffffff4d,0 0 80px #ffd70033;transition:all .3s ease}.luna-img.acting{animation:bounce-action .5s ease-in-out}@keyframes bounce-action{0%,to{transform:scale(1)}50%{transform:scale(1.15)}}.luna-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:180px;height:180px;background:radial-gradient(circle,rgba(255,215,0,.3) 0%,transparent 70%);border-radius:50%;animation:pulse-glow 3s ease-in-out infinite;pointer-events:none;z-index:-1}@keyframes pulse-glow{0%,to{opacity:.5;transform:translate(-50%,-50%) scale(1)}50%{opacity:.8;transform:translate(-50%,-50%) scale(1.1)}}.bubble{position:absolute;top:-60px;left:50%;transform:translate(-50%);padding:10px 20px;z-index:20;animation:bubble-in .3s ease-out;white-space:nowrap}.bubble:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid rgba(255,255,255,.1)}@keyframes bubble-in{0%{opacity:0;transform:translate(-50%) scale(.8) translateY(10px)}to{opacity:1;transform:translate(-50%) scale(1) translateY(0)}}.bubble-text{font-size:16px;color:#fff;font-weight:500}.room-actions{position:absolute;bottom:80px;left:50%;transform:translate(-50%);display:flex;gap:15px;z-index:10}.action-btn{padding:16px 24px;border:none;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:4px;transition:all .3s ease;position:relative;overflow:hidden;min-width:120px}.action-btn.secondary{background:#64646433;min-width:100px}.action-btn:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.action-btn:hover:before{left:100%}.action-btn:hover:not(.disabled){transform:translateY(-4px);box-shadow:0 12px 40px #0000004d,0 0 20px #9b59b64d}.action-btn:active:not(.disabled){transform:translateY(-2px) scale(.98)}.action-btn.disabled{opacity:.5;cursor:not-allowed}.action-label{color:#fff;font-size:15px;font-weight:600}.action-cost{color:#ffd700e6;font-size:12px;font-weight:500}.footer{text-align:center;color:#ffffff80;margin:auto 0 0;padding:10px 0;font-size:12px;font-weight:500;position:relative;z-index:10}@media(max-width:400px){.full-page-bg{padding:15px}.title{font-size:18px}.room-grid{gap:10px}.room-card-icon{font-size:32px}.room-card-name{font-size:12px}.luna-img{width:120px;height:120px}.action-btn{min-width:100px;padding:14px 18px}.mini-stats{gap:10px;padding:8px 15px}.mini-stats span{font-size:12px}}@media(max-height:700px){.room-grid{gap:8px}.room-card{aspect-ratio:1.2}.luna-img{width:100px;height:100px}.room-actions{bottom:60px}}.time-morning{--time-overlay: rgba(255, 200, 100, .1)}.time-afternoon{--time-overlay: rgba(255, 220, 150, .05)}.time-evening{--time-overlay: rgba(150, 100, 200, .15)}.time-night{--time-overlay: rgba(30, 30, 80, .3)}.full-page-bg:before{content:"";position:fixed;inset:0;background:var(--time-overlay, transparent);pointer-events:none;z-index:1;transition:background 1s ease}.level-badge{padding:4px 12px;font-size:.85rem;font-weight:700;color:gold;background:#ffd70026;border:1px solid rgba(255,215,0,.3);border-radius:20px}.xp-bar-container{position:relative;width:100%;max-width:300px;height:8px;background:#0000004d;border-radius:10px;overflow:hidden;margin-top:8px}.xp-bar{height:100%;background:linear-gradient(90deg,gold,orange);border-radius:10px;transition:width .5s ease}.xp-text{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:.65rem;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.5)}.mood-display{font-weight:600;color:gold}.luna-mood-indicator,.luna-mood-badge{position:absolute;bottom:-10px;right:-10px;font-size:1.5rem;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));animation:bounce 1s ease infinite}@keyframes bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.luna-img.mood-happy{filter:brightness(1.1) saturate(1.2);animation:happy-bounce 1.5s ease-in-out infinite}.luna-img.mood-happy+.luna-glow{background:radial-gradient(circle,rgba(255,215,0,.5) 0%,rgba(255,165,0,.2) 50%,transparent 70%)}@keyframes happy-bounce{0%,to{transform:scale(1) rotate(0)}25%{transform:scale(1.02) rotate(-2deg)}75%{transform:scale(1.02) rotate(2deg)}}.luna-img.mood-neutral{filter:brightness(1) saturate(1)}.luna-img.mood-neutral+.luna-glow{background:radial-gradient(circle,rgba(180,200,255,.3) 0%,transparent 70%)}.luna-img.mood-sad{filter:brightness(.8) saturate(.6) hue-rotate(-20deg);animation:sad-droop 3s ease-in-out infinite}.luna-img.mood-sad+.luna-glow{background:radial-gradient(circle,rgba(100,149,237,.3) 0%,rgba(70,130,180,.1) 50%,transparent 70%)}@keyframes sad-droop{0%,to{transform:scale(.98) translateY(2px)}50%{transform:scale(.96) translateY(5px)}}.luna-img.mood-sleepy{filter:brightness(.7) saturate(.7) blur(.5px);animation:sleepy-nod 4s ease-in-out infinite}.luna-img.mood-sleepy+.luna-glow{background:radial-gradient(circle,rgba(147,112,219,.3) 0%,rgba(72,61,139,.1) 50%,transparent 70%);animation:pulse-glow 5s ease-in-out infinite}@keyframes sleepy-nod{0%,to{transform:scale(1) rotate(0)}25%{transform:scale(.98) rotate(-3deg) translateY(2px)}75%{transform:scale(.98) rotate(3deg) translateY(2px)}}.luna-img.mood-hungry{filter:brightness(.95) saturate(.9) sepia(.1);animation:hungry-wobble 2s ease-in-out infinite}.luna-img.mood-hungry+.luna-glow{background:radial-gradient(circle,rgba(144,238,144,.3) 0%,rgba(60,179,113,.1) 50%,transparent 70%)}@keyframes hungry-wobble{0%,to{transform:scale(1)}25%{transform:scale(1.01) translate(-2px)}75%{transform:scale(1.01) translate(2px)}}.luna-img.mood-excited{filter:brightness(1.2) saturate(1.4) contrast(1.1);animation:excited-jump .8s ease-in-out infinite}.luna-img.mood-excited+.luna-glow{background:radial-gradient(circle,rgba(255,182,193,.4) 0%,rgba(255,215,0,.3) 30%,rgba(147,112,219,.2) 60%,transparent 70%);animation:rainbow-pulse 1.5s ease-in-out infinite}@keyframes excited-jump{0%,to{transform:scale(1) translateY(0)}50%{transform:scale(1.08) translateY(-8px)}}@keyframes rainbow-pulse{0%,to{opacity:.8;transform:translate(-50%,-50%) scale(1) rotate(0)}50%{opacity:1;transform:translate(-50%,-50%) scale(1.15) rotate(5deg)}}.luna-map-img.mood-happy{filter:brightness(1.1) saturate(1.2)}.luna-map-img.mood-neutral{filter:brightness(1) saturate(1)}.luna-map-img.mood-sad{filter:brightness(.8) saturate(.6) hue-rotate(-20deg)}.luna-map-img.mood-sleepy{filter:brightness(.7) saturate(.7)}.luna-map-img.mood-hungry{filter:brightness(.95) saturate(.9) sepia(.1)}.luna-map-img.mood-excited{filter:brightness(1.2) saturate(1.4) contrast(1.1)}.luna-container.walking{transition:none!important}.luna-container.facing-left .luna-img{transform:scaleX(-1)}.luna-img.walking{animation:walk-bounce .25s ease-in-out infinite}@keyframes walk-bounce{0%,to{transform:translateY(0) rotate(-2deg)}50%{transform:translateY(-6px) rotate(2deg)}}.luna-container.facing-left .luna-img.walking{animation:walk-bounce-left .25s ease-in-out infinite}@keyframes walk-bounce-left{0%,to{transform:scaleX(-1) translateY(0) rotate(2deg)}50%{transform:scaleX(-1) translateY(-6px) rotate(-2deg)}}.walk-dust{position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:40px;height:20px;pointer-events:none}.walk-dust:before,.walk-dust:after{content:"ðŸ’¨";position:absolute;font-size:14px;animation:dust-puff .4s ease-out forwards;opacity:.7}.walk-dust:before{left:0;animation-delay:0s}.walk-dust:after{right:0;animation-delay:.1s}@keyframes dust-puff{0%{transform:translateY(0) scale(.5);opacity:.7}to{transform:translateY(-15px) scale(1);opacity:0}}.tap-indicator{position:absolute;width:30px;height:30px;border:2px solid rgba(255,215,0,.6);border-radius:50%;pointer-events:none;animation:tap-ripple .5s ease-out forwards;z-index:5}@keyframes tap-ripple{0%{transform:translate(-50%,-50%) scale(.5);opacity:1}to{transform:translate(-50%,-50%) scale(2);opacity:0}}.room-view:focus{outline:none}.movement-hint{position:fixed;bottom:120px;left:50%;transform:translate(-50%);background:#0009;padding:8px 16px;border-radius:20px;color:#fff;font-size:.85rem;display:flex;align-items:center;gap:8px;z-index:15;animation:hint-fade 4s ease-in-out forwards}.movement-hint kbd{background:#fff3;padding:2px 6px;border-radius:4px;font-family:monospace;font-size:.75rem}@keyframes hint-fade{0%,80%{opacity:1}to{opacity:0;pointer-events:none}}.time-indicator{font-size:.8rem;padding:4px 10px;background:#ffffff1a;border-radius:12px;color:#ffffffe6}.achievement-popup{position:fixed;top:20px;left:50%;transform:translate(-50%);display:flex;align-items:center;gap:12px;padding:16px 24px;z-index:1000;animation:slideDown .5s ease,pulse .5s ease .5s;cursor:pointer}@keyframes slideDown{0%{transform:translate(-50%) translateY(-100px);opacity:0}to{transform:translate(-50%) translateY(0);opacity:1}}.achievement-icon{font-size:2.5rem;animation:spin 1s ease}@keyframes spin{0%{transform:rotate(-360deg) scale(0)}to{transform:rotate(0) scale(1)}}.achievement-info{display:flex;flex-direction:column}.achievement-title{font-size:.8rem;color:#ffffffb3}.achievement-name{font-size:1.1rem;font-weight:700;color:gold}.daily-reward-overlay{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.daily-reward-popup{display:flex;flex-direction:column;align-items:center;gap:16px;padding:32px 48px;text-align:center;animation:popIn .5s ease}@keyframes popIn{0%{transform:scale(.5);opacity:0}to{transform:scale(1);opacity:1}}.reward-icon{font-size:4rem;animation:float 2s ease-in-out infinite}.reward-title{font-size:1.3rem;font-weight:600;color:#fff}.reward-streak{font-size:1rem;color:gold}.reward-claim-btn{padding:12px 32px;font-size:1.1rem;font-weight:700;color:#1a1a2e;background:linear-gradient(135deg,gold,orange);border:none;border-radius:30px;cursor:pointer;transition:transform .2s,box-shadow .2s}.reward-claim-btn:hover{transform:scale(1.05);box-shadow:0 0 30px #ffd70080}.mini-game-overlay{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:1000}.mini-game-container{width:90%;max-width:400px;padding:20px}.mini-game-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.2)}.mini-game-title{font-size:1.2rem;font-weight:700;color:gold}.mini-game-timer{font-size:1.1rem;color:#ff6b6b;font-weight:600}.mini-game-score{font-size:1rem;color:#fff}.mini-game-area{position:relative;height:300px;background:#0000004d;border-radius:16px;overflow:hidden}.tap-hint{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#ffffff80;font-size:1rem;pointer-events:none}.star-target{position:absolute;font-size:2rem;background:none;border:none;cursor:pointer;transform:translate(-50%,-50%);transition:transform .1s;animation:twinkle .5s ease infinite}.star-target:active{transform:translate(-50%,-50%) scale(1.5)}@keyframes twinkle{0%,to{opacity:1}50%{opacity:.7}}.mini-game-result{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#000000b3;animation:fadeIn .5s ease}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.result-emoji{font-size:4rem;animation:bounce .5s ease}.result-score{font-size:1.5rem;font-weight:700;color:#fff;margin:8px 0}.result-coins{font-size:1.2rem;color:gold}.event-toast{position:fixed;top:80px;left:50%;transform:translate(-50%);padding:12px 24px;font-size:1rem;color:#fff;z-index:100;animation:slideDown .5s ease,fadeOut .5s ease 2.5s forwards}@keyframes fadeOut{to{opacity:0;transform:translate(-50%) translateY(-20px)}}.action-bonus{font-size:.8rem;color:gold;margin-left:8px}.luna-glow{box-shadow:0 0 30px #ffd70066,0 0 60px #ffd70033,0 0 90px #ffd7001a}@media(max-width:768px){.full-page-bg{padding:16px}.header{padding:10px 16px}.title{font-size:20px}.glass-card{border-radius:16px}.action-btn{padding:14px 24px;font-size:15px}.luna-img,.luna-map-img{width:80px;height:80px}}@media(max-width:480px){.full-page-bg{padding:12px}.header{flex-direction:column;gap:10px;padding:8px 12px}.title{font-size:18px;text-align:center}.header-right{width:100%;justify-content:center}.ambient-volume-control{padding:3px 6px}.ambient-slider{width:40px}.mini-stats{font-size:12px;padding:8px 12px;gap:8px;flex-wrap:wrap;justify-content:center}.room-actions{flex-direction:column;gap:10px;width:100%;max-width:280px}.action-btn{width:100%;padding:16px}.luna-img,.luna-map-img{width:70px;height:70px}.luna-container{transform:scale(.9)}.hotspot-label{font-size:10px;padding:4px 8px}.outside-bar{flex-wrap:wrap;justify-content:center;padding:10px;gap:8px}.outside-btn{font-size:12px;padding:8px 12px}.achievement-popup{padding:12px 16px}.achievement-icon{font-size:2rem}.daily-reward-popup{padding:24px 32px}.reward-icon{font-size:3rem}.mini-game-area{height:250px}.xp-bar-container{margin:8px 0}.footer{font-size:11px;margin-top:auto;padding-bottom:10px}}@media(max-width:360px){.title{font-size:16px}.mini-stats span{font-size:11px}.luna-img,.luna-map-img{width:60px;height:60px}.action-btn{padding:14px;font-size:14px}}@media(max-height:600px){.header,.mini-stats{margin-bottom:8px}.luna-container{transform:scale(.8)}.room-actions{margin-top:8px}.footer{display:none}}.room-view:after{content:"";position:fixed;top:0;right:20%;width:300px;height:100%;background:linear-gradient(180deg,rgba(255,248,220,.15) 0%,rgba(255,248,220,.05) 50%,transparent 100%);transform:skew(-15deg);pointer-events:none;z-index:3;opacity:0;transition:opacity .5s ease}.time-morning .room-view:after,.time-afternoon .room-view:after{opacity:1}.dust-particles{position:fixed;inset:0;pointer-events:none;z-index:4;overflow:hidden}.dust-mote{position:absolute;width:3px;height:3px;background:radial-gradient(circle,rgba(255,248,220,.9) 0%,transparent 70%);border-radius:50%;animation:float-dust 8s ease-in-out infinite}.dust-mote:nth-child(1){left:15%;top:20%;animation-delay:0s;animation-duration:7s}.dust-mote:nth-child(2){left:35%;top:40%;animation-delay:1s;animation-duration:9s}.dust-mote:nth-child(3){left:55%;top:15%;animation-delay:2s;animation-duration:6s}.dust-mote:nth-child(4){left:75%;top:35%;animation-delay:3s;animation-duration:8s}.dust-mote:nth-child(5){left:25%;top:60%;animation-delay:4s;animation-duration:10s}.dust-mote:nth-child(6){left:65%;top:55%;animation-delay:5s;animation-duration:7s}.dust-mote:nth-child(7){left:45%;top:25%;animation-delay:1.5s;animation-duration:11s}.dust-mote:nth-child(8){left:85%;top:45%;animation-delay:2.5s;animation-duration:9s}@keyframes float-dust{0%,to{transform:translate(0) scale(1);opacity:.3}25%{transform:translate(20px,-30px) scale(1.2);opacity:.6}50%{transform:translate(-15px,-60px) scale(.8);opacity:.8}75%{transform:translate(10px,-40px) scale(1.1);opacity:.5}}.time-morning .dust-particles,.time-afternoon .dust-particles{opacity:1}.time-evening .dust-particles,.time-night .dust-particles{opacity:.3}.room-vignette{position:fixed;inset:0;pointer-events:none;z-index:2;background:radial-gradient(ellipse at center,transparent 0%,transparent 60%,rgba(0,0,0,.2) 80%,rgba(0,0,0,.4) 100%)}.time-night .room-vignette{background:radial-gradient(ellipse at center,transparent 0%,transparent 50%,rgba(10,10,30,.3) 70%,rgba(10,10,30,.6) 100%)}.room-bedroom .room-ambient{position:fixed;inset:0;pointer-events:none;z-index:2;background:radial-gradient(circle at 70% 30%,rgba(255,200,150,.1) 0%,transparent 40%)}.room-kitchen .room-ambient{position:fixed;inset:0;pointer-events:none;z-index:2;background:linear-gradient(to top,rgba(255,245,238,.1) 0%,transparent 30%)}.room-kitchen .steam-effect{position:fixed;bottom:40%;left:50%;width:60px;height:80px;pointer-events:none;z-index:5}.steam-effect:before,.steam-effect:after{content:"";position:absolute;width:20px;height:20px;background:#ffffff26;border-radius:50%;filter:blur(8px);animation:steam-rise 3s ease-out infinite}.steam-effect:after{left:20px;animation-delay:1s}@keyframes steam-rise{0%{transform:translateY(0) scale(1);opacity:.6}to{transform:translateY(-60px) scale(2);opacity:0}}.room-garden .fireflies{position:fixed;inset:0;pointer-events:none;z-index:5}.firefly{position:absolute;width:6px;height:6px;background:radial-gradient(circle,rgba(255,255,150,.9) 0%,rgba(200,255,100,.5) 50%,transparent 70%);border-radius:50%;animation:firefly-float 6s ease-in-out infinite;opacity:0}.time-evening .room-garden .firefly,.time-night .room-garden .firefly{opacity:1}.firefly:nth-child(1){left:10%;top:30%;animation-delay:0s}.firefly:nth-child(2){left:30%;top:50%;animation-delay:1s}.firefly:nth-child(3){left:60%;top:25%;animation-delay:2s}.firefly:nth-child(4){left:80%;top:45%;animation-delay:3s}.firefly:nth-child(5){left:20%;top:70%;animation-delay:4s}.firefly:nth-child(6){left:70%;top:60%;animation-delay:5s}@keyframes firefly-float{0%,to{transform:translate(0);opacity:.8}25%{transform:translate(15px,-20px);opacity:.3}50%{transform:translate(-10px,-10px);opacity:1}75%{transform:translate(20px,5px);opacity:.5}}.room-bathroom .steam-overlay{position:fixed;inset:0;pointer-events:none;z-index:3;background:linear-gradient(to top,rgba(200,220,255,.15) 0%,rgba(200,220,255,.05) 30%,transparent 50%);animation:steam-pulse 4s ease-in-out infinite}@keyframes steam-pulse{0%,to{opacity:.6}50%{opacity:1}}.room-living .tv-glow{position:fixed;top:30%;left:50%;transform:translate(-50%);width:200px;height:150px;pointer-events:none;z-index:3;background:radial-gradient(ellipse at center,rgba(100,150,255,.15) 0%,transparent 70%);animation:tv-flicker .1s ease-in-out infinite}@keyframes tv-flicker{0%,to{opacity:.8}50%{opacity:1}}.room-garage .industrial-light{position:fixed;top:10%;left:50%;transform:translate(-50%);width:100px;height:200px;pointer-events:none;z-index:3;background:linear-gradient(to bottom,rgba(255,250,230,.3) 0%,rgba(255,250,230,.1) 50%,transparent 100%)}.room-shop .spotlights{position:fixed;inset:0;pointer-events:none;z-index:3;background:radial-gradient(circle at 30% 30%,rgba(255,200,220,.1) 0%,transparent 30%),radial-gradient(circle at 70% 40%,rgba(200,220,255,.1) 0%,transparent 30%),radial-gradient(circle at 50% 70%,rgba(255,230,200,.1) 0%,transparent 30%)}.room-supermarket .fluorescent{position:fixed;inset:0;pointer-events:none;z-index:3;background:linear-gradient(to bottom,#f0ffff1a,#f0ffff0d);animation:flicker 8s ease-in-out infinite}@keyframes flicker{0%,95%,to{opacity:1}96%,97%{opacity:.8}}.room-attic .attic-ambiance{position:fixed;inset:0;pointer-events:none;z-index:3;background:radial-gradient(circle at 20% 20%,rgba(255,200,150,.15) 0%,transparent 40%),radial-gradient(circle at 80% 30%,rgba(200,180,255,.1) 0%,transparent 30%)}.room-attic .cobweb-effect{position:fixed;top:0;right:0;width:150px;height:150px;pointer-events:none;z-index:4;background:radial-gradient(ellipse at 100% 0%,rgba(255,255,255,.1) 0%,transparent 70%);opacity:.6}.room-attic .cobweb-effect:before{content:"";position:absolute;top:0;left:0;width:100px;height:100px;background:linear-gradient(45deg,transparent 40%,rgba(255,255,255,.05) 50%,transparent 60%),linear-gradient(-45deg,transparent 40%,rgba(255,255,255,.05) 50%,transparent 60%)}.room-attic .dust-mote{background:#ffdcb499;animation-duration:10s!important}.room-basement .basement-ambiance{position:fixed;inset:0;pointer-events:none;z-index:3;background:linear-gradient(to bottom,#28283233,#1e1e284d)}.room-basement .workshop-light{position:fixed;top:5%;left:50%;transform:translate(-50%);width:120px;height:250px;pointer-events:none;z-index:4;background:linear-gradient(to bottom,rgba(255,240,200,.4) 0%,rgba(255,240,200,.15) 40%,transparent 100%);animation:workshop-light-swing 4s ease-in-out infinite}@keyframes workshop-light-swing{0%,to{transform:translate(-50%) rotate(-2deg)}50%{transform:translate(-50%) rotate(2deg)}}.room-basement .pipes-ambiance{position:fixed;bottom:0;left:0;right:0;height:20%;pointer-events:none;z-index:4;background:linear-gradient(to top,rgba(100,100,120,.1) 0%,transparent 100%)}.room-depth-shadow{position:fixed;bottom:0;left:0;right:0;height:30%;pointer-events:none;z-index:2;background:linear-gradient(to top,rgba(0,0,0,.15) 0%,transparent 100%)}.window-reflection{position:fixed;top:10%;right:10%;width:150px;height:200px;pointer-events:none;z-index:3;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,transparent 50%);clip-path:polygon(10% 0%,90% 0%,100% 100%,0% 100%);opacity:0}.time-morning .window-reflection,.time-afternoon .window-reflection{opacity:1}.ambient-breathe{animation:ambient-breathe 6s ease-in-out infinite}@keyframes ambient-breathe{0%,to{filter:brightness(1)}50%{filter:brightness(1.03)}}.room-bg-blur{filter:blur(.5px);transition:filter .5s ease}.room-bg-blur:hover{filter:blur(0)}.parallax-layer{will-change:transform;transition:transform .3s ease-out}.parallax-layer.foreground{transform:translateZ(20px) scale(1.05)}.parallax-layer.midground{transform:translateZ(10px) scale(1.02)}.parallax-layer.background{transform:translateZ(0)}.time-morning .full-page-bg{filter:saturate(1.1) brightness(1.05)}.time-morning:before{background:linear-gradient(135deg,rgba(255,200,100,.1) 0%,transparent 50%)!important}.time-afternoon .full-page-bg{filter:saturate(1.05) brightness(1.02)}.time-evening .full-page-bg{filter:saturate(.95) brightness(.95) sepia(.1)}.time-evening:before{background:linear-gradient(180deg,#ff966426,#6432961a)!important}.time-night .full-page-bg{filter:saturate(.8) brightness(.8) hue-rotate(10deg)}.time-night:before{background:linear-gradient(180deg,#3232644d,#14143c66)!important}.time-night .room-view:after{background:radial-gradient(circle at 20% 20%,rgba(200,220,255,.1) 0%,transparent 40%);opacity:1;transform:none;width:100%}@media(max-width:768px){.dust-particles,.fireflies,.steam-effect,.tv-glow,.window-reflection{display:none}.room-vignette{background:radial-gradient(ellipse at center,transparent 0%,transparent 70%,rgba(0,0,0,.2) 100%)}}@media(prefers-reduced-motion:reduce){.dust-mote,.firefly,.steam-effect:before,.steam-effect:after,.tv-glow,.fluorescent{animation:none!important}}.pet-heart{position:absolute;font-size:2rem;pointer-events:none;z-index:100;text-shadow:0 0 10px rgba(255,100,150,.8),0 0 20px rgba(255,150,200,.5);filter:drop-shadow(0 0 5px rgba(255,100,150,.6))}.luna-container{cursor:pointer}.luna-container:hover .luna-img{transform:scale(1.05);transition:transform .2s ease}.luna-container:active .luna-img{transform:scale(.95)}.welcome-back-overlay{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.welcome-back-popup{text-align:center;padding:2rem;border-radius:24px;max-width:340px;background:linear-gradient(145deg,#3c2864f2,#1e143cf2);border:2px solid rgba(255,200,255,.3);box-shadow:0 20px 60px #00000080,0 0 40px #b464ff4d,inset 0 0 30px #ffffff0d}.welcome-emoji{font-size:4rem;display:block;margin-bottom:.5rem;animation:welcomeBounce 1s ease-in-out infinite}@keyframes welcomeBounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.welcome-title{font-size:1.5rem;color:#fff;margin:0 0 .5rem;text-shadow:0 2px 10px rgba(180,100,255,.5)}.welcome-time{font-size:.9rem;color:#ffffffb3;margin:0 0 .3rem}.welcome-visits{font-size:.85rem;color:#ffc864e6;margin:0 0 1rem}.visit-star{margin-left:.3rem;animation:starSpin 2s linear infinite}@keyframes starSpin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.welcome-warning{font-size:.85rem;color:#f99;background:#ff646426;padding:.5rem .8rem;border-radius:8px;margin:0 0 1rem}.welcome-btn{background:linear-gradient(135deg,#9b59b6,#8e44ad);color:#fff;border:none;padding:.8rem 2rem;font-size:1.1rem;border-radius:50px;cursor:pointer;font-weight:700;box-shadow:0 4px 15px #9b59b666;transition:all .2s ease}.welcome-btn:hover{transform:scale(1.05);box-shadow:0 6px 20px #9b59b699}.welcome-btn:active{transform:scale(.95)}.stat-bars{display:flex;flex-direction:column;gap:.4rem;padding:.8rem;background:#0000004d;border-radius:12px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.stat-bar-item{display:flex;align-items:center;gap:.5rem}.stat-bar-icon{font-size:1rem;width:1.5rem;text-align:center}.stat-bar-track{flex:1;height:8px;background:#ffffff26;border-radius:4px;overflow:hidden;position:relative}.stat-bar-fill{height:100%;border-radius:4px;transition:width .3s ease,background .3s ease}.stat-bar-fill.health{background:linear-gradient(90deg,#2ecc71,#27ae60)}.stat-bar-fill.hunger{background:linear-gradient(90deg,#f39c12,#e67e22)}.stat-bar-fill.energy{background:linear-gradient(90deg,#3498db,#2980b9)}.stat-bar-fill.happiness{background:linear-gradient(90deg,#e91e63,#c2185b)}.stat-bar-fill.low{animation:statPulse 1s ease-in-out infinite}@keyframes statPulse{0%,to{opacity:1}50%{opacity:.6}}.stat-bar-value{font-size:.7rem;color:#fffc;width:2rem;text-align:right}.pet-naming-overlay{position:fixed;inset:0;background:linear-gradient(180deg,#1e143cf2,#321e50f2);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.pet-naming-modal{background:#ffffff1f;padding:2rem 2.5rem;border-radius:24px;text-align:center;max-width:320px;width:100%}.pet-naming-emoji{font-size:4rem;display:block;margin-bottom:1rem;animation:petBounce 1s ease-in-out infinite}@keyframes petBounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.pet-naming-title{font-size:1.4rem;color:#fff;margin:0 0 1.5rem;font-weight:600}.pet-naming-input{width:100%;padding:.9rem 1rem;font-size:1.1rem;border:2px solid rgba(255,255,255,.3);border-radius:12px;background:#ffffff1a;color:#fff;text-align:center;outline:none;transition:border-color .2s,background .2s}.pet-naming-input::placeholder{color:#ffffff80}.pet-naming-input:focus{border-color:#9b59b6cc;background:#ffffff26}.pet-naming-buttons{display:flex;flex-direction:column;gap:.8rem;margin-top:1.5rem}.pet-naming-btn{padding:.9rem 1.5rem;font-size:1rem;border:none;border-radius:50px;cursor:pointer;font-weight:700;transition:all .2s ease}.pet-naming-btn.confirm{background:linear-gradient(135deg,#9b59b6,#8e44ad);color:#fff;box-shadow:0 4px 15px #9b59b666}.pet-naming-btn.confirm:hover{transform:scale(1.03);box-shadow:0 6px 20px #9b59b699}.pet-naming-btn.skip{background:#ffffff1a;color:#ffffffb3;border:1px solid rgba(255,255,255,.2)}.pet-naming-btn.skip:hover{background:#ffffff26;color:#fff}.pet-naming-btn:active{transform:scale(.97)}.pet-name-badge{display:inline-flex;align-items:center;gap:.3rem;background:#9b59b64d;padding:.4rem .8rem;border-radius:20px;font-size:.9rem;color:#fff;font-weight:500;border:1px solid rgba(155,89,182,.4);margin-left:.5rem}.pet-name-badge.small{font-size:.75rem;padding:.3rem .6rem}.luna-name-label{position:absolute;bottom:-20px;left:50%;transform:translate(-50%);background:#0009;color:#fff;padding:.2rem .6rem;border-radius:10px;font-size:.7rem;font-weight:500;white-space:nowrap;border:1px solid rgba(255,255,255,.2)}.interactive-objects-layer{position:absolute;inset:0;pointer-events:none;z-index:15}.interactive-object{position:absolute;transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;gap:4px;background:#ffffff26;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:2px solid rgba(255,255,255,.3);border-radius:16px;padding:8px 12px;cursor:pointer;pointer-events:auto;transition:all .3s ease;box-shadow:0 4px 16px #0003}.interactive-object:hover{background:#ffffff40;border-color:#ffffff80;box-shadow:0 8px 24px #0000004d,0 0 20px #ffd7004d}.interactive-object.active{transform:translate(-50%,-50%) scale(1.1);background:#ffd7004d;border-color:#ffd70099}.interactive-object.cooldown{opacity:.5;filter:grayscale(.5)}.interactive-object.locked{opacity:.4;filter:grayscale(.8)}.object-small{padding:6px 10px}.object-small .object-icon{font-size:1.5rem}.object-medium .object-icon{font-size:2rem}.object-large{padding:12px 16px}.object-large .object-icon{font-size:2.5rem}.object-icon{display:block;line-height:1;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));animation:float-gentle 3s ease-in-out infinite}@keyframes float-gentle{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.object-label{font-size:.65rem;font-weight:600;color:#fff;text-shadow:0 1px 4px rgba(0,0,0,.5);opacity:0;transition:opacity .2s ease;white-space:nowrap;max-width:80px;overflow:hidden;text-overflow:ellipsis}.interactive-object:hover .object-label{opacity:1}.object-badge{position:absolute;top:-8px;right:-8px;background:linear-gradient(135deg,#ff6b6b,#feca57);border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.7rem;box-shadow:0 2px 8px #ff6b6b66;animation:pulse-badge 2s ease-in-out infinite}@keyframes pulse-badge{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}.object-lock{position:absolute;bottom:-8px;right:-8px;background:#0009;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:.6rem}.object-glow{position:absolute;inset:-4px;border-radius:20px;background:radial-gradient(circle,rgba(255,215,0,.2) 0%,transparent 70%);opacity:0;transition:opacity .3s ease;pointer-events:none}.interactive-object:hover .object-glow{opacity:1;animation:glow-pulse 1.5s ease-in-out infinite}@keyframes glow-pulse{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}}.surprise-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:100;padding:20px 32px;font-size:1.2rem;font-weight:600;text-align:center;color:#fff;background:linear-gradient(135deg,#ffd7004d,#ff6b6b4d);border:2px solid rgba(255,255,255,.4);border-radius:20px;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);box-shadow:0 8px 32px #0000004d,0 0 40px #ffd70033;animation:sparkle .5s ease-out}@keyframes sparkle{0%{box-shadow:0 8px 32px #0000004d,0 0 #ffd70000}50%{box-shadow:0 8px 32px #0000004d,0 0 60px #ffd70080}to{box-shadow:0 8px 32px #0000004d,0 0 40px #ffd70033}}.story-modal-overlay{position:fixed;inset:0;background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:90;display:flex;align-items:center;justify-content:center;padding:20px}.story-modal{background:linear-gradient(135deg,#2d1b4e,#1a1a2e);border:2px solid rgba(255,255,255,.2);border-radius:24px;padding:32px;max-width:400px;text-align:center;color:#fff;box-shadow:0 16px 64px #0006,0 0 40px #8a2be233}.story-text{font-size:1.1rem;line-height:1.6;margin-bottom:20px}.story-close-btn{background:linear-gradient(135deg,#8b5cf6,#6366f1);color:#fff;border:none;border-radius:12px;padding:10px 24px;font-size:1rem;font-weight:600;cursor:pointer;transition:transform .2s ease,box-shadow .2s ease}.story-close-btn:hover{transform:scale(1.05);box-shadow:0 4px 16px #8b5cf666}@media(max-width:600px){.interactive-object{padding:6px 8px}.object-small .object-icon{font-size:1.2rem}.object-medium .object-icon{font-size:1.6rem}.object-large .object-icon{font-size:2rem}.object-label{font-size:.55rem}.surprise-popup{padding:16px 24px;font-size:1rem;max-width:90%}.story-modal{padding:24px}.story-text{font-size:1rem}}.objects-hint{position:absolute;bottom:120px;left:50%;transform:translate(-50%);background:#ffffff26;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:20px;padding:8px 16px;color:#fff;font-size:.8rem;display:flex;align-items:center;gap:8px;animation:hint-bounce 2s ease-in-out infinite;z-index:5}@keyframes hint-bounce{0%,to{transform:translate(-50%) translateY(0)}50%{transform:translate(-50%) translateY(-8px)}}.objects-hint-icon{animation:point-up 1s ease-in-out infinite}@keyframes point-up{0%,to{transform:translateY(0)}50%{transform:translateY(-4px)}}.library-books-container{position:fixed;inset:0;background:linear-gradient(135deg,#1a1a2e,#16213e,#0f3460);display:flex;flex-direction:column;align-items:center;padding:1rem;overflow-y:auto;z-index:100}.library-header{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:800px;padding:.75rem 1rem;margin-bottom:1.5rem;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;border:1px solid rgba(255,255,255,.2)}.library-title{font-size:1.25rem;font-weight:700;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.3)}.coins-display{display:flex;align-items:center;gap:.5rem;font-size:1.1rem;font-weight:600;color:gold}.coin-icon{font-size:1.25rem}.bookshelf{width:100%;max-width:700px;display:flex;flex-direction:column;gap:.5rem;margin-bottom:1.5rem}.shelf-row{display:flex;justify-content:center;gap:.75rem;padding:0 1rem;min-height:120px;align-items:flex-end}.shelf-wood{height:16px;background:linear-gradient(180deg,#8b4513,#654321,#4a2c17);border-radius:4px;box-shadow:0 4px 8px #0006,inset 0 2px 4px #ffffff1a;margin-top:-8px}.book-spine{width:70px;height:110px;border:none;border-radius:4px 8px 8px 4px;cursor:pointer;display:flex;align-items:center;justify-content:center;position:relative;box-shadow:2px 4px 8px #0006,inset 2px 0 4px #fff3;transition:all .3s ease;overflow:hidden}.book-spine:before{content:"";position:absolute;left:0;top:0;bottom:0;width:4px;background:linear-gradient(90deg,rgba(0,0,0,.3) 0%,transparent 100%)}.book-spine:after{content:"";position:absolute;right:0;top:0;bottom:0;width:8px;background:linear-gradient(90deg,transparent 0%,rgba(0,0,0,.2) 100%);border-radius:0 8px 8px 0}.book-spine-title{writing-mode:vertical-rl;text-orientation:mixed;font-size:.65rem;font-weight:600;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.5);padding:.5rem;max-height:90%;overflow:hidden;text-overflow:ellipsis}.book-unlocked-badge{position:absolute;top:4px;right:4px;background:#4caf50;color:#fff;font-size:.6rem;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center}.library-hint{color:#ffffffb3;font-size:.9rem;margin-bottom:1.5rem;animation:pulse 2s infinite}@keyframes pulse{0%,to{opacity:.7}50%{opacity:1}}.luna-reading{position:relative;display:flex;flex-direction:column;align-items:center;gap:1rem}.luna-library-img{width:100px;height:100px;border-radius:50%;object-fit:cover;border:4px solid rgba(255,255,255,.3);box-shadow:0 4px 16px #0000004d;animation:float 3s ease-in-out infinite}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.luna-speech-bubble{background:#ffffff26;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:16px;padding:.75rem 1.25rem;color:#fff;font-size:.95rem;max-width:280px;text-align:center;border:1px solid rgba(255,255,255,.2)}.book-reader-container{position:fixed;inset:0;background:linear-gradient(135deg,#2d1b4e,#1a1a2e);display:flex;flex-direction:column;align-items:center;padding:1rem;z-index:100}.book-reader-header{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:600px;padding:.5rem 1rem;margin-bottom:1rem;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:12px}.book-reader-title{font-size:1rem;font-weight:600;color:#fff;flex:1;text-align:center;margin:0 1rem}.page-counter{color:#ffffffb3;font-size:.85rem}.book-open{display:flex;width:100%;max-width:600px;height:350px;background:#f5f0e6;border-radius:8px;box-shadow:0 10px 40px #00000080,inset 0 0 20px #0000001a;overflow:hidden;position:relative}.book-page{flex:1;padding:1.5rem;display:flex;align-items:center;justify-content:center;background:linear-gradient(90deg,#f9f6f0,#fff,#f9f6f0)}.left-page{border-right:1px solid rgba(0,0,0,.1);background:linear-gradient(90deg,#ebe7dc,#f5f0e6 20%,#faf8f3)}.right-page{background:linear-gradient(90deg,#faf8f3,#f5f0e6 80%,#ebe7dc)}.book-spine-center{width:20px;background:linear-gradient(90deg,#0000001a,#0003 30%,#0000001a,#0003 70%,#0000001a);box-shadow:inset 0 0 10px #0003}.page-content{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.page-text{font-family:Georgia,serif;font-size:1.1rem;line-height:1.8;color:#333;text-align:center;max-width:90%}.book-cover-mini{text-align:center;color:#333}.book-cover-mini .cover-emoji{font-size:3rem;display:block;margin-bottom:1rem}.book-cover-mini h3{font-size:1rem;font-weight:600;margin-bottom:.5rem}.book-author{font-size:.85rem;color:#666;font-style:italic}.unlock-prompt{text-align:center;padding:1rem}.lock-icon{font-size:2.5rem;display:block;margin-bottom:.75rem}.unlock-prompt p{color:#333;font-size:1rem;margin-bottom:1rem}.unlock-options{display:flex;flex-direction:column;gap:.5rem;align-items:center}.unlock-btn{padding:.6rem 1.25rem;border:none;border-radius:20px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .3s ease}.unlock-btn.coins-btn{background:linear-gradient(135deg,gold,#ffb300);color:#333}.unlock-btn.coins-btn:disabled{opacity:.5;cursor:not-allowed}.unlock-btn.buy-btn{background:linear-gradient(135deg,#4caf50,#45a049);color:#fff}.unlock-btn:hover:not(:disabled){transform:scale(1.05)}.or-text{color:#666;font-size:.85rem}.book-navigation{display:flex;justify-content:center;gap:1rem;margin-top:1.5rem;width:100%;max-width:400px}.nav-btn{padding:.75rem 1.5rem;border:none;border-radius:25px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.prev-btn{background:#fff3;color:#fff}.next-btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.finish-btn{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;animation:glow 2s infinite}@keyframes glow{0%,to{box-shadow:0 0 10px #f093fb80}50%{box-shadow:0 0 20px #f093fbcc}}.nav-btn:disabled{opacity:.4;cursor:not-allowed}.nav-btn:hover:not(:disabled){transform:scale(1.05)}.book-info{display:flex;gap:1.5rem;margin-top:1rem;padding:.5rem 1rem;background:#ffffff1a;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:12px;color:#fffc;font-size:.85rem}.category-badge{font-size:1.1rem}.back-btn{background:#ffffff26;border:none;border-radius:10px;padding:.5rem .75rem;color:#fff;font-size:1rem;cursor:pointer;transition:all .3s ease}.back-btn:hover{background:#ffffff40}@media(max-width:600px){.book-spine{width:55px;height:90px}.book-spine-title{font-size:.55rem}.book-open{height:280px}.page-text{font-size:.95rem}.library-title{font-size:1rem}.shelf-row{gap:.5rem}}
