(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{63:(e,t,a)=>{"use strict";var n=a(7260);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}})},4094:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(5155),s=a(2115),l=a(63),c=a(2619),i=a.n(c),o=a(1865);let r={};function d(){var e,t;let a=(0,l.useParams)(),c=(null==a?void 0:a.id)||"",[o,d]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),[x,f]=(0,s.useState)(null),[u,b]=(0,s.useState)(19),[g,p]=(0,s.useState)(0),[j,N]=(0,s.useState)(!1),[v,w]=(0,s.useState)(0),[y,C]=(0,s.useState)("notte"),k=(0,s.useRef)(null),B=r[c];(0,s.useEffect)(()=>{let e=()=>{if(!k.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:a}=document.documentElement;w(Math.min(100,Math.max(0,e/(t-a)*100)))};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),(0,s.useEffect)(()=>{let e=localStorage.getItem("onde-reader-fontsize"),t=localStorage.getItem("onde-reader-theme");e&&b(parseInt(e)),t&&C(t)},[]),(0,s.useEffect)(()=>{localStorage.setItem("onde-reader-fontsize",u.toString()),localStorage.setItem("onde-reader-theme",y)},[u,y]),(0,s.useEffect)(()=>{if(c){if(!(null==B?void 0:B.gutenberg)){f("Contenuto in arrivo"),m(!1);return}(async()=>{try{let e=await fetch("/api/book/".concat(c));if(!e.ok)throw Error("Non disponibile");let t=await e.json();d(t)}catch(e){f("Impossibile caricare il libro")}finally{m(!1)}})()}},[B,c]);let D={notte:{bg:"bg-gradient-to-b from-[#0a1628] to-[#0d1f3c]",text:"text-[#e8f4f8]",header:"bg-[#0a1628]/95",border:"border-[#2dd4bf]/20",accent:"text-[#fbbf24]",accentBg:"bg-[#fbbf24]/15",highlight:"text-[#2dd4bf]",highlightBg:"bg-[#2dd4bf]/10",muted:"text-[#94a3b8]",icon:"\uD83C\uDF19"},giorno:{bg:"bg-gradient-to-b from-[#f0fdfa] to-[#ffffff]",text:"text-[#134e4a]",header:"bg-[#f0fdfa]/95",border:"border-[#14b8a6]/20",accent:"text-[#d97706]",accentBg:"bg-[#d97706]/10",highlight:"text-[#0d9488]",highlightBg:"bg-[#0d9488]/10",muted:"text-[#5eead4]",icon:"☀️"},seppia:{bg:"bg-gradient-to-b from-[#fef3e2] to-[#fefaf6]",text:"text-[#44403c]",header:"bg-[#fef3e2]/95",border:"border-[#d97706]/20",accent:"text-[#b45309]",accentBg:"bg-[#b45309]/10",highlight:"text-[#0f766e]",highlightBg:"bg-[#0f766e]/10",muted:"text-[#a8a29e]",icon:"\uD83D\uDCDC"}}[y];if(!B)return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-[#0a1628] to-[#0d1f3c] flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center px-4",children:[(0,n.jsx)("div",{className:"text-6xl mb-6",children:"\uD83D\uDCDA"}),(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4 text-white",children:"Libro non trovato"}),(0,n.jsx)(i(),{href:"/catalogo",className:"text-[#2dd4bf] hover:text-[#fbbf24] transition font-medium",children:"← Torna alla Biblioteca"})]})});let S=o?Math.ceil(o.wordCount/200):0;return(0,n.jsxs)("div",{className:"min-h-screen ".concat(D.bg," transition-all duration-500"),children:[(0,n.jsx)("div",{className:"fixed top-0 left-0 right-0 h-1 bg-black/10 z-50",children:(0,n.jsx)("div",{className:"h-full bg-gradient-to-r from-[#2dd4bf] via-[#fbbf24] to-[#f59e0b] transition-all duration-150",style:{width:"".concat(v,"%")}})}),(0,n.jsx)("header",{className:"sticky top-0 ".concat(D.header," backdrop-blur-md ").concat(D.border," border-b z-40"),children:(0,n.jsx)("div",{className:"max-w-3xl mx-auto px-4 py-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(i(),{href:"/catalogo",className:"".concat(D.highlight," text-sm font-medium hover:").concat(D.accent," transition flex items-center gap-2"),children:[(0,n.jsx)("span",{children:"←"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Biblioteca"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:()=>{let e=["notte","giorno","seppia"],t=(e.indexOf(y)+1)%e.length;C(e[t])},className:"w-9 h-9 rounded-full ".concat(D.highlightBg," ").concat(D.highlight," text-base flex items-center justify-center hover:scale-110 transition-transform"),"aria-label":"Cambia tema",children:D.icon}),(0,n.jsx)("button",{onClick:()=>b(e=>Math.max(14,e-2)),className:"w-9 h-9 rounded-full ".concat(D.accentBg," ").concat(D.accent," text-sm font-bold hover:scale-110 transition-transform"),"aria-label":"Riduci font",children:"A-"}),(0,n.jsx)("button",{onClick:()=>b(e=>Math.min(28,e+2)),className:"w-9 h-9 rounded-full ".concat(D.accentBg," ").concat(D.accent," text-sm font-bold hover:scale-110 transition-transform"),"aria-label":"Ingrandisci font",children:"A+"}),o&&o.chapters.length>1&&(0,n.jsx)("button",{onClick:()=>N(!j),className:"w-9 h-9 rounded-full ".concat(D.highlightBg," ").concat(D.highlight," text-sm font-bold hover:scale-110 transition-transform"),"aria-label":"Indice",children:"☰"})]})]})})}),j&&o&&o.chapters.length>1&&(0,n.jsxs)("div",{className:"fixed inset-0 z-30",onClick:()=>N(!1),children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-[#0a1628]/60 backdrop-blur-sm"}),(0,n.jsx)("aside",{className:"absolute right-0 top-0 bottom-0 w-80 max-w-[85vw] ".concat(D.bg," ").concat(D.border," border-l shadow-2xl overflow-y-auto"),onClick:e=>e.stopPropagation(),children:(0,n.jsxs)("div",{className:"p-5",children:[(0,n.jsxs)("h3",{className:"font-bold text-lg mb-5 ".concat(D.accent," flex items-center gap-2"),children:[(0,n.jsx)("span",{children:"\uD83D\uDCD6"})," Indice"]}),(0,n.jsx)("nav",{className:"space-y-1",children:o.chapters.map((e,t)=>(0,n.jsx)("button",{onClick:()=>{p(t),N(!1),window.scrollTo({top:0,behavior:"smooth"})},className:"w-full text-left px-4 py-3 rounded-xl text-sm transition-all ".concat(g===t?"".concat(D.highlightBg," ").concat(D.highlight," font-medium"):"".concat(D.text," opacity-70 hover:opacity-100 hover:").concat(D.accentBg)),children:e.title||"Sezione ".concat(t+1)},t))})]})})]}),(0,n.jsx)("div",{className:"".concat(D.border," border-b"),children:(0,n.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-10 text-center",children:[(0,n.jsx)("div",{className:"".concat(D.highlight," text-3xl mb-4"),children:"✦"}),(0,n.jsx)("h1",{className:"text-2xl md:text-4xl font-serif font-bold mb-3 ".concat(D.text),children:B.title}),(0,n.jsx)("p",{className:"text-lg md:text-xl ".concat(D.muted," mb-5 italic"),children:B.author}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-4 text-sm flex-wrap",children:[B.lang&&"en"!==B.lang&&(0,n.jsx)("span",{className:"".concat(D.highlightBg," ").concat(D.highlight," px-4 py-1.5 rounded-full font-medium"),children:B.lang.toUpperCase()}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"".concat(D.muted),children:[o.wordCount.toLocaleString()," parole"]}),(0,n.jsx)("span",{className:"".concat(D.muted),children:"•"}),(0,n.jsxs)("span",{className:"".concat(D.muted),children:["~",S," min di lettura"]})]})]})]})}),(0,n.jsx)("main",{className:"max-w-3xl mx-auto px-4 py-10 pb-24",ref:k,children:h?(0,n.jsxs)("div",{className:"text-center py-24",children:[(0,n.jsxs)("div",{className:"relative inline-block",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-full border-4 border-[#2dd4bf]/20 border-t-[#2dd4bf] animate-spin"}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCD6"})})]}),(0,n.jsx)("p",{className:"".concat(D.highlight," mt-6 animate-pulse font-medium"),children:"Caricamento in corso..."})]}):x?(0,n.jsxs)("div",{className:"text-center py-24",children:[(0,n.jsx)("div",{className:"text-6xl mb-6",children:"\uD83D\uDCDA"}),(0,n.jsx)("p",{className:"".concat(D.muted," mb-6 text-lg"),children:x}),(0,n.jsx)(i(),{href:"/catalogo",className:"".concat(D.highlightBg," ").concat(D.highlight," px-6 py-3 rounded-full font-medium hover:scale-105 transition-transform inline-block"),children:"← Torna alla biblioteca"})]}):o?(0,n.jsxs)(n.Fragment,{children:[o.chapters.length>1&&(0,n.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,n.jsx)("button",{onClick:()=>{p(e=>Math.max(0,e-1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:0===g,className:"px-5 py-2.5 rounded-full ".concat(D.highlightBg," ").concat(D.highlight," font-medium disabled:opacity-30 disabled:cursor-not-allowed hover:scale-105 transition-transform"),children:"← Prec"}),(0,n.jsxs)("span",{className:"".concat(D.muted," text-sm font-medium"),children:[g+1," / ",o.chapters.length]}),(0,n.jsx)("button",{onClick:()=>{p(e=>Math.min(o.chapters.length-1,e+1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:g===o.chapters.length-1,className:"px-5 py-2.5 rounded-full ".concat(D.highlightBg," ").concat(D.highlight," font-medium disabled:opacity-30 disabled:cursor-not-allowed hover:scale-105 transition-transform"),children:"Succ →"})]}),(null==(e=o.chapters[g])?void 0:e.title)&&(0,n.jsx)("h2",{className:"text-xl md:text-2xl font-serif font-bold mb-10 text-center ".concat(D.accent),children:o.chapters[g].title}),(0,n.jsx)("article",{className:"".concat(D.text," font-serif leading-relaxed"),style:{fontSize:"".concat(u,"px"),lineHeight:"2",textAlign:"justify",hyphens:"auto",WebkitHyphens:"auto"},children:null==(t=o.chapters[g])?void 0:t.content.split("\n\n").map((e,t)=>(0,n.jsx)("p",{className:"mb-7 first-letter:text-3xl first-letter:font-bold first-letter:mr-1 first-letter:float-left first-letter:leading-none",style:{textIndent:t>0?"1.5em":"0"},children:e.trim()},t))}),o.chapters.length>1&&(0,n.jsxs)("div",{className:"flex items-center justify-between mt-16 pt-10 ".concat(D.border," border-t"),children:[(0,n.jsx)("button",{onClick:()=>{p(e=>Math.max(0,e-1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:0===g,className:"px-6 py-3 rounded-full ".concat(D.highlightBg," ").concat(D.highlight," font-medium disabled:opacity-30 disabled:cursor-not-allowed hover:scale-105 transition-transform"),children:"← Capitolo Precedente"}),(0,n.jsx)("button",{onClick:()=>{p(e=>Math.min(o.chapters.length-1,e+1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:g===o.chapters.length-1,className:"px-6 py-3 rounded-full ".concat(D.highlightBg," ").concat(D.highlight," font-medium disabled:opacity-30 disabled:cursor-not-allowed hover:scale-105 transition-transform"),children:"Capitolo Successivo →"})]})]}):null}),(0,n.jsx)("footer",{className:"".concat(D.border," border-t py-10"),children:(0,n.jsxs)("div",{className:"max-w-3xl mx-auto px-4 text-center",children:[(0,n.jsx)("div",{className:"".concat(D.highlight," text-2xl mb-3"),children:"\uD83C\uDF0A"}),(0,n.jsx)("p",{className:"".concat(D.muted," text-sm"),children:"Testo da Project Gutenberg"}),(0,n.jsx)("p",{className:"".concat(D.accent," text-sm font-medium mt-1"),children:"Onde Publishing"})]})})]})}o.b.forEach(e=>{r[e.id]=e})},8934:(e,t,a)=>{Promise.resolve().then(a.bind(a,4094))}},e=>{e.O(0,[619,865,441,255,358],()=>e(e.s=8934)),_N_E=e.O()}]);