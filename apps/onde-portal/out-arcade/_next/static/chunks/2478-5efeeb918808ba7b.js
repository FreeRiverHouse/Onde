"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2478],{52478:(e,i,a)=>{a.d(i,{Ht:()=>l,b9:()=>S,bp:()=>w,f:()=>s,hc:()=>d,mb:()=>f,n_:()=>_,tQ:()=>m,vK:()=>h,zG:()=>c});var t=a(54568),n=a(7620);let r={game_win:25,game_play:5,achievement:50,daily_login:10,streak_bonus:5,challenge_complete:100,reading_milestone:15,collection_complete:75,referral:200,event_bonus:0,purchase:0,admin_grant:0},o={common:1,rare:2,epic:4,legendary:10},c=[{id:"theme_sunset",name:"Tramonto Marino",description:"Warm orange and coral sunset colors",type:"theme",price:250,icon:"\uD83C\uDF05",rarity:"common"},{id:"theme_deep_ocean",name:"Oceano Profondo",description:"Deep blue and mysterious underwater vibes",type:"theme",price:400,icon:"\uD83C\uDF0A",rarity:"rare"},{id:"theme_tropical",name:"Paradiso Tropicale",description:"Vibrant tropical greens and blues",type:"theme",price:600,icon:"\uD83C\uDF34",rarity:"epic"},{id:"theme_northern_lights",name:"Aurora Boreale",description:"Mesmerizing northern lights palette",type:"theme",price:1e3,icon:"✨",rarity:"legendary"},{id:"theme_coral_reef",name:"Barriera Corallina",description:"Colorful coral reef inspired theme",type:"theme",price:350,icon:"\uD83D\uDC20",rarity:"rare"}],s=[{id:"pet_fish",name:"Pesciolino",description:"A friendly little fish that follows you around",icon:"\uD83D\uDC1F",animations:["swim","bubble","jump"],price:150,rarity:"common"},{id:"pet_crab",name:"Granchietto",description:"A cute crab with clicky claws",icon:"\uD83E\uDD80",animations:["walk","pinch","hide"],price:200,rarity:"common"},{id:"pet_turtle",name:"Tartaruga",description:"A wise sea turtle companion",icon:"\uD83D\uDC22",animations:["swim","sleep","wink"],price:300,rarity:"rare"},{id:"pet_dolphin",name:"Delfino",description:"An energetic dolphin friend",icon:"\uD83D\uDC2C",animations:["flip","splash","sing"],price:500,rarity:"rare"},{id:"pet_octopus",name:"Polpetto",description:"A clever octopus with eight helpful tentacles",icon:"\uD83D\uDC19",animations:["wave","ink","squeeze"],price:750,rarity:"epic"},{id:"pet_whale",name:"Balena",description:"A majestic whale that sings ocean songs",icon:"\uD83D\uDC0B",animations:["spray","dive","sing"],price:1e3,rarity:"epic"},{id:"pet_mermaid",name:"Sirenetta",description:"A magical mermaid companion",icon:"\uD83E\uDDDC‍♀️",animations:["swim","wave","sparkle"],price:2e3,rarity:"legendary"},{id:"pet_kraken",name:"Kraken",description:"The legendary sea creature",icon:"\uD83E\uDD91",animations:["tentacle","roar","emerge"],price:5e3,rarity:"legendary"}],l=[{id:"frame_wave",name:"Onde",description:"A gentle wave border",borderStyle:"border-2 border-onde-ocean rounded-full",price:100,rarity:"common"},{id:"frame_bubbles",name:"Bolle",description:"Floating bubble decorations",borderStyle:"border-3 border-cyan-400 rounded-full",glowColor:"rgba(34, 211, 238, 0.3)",price:200,rarity:"common"},{id:"frame_coral",name:"Corallo",description:"Beautiful coral reef frame",borderStyle:"border-4 border-onde-coral rounded-full",glowColor:"rgba(255, 127, 127, 0.4)",price:350,rarity:"rare"},{id:"frame_golden",name:"Tesoro",description:"Shimmering golden treasure frame",borderStyle:"border-4 border-onde-gold rounded-full",glowColor:"rgba(212, 175, 55, 0.5)",animation:"animate-pulse",price:600,rarity:"epic"},{id:"frame_rainbow",name:"Arcobaleno",description:"Magical rainbow-shifting border",borderStyle:"border-4 rounded-full",glowColor:"rgba(168, 85, 247, 0.5)",animation:"animate-gradient-shift",price:1500,rarity:"legendary"}],d=[{id:"badge_explorer",name:"Esploratore",description:"Show off your adventurous spirit",type:"badge",price:75,icon:"\uD83E\uDDED",rarity:"common"},{id:"badge_reader",name:"Lettore",description:"A true bookworm badge",type:"badge",price:75,icon:"\uD83D\uDCDA",rarity:"common"},{id:"badge_gamer",name:"Giocatore",description:"For dedicated gamers",type:"badge",price:75,icon:"\uD83C\uDFAE",rarity:"common"},{id:"badge_champion",name:"Campione",description:"Achieved greatness",type:"badge",price:300,icon:"\uD83C\uDFC6",rarity:"rare"},{id:"badge_pirate",name:"Pirata",description:"Arr! A fearsome sea dog",type:"badge",price:500,icon:"\uD83C\uDFF4‍☠️",rarity:"epic"},{id:"badge_trident",name:"Tritone",description:"Blessed by the sea gods",type:"badge",price:1e3,icon:"\uD83D\uDD31",rarity:"legendary"}],m=[{id:"effect_bubbles",name:"Bolle Galleggianti",description:"Bubbles float around your cursor",type:"effect",price:200,icon:"\uD83E\uDEE7",rarity:"common"},{id:"effect_sparkles",name:"Scintille",description:"Sparkles follow your movements",type:"effect",price:350,icon:"✨",rarity:"rare"},{id:"effect_waves",name:"Onde di Luce",description:"Light waves ripple from clicks",type:"effect",price:500,icon:"\uD83C\uDF1F",rarity:"epic"},{id:"effect_rainbow",name:"Scia Arcobaleno",description:"Leave a rainbow trail",type:"effect",price:1200,icon:"\uD83C\uDF08",rarity:"legendary"}],p=[{id:"weekend_bonus",name:"Weekend Bonus",description:"Earn 2x coins all weekend!",multiplier:2,startTime:"",endTime:"",icon:"\uD83C\uDF89"},{id:"reading_week",name:"Settimana della Lettura",description:"3x coins from reading milestones",multiplier:3,startTime:"",endTime:"",sources:["reading_milestone"],icon:"\uD83D\uDCD6"},{id:"game_fest",name:"Festival dei Giochi",description:"Double coins from all games!",multiplier:2,startTime:"",endTime:"",sources:["game_win","game_play"],icon:"\uD83C\uDFAE"}],u={balance:0,lifetimeEarned:0,lifetimeSpent:0,ownedCosmetics:[],equippedCosmetics:{},transactions:[],loginStreak:0,pendingAnimations:[]},g="onde-coins",b=(0,n.createContext)(null);function f(){let e=(0,n.useContext)(b);return e||y()}function y(){let[e,i]=(0,n.useState)(u),[a,t]=(0,n.useState)(!1),[b,f]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem(g);if(e)try{let a=JSON.parse(e);i({...u,...a})}catch(e){console.error("Failed to parse coin state:",e)}t(!0);let a=new Date,n=a.getDay();(0===n||6===n)&&f([{...p[0],startTime:new Date(a.setHours(0,0,0,0)).toISOString(),endTime:new Date(a.setHours(23,59,59,999)).toISOString()}])},[]),(0,n.useEffect)(()=>{a&&localStorage.setItem(g,JSON.stringify(e))},[e,a]);let y=(0,n.useCallback)(e=>{let i=new Date,a=1;for(let t of b){let n=new Date(t.startTime),r=new Date(t.endTime);i>=n&&i<=r&&(!t.sources||t.sources.includes(e))&&(a=Math.max(a,t.multiplier))}return a},[b]),w=(0,n.useCallback)((e,a,t)=>{let n=null!=a?a:r[e],o=y(e),c=Math.floor(n*o);if(c<=0)return 0;let s={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),amount:c,source:e,description:t||"Earned from ".concat(e.replace(/_/g," ")),timestamp:new Date().toISOString(),multiplier:o>1?o:void 0};return i(i=>({...i,balance:i.balance+c,lifetimeEarned:i.lifetimeEarned+c,transactions:[s,...i.transactions].slice(0,100),pendingAnimations:[...i.pendingAnimations,{id:s.id,amount:c,source:e}]})),c},[y]),h=(0,n.useCallback)((e,a)=>{let t=r.achievement,n=o[e],c=y("achievement"),s=Math.floor(t*n*c),l={id:"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),amount:s,source:"achievement",description:"Achievement: ".concat(a," (").concat(e,")"),timestamp:new Date().toISOString(),multiplier:c>1?c:void 0};return i(e=>({...e,balance:e.balance+s,lifetimeEarned:e.lifetimeEarned+s,transactions:[l,...e.transactions].slice(0,100),pendingAnimations:[...e.pendingAnimations,{id:l.id,amount:s,source:"achievement"}]})),s},[y]),_=(0,n.useCallback)(()=>{let a=new Date().toDateString();if(e.lastDailyLogin===a)return null;let t=new Date;t.setDate(t.getDate()-1);let n=e.lastDailyLogin===t.toDateString()?e.loginStreak+1:1,o=Math.min(n,7)*r.streak_bonus,c=r.daily_login+o,s={id:"".concat(Date.now(),"-daily"),amount:c,source:"daily_login",description:"Daily login (Day ".concat(n," streak)"),timestamp:new Date().toISOString()};return i(e=>({...e,balance:e.balance+c,lifetimeEarned:e.lifetimeEarned+c,lastDailyLogin:a,loginStreak:n,transactions:[s,...e.transactions].slice(0,100),pendingAnimations:[...e.pendingAnimations,{id:s.id,amount:c,source:"daily_login"}]})),{earned:c,streak:n}},[e.lastDailyLogin,e.loginStreak]),S=(0,n.useCallback)((a,t)=>{if(e.balance<a)return!1;let n={id:"".concat(Date.now(),"-spend"),amount:-a,source:"purchase",description:t,timestamp:new Date().toISOString()};return i(e=>({...e,balance:e.balance-a,lifetimeSpent:e.lifetimeSpent+a,transactions:[n,...e.transactions].slice(0,100)})),!0},[e.balance]),C=(0,n.useCallback)(e=>[...c,...d,...m].find(i=>i.id===e)||s.find(i=>i.id===e)||l.find(i=>i.id===e),[]),k=(0,n.useCallback)(a=>{if(e.ownedCosmetics.includes(a))return!1;let t=C(a);if(!t||e.balance<t.price)return!1;let n={id:"".concat(Date.now(),"-purchase"),amount:-t.price,source:"purchase",description:"Purchased: ".concat(t.name),timestamp:new Date().toISOString()};return i(e=>({...e,balance:e.balance-t.price,lifetimeSpent:e.lifetimeSpent+t.price,ownedCosmetics:[...e.ownedCosmetics,a],transactions:[n,...e.transactions].slice(0,100)})),!0},[e.balance,e.ownedCosmetics,C]),D=(0,n.useCallback)(i=>e.balance>=i,[e.balance]),A=(0,n.useCallback)(i=>e.ownedCosmetics.includes(i),[e.ownedCosmetics]),v=(0,n.useCallback)((a,t)=>{e.ownedCosmetics.includes(a)&&i(e=>({...e,equippedCosmetics:{...e.equippedCosmetics,[t]:a}}))},[e.ownedCosmetics]),E=(0,n.useCallback)(e=>{i(i=>({...i,equippedCosmetics:{...i.equippedCosmetics,[e]:void 0}}))},[]),T=(0,n.useCallback)(i=>e.equippedCosmetics[i],[e.equippedCosmetics]),x=(0,n.useCallback)(()=>[...c,...d,...m],[]),O=(0,n.useCallback)(e=>{switch(e){case"theme":return c;case"pet":return s;case"frame":return l;case"badge":return d;case"effect":return m;default:return[]}},[]),I=(0,n.useCallback)(()=>{let a=e.pendingAnimations[0];return a&&i(e=>({...e,pendingAnimations:e.pendingAnimations.slice(1)})),a},[e.pendingAnimations]),q=(0,n.useCallback)(()=>{i(e=>({...e,pendingAnimations:[]}))},[]),L=(0,n.useCallback)(function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e.transactions.slice(0,i)},[e.transactions]),M=(0,n.useCallback)(()=>{let e=new Date;return b.filter(i=>{let a=new Date(i.startTime),t=new Date(i.endTime);return e>=a&&e<=t})},[b]),B=(0,n.useCallback)(()=>{i(u),localStorage.removeItem(g)},[]),P=(0,n.useCallback)((e,a)=>{let t={id:"".concat(Date.now(),"-grant"),amount:e,source:"admin_grant",description:a||"Admin grant",timestamp:new Date().toISOString()};i(i=>({...i,balance:i.balance+e,lifetimeEarned:i.lifetimeEarned+e,transactions:[t,...i.transactions].slice(0,100),pendingAnimations:[...i.pendingAnimations,{id:t.id,amount:e,source:"admin_grant"}]}))},[]);return{balance:e.balance,lifetimeEarned:e.lifetimeEarned,lifetimeSpent:e.lifetimeSpent,ownedCosmetics:e.ownedCosmetics,equippedCosmetics:e.equippedCosmetics,loginStreak:e.loginStreak,pendingAnimations:e.pendingAnimations,mounted:a,activeMultipliers:b,getCurrentMultiplier:y,earnCoins:w,earnFromAchievement:h,claimDailyLogin:_,spendCoins:S,purchaseCosmetic:k,canAfford:D,ownsCosmetic:A,equipCosmetic:v,unequipCosmetic:E,getEquipped:T,getAllCosmetics:x,getCosmeticById:C,getCosmeticsByType:O,popPendingAnimation:I,clearPendingAnimations:q,getRecentTransactions:L,getActiveEvents:M,resetCoins:B,grantCoins:P}}function w(e){let{children:i}=e,a=y();return(0,t.jsx)(b.Provider,{value:a,children:i})}function h(e){return e>=1e4?"".concat((e/1e3).toFixed(1),"k"):e.toLocaleString()}function _(e){switch(e){case"common":default:return"text-gray-600 bg-gray-100";case"rare":return"text-blue-600 bg-blue-100";case"epic":return"text-purple-600 bg-purple-100";case"legendary":return"text-amber-600 bg-gradient-to-r from-amber-100 to-yellow-100"}}function S(e){switch(e){case"common":default:return"";case"rare":return"shadow-lg shadow-blue-500/20";case"epic":return"shadow-xl shadow-purple-500/30";case"legendary":return"shadow-2xl shadow-amber-500/40 animate-pulse"}}}}]);