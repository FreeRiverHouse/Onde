"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6759],{56759:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var l=a(54568),s=a(7620);let r="onde-skin-ratings",n="onde-skin-ratings-aggregate";function o(){try{let e=localStorage.getItem(n);if(!e)return{};return JSON.parse(e)}catch(e){return{}}}function i(e){try{let t=o()[e];if(!t||0===t.count)return{average:0,count:0};return{average:Math.round(t.total/t.count*10)/10,count:t.count}}catch(e){return{average:0,count:0}}}let c={sm:"text-lg gap-0.5",md:"text-2xl gap-1",lg:"text-3xl gap-1.5"},d={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};function u(e){let{skinId:t,initialRating:a=0,totalRatings:u=0,size:g="md",showCount:m=!0,readOnly:x=!1,onRate:p}=e,[h,f]=(0,s.useState)(0),[y,b]=(0,s.useState)(null),[w,j]=(0,s.useState)(a),[N,v]=(0,s.useState)(u),[D,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b(function(e){try{var t;let a=localStorage.getItem(r);if(!a)return null;return null!=(t=JSON.parse(a)[e])?t:null}catch(e){return null}}(t));let{average:e,count:a}=i(t);a>0&&(j(e),v(a))},[t]);let S=h||y||w;return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,l.jsx)("div",{className:"flex items-center ".concat(c[g]||c.md," ").concat(D?"animate-pulse":""),onMouseLeave:()=>!x&&f(0),children:[1,2,3,4,5].map(e=>{let a=e<=S,s=e-.5<=S&&e>S;return(0,l.jsx)("button",{type:"button",disabled:x,onClick:()=>(e=>{if(x)return;b(e);try{let a=localStorage.getItem(r),l=a?JSON.parse(a):{};l[t]=e,localStorage.setItem(r,JSON.stringify(l))}catch(e){console.error("Failed to save rating:",e)}try{let a=o();a[t]||(a[t]={total:0,count:0}),null!==y?a[t].total=a[t].total-y+e:(a[t].total+=e,a[t].count+=1),localStorage.setItem(n,JSON.stringify(a))}catch(e){console.error("Failed to update aggregate:",e)}let{average:a,count:l}=i(t);j(a),v(l),k(!0),setTimeout(()=>k(!1),300),p&&p(e)})(e),onMouseEnter:()=>!x&&f(e),className:"\n                ".concat(d[g]||d.md,"\n                transition-all duration-150\n                ").concat(x?"cursor-default":"cursor-pointer hover:scale-125","\n                ").concat(y===e?"scale-110":"","\n                focus:outline-none\n              "),title:x?"".concat(w," stars"):"Rate ".concat(e," star").concat(e>1?"s":""),children:(0,l.jsxs)("svg",{viewBox:"0 0 24 24",className:"\n                  w-full h-full\n                  transition-colors duration-150\n                  ".concat(a||s?"text-yellow-400 drop-shadow-[0_0_4px_rgba(250,204,21,0.5)]":"text-gray-300","\n                "),fill:a?"currentColor":s?"url(#half)":"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"half",children:[(0,l.jsx)("stop",{offset:"50%",stopColor:"currentColor"}),(0,l.jsx)("stop",{offset:"50%",stopColor:"transparent"})]})}),(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})]})},e)})}),m&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[w>0&&(0,l.jsx)("span",{className:"font-semibold text-yellow-600",children:w.toFixed(1)}),N>0&&(0,l.jsxs)("span",{children:["(",N," ",1===N?"vote":"votes",")"]}),y&&(0,l.jsxs)("span",{className:"text-purple-500 font-medium",children:["• You: ",y,"⭐"]})]}),!x&&!y&&(0,l.jsx)("p",{className:"text-xs text-gray-400 animate-pulse",children:"Click to rate!"})]})}function g(e){let{rating:t,className:a=""}=e;if(t<4)return null;let s=t>=4.5;return(0,l.jsxs)("span",{className:"\n        inline-flex items-center gap-1 px-2 py-0.5 \n        text-xs font-bold text-white rounded-full\n        bg-gradient-to-r ".concat(s?"from-yellow-400 to-amber-500":"from-purple-400 to-pink-500","\n        shadow-lg animate-pulse\n        ").concat(a,"\n      "),children:[s?"\uD83C\uDFC6":"⭐"," ",s?"Top Rated":"Popular"]})}let m=[{id:"1",name:"Cool Robot",author:"SkinMaster",imageData:"",tags:["robot","tech","cool"],likes:42,downloads:128,createdAt:Date.now()-864e5,gameType:"minecraft"},{id:"2",name:"Fire Dragon",author:"DragonLord",imageData:"",tags:["dragon","fire","fantasy"],likes:89,downloads:234,createdAt:Date.now()-1728e5,gameType:"minecraft"},{id:"3",name:"Space Explorer",author:"NASAFan",imageData:"",tags:["space","astronaut","sci-fi"],likes:156,downloads:512,createdAt:Date.now()-2592e5,gameType:"minecraft"},{id:"4",name:"Rainbow Unicorn",author:"MagicGirl",imageData:"",tags:["unicorn","rainbow","cute"],likes:234,downloads:789,createdAt:Date.now()-3456e5,gameType:"minecraft"},{id:"5",name:"Ninja Master",author:"ShadowWarrior",imageData:"",tags:["ninja","stealth","cool"],likes:178,downloads:456,createdAt:Date.now()-432e6,gameType:"minecraft"},{id:"6",name:"Pixel Cat",author:"CatLover99",imageData:"",tags:["cat","cute","animal"],likes:321,downloads:987,createdAt:Date.now()-5184e5,gameType:"minecraft"}];function x(e){let{onSelectSkin:t,currentSkinData:a,onUpload:r}=e,[n,o]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[x,p]=(0,s.useState)("rating"),[h,f]=(0,s.useState)(!1),[y,b]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(""),[D,k]=(0,s.useState)(new Set);(0,s.useEffect)(()=>{let e=m.map(e=>({...e,imageData:function(e){let t=document.createElement("canvas");t.width=64,t.height=64;let a=t.getContext("2d");if(!a)return"";let l=e.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0),s=Math.abs(l%360),r=(s+120)%360;a.fillStyle="hsl(".concat(s,", 70%, 60%)"),a.fillRect(0,0,64,64),a.fillStyle="hsl(".concat(r,", 70%, 50%)");for(let e=0;e<20;e++){let t=Math.abs(l*(e+1)%64),s=Math.abs(l*(e+2)%64);a.fillRect(t,s,4,4)}return a.fillStyle="hsl(".concat(s,", 60%, 70%)"),a.fillRect(8,8,16,8),t.toDataURL("image/png")}(e.id+e.name)})),t=localStorage.getItem("onde-gallery-skins");if(t)try{let a=JSON.parse(t);e.push(...a)}catch(e){console.error("Failed to parse saved skins:",e)}o(e);let a=localStorage.getItem("onde-gallery-likes");if(a)try{k(new Set(JSON.parse(a)))}catch(e){console.error("Failed to parse saved likes:",e)}},[]);let S=n.map(e=>{let{average:t,count:a}=i(e.id);return{...e,rating:t,ratingCount:a}}).filter(e=>{if(!c)return!0;let t=c.toLowerCase();return e.name.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.tags.some(e=>e.toLowerCase().includes(t))}).sort((e,t)=>{switch(x){case"rating":if(t.rating!==e.rating)return(t.rating||0)-(e.rating||0);return(t.ratingCount||0)-(e.ratingCount||0);case"likes":return t.likes-e.likes;case"downloads":return t.downloads-e.downloads;case"newest":return t.createdAt-e.createdAt;default:return 0}});return(0,l.jsxs)("div",{className:"w-full max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-3xl",children:"\uD83D\uDDBC️"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Community Gallery"}),(0,l.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-sm font-bold",children:[n.length," skins"]})]}),(0,l.jsxs)("div",{className:"flex gap-2 flex-wrap justify-center",children:[(0,l.jsx)("div",{className:"relative",children:(0,l.jsx)("input",{type:"text",placeholder:"\uD83D\uDD0D Search skins...",value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 rounded-full border-2 border-gray-200 focus:border-purple-400 outline-none w-48"})}),(0,l.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"px-4 py-2 rounded-full border-2 border-gray-200 focus:border-purple-400 outline-none bg-white",children:[(0,l.jsx)("option",{value:"rating",children:"⭐ Top Rated"}),(0,l.jsx)("option",{value:"likes",children:"\uD83D\uDD25 Most Liked"}),(0,l.jsx)("option",{value:"downloads",children:"\uD83D\uDCE5 Most Downloaded"}),(0,l.jsx)("option",{value:"newest",children:"\uD83C\uDD95 Newest"})]}),(0,l.jsx)("button",{onClick:()=>f(!0),disabled:!a,className:"px-4 py-2 rounded-full font-bold transition-all ".concat(a?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:scale-105 shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:"\uD83D\uDCE4 Upload Your Skin"})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:S.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all hover:scale-105 overflow-hidden group",children:[(0,l.jsxs)("div",{className:"relative aspect-square bg-gradient-to-br from-gray-100 to-gray-200 p-2",children:[e.imageData&&(0,l.jsx)("img",{src:e.imageData,alt:e.name,className:"w-full h-full object-contain image-rendering-pixelated",style:{imageRendering:"pixelated"}}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:(0,l.jsx)("button",{onClick:()=>{o(n.map(t=>t.id===e.id?{...t,downloads:t.downloads+1}:t)),t(e.imageData)},className:"px-3 py-2 bg-green-500 text-white rounded-lg font-bold hover:bg-green-600 transition-colors",title:"Use this skin",children:"\uD83D\uDCE5 Use"})}),(0,l.jsx)("span",{className:"absolute top-1 right-1 text-lg",title:e.gameType,children:"minecraft"===e.gameType?"⛏️":"\uD83C\uDFAE"}),(e.rating||0)>=4&&(0,l.jsx)("div",{className:"absolute top-1 left-1",children:(0,l.jsx)(g,{rating:e.rating||0})})]}),(0,l.jsxs)("div",{className:"p-2",children:[(0,l.jsx)("h3",{className:"font-bold text-sm truncate",title:e.name,children:e.name}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["by ",e.author]}),(0,l.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:e.tags.slice(0,2).map(e=>(0,l.jsxs)("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-600 rounded text-xs",children:["#",e]},e))}),(0,l.jsx)("div",{className:"mt-2 flex justify-center",children:(0,l.jsx)(u,{skinId:e.id,size:"sm",showCount:!1})}),(0,l.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs",children:[(0,l.jsxs)("button",{onClick:()=>(e=>{let t=new Set(D);t.has(e)?(t.delete(e),o(n.map(t=>t.id===e?{...t,likes:t.likes-1}:t))):(t.add(e),o(n.map(t=>t.id===e?{...t,likes:t.likes+1}:t))),k(t),localStorage.setItem("onde-gallery-likes",JSON.stringify([...t]))})(e.id),className:"flex items-center gap-1 px-2 py-1 rounded-full transition-all ".concat(D.has(e.id)?"bg-red-100 text-red-500":"bg-gray-100 text-gray-500 hover:bg-red-50"),children:[D.has(e.id)?"❤️":"\uD83E\uDD0D"," ",e.likes]}),(0,l.jsxs)("span",{className:"text-gray-400",children:["\uD83D\uDCE5 ",e.downloads]})]}),(0,l.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:(e=>{let t=Math.floor((Date.now()-e)/864e5);return 0===t?"Today":1===t?"Yesterday":t<7?"".concat(t," days ago"):new Date(e).toLocaleDateString()})(e.createdAt)})]})]},e.id))}),0===S.length&&(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("span",{className:"text-6xl",children:"\uD83C\uDFA8"}),(0,l.jsx)("p",{className:"text-gray-500 mt-4",children:"No skins found. Try a different search!"})]}),h&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold",children:"\uD83D\uDCE4 Upload Your Skin"}),(0,l.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),a&&(0,l.jsx)("div",{className:"mb-4 flex justify-center",children:(0,l.jsx)("img",{src:a,alt:"Your skin",className:"w-32 h-32 border-4 border-purple-200 rounded-xl",style:{imageRendering:"pixelated"}})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Skin Name *"}),(0,l.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),placeholder:"e.g., Cool Dragon",className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none",maxLength:30})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Your Name"}),(0,l.jsx)("input",{type:"text",value:N,onChange:e=>v(e.target.value),placeholder:"Anonymous",className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none",maxLength:20})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Tags (comma separated)"}),(0,l.jsx)("input",{type:"text",value:w,onChange:e=>j(e.target.value),placeholder:"e.g., dragon, fire, cool",className:"w-full px-4 py-2 rounded-lg border-2 border-gray-200 focus:border-purple-400 outline-none"})]}),(0,l.jsx)("button",{onClick:()=>{if(!a||!y.trim())return;let e={id:"user-".concat(Date.now()),name:y.trim(),author:N.trim()||"Anonymous",imageData:a,tags:w.split(",").map(e=>e.trim()).filter(Boolean),likes:0,downloads:0,createdAt:Date.now(),gameType:"minecraft"},t=[...n,e];o(t);let l=t.filter(e=>e.id.startsWith("user-"));localStorage.setItem("onde-gallery-skins",JSON.stringify(l)),f(!1),b(""),j(""),v(""),r&&r(e)},disabled:!y.trim(),className:"w-full py-3 rounded-xl font-bold text-lg transition-all ".concat(y.trim()?"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:shadow-lg":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:"\uD83D\uDE80 Share with Community!"})]}),(0,l.jsx)("p",{className:"text-xs text-gray-400 text-center mt-4",children:"By uploading, you agree to share your skin with the community \uD83D\uDC9C"})]})})]})}}}]);