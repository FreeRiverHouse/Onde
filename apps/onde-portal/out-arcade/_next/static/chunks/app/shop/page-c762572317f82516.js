(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4895],{15690:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(54568),s=n(7620),l=n(85206),i=n(91085),r=n(19664),o=n.n(r),c=n(18701),d=n(52478),u=n(11262);function h(e){var t,n,r,o,u,h,m,x,p;let{item:f,type:g,owned:b,equipped:v,canAfford:j,onPurchase:y,onEquip:N,onUnequip:w}=e,C=(0,c.c3)().shop||{rarity:{},actions:{}},[E,P]=(0,s.useState)(!1),[D,k]=(0,s.useState)(!1),S={common:(null==(t=C.rarity)?void 0:t.common)||"Common",rare:(null==(n=C.rarity)?void 0:n.rare)||"Rare",epic:(null==(r=C.rarity)?void 0:r.epic)||"Epic",legendary:(null==(o=C.rarity)?void 0:o.legendary)||"Legendary"};return(0,a.jsxs)(l.P.div,{className:"relative rounded-2xl p-4 border-2 transition-all duration-300\n                  ".concat(b?"bg-green-50 border-green-200":j?"bg-white border-onde-ocean/10 hover:border-onde-gold/50":"bg-gray-50 border-gray-200 opacity-75","\n                  ").concat((0,d.b9)(f.rarity)),onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),whileHover:{y:-4,scale:1.02},layout:!0,children:[(0,a.jsx)("div",{className:"absolute -top-2 right-4 px-2 py-0.5 rounded-full text-xs font-bold ".concat((0,d.n_)(f.rarity)),children:S[f.rarity]}),b&&(0,a.jsx)("div",{className:"absolute -top-2 left-4 px-2 py-0.5 rounded-full text-xs font-bold bg-green-500 text-white",children:v?"✓ ".concat((null==(u=C.actions)?void 0:u.equipped)||"Equipped"):"✓ ".concat((null==(h=C.actions)?void 0:h.owned)||"Owned")}),(0,a.jsx)("div",{className:"text-center mb-3",children:(0,a.jsx)(l.P.span,{className:"text-5xl block",animate:E?{scale:[1,1.2,1],rotate:[0,-10,10,0]}:{},transition:{duration:.5},children:f.icon})}),(0,a.jsx)("h3",{className:"font-bold text-onde-ocean text-center mb-1",children:f.name}),(0,a.jsx)("p",{className:"text-xs text-onde-ocean/60 text-center mb-3 line-clamp-2",children:f.description}),"animations"in f&&(0,a.jsx)("div",{className:"flex justify-center gap-1 mb-3 flex-wrap",children:f.animations.map(e=>(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-600",children:e},e))}),"borderStyle"in f&&(0,a.jsx)("div",{className:"flex justify-center mb-3",children:(0,a.jsx)("div",{className:"w-12 h-12 ".concat(f.borderStyle," ").concat(f.animation||""),style:{boxShadow:f.glowColor?"0 0 15px ".concat(f.glowColor):void 0},children:(0,a.jsx)("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-onde-ocean to-onde-coral"})})}),(0,a.jsx)("div",{className:"mt-auto",children:b?v?(0,a.jsx)(l.P.button,{onClick:w,className:"w-full py-2 rounded-xl font-bold text-sm bg-gray-200 text-gray-600",whileHover:{scale:1.02},whileTap:{scale:.98},children:(null==(x=C.actions)?void 0:x.unequip)||"Unequip"}):(0,a.jsx)(l.P.button,{onClick:N,className:"w-full py-2 rounded-xl font-bold text-sm bg-onde-ocean text-white",whileHover:{scale:1.02},whileTap:{scale:.98},children:(null==(m=C.actions)?void 0:m.equip)||"Equip"}):(0,a.jsx)(l.P.button,{onClick:()=>{y(),k(!0),setTimeout(()=>k(!1),2e3)},disabled:!j,className:"w-full py-2 rounded-xl font-bold text-sm flex items-center justify-center gap-2\n                       ".concat(j?"bg-gradient-to-r from-onde-gold to-amber-500 text-white shadow-lg shadow-onde-gold/30 hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"),whileHover:j?{scale:1.02}:{},whileTap:j?{scale:.98}:{},children:(0,a.jsxs)("span",{children:["\uD83E\uDE99 ",(0,d.vK)(f.price)]})})}),(0,a.jsx)(i.N,{children:D&&(0,a.jsx)(l.P.div,{className:"absolute inset-0 flex items-center justify-center bg-green-500/90 rounded-2xl",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},children:(0,a.jsxs)("div",{className:"text-center text-white",children:[(0,a.jsx)(l.P.span,{className:"text-4xl block mb-2",animate:{scale:[1,1.5,1]},transition:{duration:.5},children:"✓"}),(0,a.jsx)("span",{className:"font-bold",children:(null==(p=C.actions)?void 0:p.purchased)||"Purchased!"})]})})})]})}function m(){var e,t,n,r,m,x,p,f;let{balance:g,mounted:b,ownsCosmetic:v,canAfford:j,purchaseCosmetic:y,equipCosmetic:N,unequipCosmetic:w,getEquipped:C,getRecentTransactions:E}=(0,d.mb)(),[P,D]=(0,s.useState)("all"),[k,S]=(0,s.useState)(!1),M=(0,c.c3)().shop||{categories:{},rarity:{},actions:{},history:{}},q=[{id:"all",label:(null==(e=M.categories)?void 0:e.all)||"All",icon:"\uD83C\uDFEA"},{id:"theme",label:(null==(t=M.categories)?void 0:t.theme)||"Themes",icon:"\uD83C\uDFA8"},{id:"pet",label:(null==(n=M.categories)?void 0:n.pet)||"Pets",icon:"\uD83D\uDC3E"},{id:"frame",label:(null==(r=M.categories)?void 0:r.frame)||"Frames",icon:"\uD83D\uDDBC️"},{id:"badge",label:(null==(m=M.categories)?void 0:m.badge)||"Badges",icon:"\uD83C\uDFC5"},{id:"effect",label:(null==(x=M.categories)?void 0:x.effect)||"Effects",icon:"✨"}],A=(0,s.useMemo)(()=>{let e=[...d.zG.map(e=>({item:e,type:"theme"})),...d.f.map(e=>({item:e,type:"pet"})),...d.Ht.map(e=>({item:e,type:"frame"})),...d.hc.map(e=>({item:e,type:"badge"})),...d.tQ.map(e=>({item:e,type:"effect"}))];return"all"===P?e:e.filter(e=>{let{type:t}=e;return t===P})},[P]),H=E(10);return b?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-onde-cream to-white pt-24 pb-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)(l.P.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-display font-bold text-onde-ocean mb-2",children:"\uD83C\uDFEA Il Negozio"}),(0,a.jsx)("p",{className:"text-onde-ocean/60",children:"Spendi le tue monete in fantastici oggetti!"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-[300px,1fr] gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(u.h4,{}),(0,a.jsxs)(l.P.button,{onClick:()=>S(!k),className:"w-full py-3 rounded-xl bg-white border border-onde-ocean/10  font-medium text-onde-ocean hover:bg-onde-cream/50 transition-colors",whileTap:{scale:.98},children:["\uD83D\uDCDC ",k?(null==(p=M.history)?void 0:p.hide)||"Hide History":(null==(f=M.history)?void 0:f.show)||"Show History"]}),(0,a.jsx)(i.N,{children:k&&(0,a.jsxs)(l.P.div,{className:"bg-white rounded-2xl border border-onde-ocean/10 p-4 overflow-hidden",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:[(0,a.jsx)("h3",{className:"font-bold text-onde-ocean mb-3",children:"Ultime Transazioni"}),(0,a.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:0===H.length?(0,a.jsx)("p",{className:"text-sm text-onde-ocean/50 text-center py-4",children:"Nessuna transazione"}):H.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsxs)("span",{className:e.amount>0?"text-green-600":"text-red-500",children:[e.amount>0?"+":"",(0,d.vK)(e.amount)]}),(0,a.jsx)("span",{className:"flex-1 text-onde-ocean/60 truncate",children:e.description}),e.multiplier&&(0,a.jsxs)("span",{className:"text-xs px-1 py-0.5 bg-purple-100 text-purple-600 rounded",children:[e.multiplier,"x"]})]},e.id))})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-onde-ocean/10 p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-onde-ocean mb-3",children:"Come guadagnare"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-onde-ocean/70",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFAE"}),(0,a.jsx)(o(),{href:"/games",className:"hover:text-onde-coral",children:"Gioca ai minigiochi"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCD6"}),(0,a.jsx)(o(),{href:"/libri",className:"hover:text-onde-coral",children:"Leggi i libri"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFC6"}),(0,a.jsx)(o(),{href:"/profile",className:"hover:text-onde-coral",children:"Sblocca achievements"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC5"}),(0,a.jsx)("span",{children:"Login giornaliero"})]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFAF"}),(0,a.jsx)(o(),{href:"/daily",className:"hover:text-onde-coral",children:"Sfide giornaliere"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2 scrollbar-hide",children:q.map(e=>(0,a.jsxs)(l.P.button,{onClick:()=>D(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium whitespace-nowrap\n                             transition-colors duration-200\n                             ".concat(P===e.id?"bg-onde-ocean text-white":"bg-white border border-onde-ocean/10 text-onde-ocean hover:bg-onde-cream/50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.label})]},e.id))}),(0,a.jsx)(l.P.div,{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",layout:!0,children:(0,a.jsx)(i.N,{mode:"popLayout",children:A.map(e=>{let{item:t,type:n}=e;return(0,a.jsx)(l.P.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:(0,a.jsx)(h,{item:t,type:n,owned:v(t.id),equipped:C(n)===t.id,canAfford:j(t.price),onPurchase:()=>y(t.id),onEquip:()=>N(t.id,n),onUnequip:()=>w(n)})},t.id)})})}),0===A.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("span",{className:"text-6xl block mb-4",children:"\uD83C\uDFEA"}),(0,a.jsx)("p",{className:"text-onde-ocean/60",children:"Nessun oggetto in questa categoria"})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-onde-cream to-white pt-24 px-4",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-40 bg-gray-200 rounded-2xl"}),(0,a.jsx)("div",{className:"h-12 bg-gray-200 rounded-xl w-1/2"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(8)].map((e,t)=>(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded-2xl"},t))})]})})})}},26449:(e,t,n)=>{Promise.resolve().then(n.bind(n,15690))},68489:(e,t,n)=>{"use strict";n.d(t,{s:()=>u,E:()=>d});var a=n(18928),s=n(1457),l=n(12375);function i(e,t){[...t].reverse().forEach(n=>{let a=e.getVariant(n);a&&(0,s.U)(e,a),e.variantChildren&&e.variantChildren.forEach(e=>{i(e,t)})})}function r(){let e=!1,t=new Set,n={subscribe:e=>(t.add(e),()=>void t.delete(e)),start(n,s){(0,a.V)(e,"controls.start() should only be called after a component has mounted. Consider calling within a useEffect hook.");let i=[];return t.forEach(e=>{i.push((0,l._)(e,n,{transitionOverride:s}))}),Promise.all(i)},set:n=>((0,a.V)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),t.forEach(e=>{var t,a;t=e,Array.isArray(a=n)?i(t,a):"string"==typeof a?i(t,[a]):(0,s.U)(t,a)})),stop(){t.forEach(e=>{e.values.forEach(e=>e.stop())})},mount:()=>(e=!0,()=>{e=!1,n.stop()})};return n}var o=n(33546),c=n(76451);function d(){let e=(0,o.M)(r);return(0,c.E)(e.mount,[]),e}let u=d},91085:(e,t,n)=>{"use strict";n.d(t,{N:()=>g});var a=n(54568),s=n(7620),l=n(97966),i=n(33546),r=n(39536),o=n(37929);class c extends s.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:n}=e,l=(0,s.useId)(),i=(0,s.useRef)(null),r=(0,s.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,s.useContext)(o.Q);return(0,s.useInsertionEffect)(()=>{let{width:e,height:t,top:a,left:s}=r.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=l;let o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(l,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(a,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[n]),(0,a.jsx)(c,{isPresent:n,childRef:i,sizeRef:r,children:s.cloneElement(t,{ref:i})})}let u=e=>{let{children:t,initial:n,isPresent:l,onExitComplete:o,custom:c,presenceAffectsLayout:u,mode:m}=e,x=(0,i.M)(h),p=(0,s.useId)(),f=(0,s.useCallback)(e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;o&&o()},[x,o]),g=(0,s.useMemo)(()=>({id:p,initial:n,isPresent:l,custom:c,onExitComplete:f,register:e=>(x.set(e,!1),()=>x.delete(e))}),u?[Math.random(),f]:[l,f]);return(0,s.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[l]),s.useEffect(()=>{l||x.size||!o||o()},[l]),"popLayout"===m&&(t=(0,a.jsx)(d,{isPresent:l,children:t})),(0,a.jsx)(r.t.Provider,{value:g,children:t})};function h(){return new Map}var m=n(98647);let x=e=>e.key||"";function p(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}var f=n(76451);let g=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:h=!1}=e,[g,b]=(0,m.xQ)(h),v=(0,s.useMemo)(()=>p(t),[t]),j=h&&!g?[]:v.map(x),y=(0,s.useRef)(!0),N=(0,s.useRef)(v),w=(0,i.M)(()=>new Map),[C,E]=(0,s.useState)(v),[P,D]=(0,s.useState)(v);(0,f.E)(()=>{y.current=!1,N.current=v;for(let e=0;e<P.length;e++){let t=x(P[e]);j.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[P,j.length,j.join("-")]);let k=[];if(v!==C){let e=[...v];for(let t=0;t<P.length;t++){let n=P[t],a=x(n);j.includes(a)||(e.splice(t,0,n),k.push(n))}"wait"===d&&k.length&&(e=k),D(p(e)),E(v);return}let{forceRender:S}=(0,s.useContext)(l.L);return(0,a.jsx)(a.Fragment,{children:P.map(e=>{let t=x(e),s=(!h||!!g)&&(v===P||j.includes(t));return(0,a.jsx)(u,{isPresent:s,initial:(!y.current||!!r)&&void 0,custom:s?void 0:n,presenceAffectsLayout:c,mode:d,onExitComplete:s?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==S||S(),D(N.current),h&&(null==b||b()),o&&o())},children:e},t)})})}}},e=>{e.O(0,[9664,5206,8701,2478,1262,587,18,7358],()=>e(e.s=26449)),_N_E=e.O()}]);