(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9752],{44538:(e,a,t)=>{Promise.resolve().then(t.bind(t,65481))},65481:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var n=t(54568),i=t(55633),s=t.n(i),r=t(7620),c=t(92583);let l=[{id:"sunset",name:"Tramonto",emoji:"\uD83C\uDF05",gradient:"from-orange-400 via-rose-500 to-purple-600"},{id:"ocean",name:"Oceano",emoji:"\uD83C\uDF0A",gradient:"from-cyan-400 via-blue-500 to-indigo-600"},{id:"forest",name:"Foresta",emoji:"\uD83C\uDF32",gradient:"from-green-400 via-emerald-500 to-teal-600"},{id:"space",name:"Spazio",emoji:"\uD83D\uDE80",gradient:"from-indigo-900 via-purple-800 to-pink-700"},{id:"rainbow",name:"Arcobaleno",emoji:"\uD83C\uDF08",gradient:"from-red-400 via-yellow-400 to-green-400"},{id:"candy",name:"Caramelle",emoji:"\uD83C\uDF6C",gradient:"from-pink-400 via-purple-400 to-indigo-400"},{id:"fire",name:"Fuoco",emoji:"\uD83D\uDD25",gradient:"from-yellow-400 via-orange-500 to-red-600"},{id:"aurora",name:"Aurora",emoji:"✨",gradient:"from-green-300 via-cyan-400 to-purple-500"}],o=[{value:"9",label:"3\xd73",emoji:"\uD83D\uDE0A",description:"Facile - 9 pezzi"},{value:"16",label:"4\xd74",emoji:"\uD83C\uDFAF",description:"Medio - 16 pezzi"},{value:"25",label:"5\xd75",emoji:"\uD83D\uDCAA",description:"Difficile - 25 pezzi"},{value:"36",label:"6\xd76",emoji:"\uD83C\uDFC6",description:"Esperto - 36 pezzi"}];function d(e){let{piece:a,gridSize:t,pieceSize:i,image:s,boardSize:r,isDragging:c,onDragStart:l}=e,o=a.correctX/t*100,d=a.correctY/t*100;return(0,n.jsxs)("div",{className:"\n        absolute rounded-lg overflow-hidden\n        transition-shadow duration-200\n        ".concat(a.isPlaced?"cursor-default shadow-none":c?"cursor-grabbing shadow-2xl z-50 scale-105":"cursor-grab shadow-lg hover:shadow-xl hover:scale-102 z-10","\n      "),style:{width:i,height:i,left:a.currentX,top:a.currentY,transition:a.isPlaced?"all 0.3s ease-out":c?"none":"box-shadow 0.2s"},onMouseDown:e=>{a.isPlaced||(e.preventDefault(),l(a,e))},onTouchStart:e=>{a.isPlaced||l(a,e)},children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(s.gradient),style:{backgroundSize:"".concat(r,"px ").concat(r,"px"),backgroundPosition:"-".concat(a.correctX*i,"px -").concat(a.correctY*i,"px")}}),(0,n.jsx)("div",{className:"absolute inset-0 opacity-40",style:{background:"\n            radial-gradient(circle at ".concat(30+.4*o,"% ").concat(30+.4*d,"%, \n              rgba(255,255,255,0.5) 0%, \n              transparent 50%),\n            radial-gradient(circle at ").concat(70-.2*o,"% ").concat(70-.2*d,"%, \n              rgba(255,255,255,0.3) 0%, \n              transparent 40%)\n          ")}}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{fontSize:.5*i,opacity:.3,transform:"translate(".concat(-(.3*((a.correctX-t/2)*i)),"px, ").concat(-(.3*((a.correctY-t/2)*i)),"px)")},children:s.emoji}),(0,n.jsx)("div",{className:"absolute bottom-1 right-1 bg-black/30 text-white text-xs font-bold px-1 rounded",children:a.id+1}),(0,n.jsx)("div",{className:"\n        absolute inset-0 border-2 rounded-lg pointer-events-none\n        ".concat(a.isPlaced?"border-white/20":"border-white/40","\n      ")})]})}function u(e){let{image:a,gridSize:t,show:i,onClose:r}=e;return i?(0,n.jsxs)("div",{onClick:r,className:"jsx-65defc80df30c3a6 fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:[(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"jsx-65defc80df30c3a6 bg-white rounded-3xl p-6 max-w-md w-full shadow-2xl animate-bounce-in",children:[(0,n.jsxs)("h3",{className:"jsx-65defc80df30c3a6 text-xl font-bold text-center text-gray-800 mb-4",children:["\uD83D\uDCF8 Anteprima - ",a.name]}),(0,n.jsxs)("div",{className:"jsx-65defc80df30c3a6 "+"relative w-full aspect-square rounded-2xl overflow-hidden bg-gradient-to-br ".concat(a.gradient),children:[(0,n.jsx)("div",{style:{background:"\n              radial-gradient(circle at 30% 30%, rgba(255,255,255,0.5) 0%, transparent 50%),\n              radial-gradient(circle at 70% 70%, rgba(255,255,255,0.3) 0%, transparent 40%)\n            "},className:"jsx-65defc80df30c3a6 absolute inset-0 opacity-40"}),(0,n.jsx)("div",{className:"jsx-65defc80df30c3a6 absolute inset-0 flex items-center justify-center text-8xl opacity-50",children:a.emoji}),(0,n.jsx)("div",{style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)"),gridTemplateRows:"repeat(".concat(t,", 1fr)")},className:"jsx-65defc80df30c3a6 absolute inset-0 grid",children:Array.from({length:t*t},(e,a)=>(0,n.jsx)("div",{className:"jsx-65defc80df30c3a6 border border-white/30"},a))})]}),(0,n.jsxs)("p",{className:"jsx-65defc80df30c3a6 text-center text-gray-600 mt-4 mb-2",children:[t,"\xd7",t," = ",t*t," pezzi"]}),(0,n.jsx)(c.h9,{onClick:r,variant:"primary",className:"w-full",children:"Capito! \uD83D\uDC4D"})]}),(0,n.jsx)(s(),{id:"65defc80df30c3a6",children:"@keyframes bounce-in{0%{transform:scale(.5);opacity:0}50%{transform:scale(1.05)}100%{transform:scale(1);opacity:1}}.animate-bounce-in.jsx-65defc80df30c3a6{animation:bounce-in.3s ease-out}"})]}):null}function m(){let[e,a]=(0,r.useState)([]),[t,i]=(0,r.useState)(9),[m,x]=(0,r.useState)(l[0]),[p,h]=(0,r.useState)(0),[j,g]=(0,r.useState)(0),[f,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[y,D]=(0,r.useState)(!1),[N,C]=(0,r.useState)(!0),[k,T]=(0,r.useState)(!1),[z,S]=(0,r.useState)(null),[A,E]=(0,r.useState)({x:0,y:0}),[X,Y]=(0,r.useState)(null),P=(0,r.useRef)(null),{playPickup:M,playSnap:F,playDrop:R,playWin:q}=function(){let e=(0,r.useRef)(null),a=(0,r.useCallback)(()=>(e.current||(e.current=new(window.AudioContext||window.webkitAudioContext)),e.current),[]),t=(0,r.useCallback)(()=>{try{let e=a(),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="sine",t.frequency.value=400,n.gain.setValueAtTime(.15,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),t.start(),t.stop(e.currentTime+.1)}catch(e){}},[a]),n=(0,r.useCallback)(()=>{try{let e=a();[523.25,659.25,783.99].forEach((a,t)=>{let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type="sine",n.frequency.value=a,i.gain.setValueAtTime(.2,e.currentTime+.05*t),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.05*t+.12),n.start(e.currentTime+.05*t),n.stop(e.currentTime+.05*t+.12)})}catch(e){}},[a]);return{playPickup:t,playSnap:n,playDrop:(0,r.useCallback)(()=>{try{let e=a(),t=e.createOscillator(),n=e.createGain();t.connect(n),n.connect(e.destination),t.type="sine",t.frequency.value=250,n.gain.setValueAtTime(.1,e.currentTime),n.gain.exponentialRampToValueAtTime(.01,e.currentTime+.08),t.start(),t.stop(e.currentTime+.08)}catch(e){}},[a]),playWin:(0,r.useCallback)(()=>{try{let e=a();[523.25,659.25,783.99,1046.5].forEach((a,t)=>{let n=e.createOscillator(),i=e.createGain();n.connect(i),i.connect(e.destination),n.type="sine",n.frequency.value=a,i.gain.setValueAtTime(.25,e.currentTime+.15*t),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+.15*t+.3),n.start(e.currentTime+.15*t),n.stop(e.currentTime+.15*t+.3)})}catch(e){}},[a])}}(),L=(0,r.useMemo)(()=>Math.sqrt(t),[t]),V=(0,r.useMemo)(()=>Math.min(window.innerWidth-32,400),[]),O=(0,r.useMemo)(()=>Math.floor(V/L),[V,L]);(0,r.useEffect)(()=>(f&&!v&&(P.current=setInterval(()=>{g(e=>e+1)},1e3)),()=>{P.current&&(clearInterval(P.current),P.current=null)}),[f,v]);let G=(0,r.useCallback)(()=>{let e=[];for(let a=0;a<t;a++){let t=a%L,n=Math.floor(a/L);e.push({id:a,correctX:t,correctY:n,currentX:t*O,currentY:n*O,isPlaced:!1})}let n={minX:-O,maxX:V+2*O,minY:V+20,maxY:V+180};e.forEach(e=>{e.currentX=n.minX+Math.random()*(n.maxX-n.minX-O),e.currentY=n.minY+Math.random()*(n.maxY-n.minY-O)}),a(e),h(0),g(0),w(!1),D(!1),b(!0)},[t,L,O,V]),_=(0,r.useCallback)((e,a)=>{let t,n;if(e.isPlaced||v)return;"touches"in a?(t=a.touches[0].clientX,n=a.touches[0].clientY):(t=a.clientX,n=a.clientY);let i=null==X?void 0:X.getBoundingClientRect();i&&(E({x:t-(i.left+e.currentX),y:n-(i.top+e.currentY)}),S(e),N&&M())},[v,X,N,M]),B=(0,r.useCallback)(e=>{let t,n;if(!z||!X)return;"touches"in e?(t=e.touches[0].clientX,n=e.touches[0].clientY):(t=e.clientX,n=e.clientY);let i=X.getBoundingClientRect(),s=t-i.left-A.x,r=n-i.top-A.y;a(e=>e.map(e=>e.id===z.id?{...e,currentX:s,currentY:r}:e))},[z,X,A]),I=(0,r.useCallback)(()=>{if(!z)return;let t=z.correctX*O,n=z.correctY*O,i=e.find(e=>e.id===z.id);i&&(30>Math.sqrt(Math.pow(i.currentX-t,2)+Math.pow(i.currentY-n,2))?(a(e=>e.map(e=>e.id===z.id?{...e,currentX:t,currentY:n,isPlaced:!0}:e)),N&&F()):N&&R(),h(e=>e+1),S(null))},[z,e,O,N,F,R]);(0,r.useEffect)(()=>{let e=e=>B(e),a=()=>I(),t=e=>B(e),n=()=>I();return z&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",a),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("touchend",n)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",a),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",n)}},[z,B,I]),(0,r.useEffect)(()=>{e.length>0&&e.every(e=>e.isPlaced)&&(w(!0),b(!1),D(!0),N&&q())},[e,N,q]);let W=e=>{let a=Math.floor(e/60);return"".concat(a,":").concat((e%60).toString().padStart(2,"0"))},U=e.filter(e=>e.isPlaced).length;return(0,n.jsxs)(c.r5,{background:"coolSky",children:[(0,n.jsx)(c.NW,{active:y}),(0,n.jsx)(c.il,{backHref:"/games/arcade/",backLabel:"◀ Arcade",soundEnabled:N,onSoundToggle:()=>C(!N),children:(0,n.jsx)("div",{className:"jsx-788d9a4659686841 pt-20 pb-4 px-4",children:(0,n.jsx)(c.xr,{emoji:"\uD83E\uDDE9",title:"Puzzle",subtitle:"Ricomponi l'immagine!"})})}),(0,n.jsxs)("div",{className:"jsx-788d9a4659686841 px-4 pb-4 flex flex-col items-center",children:[(0,n.jsxs)("div",{className:"jsx-788d9a4659686841 flex gap-3 mb-4 flex-wrap justify-center",children:[(0,n.jsx)(c.fi,{icon:"⏱️",value:W(j)}),(0,n.jsx)(c.fi,{icon:"\uD83D\uDC46",value:p,label:"mosse"}),(0,n.jsx)(c.fi,{icon:"✅",value:"".concat(U,"/").concat(t)})]}),!f&&!v&&(0,n.jsxs)("div",{className:"jsx-788d9a4659686841 w-full max-w-md space-y-4 mb-6",children:[(0,n.jsxs)("div",{className:"jsx-788d9a4659686841 bg-white/90 backdrop-blur rounded-2xl p-4",children:[(0,n.jsx)("h3",{className:"jsx-788d9a4659686841 text-center font-bold text-gray-700 mb-3",children:"\uD83D\uDDBC️ Scegli l'immagine"}),(0,n.jsx)("div",{className:"jsx-788d9a4659686841 grid grid-cols-4 gap-2",children:l.map(e=>(0,n.jsx)("button",{onClick:()=>x(e),title:e.name,className:"jsx-788d9a4659686841 "+"\n                      aspect-square rounded-xl text-3xl\n                      transition-all duration-200\n                      ".concat(m.id===e.id?"scale-110 ring-4 ring-purple-400 shadow-lg":"hover:scale-105 opacity-70 hover:opacity-100","\n                      bg-gradient-to-br ").concat(e.gradient,"\n                    "),children:e.emoji},e.id))})]}),(0,n.jsxs)("div",{className:"jsx-788d9a4659686841 bg-white/90 backdrop-blur rounded-2xl p-4",children:[(0,n.jsx)("h3",{className:"jsx-788d9a4659686841 text-center font-bold text-gray-700 mb-3",children:"\uD83C\uDFAF Difficolt\xe0"}),(0,n.jsx)(c.BU,{value:String(t),options:o,onChange:e=>i(Number(e))})]})]}),(0,n.jsxs)("div",{ref:Y,style:{width:V+2*O,height:V+200},className:"jsx-788d9a4659686841 relative",children:[(0,n.jsx)("div",{style:{width:V,height:V,left:O,top:0},className:"jsx-788d9a4659686841 absolute bg-white/30 backdrop-blur-sm rounded-2xl border-4 border-dashed border-white/50",children:(0,n.jsx)("div",{style:{gridTemplateColumns:"repeat(".concat(L,", 1fr)"),gridTemplateRows:"repeat(".concat(L,", 1fr)")},className:"jsx-788d9a4659686841 absolute inset-0 grid",children:Array.from({length:L*L},(e,a)=>(0,n.jsx)("div",{className:"jsx-788d9a4659686841 border border-white/20"},a))})}),e.map(e=>(0,n.jsx)(d,{piece:{...e,currentX:e.currentX+O},gridSize:L,pieceSize:O,image:m,boardSize:V,isDragging:(null==z?void 0:z.id)===e.id,onDragStart:(e,a)=>_({...e,currentX:e.currentX-O},a)},e.id))]}),(0,n.jsx)("div",{className:"jsx-788d9a4659686841 flex flex-wrap gap-3 mt-4 justify-center",children:f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.h9,{onClick:()=>T(!0),variant:"ghost",icon:"\uD83D\uDCA1",children:"Aiuto"}),(0,n.jsx)(c.h9,{onClick:G,variant:"secondary",icon:"\uD83D\uDD04",children:"Ricomincia"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.h9,{onClick:G,variant:"success",icon:"\uD83C\uDFAE",size:"xl",children:"Gioca!"}),(0,n.jsx)(c.h9,{onClick:()=>T(!0),variant:"ghost",icon:"\uD83D\uDC41️",children:"Anteprima"})]})}),!f&&!v&&(0,n.jsxs)("div",{className:"jsx-788d9a4659686841 mt-6 bg-white/80 rounded-2xl p-4 max-w-md w-full",children:[(0,n.jsx)("h3",{className:"jsx-788d9a4659686841 text-center font-bold text-purple-700 mb-2",children:"\uD83D\uDCD6 Come si gioca"}),(0,n.jsxs)("ul",{className:"jsx-788d9a4659686841 space-y-1 text-sm text-gray-700",children:[(0,n.jsxs)("li",{className:"jsx-788d9a4659686841 flex items-start gap-2",children:[(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"\uD83D\uDC46"}),(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"Trascina i pezzi sulla griglia"})]}),(0,n.jsxs)("li",{className:"jsx-788d9a4659686841 flex items-start gap-2",children:[(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"\uD83C\uDFAF"}),(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"I pezzi si agganciano quando sono vicini al posto giusto"})]}),(0,n.jsxs)("li",{className:"jsx-788d9a4659686841 flex items-start gap-2",children:[(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"\uD83D\uDCA1"}),(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:'Usa "Anteprima" per vedere l\'immagine completa'})]}),(0,n.jsxs)("li",{className:"jsx-788d9a4659686841 flex items-start gap-2",children:[(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"\uD83C\uDFC6"}),(0,n.jsx)("span",{className:"jsx-788d9a4659686841",children:"Completa il puzzle pi\xf9 velocemente possibile!"})]})]})]})]}),(0,n.jsx)(u,{image:m,gridSize:L,show:k,onClose:()=>T(!1)}),(0,n.jsx)(c.mJ,{show:v,title:"Puzzle completato!",emoji:"\uD83E\uDDE9",score:p,time:W(j),onPlayAgain:G,onGoBack:()=>window.location.href="/games",children:(0,n.jsxs)("p",{className:"jsx-788d9a4659686841 text-gray-600 mb-2",children:[m.emoji," ",m.name," • ",L,"\xd7",L]})}),(0,n.jsx)(s(),{id:"788d9a4659686841",children:".hover\\\\.jsx-788d9a4659686841:scale-102:hover{transform:scale(1.02)}"})]})}}},e=>{e.O(0,[9664,2583,587,18,7358],()=>e(e.s=44538)),_N_E=e.O()}]);