(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7829],{16311:(e,t,a)=>{Promise.resolve().then(a.bind(a,58515))},58515:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var n=a(54568),l=a(7620),i=a(85206),r=a(91085),s=a(19664),o=a.n(s);let c={common:{color:"text-gray-600",bg:"bg-gray-100",border:"border-gray-300",gradient:"from-gray-200 to-gray-300",label:"Common",xpMultiplier:1,dropChance:.4},uncommon:{color:"text-green-600",bg:"bg-green-100",border:"border-green-300",gradient:"from-green-200 to-emerald-300",label:"Uncommon",xpMultiplier:1.2,dropChance:.3},rare:{color:"text-blue-600",bg:"bg-blue-100",border:"border-blue-300",gradient:"from-blue-200 to-cyan-300",label:"Rare",xpMultiplier:1.5,dropChance:.2},epic:{color:"text-purple-600",bg:"bg-purple-100",border:"border-purple-300",gradient:"from-purple-200 to-violet-300",label:"Epic",xpMultiplier:2,dropChance:.08},legendary:{color:"text-amber-600",bg:"bg-gradient-to-br from-amber-100 to-yellow-200",border:"border-amber-400",gradient:"from-amber-300 via-yellow-300 to-orange-300",label:"Legendary",xpMultiplier:3,dropChance:.02}},d=[{id:"cat_tabby",species:"cat",name:"Tabby Cat",emoji:"\uD83D\uDC31",rarity:"common",description:"A friendly tabby cat who loves to nap.",unlockMethod:"game",unlockRequirement:"Play any game"},{id:"dog_golden",species:"dog",name:"Golden Pup",emoji:"\uD83D\uDC15",rarity:"common",description:"A loyal and playful golden retriever.",unlockMethod:"game",unlockRequirement:"Play any game"},{id:"bunny_white",species:"bunny",name:"Snow Bunny",emoji:"\uD83D\uDC30",rarity:"common",description:"A fluffy white bunny who loves carrots.",unlockMethod:"game",unlockRequirement:"Play any game"},{id:"cat_orange",species:"cat",name:"Ginger Cat",emoji:"\uD83D\uDC08",rarity:"common",description:"An adventurous orange cat.",unlockMethod:"reading",unlockRequirement:"Read a book"},{id:"fox_red",species:"fox",name:"Forest Fox",emoji:"\uD83E\uDD8A",rarity:"uncommon",description:"A clever fox from the enchanted forest.",unlockMethod:"game",unlockRequirement:"Win 3 games"},{id:"owl_barn",species:"owl",name:"Wise Owl",emoji:"\uD83E\uDD89",rarity:"uncommon",description:"A knowledgeable owl who loves books.",unlockMethod:"reading",unlockRequirement:"Complete a book"},{id:"dog_husky",species:"dog",name:"Arctic Husky",emoji:"\uD83D\uDC3A",rarity:"uncommon",description:"A majestic husky from the frozen north.",unlockMethod:"game",unlockRequirement:"Score over 100 in a game"},{id:"cat_black",species:"cat",name:"Shadow Cat",emoji:"\uD83D\uDC08‍⬛",rarity:"uncommon",description:"A mysterious black cat with magical eyes.",unlockMethod:"special",unlockRequirement:"Visit at night"},{id:"dragon_baby",species:"dragon",name:"Baby Dragon",emoji:"\uD83D\uDC09",rarity:"rare",description:"A tiny dragon who breathes sparkles.",unlockMethod:"achievement",unlockRequirement:"Unlock 5 achievements"},{id:"unicorn_baby",species:"unicorn",name:"Sparkle Pony",emoji:"\uD83E\uDD84",rarity:"rare",description:"A young unicorn learning magic.",unlockMethod:"game",unlockRequirement:"Win 10 games"},{id:"phoenix_young",species:"phoenix",name:"Ember Bird",emoji:"\uD83D\uDD25",rarity:"rare",description:"A phoenix chick with warm feathers.",unlockMethod:"daily",unlockRequirement:"7 day streak"},{id:"dragon_fire",species:"dragon",name:"Fire Drake",emoji:"\uD83D\uDD25\uD83D\uDC32",rarity:"epic",description:"A fierce dragon with flames of gold.",unlockMethod:"achievement",unlockRequirement:"Earn 10 achievements"},{id:"unicorn_rainbow",species:"unicorn",name:"Rainbow Unicorn",emoji:"\uD83C\uDF08\uD83E\uDD84",rarity:"epic",description:"A magical unicorn with a rainbow mane.",unlockMethod:"special",unlockRequirement:"Collect 10 different pets"},{id:"owl_cosmic",species:"owl",name:"Cosmic Owl",emoji:"✨\uD83E\uDD89",rarity:"epic",description:"An owl blessed by starlight.",unlockMethod:"reading",unlockRequirement:"Read 10 books"},{id:"phoenix_eternal",species:"phoenix",name:"Eternal Phoenix",emoji:"\uD83C\uDF1F\uD83D\uDD25",rarity:"legendary",description:"The immortal phoenix, master of rebirth.",unlockMethod:"achievement",unlockRequirement:"Earn all achievements"},{id:"dragon_celestial",species:"dragon",name:"Celestial Dragon",emoji:"✨\uD83D\uDC32✨",rarity:"legendary",description:"A divine dragon from the heavens.",unlockMethod:"special",unlockRequirement:"Collect 20 pets"}],p="onde-pet-collection",u={pets:[],companionId:null,totalPetsCollected:0,stats:{totalPlaySessions:0,totalFeedings:0,highestLevel:1}};function m(e){return Math.floor(100*Math.pow(1.5,e-1))}function x(e){let{pet:t,definition:a,isOwned:l,isCompanion:r,onSelect:s}=e,o=c[a.rarity];return(0,n.jsxs)(i.P.button,{whileHover:{scale:l?1.05:1.02},whileTap:{scale:.98},onClick:s,disabled:!l,className:"relative p-4 rounded-2xl text-left transition-all w-full ".concat(l?"bg-gradient-to-br ".concat(o.gradient," ").concat(o.border," border-2 shadow-lg hover:shadow-xl cursor-pointer"):"bg-gray-100/50 border-2 border-gray-200 opacity-60 cursor-not-allowed"),children:[r&&(0,n.jsxs)("div",{className:"absolute -top-2 -right-2 bg-amber-400 text-amber-900 rounded-full px-2 py-0.5 text-xs font-bold shadow-md flex items-center gap-1",children:[(0,n.jsx)("span",{children:"⭐"})," Companion"]}),(0,n.jsx)("div",{className:"absolute top-2 left-2 px-2 py-0.5 rounded-full text-xs font-bold ".concat(o.bg," ").concat(o.color),children:o.label}),(0,n.jsx)("div",{className:"text-5xl mb-3 mt-4 text-center ".concat(!l&&"grayscale"),children:l?a.emoji:"❓"}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"font-bold ".concat(l?"text-gray-800":"text-gray-400"),children:l?(null==t?void 0:t.nickname)||a.name:"???"}),l&&t&&(0,n.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,n.jsx)("div",{className:"flex items-center justify-center gap-1 text-sm",children:(0,n.jsxs)("span",{className:"text-amber-600 font-medium",children:["Lv.",t.level]})}),(0,n.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 transition-all",style:{width:"".concat(t.xpProgress,"%")}})}),(0,n.jsxs)("div",{className:"flex items-center justify-center gap-1 text-xs text-gray-600",children:[(0,n.jsx)("span",{children:t.currentHappiness>=70?"\uD83D\uDE0A":t.currentHappiness>=40?"\uD83D\uDE10":"\uD83D\uDE22"}),(0,n.jsxs)("span",{children:[t.currentHappiness,"%"]})]})]}),!l&&(0,n.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:a.unlockRequirement})]})]})}function h(e){let{pet:t,definition:a,isCompanion:s,onClose:o,onFeed:d,onPlay:p,onSetCompanion:u,onRename:x}=e,[h,g]=(0,l.useState)(!1),[b,y]=(0,l.useState)(t.nickname),[f,v]=(0,l.useState)(null),[j,w]=(0,l.useState)(null),[N,k]=(0,l.useState)("idle"),C=c[a.rarity],D=()=>{let e=new Date(t.lastFed);return Date.now()-e.getTime()>=18e5},P=()=>{let e=new Date(t.lastPlayed);return Date.now()-e.getTime()>=9e5};return(0,n.jsx)(r.N,{children:(0,n.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:o,children:(0,n.jsxs)(i.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-gradient-to-br ".concat(C.gradient," rounded-3xl p-6 max-w-md w-full shadow-2xl border-4 ").concat(C.border),onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{onClick:o,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/80 hover:bg-white flex items-center justify-center shadow-md",children:"✕"}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(i.P.div,{className:"text-8xl mb-4",animate:{scale:"eating"===N?[1,1.1,1]:"playing"===N?[1,1.2,.9,1.1,1]:"happy"===N?[1,1.15,1]:1,rotate:"playing"===N?[0,-10,10,-10,0]:0},transition:{duration:"playing"===N?.5:.3,repeat:3*("idle"!==N)},children:"eating"===N?"\uD83D\uDE0B":"happy"===N?"\uD83E\uDD70":a.emoji}),(0,n.jsxs)(r.N,{children:[f&&(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-24 left-1/2 -translate-x-1/2 bg-green-500 text-white px-3 py-1 rounded-full font-bold",children:["+",f.xp," XP! ",f.leveledUp&&"\uD83C\uDF89 LEVEL UP!"]}),j&&(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-24 left-1/2 -translate-x-1/2 bg-blue-500 text-white px-3 py-1 rounded-full font-bold",children:["+",j.xp," XP! ",j.leveledUp&&"\uD83C\uDF89 LEVEL UP!"]})]}),h?(0,n.jsxs)("div",{className:"flex gap-2 justify-center items-center",children:[(0,n.jsx)("input",{type:"text",value:b,onChange:e=>y(e.target.value),maxLength:20,className:"px-3 py-1 rounded-lg border-2 border-gray-300 focus:border-teal-500 outline-none text-center",autoFocus:!0}),(0,n.jsx)("button",{onClick:()=>{x(b),g(!1)},className:"text-green-600 font-bold",children:"✓"}),(0,n.jsx)("button",{onClick:()=>g(!1),className:"text-red-600 font-bold",children:"✕"})]}):(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:t.nickname}),(0,n.jsx)("button",{onClick:()=>g(!0),className:"text-gray-500 hover:text-gray-700",children:"✏️"})]}),(0,n.jsxs)("p",{className:"text-sm mt-1 ".concat(C.color," font-medium"),children:[C.label," ",a.species]}),(0,n.jsx)("p",{className:"text-gray-600 text-sm mt-2",children:a.description})]}),(0,n.jsxs)("div",{className:"mt-6 bg-white/60 rounded-xl p-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold text-amber-600",children:t.level}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Level"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[t.xp,"/",m(t.level)]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"XP"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-2xl font-bold",children:t.currentHappiness>=70?"\uD83D\uDE0A":t.currentHappiness>=40?"\uD83D\uDE10":"\uD83D\uDE22"}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:[t.currentHappiness,"% Happy"]})]})]}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,n.jsx)(i.P.div,{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500",initial:{width:0},animate:{width:"".concat(t.xpProgress,"%")},transition:{duration:.5}})})})]}),(0,n.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[(0,n.jsxs)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{let e=d();e.success&&(k("eating"),v({xp:e.xpGained,leveledUp:e.leveledUp}),setTimeout(()=>{k("happy"),setTimeout(()=>k("idle"),1e3)},1500),setTimeout(()=>v(null),3e3))},disabled:!D(),className:"py-3 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 ".concat(D()?"bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:[(0,n.jsx)("span",{className:"text-xl",children:"\uD83C\uDF56"}),(0,n.jsx)("span",{children:"Feed"})]}),(0,n.jsxs)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{let e=p();e.success&&(k("playing"),w({xp:e.xpGained,leveledUp:e.leveledUp}),setTimeout(()=>{k("happy"),setTimeout(()=>k("idle"),1e3)},1500),setTimeout(()=>w(null),3e3))},disabled:!P(),className:"py-3 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 ".concat(P()?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:[(0,n.jsx)("span",{className:"text-xl",children:"\uD83C\uDFBE"}),(0,n.jsx)("span",{children:"Play"})]})]}),(0,n.jsxs)(i.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:"mt-3 w-full py-3 rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 ".concat(s?"bg-gradient-to-r from-amber-400 to-orange-400 text-amber-900":"bg-white/80 text-gray-700 hover:bg-white"),children:[(0,n.jsx)("span",{className:"text-xl",children:"⭐"}),(0,n.jsx)("span",{children:s?"Current Companion!":"Set as Companion"})]}),(0,n.jsxs)("p",{className:"text-center text-xs text-gray-500 mt-4",children:["Obtained on ",new Date(t.obtainedAt).toLocaleDateString()]})]})})})}function g(e){let{pet:t,onClose:a}=e,l=c[t.rarity];return(0,n.jsx)(r.N,{children:(0,n.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:a,children:(0,n.jsxs)(i.P.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{type:"spring",damping:15},className:"bg-gradient-to-br ".concat(l.gradient," rounded-3xl p-8 max-w-sm w-full shadow-2xl border-4 ").concat(l.border," text-center"),onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(12)].map((e,t)=>(0,n.jsx)(i.P.span,{className:"absolute text-2xl",initial:{opacity:0,scale:0},animate:{opacity:[0,1,0],scale:[0,1,0],x:[0,(Math.random()-.5)*200],y:[0,(Math.random()-.5)*200]},transition:{duration:1.5,delay:.1*t},style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:"✨"},t))}),(0,n.jsxs)(i.P.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[(0,n.jsx)("h2",{className:"text-2xl font-black text-gray-800 mb-2",children:"\uD83C\uDF89 NEW PET! \uD83C\uDF89"}),(0,n.jsx)("div",{className:"inline-block px-3 py-1 rounded-full text-sm font-bold ".concat(l.bg," ").concat(l.color," mb-4"),children:l.label})]}),(0,n.jsx)(i.P.div,{className:"text-9xl my-6",initial:{scale:0},animate:{scale:[0,1.2,1]},transition:{delay:.3,duration:.5},children:t.emoji}),(0,n.jsxs)(i.P.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:[(0,n.jsx)("h3",{className:"text-3xl font-bold text-gray-800",children:t.name}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:t.description})]}),(0,n.jsx)(i.P.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"mt-8 px-8 py-3 bg-white/80 hover:bg-white rounded-xl font-bold text-gray-800 shadow-lg",children:"Awesome! \uD83D\uDC3E"})]})})})}function b(e){let{companion:t}=e;return t&&t.definition?(0,n.jsx)(i.P.div,{className:"fixed bottom-24 right-6 z-40 cursor-pointer",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.1},drag:!0,dragConstraints:{left:-300,right:0,top:-400,bottom:0},children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(i.P.div,{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-white rounded-xl px-3 py-1 shadow-lg text-sm whitespace-nowrap",initial:{opacity:0,y:10},animate:{opacity:[0,1,1,0],y:[10,0,0,-10]},transition:{duration:4,repeat:1/0,repeatDelay:5},children:t.currentHappiness>=70?"\uD83D\uDC95 Happy!":t.currentHappiness>=40?"\uD83E\uDD14 Hungry...":"\uD83D\uDE22 Feed me!"}),(0,n.jsx)(i.P.div,{className:"w-16 h-16 rounded-full bg-gradient-to-br from-amber-100 to-amber-200 border-4 border-amber-400 shadow-xl flex items-center justify-center text-3xl",animate:{y:[0,-5,0]},transition:{duration:2,repeat:1/0},children:t.definition.emoji}),(0,n.jsx)("div",{className:"absolute -bottom-1 -right-1 bg-amber-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shadow-md",children:t.level})]})}):null}function y(){let{mounted:e,pets:t,companion:a,newlyObtained:r,collectionStats:s,stats:y,allPets:f,rarityConfig:v,getPetDefinition:j,ownsPet:w,feedPet:N,playWithPet:k,setCompanion:C,renamePet:D,clearNewlyObtained:P,awardRandomPet:M}=function(){let[e,t]=(0,l.useState)(u),[a,n]=(0,l.useState)(!1),[i,r]=(0,l.useState)(null);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(p);if(e){let a=JSON.parse(e);t(a)}}catch(e){console.error("Failed to load pet collection:",e)}n(!0)},[]),(0,l.useEffect)(()=>{if(a)try{localStorage.setItem(p,JSON.stringify(e))}catch(e){console.error("Failed to save pet collection:",e)}},[e,a]);let s=(0,l.useCallback)(e=>d.find(t=>t.id===e),[]),o=(0,l.useCallback)(t=>e.pets.some(e=>e.petId===t),[e.pets]),x=(0,l.useCallback)(t=>e.pets.find(e=>e.petId===t),[e.pets]),h=(0,l.useCallback)((e,a)=>{let n=s(e);if(!n||o(e))return!1;let l={petId:e,nickname:a||n.name,level:1,xp:0,happiness:100,lastFed:new Date().toISOString(),lastPlayed:new Date().toISOString(),obtainedAt:new Date().toISOString(),isCompanion:!1};return t(e=>({...e,pets:[...e.pets,l],totalPetsCollected:e.totalPetsCollected+1})),r(n),!0},[s,o]),g=(0,l.useCallback)(e=>{let t=d.filter(t=>!o(t.id)&&(t.unlockMethod===e||"game"===t.unlockMethod));if(0===t.length)return null;let a=Math.random()*t.reduce((e,t)=>e+c[t.rarity].dropChance,0);for(let e of t)if((a-=c[e.rarity].dropChance)<=0)return h(e.id),e;let n=t[0];return h(n.id),n},[o,h]),b=(0,l.useCallback)(e=>{let a=x(e),n=s(e);if(!a||!n)return{success:!1,xpGained:0,leveledUp:!1};let l=new Date(a.lastFed),i=new Date;if((i.getTime()-l.getTime())/6e4<30)return{success:!1,xpGained:0,leveledUp:!1};let r=Math.floor(20*c[n.rarity].xpMultiplier),o=a.xp+r,d=m(a.level),p=o>=d;return t(t=>{let n=t.pets.map(t=>{if(t.petId!==e)return t;let a=p?t.level+1:t.level;return{...t,xp:p?o-d:o,level:a,happiness:Math.min(100,t.happiness+15),lastFed:i.toISOString()}});return{...t,pets:n,stats:{...t.stats,totalFeedings:t.stats.totalFeedings+1,highestLevel:Math.max(t.stats.highestLevel,p?a.level+1:a.level)}}}),{success:!0,xpGained:r,leveledUp:p}},[x,s]),y=(0,l.useCallback)(e=>{let a=x(e),n=s(e);if(!a||!n)return{success:!1,xpGained:0,leveledUp:!1};let l=new Date(a.lastPlayed),i=new Date;if((i.getTime()-l.getTime())/6e4<15)return{success:!1,xpGained:0,leveledUp:!1};let r=Math.floor(15*c[n.rarity].xpMultiplier),o=a.xp+r,d=m(a.level),p=o>=d;return t(t=>{let n=t.pets.map(t=>{if(t.petId!==e)return t;let a=p?t.level+1:t.level;return{...t,xp:p?o-d:o,level:a,happiness:Math.min(100,t.happiness+10),lastPlayed:i.toISOString()}});return{...t,pets:n,stats:{...t.stats,totalPlaySessions:t.stats.totalPlaySessions+1,highestLevel:Math.max(t.stats.highestLevel,p?a.level+1:a.level)}}}),{success:!0,xpGained:r,leveledUp:p}},[x,s]),f=(0,l.useCallback)(e=>{t(t=>{let a=t.pets.map(t=>({...t,isCompanion:t.petId===e}));return{...t,pets:a,companionId:e}})},[]),v=(0,l.useCallback)((e,a)=>{t(t=>({...t,pets:t.pets.map(t=>{var n;return t.petId===e?{...t,nickname:a.trim()||(null==(n=s(e))?void 0:n.name)||"Pet"}:t})}))},[s]),j=(0,l.useMemo)(()=>e.pets.map(e=>{var t;let a=(t=Math.max(new Date(e.lastFed).getTime(),new Date(e.lastPlayed).getTime())>0?new Date(e.lastFed)>new Date(e.lastPlayed)?e.lastFed:e.lastPlayed:e.obtainedAt,Math.max(10,e.happiness-Math.floor(5*((Date.now()-new Date(t).getTime())/36e5)))),n=s(e.petId);return{...e,currentHappiness:a,definition:n,xpToNextLevel:m(e.level),xpProgress:Math.round(e.xp/m(e.level)*100)}}),[e.pets,s]),w=(0,l.useMemo)(()=>e.companionId&&j.find(t=>t.petId===e.companionId)||null,[e.companionId,j]),N=(0,l.useMemo)(()=>{let t=d.length,a=e.pets.length;return{owned:a,totalPossible:t,percentage:Math.round(a/t*100),byRarity:{common:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.rarity)==="common"}).length,uncommon:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.rarity)==="uncommon"}).length,rare:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.rarity)==="rare"}).length,epic:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.rarity)==="epic"}).length,legendary:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.rarity)==="legendary"}).length},bySpecies:{cat:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="cat"}).length,dog:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="dog"}).length,dragon:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="dragon"}).length,unicorn:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="unicorn"}).length,bunny:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="bunny"}).length,fox:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="fox"}).length,owl:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="owl"}).length,phoenix:e.pets.filter(e=>{var t;return(null==(t=s(e.petId))?void 0:t.species)==="phoenix"}).length},totalLevels:e.pets.reduce((e,t)=>e+t.level,0),highestLevel:e.stats.highestLevel}},[e.pets,e.stats,s]),k=(0,l.useCallback)(()=>{r(null)},[]),C=(0,l.useCallback)(()=>{t(u),r(null)},[]);return{mounted:a,pets:j,companion:w,newlyObtained:i,stats:e.stats,collectionStats:N,getPetDefinition:s,getOwnedPet:x,ownsPet:o,addPet:h,awardRandomPet:g,renamePet:v,feedPet:b,playWithPet:y,setCompanion:f,clearNewlyObtained:k,resetCollection:C,allPets:d,rarityConfig:c}}(),[E,S]=(0,l.useState)(null),[F,I]=(0,l.useState)("all"),[R,A]=(0,l.useState)("all"),[T,L]=(0,l.useState)("all"),_=[...f].sort((e,t)=>{let a=w(e.id);if(a!==w(t.id))return a?-1:1;let n=["legendary","epic","rare","uncommon","common"];return n.indexOf(e.rarity)-n.indexOf(t.rarity)}).filter(e=>!("all"!==F&&e.rarity!==F||"all"!==R&&e.species!==R||"owned"===T&&!w(e.id)||"missing"===T&&w(e.id))),H=E?t.find(e=>e.petId===E):null,U=E?j(E):null;return e?(0,n.jsxs)("div",{className:"min-h-screen py-8 px-4",style:{background:"linear-gradient(180deg, #FEF3E2 0%, #FFECD2 30%, #FCB69F 100%)"},children:[(0,n.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,n.jsxs)(o(),{href:"/",className:"inline-flex items-center gap-2 text-orange-600 hover:text-orange-800 transition-colors mb-6",children:[(0,n.jsx)("span",{children:"←"}),(0,n.jsx)("span",{children:"Back to Home"})]}),(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-4xl md:text-5xl font-black text-orange-800 mb-2",children:"\uD83D\uDC3E Pet Collection \uD83D\uDC3E"}),(0,n.jsx)("p",{className:"text-orange-600",children:"Collect, care for, and play with your virtual pets!"})]}),(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/80 backdrop-blur-xl rounded-3xl p-6 border-2 border-orange-200 shadow-xl mb-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-br from-amber-100 to-orange-100 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-3xl font-black text-orange-600",children:s.owned}),(0,n.jsx)("p",{className:"text-sm text-orange-500",children:"Pets Owned"})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl p-4",children:[(0,n.jsxs)("p",{className:"text-3xl font-black text-purple-600",children:[s.percentage,"%"]}),(0,n.jsx)("p",{className:"text-sm text-purple-500",children:"Complete"})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-br from-blue-100 to-cyan-100 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-3xl font-black text-blue-600",children:s.totalLevels}),(0,n.jsx)("p",{className:"text-sm text-blue-500",children:"Total Levels"})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-br from-green-100 to-emerald-100 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-3xl font-black text-green-600",children:y.totalFeedings}),(0,n.jsx)("p",{className:"text-sm text-green-500",children:"Feedings"})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-br from-pink-100 to-rose-100 rounded-xl p-4",children:[(0,n.jsx)("p",{className:"text-3xl font-black text-pink-600",children:y.totalPlaySessions}),(0,n.jsx)("p",{className:"text-sm text-pink-500",children:"Play Sessions"})]})]}),(0,n.jsx)("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:Object.entries(s.byRarity).map(e=>{let[t,a]=e,l=v[t],i=f.filter(e=>e.rarity===t).length;return(0,n.jsxs)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(l.bg," ").concat(l.color),children:[l.label,": ",a,"/",i]},t)})})]}),(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/60 rounded-2xl p-4 mb-6 flex flex-wrap gap-4 items-center justify-center",children:[(0,n.jsxs)("select",{value:F,onChange:e=>I(e.target.value),className:"px-4 py-2 rounded-xl border-2 border-orange-200 bg-white focus:outline-none focus:border-orange-400",children:[(0,n.jsx)("option",{value:"all",children:"All Rarities"}),(0,n.jsx)("option",{value:"common",children:"Common"}),(0,n.jsx)("option",{value:"uncommon",children:"Uncommon"}),(0,n.jsx)("option",{value:"rare",children:"Rare"}),(0,n.jsx)("option",{value:"epic",children:"Epic"}),(0,n.jsx)("option",{value:"legendary",children:"Legendary"})]}),(0,n.jsxs)("select",{value:R,onChange:e=>A(e.target.value),className:"px-4 py-2 rounded-xl border-2 border-orange-200 bg-white focus:outline-none focus:border-orange-400",children:[(0,n.jsx)("option",{value:"all",children:"All Species"}),(0,n.jsx)("option",{value:"cat",children:"\uD83D\uDC31 Cats"}),(0,n.jsx)("option",{value:"dog",children:"\uD83D\uDC15 Dogs"}),(0,n.jsx)("option",{value:"bunny",children:"\uD83D\uDC30 Bunnies"}),(0,n.jsx)("option",{value:"fox",children:"\uD83E\uDD8A Foxes"}),(0,n.jsx)("option",{value:"owl",children:"\uD83E\uDD89 Owls"}),(0,n.jsx)("option",{value:"dragon",children:"\uD83D\uDC32 Dragons"}),(0,n.jsx)("option",{value:"unicorn",children:"\uD83E\uDD84 Unicorns"}),(0,n.jsx)("option",{value:"phoenix",children:"\uD83D\uDD25 Phoenixes"})]}),(0,n.jsx)("div",{className:"flex bg-orange-100 rounded-xl p-1",children:["all","owned","missing"].map(e=>(0,n.jsx)("button",{onClick:()=>L(e),className:"px-4 py-1.5 rounded-lg text-sm font-medium transition-all ".concat(T===e?"bg-orange-500 text-white shadow-md":"text-orange-700 hover:bg-orange-200"),children:"all"===e?"All":"owned"===e?"Owned":"Missing"},e))})]}),(0,n.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:_.map((e,l)=>{let r=w(e.id),s=r?t.find(t=>t.petId===e.id):void 0;return(0,n.jsx)(i.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.03*l},children:(0,n.jsx)(x,{pet:s,definition:e,isOwned:r,isCompanion:(null==a?void 0:a.petId)===e.id,onSelect:()=>r&&S(e.id)})},e.id)})}),0===_.length&&(0,n.jsxs)("div",{className:"text-center py-16",children:[(0,n.jsx)("p",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,n.jsx)("p",{className:"text-xl text-orange-600",children:"No pets match your filters"})]}),(0,n.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"mt-12 bg-white/80 backdrop-blur-xl rounded-3xl p-6 border-2 border-orange-200 shadow-xl",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-orange-800 mb-4 text-center",children:"\uD83C\uDF81 How to Get Pets"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl",children:[(0,n.jsx)("span",{className:"text-4xl",children:"\uD83C\uDFAE"}),(0,n.jsx)("h3",{className:"font-bold text-blue-800 mt-2",children:"Play Games"}),(0,n.jsx)("p",{className:"text-sm text-blue-600",children:"Win games in the arcade to earn pet rewards!"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-amber-50 to-yellow-50 rounded-xl",children:[(0,n.jsx)("span",{className:"text-4xl",children:"\uD83C\uDFC6"}),(0,n.jsx)("h3",{className:"font-bold text-amber-800 mt-2",children:"Achievements"}),(0,n.jsx)("p",{className:"text-sm text-amber-600",children:"Unlock achievements to get rare pets!"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl",children:[(0,n.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCDA"}),(0,n.jsx)("h3",{className:"font-bold text-purple-800 mt-2",children:"Read Books"}),(0,n.jsx)("p",{className:"text-sm text-purple-600",children:"Complete books to befriend wise pets!"})]})]})]}),(0,n.jsx)("div",{className:"text-center text-orange-500 text-sm py-8",children:(0,n.jsxs)("p",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("span",{children:"\uD83D\uDC3E"}),"Collect them all!",(0,n.jsx)("span",{children:"\uD83D\uDC3E"})]})})]}),H&&U&&(0,n.jsx)(h,{pet:H,definition:U,isCompanion:(null==a?void 0:a.petId)===E,onClose:()=>S(null),onFeed:()=>N(E),onPlay:()=>k(E),onSetCompanion:()=>C((null==a?void 0:a.petId)===E?null:E),onRename:e=>D(E,e)}),r&&(0,n.jsx)(g,{pet:r,onClose:P}),(0,n.jsx)(b,{companion:a})]}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(180deg, #FEF3E2 0%, #FFECD2 30%, #FCB69F 100%)"},children:(0,n.jsx)(i.P.div,{className:"text-6xl",animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:1.5,repeat:1/0},children:"\uD83D\uDC3E"})})}},91085:(e,t,a)=>{"use strict";a.d(t,{N:()=>b});var n=a(54568),l=a(7620),i=a(97966),r=a(33546),s=a(39536),o=a(37929);class c extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:a}=e,i=(0,l.useId)(),r=(0,l.useRef)(null),s=(0,l.useRef)({width:0,height:0,top:0,left:0}),{nonce:d}=(0,l.useContext)(o.Q);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:l}=s.current;if(a||!r.current||!e||!t)return;r.current.dataset.motionPopId=i;let o=document.createElement("style");return d&&(o.nonce=d),document.head.appendChild(o),o.sheet&&o.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(n,"px !important;\n            left: ").concat(l,"px !important;\n          }\n        ")),()=>{document.head.removeChild(o)}},[a]),(0,n.jsx)(c,{isPresent:a,childRef:r,sizeRef:s,children:l.cloneElement(t,{ref:r})})}let p=e=>{let{children:t,initial:a,isPresent:i,onExitComplete:o,custom:c,presenceAffectsLayout:p,mode:m}=e,x=(0,r.M)(u),h=(0,l.useId)(),g=(0,l.useCallback)(e=>{for(let t of(x.set(e,!0),x.values()))if(!t)return;o&&o()},[x,o]),b=(0,l.useMemo)(()=>({id:h,initial:a,isPresent:i,custom:c,onExitComplete:g,register:e=>(x.set(e,!1),()=>x.delete(e))}),p?[Math.random(),g]:[i,g]);return(0,l.useMemo)(()=>{x.forEach((e,t)=>x.set(t,!1))},[i]),l.useEffect(()=>{i||x.size||!o||o()},[i]),"popLayout"===m&&(t=(0,n.jsx)(d,{isPresent:i,children:t})),(0,n.jsx)(s.t.Provider,{value:b,children:t})};function u(){return new Map}var m=a(98647);let x=e=>e.key||"";function h(e){let t=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&t.push(e)}),t}var g=a(76451);let b=e=>{let{children:t,custom:a,initial:s=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1}=e,[b,y]=(0,m.xQ)(u),f=(0,l.useMemo)(()=>h(t),[t]),v=u&&!b?[]:f.map(x),j=(0,l.useRef)(!0),w=(0,l.useRef)(f),N=(0,r.M)(()=>new Map),[k,C]=(0,l.useState)(f),[D,P]=(0,l.useState)(f);(0,g.E)(()=>{j.current=!1,w.current=f;for(let e=0;e<D.length;e++){let t=x(D[e]);v.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[D,v.length,v.join("-")]);let M=[];if(f!==k){let e=[...f];for(let t=0;t<D.length;t++){let a=D[t],n=x(a);v.includes(n)||(e.splice(t,0,a),M.push(a))}"wait"===d&&M.length&&(e=M),P(h(e)),C(f);return}let{forceRender:E}=(0,l.useContext)(i.L);return(0,n.jsx)(n.Fragment,{children:D.map(e=>{let t=x(e),l=(!u||!!b)&&(f===D||v.includes(t));return(0,n.jsx)(p,{isPresent:l,initial:(!j.current||!!s)&&void 0,custom:l?void 0:a,presenceAffectsLayout:c,mode:d,onExitComplete:l?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==E||E(),P(w.current),u&&(null==y||y()),o&&o())},children:e},t)})})}}},e=>{e.O(0,[9664,5206,587,18,7358],()=>e(e.s=16311)),_N_E=e.O()}]);