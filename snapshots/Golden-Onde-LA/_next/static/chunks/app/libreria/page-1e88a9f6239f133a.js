(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{466:(e,s,a)=>{Promise.resolve().then(a.bind(a,6114))},6114:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var l=a(5155),t=a(2115);function i(){let[e,s]=(0,t.useState)(null),[a,i]=(0,t.useState)([]),[c,d]=(0,t.useState)(!0);async function r(){try{let e=await fetch("/api/auth/me"),a=await e.json();if(a.user){s(a.user);let e=await fetch("/api/user/purchases"),l=await e.json();i(l.purchases||[])}}catch(e){console.error("Error fetching data:",e)}finally{d(!1)}}return((0,t.useEffect)(()=>{r()},[]),c)?(0,l.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-10 bg-white/10 rounded mb-8 w-1/3"}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,l.jsx)("div",{className:"aspect-[3/4] bg-white/10 rounded-xl"},e))})]})}):e?0===a.length?(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"La Mia Libreria"}),(0,l.jsxs)("div",{className:"text-center py-20 opacity-60",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCDA"}),(0,l.jsx)("p",{className:"text-xl mb-4",children:"La tua libreria e vuota"}),(0,l.jsx)("p",{children:"Acquista il tuo primo libro per iniziare a leggere!"}),(0,l.jsx)("a",{href:"/catalogo",className:"inline-block bg-onde-gold text-black font-bold px-8 py-3 rounded-lg hover:bg-onde-gold/80 mt-6",children:"Vai al Catalogo"})]})]}):(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold",children:"La Mia Libreria"}),(0,l.jsxs)("span",{className:"text-onde-gold",children:[a.length," libri"]})]}),(0,l.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:a.map(e=>(0,l.jsxs)("a",{href:"/libro/".concat(e.bookId),className:"group",children:[(0,l.jsxs)("div",{className:"aspect-[3/4] bg-gradient-to-br from-onde-gold/30 to-onde-dark rounded-xl mb-3 flex items-center justify-center overflow-hidden relative",children:[(0,l.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCD6"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,l.jsx)("span",{className:"bg-onde-gold text-black font-bold px-4 py-2 rounded-lg",children:"Leggi"})})]}),(0,l.jsx)("h3",{className:"font-bold text-sm group-hover:text-onde-gold transition-colors line-clamp-2",children:e.bookTitle}),(0,l.jsxs)("p",{className:"text-xs opacity-60 mt-1",children:["Acquistato ",new Date(e.purchasedAt).toLocaleDateString("it-IT",{day:"numeric",month:"short",year:"numeric"})]})]},e.id))}),(0,l.jsxs)("div",{className:"mt-16 grid grid-cols-3 gap-6 bg-white/5 rounded-2xl p-8",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-onde-gold",children:a.length}),(0,l.jsx)("div",{className:"text-sm opacity-60",children:"Libri acquistati"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-onde-gold",children:"0"}),(0,l.jsx)("div",{className:"text-sm opacity-60",children:"In lettura"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-onde-gold",children:"0"}),(0,l.jsx)("div",{className:"text-sm opacity-60",children:"Completati"})]})]})]}):(0,l.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"La Mia Libreria"}),(0,l.jsxs)("div",{className:"text-center py-20",children:[(0,l.jsx)("div",{className:"text-6xl mb-6",children:"\uD83D\uDD10"}),(0,l.jsx)("p",{className:"text-xl mb-4 opacity-80",children:"Accedi per vedere la tua libreria"}),(0,l.jsx)("p",{className:"opacity-60 mb-8",children:"I tuoi libri acquistati saranno sempre disponibili qui."}),(0,l.jsx)("a",{href:"/account",className:"inline-block bg-onde-gold text-black font-bold px-8 py-3 rounded-lg hover:bg-onde-gold/80",children:"Accedi"})]})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=466)),_N_E=e.O()}]);