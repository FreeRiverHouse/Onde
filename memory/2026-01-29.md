# Memory Log - 2026-01-29

## 19:42 PST - Heartbeat Cycle

### Status Check
- Autotrader: ‚úÖ Running (PID 66542)
- Alerts: ‚úÖ None
- Git: ‚úÖ Up to date

### Task Completed: [T669] VR/XR Planning
- Created comprehensive planning doc: `apps/reader-app/docs/VR-XR-PLANNING.md`
- Recommended React-Three-Fiber + WebXR for MVP (3 weeks)
- Defined environments: Library, Mountain cabin, Floating clouds
- Key tech: troika-three-text for crisp text rendering
- Platforms: Quest 3 (primary), Vision Pro (future)

### New Tasks Added
1. **[T701]** R3F prototype with floating text - P2
2. **[T702]** Cozy library environment - P3
3. **[T703]** EPUB text extraction for VR - P2

### Observations
- Many high-priority tasks (T477, T426) require manual intervention from Mattia
- SE-Bot chain blocked on BlackHole audio driver install (needs sudo)
- Reader App VR path is now well-defined and can proceed

### Next Actions
- T701 when ready to start VR development
- Wait for Mattia on manual tasks (BlackHole, CF API token)

## 2026-01-29 19:45 - VR Reader Prototype Complete [T701]

### Task
Created full VR reader prototype with React-Three-Fiber + WebXR.

### What was built
- `apps/reader-vr/` - New Next.js 16 app with R3F
- Cozy library environment (bookshelves, reading chair, floating candles)
- Floating book panel with Pride & Prejudice sample text
- VR/AR entry buttons (WebXR compatible for Quest 3)
- Page navigation via keyboard, mouse, VR controllers
- Font size adjustment
- Warm ambient lighting, dust particles, stars
- Merriweather serif font for comfortable reading

### Technical stack
- Next.js 16.1.6 + Turbopack
- React-Three-Fiber (@react-three/fiber)
- @react-three/drei (helpers: Environment, Sky, Stars, Sparkles, Text)
- @react-three/xr (WebXR integration)
- Three.js

### Next steps
- T704: Deploy to onde.la/reader-vr
- T702: Cozy library environment (more detail)
- T703: EPUB integration
- T705: Environment switcher
- T706: Hand tracking

### Run locally
```bash
cd apps/reader-vr && npm run dev
# Open http://localhost:3000
# Click "Enter VR" to test in Quest 3 browser
```

## 2026-01-29 20:10 - Fixed Playwright Test Failures

### Issues Fixed
1. **`/reader/` 404** - Navigation had link to non-existent page
   - Created `apps/onde-portal/src/app/reader/layout.tsx` and `page.tsx`
   - Page shows featured books for online reading

2. **Favicon 500 error** - `/icon.svg` returning 500
   - Removed `icon.svg` and `apple-icon.svg` from `src/app/`
   - Next.js app directory icon handling was broken
   - Icons still work from `public/` directory

### Result
- All 17 Playwright tests now pass ‚úÖ
- Commit: 475ed0cea

## 2026-01-29 20:45 - SE-Bot Response Style Templates [T491]

### Completed
Implemented Claude prompt templates for SE-Bot meeting assistant:

**Templates Created (`apps/se-bot/prompts/`):**
- `technical-deepdive.md` - For network engineers (protocol-level detail)
- `executive-summary.md` - For C-level (ROI, business outcomes)
- `competitive-battle-card.md` - When competitor mentioned (fair positioning)
- `objection-handling.md` - Empathetic Feel-Felt-Found approach
- `demo-suggestion.md` - Transition when interest detected

**Loader Module (`prompts/loader.py`):**
- Auto-detect style from transcript keywords
- Competitor detection (Palo Alto, Zscaler, Cato, Fortinet, etc.)
- Format prompts with placeholders ({context}, {kb_context}, {competitor}, {objection})

**Meeting Simulator Integration:**
- `--style` flag: auto|technical-deepdive|executive-summary|competitive-battle-card|objection-handling|demo-suggestion
- `--list-styles` flag to show available options
- Style detection shown when `--with-claude` enabled

**Test Results:**
- 100% style detection accuracy on sample queries
- Zscaler query ‚Üí competitive-battle-card (correct)
- IPSec latency query ‚Üí technical-deepdive (correct)
- ROI/CFO query ‚Üí executive-summary (correct)

### Commit
93198f078 - task: done [T491] SE-Bot response style templates

## 2026-01-29 20:57 - SE-Bot Meeting Transcript Logging [T492]

### Completed
Implemented JSONL logging for meeting interactions to enable fine-tuning:

**Logger Module (`apps/se-bot/meeting_logger.py`):**
- `log_interaction()` - Log single interaction to JSONL
- `add_feedback()` - Add feedback to existing entry
- `export_for_finetuning()` - Export filtered dataset
- `get_log_stats()` - Get 7-day statistics

**CLI Flags Added:**
- `--log` - Enable logging
- `--anonymize` - Redact emails, phones, IPs
- `--log-stats` - Show statistics
- `--export-finetune PATH` - Export for Claude fine-tuning
- `--feedback thumbs_up|thumbs_down|neutral` - Add feedback

**Log Format (JSONL):**
```json
{
  "id": "a2d38c04",
  "timestamp": "2026-01-29T20:56:42",
  "category": "CLI",
  "transcript": "What's the latency...",
  "kb_results_count": 5,
  "kb_top_relevance": 0.45,
  "detected_style": "technical-deepdive",
  "response": "...",
  "latencies": {...},
  "feedback": "thumbs_up"
}
```

**Fine-Tuning Export:**
- Claude messages format (user/assistant)
- Filters by relevance, feedback
- Includes metadata

### Commit
01b06185b - task: done [T492] SE-Bot meeting transcript logging

## 21:21 PST - Direction Change from Mattia

### Messaggio
Mattia ha detto: "Per ora meno focus su vr, piu su app e web app"

### Azioni Prese
- Deprioritized all VR-only tasks (T705, T706, T709, T710, T711)
- Changed from P3 ‚Üí P4 with note "(DEPRIORITIZED - Mattia: 'meno focus su VR' 2026-01-29)"
- Promoted T712 (text-to-speech audiobook mode) to P2 - works on web AND VR

### Nuove Priorit√† Reader App
1. **Web/App focus**: TTS audiobook mode, PWA mobile testing, annotation sync
2. **VR**: Only finish what's already deployed, don't add new VR features for now

### Task da Prioritizzare (Web/App)
- T712: Text-to-speech audiobook mode (P2)
- T695: PWA mobile testing (P3)
- T698: Sync annotations across devices (P3)
- SE-Bot tasks (T470-T479)
- Moonlight House improvements (web game)

## 2026-01-29 22:03 PST - Heartbeat: Reader App Improvements

### Completato
1. **[T717] TTS Settings Persistence**
   - Added TTSSettings to readerStore (voiceName, rate, pitch, volume, autoPageTurn)
   - TextToSpeech now uses Zustand store instead of local state
   - Settings persist across sessions via localStorage
   - Deployed: https://onde.la/reader/

2. **[T719] Reading Statistics Dashboard**
   - Created readingStatsStore.ts with full stats tracking
   - Tracks: reading time, pages, sessions, books, streaks
   - ReadingStatsPanel with beautiful UI (streak banner, charts, stats grid)
   - Session tracking integrated into EpubReader
   - üìä button added to reader header
   - Deployed: https://onde.la/reader/

### Task Aggiunti
- [T719] Reading statistics dashboard (now DONE)
- [T720] Export/Import library data
- [T721] Trading correlation heatmap widget

### Note
- Autotrader running (PID 66542)
- No alert files present
- Both tasks completed and deployed in one heartbeat cycle

## 2026-01-29 22:14 PST - Heartbeat Work Session

### Tasks Completed
1. **T720: Reader App Export/Import** - DONE
   - Created `dataTransfer.ts` with full export/import logic
   - Export all data: books, highlights, bookmarks, vocabulary, settings, stats
   - Two import strategies: merge (keep+add) or overwrite (replace all)
   - JSON validation with detailed error reporting
   - DataTransferPanel UI component integrated into ReaderSettings
   - Build passes, deployed to onde.la/reader
   - Deploy URL: https://843b62d3.onde-portal.pages.dev

### Commits
- `bdf2cf0bd`: feat(reader-app): add export/import library data functionality
- `d625a7e77`: deploy: reader-app with export/import to onde.la/reader

### Status
- Autotrader: running (PID 66542)
- onde.la/reader: 200 OK
- Git: synced to origin/main

2. **T718: TTS Speed Presets** - DONE
   - Added 4 preset buttons: üê¢ Slow, ‚ñ∂Ô∏è Normal, üêá Fast, ‚ö° 2x
   - Keyboard shortcuts 1/2/3/4
   - Visual indication (blue highlight)
   - Fine-tune slider preserved
   - Deploy URL: https://d6bf1251.onde-portal.pages.dev

### Additional Commits
- `d12aff034`: feat(reader-app): add TTS speed presets with keyboard shortcuts

## 2026-01-29 22:36 - Heartbeat State Cleanup

Cleaned up stale heartbeat state entries:

- Reset `autotrader`: was 2025-01-29T20:07:52+00:00 (8770.5h stale)
- Reset `alerts`: was 2025-01-29T20:07:52+00:00 (8770.5h stale)
- Reset `tasks`: was 2025-01-29T20:07:52+00:00 (8770.5h stale)
